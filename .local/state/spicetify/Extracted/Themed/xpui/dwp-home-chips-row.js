"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2233,9319],{21013:(e,s,t)=>{t.d(s,{A:()=>m});var n=t(30758),i=t(59057),r=t(29369),a=t(49915),o=t(34697),l=t(48861),c=t(78030),d=t(79232),h=t(91596),p=t(86070);const u=parseInt(h.A.MINIMUM_HEADER_HEIGHT,10),m=(0,n.forwardRef)(function(e,s){const t=(0,i.lr)(),h=(0,i.Nx)(),m=(0,a.W)(),C=(0,l.A)(),{isActive:f}=(0,o.$)(),g=(0,n.useRef)(-1),b=(0,n.useRef)(null),v=s??b,x=(0,n.useCallback)(e=>{const s=e.target.scrollTop;let n;if(n=t||h?(0,i.q8)(s,m):void 0===C?(0,d.i)(s,r.uC):f?0:(0,d.i)(s,u,76),"function"==typeof v)throw new Error("Callback refs are not supported");Number(g.current).toPrecision(2)!==Number(n).toPrecision(2)&&requestAnimationFrame(()=>{v.current&&v.current.style.setProperty("opacity",`${Number(n).toPrecision(2)}`)}),g.current=n},[t,h,C,f,m,v]);return(0,c.i)(x,{executeOnceOnStart:!0}),(0,p.jsx)("div",{ref:v,...e,children:e.children})})},33552:(e,s,t)=>{t.d(s,{j:()=>N});var n=t(44265),i=t(60404);const r="mVTn6QQxDKAnD1EMA4Uk",a="QMFXRnzqSLyffxlVjc5L",o="hDTw7hSkuNmc4oHSzGyw",l="hrpn74hZWYLnoPA8ot_a",c="rmVpmFOiLgc0ZTqDKAxX",d="DgqXGoNSiHX9aoAqr5fc";var h=t(78717),p=t(60940),u=t(54091),m=t(97500),C=t.n(m),f=t(51490),g=t(44629),b=t(57302);const v="yNVnNWaf8clcxvcacFlw";var x=t(86070);const j=({durationMs:e,className:s,displaySeconds:t})=>{const{hours:n,minutes:i,seconds:r}=(0,g.S)(e);t=!1!==t&&!n&&r;const a=(0,b.j)({h:n,m:i,s:t?r:0});return a?(0,x.jsx)("span",{className:C()(v,s),children:u.Ru.get("time.left",a)}):null},N=e=>{const{resumePositionMs:s=0,releaseDate:t,isPlaying:m,fullyPlayed:g,durationMs:b,position:v=s,compactVariant:N=!1,className:S,progressBarClassName:y,progressStateClassName:M,releaseDateClassName:P}=e,w=0===b?null:!g&&v>0||m?(0,x.jsx)("div",{className:C()(c,y),children:(0,x.jsx)(i.z,{current:v,max:b})}):null,A=t&&t.isoString?(0,x.jsx)(h.E,{as:"p",variant:"bodySmall",className:a,children:(0,n.V2)((0,n.ad)(t.isoString),t.precision)}):null,k=(()=>{if(0===b)return null;if(g&&!m)return(0,x.jsxs)("div",{className:C()(l,M),children:[(0,x.jsx)(h.E,{as:"p",variant:"bodySmall",className:o,children:u.Ru.get("episode.audiobook.chapter.finished")}),(0,x.jsx)(p.i,{size:"small",className:d,"aria-hidden":"true"})]});if(v>0||m){const e=Math.ceil(Math.max(b-v,0));return(0,x.jsx)("div",{className:C()(l,M),children:(0,x.jsx)(h.E,{as:"p",variant:"bodySmall",className:o,children:(0,x.jsx)(j,{durationMs:e,displaySeconds:!N&&void 0})})})}return(0,x.jsx)(h.E,{as:"p",variant:"bodySmall",className:C()(a,P),"data-testid":"episode-progress-not-played",children:(0,x.jsx)(f.d,{durationMs:b,displaySeconds:!N&&void 0})})})();return A||k||w?(0,x.jsxs)("div",{className:C()(r,S),children:[A,k,w]}):null}},34697:(e,s,t)=>{t.d(s,{$:()=>r});var n=t(85387);const i="/lyrics",r=()=>{const e=(0,n.zy)(),s=e.pathname === i;return{isActive:s,isActiveNotCinemaMode:s&&(!e.state.cinemaState||"closed"===e.state.cinemaState),routeDestination:i}}},48861:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(47812);function i(e){const{color:s}=(0,n.X)();return s||e}},49915:(e,s,t)=>{t.d(s,{HomeHeader:()=>f,W:()=>C});var n=t(30758),i=t(97500),r=t.n(i),a=t(62411),o=t(66917),l=t(41751),c=t(81694),d=t(48861);const h="main-home-homeHeader",p="uznseQmgVkYDV6bq3xkD",u="XS0VX6KcPs_07hsREvN5";var m=t(86070);const C=()=>(0,a.d4)(l.t$),f=(0,n.memo)(function(){const e=(0,d.A)(o.l0o),s=!(0,c.n)(),t=C();return(0,m.jsx)("div",{className:r()(h,{[u]:s,[p]:t}),style:{backgroundColor:e}})})},51490:(e,s,t)=>{t.d(s,{d:()=>c});var n=t(97500),i=t.n(n),r=t(44629),a=t(57302);const o="ccqn2ecT3axu6r2mw0O5";var l=t(86070);const c=({durationMs:e,className:s,displaySeconds:t})=>{const{hours:n,minutes:c,seconds:d}=(0,r.S)(e);return t=!1!==t&&!n&&d,(0,l.jsx)("span",{className:i()(o,s),children:(0,a.j)({h:n,m:c,s:t?d:0})})}},60404:(e,s,t)=>{t.d(s,{z:()=>l});var n=t(54091);const i={progressBar:"AuXvnACgU_oVoWnyCOKI",progressBarBg:"fLbQCgfoKkqhXY53m89w",progressBarFgWrapper:"sVbWQ3M_V1jUtEJ8VGAX",progressBarFg:"a_NGsCSTowFrDzp6UODF"};var r=t(57302),a=t(44629),o=t(86070);function l({ariaValueText:e,max:s,current:t}){const l={transform:`translateX(-${100-(s&&t?100*Math.min(1,t/s):0)}%)`},c=Math.ceil(Math.max(s-t,0)),{hours:d,minutes:h,seconds:p}=(0,a.S)(s),u=(0,r.j)({h:d,m:h,s:p}),{hours:m,minutes:C,seconds:f}=(0,a.S)(c),g=(0,r.j)({h:m,m:C,s:f}),b=e||n.Ru.get("time.left-of",g,u);return(0,o.jsxs)("div",{className:i.progressBar,role:"progressbar",tabIndex:0,"aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":s,"aria-valuetext":b,children:[(0,o.jsx)("div",{className:i.progressBarBg}),(0,o.jsx)("div",{className:i.progressBarFgWrapper,children:(0,o.jsx)("div",{"data-testid":"progressBarFg",className:i.progressBarFg,style:l})})]})}},81186:(e,s,t)=>{t.d(s,{HomeChipsRowWithEmptyStates:()=>G});var n=t(30758),i=t(97500),r=t.n(i),a=t(8335),o=t(40539),l=t(91198),c=t(60686),d=t(54091),h=t(97149),p=t(88095),u=t(13140),m=t(47812),C=t(21013),f=t(29369),g=t(99755),b=t(70499),v=t(89437),x=t(86070);const j=(0,n.createContext)(null),N=({initialSelectedChip:e,children:s})=>{const[t]=(0,n.useState)(()=>(0,g.y)(s=>({openChips:[],selectedChip:e,openChip:e=>s(s=>({openChips:[...s.openChips,e]})),closeChip:e=>s(s=>({openChips:s.openChips.filter(s=>s!==e)})),toggleChip:e=>s(s=>({openChips:s.openChips.includes(e)?s.openChips.filter(s=>s!==e):[...s.openChips,e]})),selectChip:e=>s({selectedChip:e}),resetState:()=>s({openChips:[],selectedChip:""})})));return(0,x.jsx)(j.Provider,{value:t,children:s})},S=()=>{const e=(0,n.useContext)(j);if(!e)throw new Error("useChipStateStore must be used within ChipStateProvider");return e},y=()=>{const e=S();return(0,b.P)(e,(0,v.k)(e=>({openChip:e.openChip,closeChip:e.closeChip,toggleChip:e.toggleChip,selectChip:e.selectChip,resetState:e.resetState})))};class M{constructor(e){this.subChipToParentMap=new Map,this.chipIdToChipMap=new Map;for(const s of e)if(s.id){this.chipIdToChipMap.set(s.id,s);for(const e of s.subChips)e.id&&this.subChipToParentMap.set(e.id,s.id)}}isValidChip(e){return Boolean(e.id)&&Boolean(e.label?.transformedLabel)}isSubChip(e){return this.subChipToParentMap.has(e)}getParentChipId(e){return null===e?null:this.subChipToParentMap.get(e)??null}hasSubChips(e){const s=this.chipIdToChipMap.get(e);if(!s)return!1;return((s?.subChips.filter(e=>this.isValidChip(e))??[]).length??0)>0}areParentAndChild(e,s){return null!==e&&null!==s&&this.subChipToParentMap.get(s)===e}}var P=t(52040),w=t(22841),A=t(40786),k=t(89651),I=t(89509),R=t(58248),E=t(41156),T=t(53126),V=t(70613),B=t(12627),L=t(55517);const F="main-home-filterChipsContainer",O="E2LdYwBAALi20l1OVEwD",D="jqMaCajdvRLXRwFtqDr3",q="main-home-filterChipsSection",z="CEB3nzyniIFOx1yM1eYy",H="MViMHJvcIZ6RxUXEeLSf",W="Wn4fEKCJ6jYPfG2Y0ABn",X="Y3Kd8WKnE3ZW9lzgA8nN",_="u_wTfCtgm9HvxrphUxKd",Y="_InSnCH8a86O1YanzEDZ",K="C_NwdzvzxJ6j5ONOY0Pm",U="uMoqkRWisfbVwPoJgD6N",$="c5aU91lnhKBDIJo3n2Jw",J="rUju6lBv4rTZlRmYR9lv",Z=n.memo(({filterChips:e,requestId:s})=>{const t=(0,R.g)(),i=(0,w.f)(),[a,u]=(0,n.useTransition)(),m=(()=>{const e=S();return(0,b.P)(e,e=>e.selectedChip)})(),{selectChip:C}=y();(0,n.useLayoutEffect)(()=>{m===i||a||C(i)},[m,i,a,C]);const f=(()=>{const e=S();return(0,b.P)(e,e=>e.openChips)})(),{spec:g,logger:v}=(0,L.$)(c.Y,{data:{identifier:"home",uri:i?`spotify:home:${i}`:"spotify:home",reason:s??""}}),j=(0,l.NC)(V.Xck),N=(0,n.useMemo)(()=>new M(e),[e]),P=(e=>{const s=y();return(0,n.useCallback)((t,n,i,r)=>((e,s,t,n,i,r,a,o)=>{const l=!e.isSubChip(s),c=e.hasSubChips(s),d=t===s,h=n.includes(s)||n.includes(e.getParentChipId(s)??"");if(l&&c&&!h&&!d)return i(s),r(s),void o(s);if(l&&!h&&!d)return i(s),void o(s);if(""===s&&d&&n.length>0)n.forEach(e=>a(e));else{if(l&&h&&!d)return i(s),void o(s);if(!(l&&h&&d)){if(l&&!h&&d)return i(""),void o("");if(!l&&d){const t=e.getParentChipId(s)??"";return i(t),void o(t)}return l?void 0:(i(s),void o(s))}a(s)}})(t,n,i,r,e=>s.selectChip(e),e=>s.openChip(e),e=>s.closeChip(e),e),[s,e])})((0,n.useCallback)(e=>{let s="/";e&&(s=`/home?facet=${e}`);const n=g.homeSubfeedsFactory();if(e){const s=n.filterChipFactory({identifier:e||"all"});v.logInteraction(s.hitFilter())}u(()=>{t(s)})},[v,t,g])),A=(0,n.useCallback)(e=>{if(!j)return!1;if(!N.isSubChip(e))return!1;const s=N.getParentChipId(e),t=e===m,n=Boolean(s&&f.includes(s));return t||n},[j,N,m,f]),E=((e,s)=>e.flatMap(e=>e.id&&"wrapped-chip"!==e.id?[{id:e.id,getName:()=>e.label?.transformedLabel??"",ubiId:e.id},...(e.subChips??[]).flatMap(e=>e?.id&&s(e.id)?[{id:e.id,getName:()=>e.label?.transformedLabel??"",ubiId:e.id}]:[])]:[]))(e,A),T=(0,n.useCallback)(e=>{P(N,e??"",m,f)},[N,m,f,P]),B=(0,n.useCallback)(e=>{const s=N.areParentAndChild(e,m);return m===e||s},[m,N]),F=(0,l.NC)(V._Ie),{shelfURIs:q}=(0,k.T)(),z=(0,I.k)(),H=q.length>0,Z=`Pinned by ${z?.name}`;return(0,x.jsx)("div",{className:r()(W,X,"contentSpacing"),children:(0,x.jsxs)(h.FN,{ariaLabel:d.Ru.get("home.filters"),scrollContentClassName:_,children:[(0,x.jsx)(p.A,{children:(0,x.jsx)(o.v,{"aria-label":d.Ru.get("search.title.all"),selectedColorSet:"invertedLight",onClick:()=>T(null),selected:""===m,className:r()({[O]:a,[D]:a&&""===m}),children:d.Ru.get("search.title.all")},"all")}),E.map(s=>{const t=N.isSubChip(s.id),n=((e,s,t,n)=>{if(e.isSubChip(s)){const i=e.getParentChipId(s);if(s===t||e.areParentAndChild(t,s)||i&&n.includes(i))return!0}return!1})(N,s.id,m??"",f),i=(l=N,c=s.id,h=m??"",!(!l.isSubChip(c)||c!==h&&!l.areParentAndChild(h,c)));var l,c,h;const u=((e,s,t)=>!(!e.isSubChip(s)||s===t||e.areParentAndChild(t,s)))(N,s.id,m??""),C=N.getParentChipId(s.id),g=C?e.find(e=>e.id===C)?.label?.transformedLabel:"",b=g?d.Ru.get("web-player.HomeChipsRow.subchips.parentChildAccessibleName",{parent:g,child:s.getName()}):s.getName();return(0,x.jsx)(p.A,{className:r()({[U]:n}),children:(0,x.jsx)(o.v,{"aria-label":b,selectedColorSet:"invertedLight",onClick:()=>T(s.id),selected:B(s.id),secondary:i&&B(s.id),className:r()({[Y]:t,[O]:a,[K]:u,[D]:a&&m===s.id}),children:s.getName()})},s.id)}),F&&(H||z)&&(0,x.jsx)(p.A,{children:(0,x.jsx)("div",{className:$})}),F&&H&&(0,x.jsx)(p.A,{children:(0,x.jsxs)(o.v,{"aria-label":"Pinned",selectedColorSet:"invertedLight",onClick:()=>T("pinned"),selected:"pinned"===m,className:r()({[O]:a,[D]:a&&"pinned"===m}),children:[(0,x.jsx)("span",{children:"Pinned"}),(0,x.jsx)("span",{className:J,children:q.length})]},"pin")}),F&&z&&(0,x.jsx)(p.A,{children:(0,x.jsx)(o.v,{"aria-label":"Pinned",selectedColorSet:"invertedLight",selected:"pinned-by"===m,className:r()({[O]:a,[D]:a&&"pinned-by"===m}),children:(0,x.jsx)("span",{children:Z})},"pin")})]})})}),G=()=>{const e=(0,T.p)(),s=(0,E.V)(),t=(0,B.SF)(),{ref:n,inView:i}=(0,a.Wx)({initialInView:!0,threshold:[1],rootMargin:`-${f.uC}px 100%`,root:t.current}),{color:o,isDynamic:l}=(0,m.X)(),{data:c,error:d,extensions:h}=(0,A.Y)(),p="HomeResponsePayload"===c?.home?.__typename?c?.home?.homeChips:null,g=(0,w.f)();return!d&&p&&!s&&e?(0,x.jsxs)(N,{initialSelectedChip:g,children:[(0,x.jsx)("div",{ref:n}),(0,x.jsxs)("div",{className:F,children:[(0,x.jsx)(C.A,{className:r()({[H]:!i,[z]:!l},q),style:{...o?{"--background-base":o}:{}}}),(0,x.jsx)(Z,{filterChips:p,requestId:(0,P.getRequestIdForImpressions)(h)})]})]}):p?null:(0,x.jsx)("div",{className:F,children:(0,x.jsx)("div",{className:r()(W,X,"contentSpacing"),children:(0,x.jsx)(u.Y,{as:"h2",variant:"titleMedium",charCount:25,isLoading:!0})})})}},89437:(e,s,t)=>{t.d(s,{k:()=>l});var n=t(30758);const i=e=>Symbol.iterator in e,r=e=>"entries"in e,a=(e,s)=>{const t=e instanceof Map?e:new Map(e.entries()),n=s instanceof Map?s:new Map(s.entries());if(t.size!==n.size)return!1;for(const[e,s]of t)if(!n.has(e)||!Object.is(s,n.get(e)))return!1;return!0},o=(e,s)=>{const t=e[Symbol.iterator](),n=s[Symbol.iterator]();let i=t.next(),r=n.next();for(;!i.done&&!r.done;){if(!Object.is(i.value,r.value))return!1;i=t.next(),r=n.next()}return!!i.done&&!!r.done};function l(e){const s=n.useRef(void 0);return t=>{const n=e(t);return l=s.current,c=n,Object.is(l,c)||"object"==typeof l&&null!==l&&"object"==typeof c&&null!==c&&Object.getPrototypeOf(l)===Object.getPrototypeOf(c)&&(i(l)&&i(c)?r(l)&&r(c)?a(l,c):o(l,c):a({entries:()=>Object.entries(l)},{entries:()=>Object.entries(c)}))?s.current:s.current=n;var l,c}}},89509:(e,s,t)=>{t.d(s,{k:()=>i});var n=t(85387);const i=()=>{const e=(0,n.zy)(),s=new URLSearchParams(e.search);if(!s.has("hpuris"))return null;const t=(s.get("hpuris")||"").split(",").map(e=>`spotify:section:${e}`);return{name:s.get("hpname")??"Shared",uris:t}}}}]);
//# sourceMappingURL=dwp-home-chips-row.js.map