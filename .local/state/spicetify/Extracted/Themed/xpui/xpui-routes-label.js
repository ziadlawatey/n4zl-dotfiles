"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6541],{8134:(e,a,s)=>{s.d(a,{B:()=>i});var r=s(78717),t=s(91596),l=s(86070);const i=({children:e})=>(0,l.jsx)(r.E,{variant:"bodySmall",className:t.A.pretitle,children:e})},39715:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Z});var r=s(85387),t=s(10812),l=s(27485),i=s(86070);const n=({artists:e,title:a,seeAllUri:s})=>{const r=e.slice(0,8);return(0,i.jsx)(t.$,{title:a,seeAllUri:s,children:r.map((e,a)=>(0,i.jsx)(l.y,{artist:e,index:a},e.artistUri))})};var o=s(12552),c=s(68131),m=s(86487),u=s(8134),d=s(54839),x=s(69415),g=s(54218),h=s(30758);function p(e,a=300){const[s,r]=(0,h.useState)(null);return(0,h.useEffect)(()=>{e.length?function(e,a=300){const s=e.slice(0,4),r=[...s,...Array(4-s.length).fill("")],t=a/2,l=document.createElement("canvas");l.width=a,l.height=a;const i=l.getContext("2d");if(!i)throw new Error("Could not get canvas context");return Promise.all(r.map(e=>e?new Promise(a=>{const s=new window.Image;s.crossOrigin="anonymous",s.onload=()=>a(s),s.onerror=()=>a(null),s.src=e}):Promise.resolve(null))).then(e=>(e.forEach((e,a)=>{e&&i.drawImage(e,a%2*t,Math.floor(a/2)*t,t,t)}),l.toDataURL("image/png")))}(e,a).then(e=>r(e)).catch(()=>r(null)):r(null)},[e,a]),s}const b=({uri:e,name:a,images:s})=>{const r=p(s.map(e=>e.url),300),{isOpen:t,openModal:l,closeModal:n}=(0,g.W)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.z,{children:[(0,i.jsx)(c.K,{dragUri:e,images:r?[{url:r}]:[],name:a,placeholderType:"album",onClick:l,ariaLabel:a}),(0,i.jsxs)(m.Y,{children:[(0,i.jsx)(u.B,{children:"Record Label"}),(0,i.jsx)(d.mm,{scaleAtMinWidth:d.tw,children:a})]})]}),(0,i.jsx)(x.K,{title:a,isOpen:t,onClose:n,images:r?[{url:r}]:[]})]})};var j=s(96811);const C=({albums:e,title:a,seeAllUri:s})=>{const r=e.slice(0,8);return(0,i.jsx)(t.$,{title:a,seeAllUri:s,children:r.map((e,a)=>(0,i.jsx)(j.a,{index:a,name:e.albumName,uri:e.albumUri,images:[{url:`https://i.scdn.co/image/${e.largestCoverArtImageId}`}],artists:e.mainArtists.map(e=>({uri:e.artistUri,name:e.artistName})),sharingInfo:null},e.albumUri))})};var U=s(78717),v=s(50867),A=s(23895),f=s(16666),I=s(54091),w=s(82898),k=s(21017),y=s(50279),N=s(35313),P=s(7255),L=s(38529),M=s(31289),T=s(70655),R=s(74571),$=s(26471),K=s(3591),B=s(34267),O=s(66079),S=s(78007),E=s(94315),_=s(18949),W=s(90809),z=s(29112);const Y=(0,h.memo)(function({uri:e,name:a,artists:s,album:r,contextUri:t,index:l,imgUrl:n,usePlayContextItem:o}){const{isActive:c,isPlaying:m,triggerPlay:u,togglePlay:d}=o({uri:e,index:l}),x=(0,h.useMemo)(()=>s?.map(e=>e.name).join(I.Ru.getSeparator())||"",[s]),g=(0,h.useMemo)(()=>Math.floor(1e6*Math.random()),[]);return(0,i.jsx)(w.h,{menu:(0,i.jsx)(k.P,{uri:e,albumUri:r.uri,artists:s,contextUri:t}),children:(0,i.jsxs)(W.w,{uri:e,contextUri:t,onTriggerPlay:(e,a)=>{u({loggingParams:a})},isActive:c,index:l,ariaRowIndex:l+1,isPlayable:!0,dragMetadata:{name:a,createdBy:x},children:[(0,i.jsx)(B.y,{ariaColIndex:0,children:(0,i.jsx)(T.$,{uri:e,playAriaLabel:I.Ru.get("tracklist.a11y.play",a,x),isPlaying:m,isActive:c,onClick:(e,a)=>{d({loggingParams:a})},children:(0,i.jsx)($.a,{children:l+1})})}),(0,i.jsxs)(O.U,{ariaColIndex:1,children:[(0,i.jsx)(L.e,{src:n}),(0,i.jsxs)(M.l,{children:[(0,i.jsx)(_.p,{titleText:a,children:a}),(0,i.jsx)(E.p,{children:(0,i.jsx)(N.l,{artists:s})})]})]}),(0,i.jsx)(S.o,{ariaColIndex:2,children:(0,i.jsx)(y.g,{uri:r.uri,name:r.name,creatorUri:s?.[0]?.uri,children:r.name})}),(0,i.jsxs)(K.l,{ariaColIndex:3,children:[(0,i.jsx)(z.d,{uri:e}),(0,i.jsx)(P.P,{duration:g}),(0,i.jsx)(R.Y,{menu:(0,i.jsx)(k.P,{uri:e,albumUri:r.uri,artists:s,contextUri:t}),label:I.Ru.get("more.label.track",a,x)})]})]})})},(e,a)=>e.uri===a.uri);var D=s(33556),q=s(49060),H=s(89307);const F="IAUuXgz9Cf5BIJWaEfuB",G=()=>{const{labelId:e}=(0,r.g)(),{data:a,isLoading:s,error:t}=(0,D.y)(e??""),l=a?.labelUri,n=a?.topTracks,{usePlayContextItem:o}=(0,q.P)({uri:l??"",pages:[{items:(n??[]).map(e=>({type:H.c.TRACK,uri:e.trackUri,uid:null,provider:null}))}]},{featureIdentifier:"label_page"}),c=(0,h.useCallback)((e,a)=>{const s=`https://i.scdn.co/image/${e.largestCoverArtImageId}`;return(0,i.jsx)(Y,{index:a,uri:e.trackUri,name:e.trackName,artists:e.mainArtists.map(e=>({uri:e.artistUri,name:e.artistName})),album:{uri:e.albumUri,name:e.albumName},imgUrl:s,contextUri:l??"",usePlayContextItem:o},a+e.trackUri)},[l,o]),m=(0,h.useMemo)(()=>[f.$C.INDEX,f.$C.TITLE_AND_ARTIST,f.$C.ALBUM,f.$C.DURATION],[]),u=(0,h.useCallback)(e=>({uri:e.trackUri}),[]);return s||!a||t||!n?null:(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)(U.E,{variant:"titleSmall",semanticColor:"textBase",children:(0,v.v)("Top tracks")}),(0,i.jsx)(A.S4,{ariaLabel:(0,v.v)("Label top tracks"),renderRow:c,nrTracks:n.length,tracks:n,resolveItem:u,headerTop:0,hasHeaderRow:!0,columns:m,columnPersistenceKey:f.SZ.LABEL_TOP_TRACKS})]})};var J=s(671);const X="i9ftLGgms0dW4BTHYOkH",Q="HUu6BxnapOzjDNtJ_C7t",V=({data:e})=>{const a=e.labelUri.split(":").pop(),s=(0,J.F)(e.topTracks.map(e=>e.mainArtists.map(e=>e.artistUri)).flat().slice(0,4));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{images:s.map(e=>({url:e,width:null,height:null})),uri:e.labelUri,name:e.labelName}),(0,i.jsxs)("div",{className:Q,children:[(0,i.jsx)(G,{}),(0,i.jsx)(n,{artists:e.topArtists,title:"Popular artists",seeAllUri:`/label/${a}/artists`}),(0,i.jsx)(C,{albums:e.newAlbums,title:"Latest releases",seeAllUri:`/label/${a}/albums/latest`}),(0,i.jsx)(C,{albums:e.topAlbums,title:"Popular releases",seeAllUri:`/label/${a}/albums/top`})]})]})},Z=()=>{const{labelId:e}=(0,r.g)(),{data:a,isLoading:s,error:t}=(0,D.y)(e??"");return s||!a||t?null:(0,i.jsx)("div",{className:X,children:(0,i.jsx)(V,{data:a})})}},42258:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var r=s(85387),t=s(78717),l=s(50867),i=s(96811),n=s(33556);const o={albumsPage:"SjZbL5BQgWuqYQOn2qp3",grid:"CMm8ISkxKCfsWmf9mr_A"};var c=s(86070);const m=()=>{const{labelId:e}=(0,r.g)(),a=(0,r.zy)(),{data:s,isLoading:m,error:u}=(0,n.y)(e??"");if(m||!s||u)return null;const d=a.pathname.endsWith("/top"),x=d?s.topAlbums:s.newAlbums,g=d?"Top albums":"Latest albums";return(0,c.jsxs)("div",{className:o.albumsPage,children:[(0,c.jsx)(t.E,{variant:"titleMedium",semanticColor:"textBase",className:o.title,children:(0,l.v)(g)}),(0,c.jsx)("div",{className:o.grid,children:x.map((e,a)=>(0,c.jsx)(i.a,{index:a,uri:e.albumUri,name:e.albumName,images:[{url:`https://i.scdn.co/image/${e.largestCoverArtImageId}`}],artists:e.mainArtists.map(e=>({uri:e.artistUri,name:e.artistName})),sharingInfo:null},e.albumUri))})]})}},54218:(e,a,s)=>{s.d(a,{W:()=>t});var r=s(30758);const t=()=>{const[e,a]=(0,r.useState)(!1);return{isOpen:e,openModal:(0,r.useCallback)(()=>a(!0),[]),closeModal:(0,r.useCallback)(()=>a(!1),[])}}},69415:(e,a,s)=>{s.d(a,{K:()=>U});var r=s(30758),t=s(35394),l=s(91198),i=s(54091),n=s(37528),o=s(18930),c=s(70613),m=s(35274),u=s(76392);const d="cnJjN7KVChV1_XwO8itM",x="Lmaznaa0NlKKqhv_9Bem",g="PzkeRprwMqPpgrCKNMk8",h="KgCPtwPdeUI8LlYEwYLi",p="SGwNGaW1GRh54x5DKkWr",b="nIdwo35wK0IkSyCmjlkb",j="KwNL3OBuT3MK3lYgIp5P";var C=s(86070);const U=r.memo(function(e){const{images:a,title:s,isOpen:U,onClose:v}=e,A=(0,l.NC)(c.c22),f=(0,r.useMemo)(()=>(0,u.g)(a,{desiredSize:1e4}),[a]);return f?(0,C.jsx)(n.A,{className:d,overlayClassName:A?j:"",isOpen:U,onRequestClose:v,animation:{modal:{base:h,afterOpen:p,beforeClose:b}},animated:!0,children:(0,C.jsxs)("div",{style:{"--image-width":`${f.width}px`,"--image-height":`${f.height}px`},className:x,children:[A?(0,C.jsx)(o.F,{src:f.url,alt:s,className:g,width:`min(${f.width}px, 100%)`,height:`min(${f.height}px, 100%)`,borderRadius:0,glare:!0}):(0,C.jsx)(m._,{loading:"eager",alt:s,src:f.url,className:g}),(0,C.jsx)(t.H,{onClick:v,semanticColor:"textBase",children:i.Ru.get("web-player.cover-art-modal.close")})]})}):null})}}]);
//# sourceMappingURL=xpui-routes-label.js.map