"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5853],{7330:(e,t,n)=>{n.d(t,{I:()=>d});var a=n(30758),r=n(27360),i=n(54091),o=n(1910),s=n(73272),c=n(40696),l=n(60257);const d=e=>{const t=(0,l.s)(),n=(0,a.useMemo)(()=>{const t=(0,r.o_h)((0,o.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})},[e]);if(!(0,o.$V)(e))return;return{imageUrl:(0,s.Q)(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(i.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,c.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>n&&t.logInteraction(n.hitUiNavigate({destination:e.data.uri}))}}},41076:(e,t,n)=>{n.d(t,{p:()=>S});var a=n(30758),r=n(97500),i=n.n(r),o=n(78717),s=n(73136),c=n(1722),l=n(84473);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",h="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",g="(min-width: 1024px)",m="(min-width: 1024px) and (max-width: 1279px)",v="(min-width: 1280px)",y="(min-width: 1280px) and (max-width: 1919px)",x="(min-width: 1920px)",_="U18p4XwxMNsV8wjKZfb7",C="aVQhB503S43aAUrn2SAS",f="PO83b2pflcAr9k1Wfw3w",j="u9_pKnSnRFLWexOr77Yf",b="gpEp5mFMDpGGHiOORDrv";var L=n(86070);const S=(0,a.memo)(function(e){const{children:t,message:n,title:a,linkTitle:r,linkTo:S,onClick:w,renderInline:A=!1}=e,{isXSOnly:N,isSMOnly:k}={isXS:(0,l.U)(d),isXSOnly:(0,l.U)(u),isSM:(0,l.U)(h),isSMOnly:(0,l.U)(p),isMD:(0,l.U)(g),isMDOnly:(0,l.U)(m),isLG:(0,l.U)(v),isLGOnly:(0,l.U)(y),isXL:(0,l.U)(x)},G=N||k;return(0,L.jsxs)("section",{className:i()(_,{[C]:A}),children:[t,(0,L.jsx)(o.E,{as:"h1",variant:G?"titleSmall":"titleMedium",className:j,children:a}),(0,L.jsx)(o.E,{variant:G?"bodySmall":"bodyMedium",className:b,children:n}),r&&(S||w)&&(0,L.jsx)(s.$,{colorSet:"invertedLight",className:f,href:S,onClick:w,component:c.v,children:r})]})})},61155:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(97500),r=n.n(a),i=n(66917),o=n(62960);const s="0.1.0",c="default";function l(e){return new d(e)}class d{constructor(e){this._path=[{name:"desktop-concerts-gallery"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}eventSectionFactory(e){return new d.EventSectionEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[s,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}!function(e){e.EventSectionEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"event_section"}),t&&(this._parentAbsoluteLocation=t)}eventCardFactory(t){return new e.EventSectionEventFactory.EventCardEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[s,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(d||(d={})),function(e){!function(e){e.EventCardEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"event_card"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[s,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:"music",generatorVersion:"16.2.6",interactionType:"hit",specificationMode:c,specificationVersion:s,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.EventSectionEventFactory||(e.EventSectionEventFactory={}))}(d||(d={}));var u=n(54091),h=n(13072),p=n(29947),g=n(12552),m=n(95002),v=n(86487),y=n(17422),x=n(29934),_=n(54839),C=n(80128),f=n(30758),j=n(10812),b=n(82589),L=n(7330),S=n(86070);var w=n(62620),A=n(92323);const N=(e,t)=>{const n={genreForYou:u.Ru.get("concerts.genre_for_you",...t),genreAll:u.Ru.get("concerts.genre_all_events",...t),genreAllNearYou:u.Ru.get("concerts.genre_all_events_near_you",...t),"followed-venues":u.Ru.get("concerts.venues_for_you"),venues:u.Ru.get("concerts.venues_other")};return null!=(a=e)&&a in n?n[e]:"";var a},k={ConcertGalleryVenueCard:e=>{const t=(0,A.Z)({data:(n=e.data,"__typename"in n&&"ConcertGalleryVenueCard"===n.__typename?e.data.venue.data:{}),position:e.position,spec:e.spec});var n;return t?(0,S.jsx)(w.C,{alt:t.alt,uri:t.uri,title:t.title,imageUrl:t.imageUrl,onClick:t.handleClick}):null},ConcertGalleryConcertCard:e=>{const t=(0,L.I)({...(n=e.data,"__typename"in n&&"ConcertGalleryConcertCard"===n.__typename?e.data.concert:{}),position:e.position,spec:e.spec});var n;return t?(0,S.jsx)(b.A,{...t,onClick:t.handleClick}):null}},G=({position:e,header:t,items:n,spec:a})=>{const r=(0,f.useMemo)(()=>a?.eventSectionFactory({position:e}),[a,e]);return(0,S.jsx)(j.$,{total:n.length,showAll:!0,title:N(t?.title,t?.titleAttributes??[]),withEncoreCards:!1,children:n.map((e,t)=>{if("ConcertGalleryTitle"===e.__typename)return null;if(!Object.keys(k).includes(e.__typename))return null;const n=k[e.__typename];return(0,S.jsx)(n,{position:t,data:e,spec:r},t)})})};var R=n(41076);const V=({kind:e})=>{const t=(e=>"venues"===e?{title:u.Ru.get("concerts.gallery.error.venue.title"),message:u.Ru.get("concerts.gallery.error.venue.message")}:{title:u.Ru.get("concerts.gallery.error.concert.title"),message:u.Ru.get("concerts.gallery.error.concert.message")})(e);return(0,S.jsx)(R.p,{title:t.title,message:t.message,renderInline:!0,linkTitle:u.Ru.get("browse"),linkTo:"/concerts"})};var U=n(80728),M=n(85387),E=n(60749),P=n(75072);n(26843);const T=Spicetify.GraphQL.Definitions["ConcertGallery"]=new P.l("ConcertGallery","query","827fefcfacc5d9f841f7c2688e0482d7db40c1bfbad416ae7f530867c26ac99a",null);var F=n(794),I=n(55211);const Q=e=>void 0!==e&&"__typename"in e&&"ConcertGalleryView"===e.__typename,D=({useInfiniteQuery:e=U.q}={})=>{const{request:t}=(0,f.useContext)(F.j),{slug:n}=(0,M.g)(),[a]=(0,E.ok)(),r=`spotify:concert-gallery:${n}${a?`?${a.toString()}`:""}`,i=e({queryKey:["concert-gallery",r],queryFn:({pageParam:e})=>(0,I.c)({request:t,document:T,variables:{uri:r,nextPageToken:e}}),staleTime:6e4,gcTime:6e4,initialPageParam:"",getNextPageParam:e=>Q(e?.data?.concertGallery)?e.data.concertGallery.nextPageToken:void 0}),o=(s=i.data?.pages,s?.reduce((e,t)=>{const n=Q(e.concertGallery)?e.concertGallery:void 0,a=Q(t?.data?.concertGallery)?t.data.concertGallery:void 0,r=n?.items??[];return{concertGallery:{...a,...n,items:[...r,...a?.items??[]]}}},{concertGallery:{}}));var s;if(!Q(o?.concertGallery))return{loading:i.isLoading};const c=o.concertGallery.items.reduce((e,t)=>{if("ConcertGalleryTitle"===t.__typename)return[...e,[t]];const n=e.pop()??[];return[...e,[...n,t]]},[]).filter(e=>{const[t]=e;return"ConcertGalleryTitle"===t?.__typename?e.length>1:e.length>0}),l=(e=>{if(!e)return!1;const t=e[e.length-1]?.data?.concertGallery;return!!Q(t)&&null!==t.nextPageToken})(i.data?.pages);return{kind:n,data:o.concertGallery,sections:c,loading:i.isLoading,fetchNextPage:l?i.fetchNextPage:void 0}};var H=n(91645);const q="tAssKbety9MsfXwb4_3p",O="wBD7PuAKtChWVQGCDEgl",Z=e=>{const t={"Concerts Venues Gallery":u.Ru.get("concerts.venues"),venue_description:u.Ru.get("concerts.venues_description"),"Recently Viewed Gallery":u.Ru.get("concerts.recently_viewed"),recent_description:u.Ru.get("concerts.recently_viewed_description"),"Concerts in User Top Genre Gallery":u.Ru.get("concerts.user_top_genre")};return null!=(n=e)&&n in t?t[e]:e??"";var n},z=()=>{const{data:e,sections:t,loading:n,fetchNextPage:a,kind:s}=D(),{spec:c}=(0,H.r)(l,{});return n?(0,S.jsx)(C.LoadingPage,{hasError:!1,errorMessage:""}):e?(0,S.jsxs)("section",{children:[e.header?.title&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(p.Q,{children:Z(e.header.title)}),(0,S.jsxs)(g.z,{size:g.K.SMALL,backgroundColor:e.header.hexColor||i.Ql9,children:[(0,S.jsxs)(v.Y,{children:[e.header.description&&(0,S.jsx)(m.Z,{children:Z(e.header.description)}),(0,S.jsx)(_.mm,{children:Z(e.header.title)})]}),(0,S.jsx)(y.h,{children:(0,S.jsx)("div",{children:(0,S.jsx)(x.X,{text:Z(e.header.title)})})})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(h.K,{backgroundColor:e.header?.hexColor||i.Ql9}),(0,S.jsxs)("div",{className:r()(q,"contentSpacing"),children:[0===t?.length&&s?(0,S.jsx)(V,{kind:s}):t?.map((e,t)=>{const[n,...a]=e,r="ConcertGalleryTitle"===n?.__typename?n:void 0,i=r?a:e;return(0,S.jsx)(G,{position:t,header:r,items:i,spec:c},t)}),a&&(0,S.jsx)(o.n,{onClick:a,className:O,children:u.Ru.get("concerts.load_more")})]})]})]}):(0,S.jsx)(C.LoadingPage,{hasError:!0,errorMessage:u.Ru.get("concert.error.concert_not_found_title")})}},62620:(e,t,n)=>{n.d(t,{C:()=>p});var a=n(78717),r=n(76826),i=n(86070);const o=e=>(0,i.jsx)("svg",{width:e.iconSize,height:e.iconSize,viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 0C21.0532 0 22.0879 0.278738 23 0.808199L38 9.51508C38.6081 9.86805 39.113 10.3757 39.4641 10.9871C39.8151 11.5984 40 12.2919 40 12.9978V39.9892C40 40.5225 39.7893 41.0339 39.4142 41.411C39.0391 41.7882 38.5304 42 38 42H26H14H2C1.46957 42 0.960859 41.7882 0.585786 41.411C0.210714 41.0339 0 40.5225 0 39.9892V12.9978C1.78369e-05 12.2919 0.184851 11.5984 0.535924 10.9871C0.886996 10.3757 1.39194 9.86805 2 9.51508L17 0.808199C17.9121 0.278738 18.9468 0 20 0ZM29.2728 14.7624H12.9091V27.5589H11.2728C10.5176 27.5589 9.77939 27.7841 9.15149 28.2059C8.52359 28.6277 8.03421 29.2273 7.74522 29.9287C7.45623 30.6302 7.38062 31.402 7.52794 32.1467C7.67527 32.8914 8.03891 33.5754 8.5729 34.1123C9.10688 34.6491 9.78721 35.0148 10.5279 35.1629C11.2685 35.311 12.0362 35.235 12.7339 34.9444C13.4316 34.6539 14.0279 34.1618 14.4475 33.5305C14.867 32.8992 15.0909 32.157 15.0909 31.3978V16.956H27.0909V27.5589H25.4546C24.6994 27.5589 23.9612 27.7841 23.3333 28.2059C22.7054 28.6277 22.216 29.2273 21.927 29.9287C21.638 30.6302 21.5624 31.402 21.7098 32.1467C21.8571 32.8914 22.2207 33.5754 22.7547 34.1123C23.2887 34.6491 23.969 35.0148 24.7097 35.1629C25.4503 35.311 26.2181 35.235 26.9157 34.9444C27.6134 34.6539 28.2097 34.1618 28.6293 33.5305C29.0488 32.8992 29.2728 32.157 29.2728 31.3978V14.7624Z",fill:"currentColor"})});var s=n(94162);const c="AHtHncj9S4tcUs3ihy2Q",l="b38xL3pN59iUGS6yquGD",d="bVc1XdXmDBxyfRDSvRSL",u="gZyKZZkSWHaxvRQOQ1c5",h="kkUmcfyN6AuoxwxHCp79",p=e=>{const{alt:t,uri:n,onClick:p,title:g}=e;return(0,i.jsx)(r.N,{to:n,className:c,onClick:p,"data-testid":"venue-card",children:(0,i.jsxs)("div",{className:l,children:[(0,i.jsx)(s.b,{children:(0,i.jsx)("div",{role:"img",className:d,style:{backgroundImage:`url(${e.imageUrl})`},"aria-label":t,children:!e.imageUrl&&(0,i.jsx)(o,{iconSize:48})})}),(0,i.jsx)("div",{className:u,children:(0,i.jsx)(a.E,{as:"span",variant:"bodySmall",className:h,semanticColor:"textSubdued",children:g})})]})})}},73272:(e,t,n)=>{n.d(t,{Q:()=>a});const a=e=>{const[t]=e;if(!t||!("visuals"in t.data))return;const[n]=t.data.visuals.avatarImage?.sources??[];return n?.url}},82589:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(30758),r=n(76855),i=n(78717),o=n(97351),s=n(76826),c=n(40696),l=n(94162);const d="u0vQPAQa7gZSof0nJQnQ",u="IHipxfxvb3jLvK6FJubh",h="yzh4JJgNvDAyPmJSqjVl",p="PaLPvVjVaUf1Arglzvgv",g="O6ByNK8cAIJ7drb6_9Li",m="tii_P5ZZ6iSPmDnS5V4f",v="ve5oQ5oDiqTa6D2LCIIw",y="AQFMMlLLsRzJ0q1BgQ4Z",x="xB_GhzjYTNq8eHqqpWNT";var _=n(86070);const C=(0,a.memo)(e=>{const{uri:t,title:n,imageUrl:a,date:C,subTitle:f,firstParty:j,onClick:b}=e,L=C?(0,c.l4)(C):void 0;return(0,_.jsx)(s.N,{to:t,className:d,"data-testid":"concert-card",onClick:b,children:(0,_.jsxs)("div",{className:u,children:[(0,_.jsx)(l.b,{children:(0,_.jsx)("div",{role:"img",className:x,style:{backgroundImage:`url(${a})`},children:!a&&(0,_.jsx)(r.r,{role:"img",size:"xxxlarge",semanticColor:"textSubdued"})})}),L&&(0,_.jsxs)("time",{className:h,dateTime:C,children:[(0,_.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(L)}),(0,_.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(L)})]}),(0,_.jsxs)("div",{className:p,dir:"auto",children:[(0,_.jsx)(i.E,{as:"h3",variant:"bodyMedium",className:g,children:n}),(0,_.jsxs)("div",{className:m,children:[j&&(0,_.jsx)("span",{className:y,children:(0,_.jsx)(o.D,{size:"small"})}),(0,_.jsx)(i.E,{as:"span",className:v,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:f})]})]})]})})})},92323:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(30758),r=n(27360),i=n(54091),o=n(60257);const s=e=>"uri"in e,c=e=>{const t=(0,o.s)(),n=s(e.data)?(0,r.o_h)(e.data.uri):void 0,c=(0,a.useMemo)(()=>e.spec?.eventCardFactory({identifier:n?.id,position:e.position,uri:n?.toURI()??""}),[e,n]);if(!s(e.data))return;const l=e.data.marketing.imageMetadata.artists.items;return{uri:e.data.uri,title:l.length>0?l.map(e=>{return t=e?.data,t&&"uri"in t?e.data.profile.name:null;var t}).filter(Boolean).join(i.Ru.getSeparator()):e.data.name,alt:e.data.name,imageUrl:e.data.marketing.coverImage??void 0,handleClick:()=>c&&n&&t.logInteraction(c.hitUiNavigate({destination:n?.toString()}))}}}}]);
//# sourceMappingURL=xpui-routes-collection-concert-gallery.js.map