"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7170],{17163:(e,t,n)=>{n.r(t),n.d(t,{HomeAdsFetcher:()=>m,default:()=>h});var i=n(30758),s=n(54056),o=n(77641),r=n(87982),d=n(81694),c=n(72688);const l=18e5;var u=n(28521),f=n(86070);const a=(0,i.lazy)(()=>Promise.all([n.e(3858),n.e(467),n.e(7599)]).then(n.bind(n,18441))),v=(0,i.lazy)(()=>n.e(599).then(n.bind(n,80532))),b=(0,i.lazy)(()=>n.e(6665).then(n.bind(n,40593)));function m(){const{fetchAndSetHomeAd:e,setHomeAd:t,homeAd:n,previewHomeAd:m,setPreviewHomeAd:h}=(0,s.bT)(),w=m||n,{homeAdElement:A,setHomeAdElement:y}=(0,o.y)(),E=w&&"then"in w,{visibilityState:S}=(0,u.x)({target:A??void 0});if((0,i.useEffect)(function(){return e?.(),()=>{t(void 0),h(void 0)}},[e,t,h]),function({visibilityState:e,homeAdIsCurrentlyBeingFetched:t}){const{fetchAndSetHomeAd:n}=(0,s.bT)(),o=(0,d.n)(),u=(0,r.$)(),[f,a]=(0,i.useState)(),v=(0,c.J)(()=>!t&&n?.());(0,i.useEffect)(()=>{o&&u&&("visible_50"===e||"visible_100"===e)&&f&&Date.now()-f>=l&&v()},[o,f,u,e,v]),(0,i.useEffect)(()=>{t||a(Date.now())},[t,a])}({visibilityState:S,homeAdIsCurrentlyBeingFetched:E}),!w||E)return null;const _="text/html"===w.display[0]?.mimeType;return(0,f.jsx)(i.Suspense,{children:_?(0,f.jsx)(a,{homeAd:w,ref:y}):(0,f.jsx)(b,{homeAd:w,visibilityState:S,children:(0,f.jsx)(v,{homeAd:w,ref:y})})})}const h=m},28521:(e,t,n)=>{n.d(t,{x:()=>d});var i=n(30758);const s=1,o=.5,r={threshold:[0,o,s]};function d({target:e}){const[t,n]=(0,i.useState)("visible_unknown");return(0,i.useEffect)(()=>{if(e){const t=new IntersectionObserver(([e])=>n(()=>e?e.intersectionRatio>=s?"visible_100":e.intersectionRatio>=o?"visible_50":e.intersectionRatio<o?"visible_0":"visible_unknown":"visible_unknown"),r);return t.observe(e),()=>t.disconnect()}n("visible_unknown")},[e]),{visibilityState:t}}},77641:(e,t,n)=>{n.d(t,{H:()=>o,y:()=>s});var i=n(30758);function s(){const[e,t]=(0,i.useState)(null);return{homeAdElement:e,setHomeAdElement:t}}const o=i.forwardRef},87982:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(30758);const s=()=>{const[e,t]=(0,i.useState)(document.hasFocus());return(0,i.useEffect)(()=>{function e(){t(!0)}function n(){t(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",n)}},[]),e}}}]);
//# sourceMappingURL=home-ads-fetcher.js.map