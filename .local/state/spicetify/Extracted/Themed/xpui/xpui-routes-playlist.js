"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{3658:(e,t,i)=>{i.d(t,{a:()=>s});var a=i(78146);const s=()=>(0,a.m)().getCapabilities()},16447:(e,t,i)=>{i.d(t,{xh:()=>x,Gv:()=>A,S:()=>y,_v:()=>g,e$:()=>T});i(54091);var a=i(72045),s=i(89307),n=i(39140),r=i(85003);const l="recent";var o=i(1280),c=i(82567),u=i(10183),d=i(19206);function m(e){switch(e){case a.$c.AgeRestricted:return n.Uk.AgeRestricted;case a.$c.CatalogueRestricted:return n.Uk.CatalogueRestricted;case a.$c.CountryRestricted:return n.Uk.CountryRestricted;case a.$c.Explicit:return n.Uk.Explicit;case a.$c.PaymentRequired:return n.Uk.PaymentRequired;case a.$c.Playable:return n.Uk.Playable;case a.$c.Unavailable:default:return n.Uk.Unavailable}}function p(e,t=!1){return{playable:!t&&e.playable,reason:t?n.Uk.Anonymous:m(e.reason)}}function x(e){return e.previewPlayback?.audioPreview?.cdnUrl?{url:e.previewPlayback.audioPreview.cdnUrl}:null}function y(e){const t="Podcast"!==(i=e.podcastV2).data.__typename?null:{uri:i.data.uri,name:i.data.name,coverArt:i.data.coverArt?.sources||[],trailer:(a=i.data.trailerV2,("Episode"===a?.data.__typename?{uri:a.data.uri}:null)||null),showTypes:(i.data.showTypes||[]).filter(h)};var i,a;const n=(0,c.Wx)(e?.restrictions,e.playability),l=(0,d.p)(e.gatedEntityRelations)?.accessInfo,o=(0,d.v)(l);return{type:s.c.EPISODE,uri:e.uri,name:e.name,description:e.description||"",htmlDescription:e.htmlDescription||"",podcast:t,episodeType:e.type,mediaTypes:e.mediaTypes,coverArt:e.coverArt?.sources||[],audio:e.audio,releaseDate:(u=e.releaseDate,u?{isoString:u.isoString,precision:u.precision}:null),playedState:e.playedState,playability:p(e.playability),audioPreview:x(e),sharingInfo:e.sharingInfo,duration:{milliseconds:e.duration.totalMilliseconds},contentRating:e.contentRating,segmentsCount:0,podcastSubscription:n,contentInformation:e.contentInformation,transcript:e.transcripts?.items||null,upsellExplanation:o?C(o):null,gatedEntityRelations:A(e.gatedEntityRelations),hasGatedEntityRelationAccess:Boolean(l?.isUserMemberOfAtLeastOneGroup),dynamicColors:(0,r.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),sixteenByNineCoverImages:"ImageV2"===e.visualIdentity?.sixteenByNineCoverImage?.image?.data?.__typename?e.visualIdentity.sixteenByNineCoverImage.image.data.sources?.map(e=>({url:e.url,width:e.maxWidth,height:e.maxHeight})):null};var u}function h(e){return!!e}function g(e){const t="Episode"===e.trailerV2?.data.__typename?(i=e.trailerV2.data,{type:s.c.EPISODE,uri:i.uri,name:i.name,coverArt:i.coverArt?.sources||[],audio:i.audio,audioPreview:x(i),sharingInfo:i.sharingInfo,duration:{milliseconds:i.duration.totalMilliseconds},contentRating:i.contentRating,mediaTypes:i.mediaTypes}):null;var i;const a=(0,o.q)(e?.accessInfo?.unlockedBy),n=(0,d.p)(e.gatedEntityRelations),r=(0,d.v)(n?.accessInfo);return{type:s.c.SHOW,uri:e.uri,name:e.name,description:e.description||"",htmlDescription:e.htmlDescription||"",coverArt:e.coverArt?.sources||[],trailer:t,topics:e.topics.items,podcastType:e.musicAndTalk?"SHOW":"PODCAST",showTypes:(e.showTypes||[]).filter(h),publisherName:e.publisher?.name||"",consumptionOrder:l,gatedContentAccessReason:a,isLocked:null===a,rating:e.rating,isSaved:e.saved,gatedEntityRelations:A(e.gatedEntityRelations),hasGatedEntityRelationAccess:Boolean(!!n&&n?.accessInfo?.isUserMemberOfAtLeastOneGroup),upsellExplanation:r?C(r):null,gatedEntityCoverArt:n?.coverArt?.sources||null}}function T(e){const t=!1===e?.isUserMemberOfAtLeastOneGroup,i=e?.unlockedBy?.includes(a.UG.Abp);return t&&!i}function b(e){return null!==e.displayText}function C({title:e,body:t,actionText:i,url:a}){return e&&t&&i&&a?{title:e,body:t,cta:i,url:a}:null}function A(e){return{entitiesWithValueProps:e.map(({badges:e,relatedEntity:t,summary:i,fallbackGatedEntity:a})=>"EpisodeResponseWrapper"===t?.__typename||"PodcastResponseWrapper"===t?.__typename?{uri:t._uri,summary:i?.forUserWithoutAccess?{forUserWithoutAccess:i.forUserWithoutAccess,forUserWithAccess:i.forUserWithAccess??void 0}:void 0,valueProps:e.filter(b),fallbackNavigation:a?.description?{uri:a.uri,description:a?.description}:void 0}:null).filter(u.P)}}},19878:(e,t,i)=>{i.d(t,{M:()=>j});var a=i(30758),s=i(85387),n=i(18813),r=i(60694),l=i(37109),o=i(22582),c=i(27360),u=i(73778),d=i(49373),m=i(27592),p=i(42975),x=i(80850),y=i(3658);var h=i(11942),g=i(6414),T=i(4552),b=i(12627),C=i(21737),A=i(86070);const f=e=>({uri:e.uri,uid:e.uid,type:e.type}),R=({renderItem:e,columnCount:t=6,ariaLabel:i})=>{const f=(0,b.SF)(),R=(0,a.useRef)(null),{getItem:j,nrValidItems:I,invalidateCache:E}=(0,u.K_)(),{playlist:v}=(0,g.g)(),{metadata:S}=v,{handleRemove:P,removeDialogProps:k}=(0,h.w)(v);(0,C.H)(S.uri,E),((e,t)=>{const{clearSelected:i,selectAll:s,getSelected:n}=(0,a.useContext)(o.m),{canFetchAllTracks:r}=(0,y.a)(),{cacheAll:l}=(0,u.K_)(),h=(0,a.useCallback)(()=>{r?l().then(()=>{s()}):s()},[l,r,s]),g=(0,a.useCallback)(async(e,t)=>{const i=n().map(({uri:e})=>t?e:(0,c.o_h)(e)?.toURL()).join("\n");i.length&&await e(i)},[n]),T=(0,a.useCallback)(a=>{if(e.current?.contains(document.activeElement)){const e=n();if(0===e.length)return;t(e,()=>{i()},a)}},[i,n,t,e]),b=(0,a.useCallback)(async e=>{await g(e,!1),T(!0)},[g,T]);(0,m.Q)(b),(0,d.R)(g),(0,x.x)(p.W.SELECT_ALL,h),(0,x.x)(p.W.DELETE,()=>T())})(R,P),(0,l.g)(R);const N=(0,a.useCallback)(e=>(0,A.jsx)("div",{style:{height:e}}),[]),_=(0,a.useCallback)((t,i)=>{const a=j(t);return a?e(a,t):N(`${i}px`)},[j,e,N]),D="POP"===(0,s.wQ)()?0:10;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n.R,{firstInteractiveIsWrapper:!0,"aria-rowcount":I,"aria-colcount":t,"aria-label":i,ref:R,children:(0,A.jsx)(T.M,{totalCount:I,estimatedHeight:200,renderItem:_,renderPlaceholder:N,scrollNodeRef:f,nrRowsOverscan:10,persistanceKey:S.uri,nrInitialInView:D})}),(0,A.jsx)(r.F,{...k})]})},j=e=>{const{getItems:t,nrValidItems:i}=(0,u.K_)();return(0,A.jsx)(o.k,{resolveItem:f,getItems:t,nrTracks:i,children:(0,A.jsx)(R,{...e})})}},32467:(e,t,i)=>{i.d(t,{u:()=>m});var a=i(97500),s=i.n(a),n=i(89408),r=i(39440),l=i(38529),o=i(66891),c=i(60257),u=i(75794),d=i(86070);const m=({uri:e,src:t,playAriaLabel:i,onClick:a,isPlaying:m,isActive:p,isLocked:x,isEpisode:y,isVideo:h,spec:g})=>{const T=(0,c.s)(),b=(0,n.YQ)(t=>{let i;if(g){const t=g.playbackButtonFactory();let a;a=p&&m?t.hitPause({itemToBePaused:e}):p&&!m?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),i=T.logInteraction(a)}a(t,i)},o.d,{leading:!0,trailing:!1});return(0,d.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,d.jsx)(l.e,{src:t,isEpisode:y,isVideo:h}),(0,d.jsx)(r.x,{className:s()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:b,isPlaying:m,isLocked:x,playAriaLabel:i})]})}},34401:(e,t,i)=>{i.d(t,{m:()=>d});var a=i(30758),s=i(35394),n=i(29553),r=i(58090),l=i(20005),o=i(60549),c=i(86070),u=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(u||{});const d=({uri:e,label:t,onClick:i,size:d=u.md,permissionLevel:m="CONTRIBUTOR"})=>{const{onCopyLink:p}=(0,o.J)({uri:e,permissionLevel:m}),x=(0,a.useCallback)(e=>{i?.(e),p?.()},[i,p]),y="CONTRIBUTOR"===m?n.h:r.C;return(0,c.jsx)(l.Zp,{label:t,children:(0,c.jsx)(s.H,{onClick:x,iconOnly:y,size:d,"aria-hidden":"true","aria-label":t,condensed:!0})})}},35331:(e,t,i)=>{i.d(t,{v:()=>a.v});var a=i(30245)},42550:(e,t,i)=>{i.r(t),i.d(t,{default:()=>no});var a=i(30758),s=i(62411),n=i(60749),r=i(85387),l=i(67735),o=i(78717),c=i(91198),u=i(6991),d=i(27360),m=i(54091),p=i(43971),x=i(1812),y=i(88308),h=i(32160),g=i(81037),T=i(64621),b=i(51629);const C=e=>()=>g.adsCoreConnector.prepareNextContextSlot(h.kN.PREROLL_SLOT_ID,{context:e}),A=(e,t)=>{const i=(0,s.d4)(b.Um),a=(0,y.U0)(()=>(e=>[T.a.USE_PREPARE_PREROLL_SLOT,e])(e),[e]),{data:n,isLoading:r,isError:l}=(0,x.I)({queryKey:a(),queryFn:C(e),enabled:(t?.enabled??!1)&&i});return{data:n??null,isLoading:r,isError:l}};var f=i(95093),R=i(86070);const j=(e,t,i)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(i),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),I=({clickTracking:e,clickThrough:t,thirdPartyImpression:i,impression:n,logoUrl:r,advertiserName:l,creativeId:c,lineItemId:u})=>{const d=(0,s.wA)(),[p,x]=(0,a.useState)(!1);return(0,a.useEffect)(()=>(d((0,f.tb)()),d((0,f.i2)(j("event_viewed",c,u))),()=>{d((0,f.zV)())}),[d,c,u]),(0,R.jsxs)("div",{className:"sponsor-container",children:[(0,R.jsx)(o.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:m.Ru.get("playlist.presented_by",l)}),(0,R.jsxs)("div",{className:"sponsor-logo",children:[(0,R.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{d((0,f.i2)(j("event_clicked",c,u))),x(!0)},children:(0,R.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:l,"data-ta-id":"sponsor-logo"})}),(0,R.jsx)("img",{className:"sponsor-logo__imp-pixel",src:n,alt:""}),i&&(0,R.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:i,alt:""}),p&&(0,R.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})};var E=i(26228);const v=({playlistUri:e})=>{const t=(0,s.wA)(),i=(0,s.d4)(E.P3),n=(0,s.d4)(t=>(0,E.Er)(t,e)),r=(0,a.useMemo)(()=>i??n,[i,n]);return(0,a.useEffect)(()=>{r||t((0,f.uP)(e))},[t,e,r]),r?(0,R.jsx)("div",{children:(0,R.jsx)(I,{...r})}):null};var S=i(69113);const P=({playlistUri:e})=>{const t=(0,s.wA)(),i=(0,s.d4)(E.P3),n=(0,s.d4)(E.qn),{isEligible:r}=(0,S.K)(e,n??[]),l=(0,s.d4)(t=>(0,E.aC)(t,e));(0,a.useEffect)(()=>{n||t((0,f.uU)())},[t,n]);return(0,a.useMemo)(()=>(Boolean(i)||l)&&!r,[i,l,r])?(0,R.jsx)(v,{playlistUri:e}):null};var k=i(80944),N=i(52988),_=i(62507),D=i(65671),U=i(13441),L=i(29947),O=i(72170),w=i(96133),B=i(81638),M=i(99046),$=i(75072),F=i(26843);const V=Spicetify.GraphQL.Definitions["thisisPlaylistExtension"]=new $.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null);var q=i(14745),K=i(1099),Y=i(76560),z=i(39341);const W=(0,a.lazy)(async()=>{const{MagpiePlaylist:e}=await Promise.all([i.e(5801),i.e(3241),i.e(8538),i.e(2435),i.e(5872)]).then(i.bind(i,95058));return{default:e}});var H=i(9391),J=i(79952),G=i(91645);var X=i(30920),Q=i(21903),Z=i(27498);const ee=Spicetify.GraphQL.Definitions["queryInlineCurationSearchV2"]=new $.l("queryInlineCurationSearchV2","query","d2738708e23c1bb63d6fe1bed09cdb91333fdbc988352cbb9e3e47a2d517e918",null),te=Spicetify.GraphQL.Definitions["queryInlineCurationSearchV2Booklists"]=new $.l("queryInlineCurationSearchV2Booklists","query","d2738708e23c1bb63d6fe1bed09cdb91333fdbc988352cbb9e3e47a2d517e918",null),ie=Spicetify.GraphQL.Definitions["queryInlineCurationSearchAlbum"]=new $.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),ae=Spicetify.GraphQL.Definitions["queryInlineCurationSearchArtist"]=new $.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var se=i(89307),ne=i(16447),re=i(72045);function le(e){return{type:se.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authorsV2?.map(e=>e?.name).join(m.Ru.getSeparator())||"",authors:e.authorsV2,images:e.coverArt?.sources??[],isLocked:(0,ne.e$)(e.accessInfo),isExplicit:e.contentRatingV2?.labels.includes(re.av.Explicit),durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map(e=>({uri:e.destinationUri,title:e.contextualName}))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var oe=i(96497),ce=i(57171),ue=i(10183),de=i(13059);function me(e){return{type:se.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,ce.r)(e.coverArt)}}function pe(e){if("Album"!==e.data.__typename)return null;return me(e.data)}function xe(e){const t=e?.items.filter(e=>"AlbumResponseWrapper"===e.__typename);return(t??[]).map(e=>pe(e)).filter(ue.P)||[]}function ye(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:se.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,ce.r)(t.visuals.avatarImage)}}function he(e){if("Episode"!==e.data.__typename)return null;const t=e.data,i=t.podcastV2.data;return"Podcast"!==i.__typename?null:{type:se.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,ce.r)(t.coverArt),isExplicit:t.contentRating?.label===re.x7.Explicit,is19PlusOnly:t.contentRating?.label===re.x7.NineteenPlus,podcast:{id:i.id,uri:i.uri,name:i.name},isPlayable:t.playability.playable}}function ge(e){const t=(0,ce.r)(e.albumOfTrack?.coverArt||null);return{type:se.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map(e=>({id:e.id,name:e.profile.name,uri:e.uri})),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===re.x7.Explicit,is19PlusOnly:e.contentRating?.label===re.x7.NineteenPlus}}function Te(e){if("Track"!==e.data.__typename)return null;return ge(e.data)}function be(e){return(e?.itemsV2??[]).map(e=>{const t=(0,oe.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return pe(t);case"ArtistResponseWrapper":return ye(t);case"EpisodeResponseWrapper":return he(t);case"TrackResponseWrapper":return Te(t);default:return(0,de.k)(t),null}}).filter(ue.P)||[]}function Ce(e){return(e?.itemsV2??[]).map(e=>{const t=(0,oe.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?le(t.data):null}).filter(ue.P)||[]}const Ae=async(e,t,i,a=0,s=10,n=10)=>{const r={term:t,offset:a,limit:s,numberOfTopResults:n};if(i){const i=await e(te,r),a=i?.data?.searchV2;return a?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:Ce(a.topResultsV2)??[],query:l}):null}var l;const o=await e(ee,r),c=o?.data?.searchV2;return c?function(e,t){return{albums:xe(e.albumsV2)??[],artists:(s=e.artists,((s?.items??[]).map(e=>ye(e)).filter(ue.P)||[])??[]),episodes:(a=e.episodes,((a?.items??[]).map(e=>he(e)).filter(ue.P)||[])??[]),tracks:(i=e.tracksV2,((i?.items??[]).map(e=>Te(e.item)).filter(ue.P)||[])??[]),topResults:be(e.topResultsV2)??[],query:t};var i,a,s}(c,t):null},fe=async(e,t,i=50,a=0)=>{const s={uris:[t],limit:i,offset:a},n=await e(ie,s),r=n?.data?.albums;return r?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map(e=>ge(e.track))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,de.k)(t),null}}(r):null},Re=async(e,t,i=50,a=0)=>{const s={uris:[t],limit:i,offset:a},n=await e(ae,s),r=n?.data?.artists;return r?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map(e=>me(e))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map(e=>ge(e.track))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,de.k)(t),null}}(r):null};let je=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const Ie=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:je.SEARCH,term:t.term,title:""}]}),e);var Ee=i(97500),ve=i.n(Ee),Se=i(89408),Pe=i(94378);const ke="pafdZjm288seMEwPfzQ2",Ne="Sgs4Ht3jSj96ueGuMvbh",_e="Z9KYXkwFLJA3fo4AdU2q",De="ffSMhQY90CQPh0gH53vg",Ue="jx_3QchS3XHUGBuhuVKV",Le="p8ZJuZCwS2Dk9mNsP6IA",Oe=a.memo(function({placeholder:e,onChange:t=()=>{},onFocus:i=()=>{}}){const[s,n]=(0,a.useState)(""),r=(0,a.useRef)(null),l=(0,Se.YQ)(e=>{t(e)},200),c=(0,a.useCallback)(e=>{const t=e.currentTarget.value;n(t),l(t)},[n,l]),u=(0,a.useCallback)(()=>{r.current&&r.current.focus(),n(""),t("")},[n,t]),d=(0,a.useCallback)(e=>{"Escape"===e.key&&s&&u()},[s,u]);return(0,R.jsxs)("div",{className:ke,role:"search",children:[(0,R.jsx)(o.E,{as:"input",variant:"bodySmall",ref:r,className:ve()(Ne),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:d,onFocus:i,value:s}),(0,R.jsxs)("div",{className:_e,children:[(0,R.jsx)("span",{className:De,children:(0,R.jsx)(Pe.C,{size:"small",className:Ue,"aria-hidden":"true"})}),s&&(0,R.jsx)("button",{className:Le,onClick:u,"aria-label":m.Ru.get("search.a11y.clear-input"),children:(0,R.jsx)(X.M,{size:"small"})})]})]})});var we=i(33990),Be=i(87019),Me=i(23895),$e=i(16666);const Fe=({renderRow:e,searchResults:t})=>(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]});var Ve=i(86584);const qe=({renderRow:e,searchResults:t})=>{const i=t.filter(e=>e.type===se.c.TRACK),a=t.filter(e=>e.type===se.c.ALBUM);return(0,R.jsxs)("div",{children:[(0,R.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:Ve.A.artistResultListTitle,children:m.Ru.get("playlist.curation.popular_songs")}),(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]}),(0,R.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:Ve.A.artistResultListTitle,children:m.Ru.get("playlist.curation.albums")}),(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]})]})},Ke=({renderRow:e,searchResults:t,renderSeeAllRow:i,seeAllXList:a})=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.all"),renderRow:i,rowPlaceholder:Be.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Ye=({renderRow:e,searchResults:t})=>(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]}),ze=({renderRow:e,searchResults:t})=>(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]}),We=({renderRow:e,searchResults:t})=>(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Be.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADD]});var He=i(89829),Je=i(20409);const Ge="tC1_EU0gyKv90GW6wqsb",Xe="hIhEc8pGzUrYzsgwBJea",Qe="dYzfkHQyY6RBW3qoyayA",Ze="mNe9FW7cmA5E4fo8oIpD",et="tir72uZFKHgxueTttFMR",tt="vknNmqwqDyFl4WcbokEY",it="L4gT_mdtUJqZk3wevh7e",at="KrN92pXqgxsB_CUDoMi_",st="wx2rZKawUlMR_Jck2l1J",nt=({searchResult:e,index:t,isRTL:i,onClick:a})=>{const s=e.images.at(0)?.url;return(0,R.jsx)(Je.$,{className:et,rowIndex:t,"aria-selected":!1,children:(0,R.jsxs)("div",{"aria-label":`${m.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:st,onClick:a,children:[(0,R.jsxs)(He.T,{columnIndex:0,className:tt,children:[void 0!==s?(0,R.jsx)("img",{className:Qe,src:s,alt:e.name}):null,(0,R.jsxs)("div",{className:it,children:[(0,R.jsx)(o.E,{as:"p",className:Ze,variant:"bodyMedium",children:e.name}),(0,R.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("album")})]})]}),(0,R.jsx)(He.T,{columnIndex:1}),(0,R.jsx)(He.T,{columnIndex:2,children:(0,R.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:at,onClick:a,children:i?(0,R.jsx)(Z.g,{}):(0,R.jsx)(Q.V,{})})})]})})};var rt=i(76855);const lt=({size:e})=>(0,R.jsx)("div",{className:Xe,children:(0,R.jsx)(rt.r,{size:e})}),ot=({searchResult:e,index:t,isRTL:i,onClick:a})=>{const s=e.images.at(0)?.url;return(0,R.jsx)(Je.$,{className:et,rowIndex:t,"aria-selected":!1,children:(0,R.jsxs)("div",{"aria-label":`${m.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:st,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,R.jsxs)(He.T,{columnIndex:0,className:tt,children:[void 0!==s?(0,R.jsx)("img",{className:Ge,src:s,alt:e.name}):(0,R.jsx)(lt,{size:"small"}),(0,R.jsxs)("div",{className:it,children:[(0,R.jsx)(o.E,{as:"p",className:Ze,variant:"bodyMedium",children:e.name}),(0,R.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("artist")})]})]}),(0,R.jsx)(He.T,{columnIndex:1}),(0,R.jsx)(He.T,{columnIndex:2,children:(0,R.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:at,onClick:a,children:i?(0,R.jsx)(Z.g,{}):(0,R.jsx)(Q.V,{})})})]})})};var ct=i(62960),ut=i(82898),dt=i(10817),mt=i(50279),pt=i(70675),xt=i(32467),yt=i(31289),ht=i(3591),gt=i(66079),Tt=i(78007),bt=i(18949),Ct=i(90809),At=i(15510),ft=i(67793),Rt=i(94101),jt=i(54635),It=i(96882),Et=i(82767),vt=i(24238),St=i(75794);const Pt=a.memo(function({uid:e,uri:t,isPlayable:i,isMOGEFRestricted:s,isExplicit:n,contextUri:r,name:l,imgUrl:o,index:c,podcast:u,usePlayContextItem:d}){const p=(0,a.useMemo)(()=>r.replace("internal:recs:",""),[r]),{addItems:x}=(0,Et.x)(p),{isActive:y,isPlaying:h,triggerPlay:g,togglePlay:T}=d({uid:e,uri:t,index:c}),b=(0,a.useCallback)(()=>{x([t],{after:"end"})},[x,t]),C=(0,It.T)(t),A=(0,At.g)(t,{isPlayable:i}),{badges:f,hasBadges:j}=(0,vt.b)({downloadAvailability:C,isExplicit:n,isMOGEFRestricted:s});return(0,R.jsx)(ut.h,{menu:(0,R.jsx)(dt.b,{uri:t,contextUri:r}),children:(0,R.jsxs)(Ct.w,{uri:t,contextUri:t,isPlayable:A,isArtistBanned:!1,onTriggerPlay:()=>{g()},isActive:y,ageRestricted:s,index:c,ariaRowIndex:c,dragMetadata:{name:l,createdBy:u.name},isExplicit:n,children:[(0,R.jsxs)(gt.U,{ariaColIndex:0,children:[(0,R.jsx)(xt.u,{uri:t,src:o,onClick:()=>{T()},isLocked:!1,isPlaying:h,isActive:y,isEpisode:!0,playAriaLabel:m.Ru.get("tracklist.a11y.play",l,u.name)}),(0,R.jsxs)(yt.l,{children:[(0,R.jsx)(bt.p,{titleText:l,children:l}),j&&(0,R.jsxs)(pt.P,{children:[f.download&&(0,R.jsx)(Rt._,{}),f.explicit&&(0,R.jsx)(ft.U,{}),f.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16})]})]})]}),(0,R.jsx)(Tt.o,{ariaColIndex:1,children:(0,R.jsx)(mt.g,{uri:u.uri,name:u.name,children:u.name})}),(0,R.jsx)(ht.l,{ariaColIndex:2,children:(0,R.jsx)(ct.n,{size:"small",onClick:b,children:m.Ru.get("playlist.extender.button.add")})})]})})},(e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index),kt=({episode:e,contextUri:t,index:i,usePlayContextItem:a})=>(0,R.jsx)(Pt,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:i,podcast:e.podcast,usePlayContextItem:a}),Nt=({label:e,index:t,isRTL:i,onClick:a})=>(0,R.jsx)(Je.$,{className:et,rowIndex:t,"aria-selected":!1,children:(0,R.jsxs)("div",{"aria-label":e,className:st,onClick:a,children:[(0,R.jsx)(He.T,{columnIndex:0,className:tt,children:(0,R.jsx)(o.E,{as:"p",className:Ze,variant:"bodyMedium",children:e})}),(0,R.jsx)(He.T,{columnIndex:1}),(0,R.jsx)(He.T,{columnIndex:2,children:(0,R.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:at,onClick:a,children:i?(0,R.jsx)(Z.g,{}):(0,R.jsx)(Q.V,{})})})]})});var _t=i(10520),Dt=i(21017),Ut=i(76826),Lt=i(35313),Ot=i(7255),wt=i(74571),Bt=i(94315),Mt=i(29112),$t=i(15223),Ft=i(91816),Vt=i(44451);const qt=a.memo(function({uid:e,uri:t,name:i,imgUrl:s,artists:n,isExplicit:r,index:l,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:d,usePlayContextItem:p,durationMs:x,shouldRenderDuration:y,internalLink:h}){const{spec:g,logger:T}=(0,Vt.D)(_t.i,{data:{position:l,reason:"",uri:t}}),b=(0,a.useMemo)(()=>c.replace("internal:recs:",""),[c]),{addItems:C}=(0,Et.x)(b),{isActive:A,isPlaying:f,triggerPlay:j,togglePlay:I}=p({uid:e,uri:t,index:l}),E=(0,a.useCallback)(()=>{T.logInteraction(g.addButtonFactory().hitAddToPlaylist({playlist:b,itemToBeAdded:t})),C([t],{after:"end"})},[T,g,b,t,C]),v=(0,It.T)(t),{isArtistBanned:S,unbanArtist:P}=(0,$t.D)(n[0]?.uri),k=(0,At.g)(t,{isPlayable:u,isLocal:!1,isOutOfMarket:!1,isArtistBanned:S}),N=n.map(e=>e.name).join(m.Ru.getSeparator()),{badges:_,hasBadges:D}=(0,vt.b)({downloadAvailability:v,isExplicit:r,isMOGEFRestricted:d}),U=y&&x,L=n.map(e=>e.name).join(m.Ru.getSeparator()),{isWeb:O}=(0,Ft.V)();return(0,R.jsx)(ut.h,{menu:(0,R.jsx)(Dt.P,{uri:t,albumUri:o.uri,artists:n,contextUri:c}),children:(0,R.jsxs)(Ct.w,{uri:t,contextUri:c,isPlayable:k,isArtistBanned:S,handleArtistBanUndoClick:P,onTriggerPlay:(e,t)=>{j({loggingParams:t})},isActive:A,ageRestricted:d,index:l,ariaRowIndex:l,dragMetadata:{name:i,createdBy:N},spec:g,className:St.A.isRecommendedTrackListRow,isExplicit:r,children:[(0,R.jsxs)(gt.U,{ariaColIndex:0,children:[(0,R.jsx)(xt.u,{uri:t,src:s,onClick:(e,t)=>{I({loggingParams:t})},isLocked:!1,isPlaying:f,isActive:A,playAriaLabel:m.Ru.get("tracklist.a11y.play",i,N),spec:g}),(0,R.jsxs)(yt.l,{children:[h&&O?(0,R.jsx)(Ut.N,{to:t,className:St.A.rowTitle,"data-testid":"internal-track-link",children:(0,R.jsx)(bt.p,{titleText:i,children:i})}):(0,R.jsx)(bt.p,{titleText:i,children:i}),D&&(0,R.jsxs)(pt.P,{children:[_.explicit&&(0,R.jsx)(ft.U,{}),_.download&&(0,R.jsx)(Rt._,{}),_.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16})]}),(0,R.jsx)(Bt.p,{children:(0,R.jsx)(Lt.l,{artists:n,spec:g})})]})]}),(0,R.jsx)(Tt.o,{ariaColIndex:1,children:(0,R.jsx)(mt.g,{uri:o.uri,name:o.name,creatorUri:n?.[0]?.uri,spec:g,children:o.name})}),(0,R.jsx)(Tt.o,{ariaColIndex:2,children:(0,R.jsx)("span",{})}),(0,R.jsxs)(ht.l,{ariaColIndex:3,children:[U?(0,R.jsx)(Mt.d,{uri:t}):null,U?(0,R.jsx)(Ot.P,{duration:x,dataTestId:"render-duration"}):(0,R.jsx)(ct.n,{size:"small",onClick:E,"aria-label":m.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:m.Ru.get("playlist.extender.button.add")}),U?(0,R.jsx)(wt.Y,{menu:(0,R.jsx)(Dt.P,{uri:t,albumUri:o.uri,contextUri:c,artists:n}),label:m.Ru.get("more.label.track",i,L)}):null]})]})})},(e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index),Kt=({track:e,contextUri:t,index:i,usePlayContextItem:a})=>(0,R.jsx)(qt,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:i,album:e.album,artists:e.artists,usePlayContextItem:a});var Yt=i(59725),zt=i(49060);const Wt=({resultList:e,level:t,isRTL:i,playlistUri:s,navToResults:n,navToEntity:r,term:l,isBooklist:c})=>{let u=e;const p=(e=>e.map(e=>{if(e.type===se.c.TRACK||e.type===se.c.EPISODE){const{uri:t,id:i}=e;return{type:(0,d.U_m)(t)?se.c.TRACK:se.c.EPISODE,uri:t,uid:i,provider:null}}return null}).filter(ue.P))(e),{draggable:x,onDragStart:y}=(0,Yt.P)(),{addItems:h}=(0,Et.x)(s),g=(0,a.useCallback)(e=>{h([e],{after:"end"})},[h]),{usePlayContextItem:T}=(0,zt.P)({uri:`${s.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(l)}:${t?.navType??0}`,pages:[{items:p}]},{featureIdentifier:"search"}),b=(0,a.useCallback)((e,t)=>(0,R.jsx)(Nt,{isRTL:i,index:t,label:e.label,onClick:()=>{n({navType:e.type,term:l,title:e.label})}},e.uri),[i,n,l]),C=(0,a.useCallback)((e,t)=>e.type===se.c.ARTIST?(0,R.jsx)(ot,{isRTL:i,index:t,searchResult:e,onClick:()=>{r({navType:je.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===se.c.EPISODE?(0,R.jsx)(kt,{index:t,episode:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:T},e.uri):e.type===se.c.TRACK?(0,R.jsx)(Kt,{index:t,track:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:T},e.uri):e.type===se.c.ALBUM?(0,R.jsx)(nt,{index:t,isRTL:i,searchResult:e,onClick:()=>{r({navType:je.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,R.jsx)(we.H,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:s,isRecommendation:!0,onAddClick:g,showSeparator:0!==t},e.uri),[i,r,g,s,T]);if(""===l)return(0,R.jsx)("div",{className:Ve.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,R.jsxs)("div",{className:Ve.A.emptyStateContainer,children:[(0,R.jsx)(o.E,{as:"h1",variant:"titleSmall",children:m.Ru.get("search.empty-results-title",l)}),(0,R.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("search.empty-results-text")})]});if(t?.navType===je.SEARCH){const t=[{type:je.ARTISTRESULTS,label:m.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:je.ALBUMRESULTS,label:m.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:je.TRACKRESULTS,label:m.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return u=e,c?(0,R.jsx)(R.Fragment,{children:u.map((e,t)=>e&&e.type===se.c.AUDIOBOOK?(0,R.jsx)(we.H,{contextUri:s,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,onAddClick:g,draggable:x,onDragStart:t=>{y(t,{itemUris:[e.uri],itemMimeTypes:[_.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null)}):(0,R.jsx)(Ke,{renderRow:C,searchResults:u,renderSeeAllRow:b,seeAllXList:t})}return t?.navType===je.ALBUM?(0,R.jsx)(Fe,{renderRow:C,searchResults:u}):t?.navType===je.ARTIST?(0,R.jsx)(qe,{renderRow:C,searchResults:u}):t?.navType===je.ALBUMRESULTS?(0,R.jsx)(Ye,{renderRow:C,searchResults:u}):t?.navType===je.TRACKRESULTS?(0,R.jsx)(We,{renderRow:C,searchResults:u}):t?.navType===je.ARTISTRESULTS?(0,R.jsx)(ze,{renderRow:C,searchResults:u}):null};var Ht=i(21994),Jt=i(794);const Gt=({playlistUri:e,hideInlineCuration:t,isBooklist:i})=>{const[s,n]=(0,a.useState)([]),[r,l]=(0,a.useState)(),c=(0,Ht.W)(),{level:u,changeTerm:d,goBack:p,navToEntity:x,navToResults:y,term:h}=(()=>{const[e,t]=(0,a.useReducer)(Ie,{term:"",breadcrumbs:[]}),{breadcrumbs:i,term:s}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:i[i.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:s}})(),{request:g}=(0,a.useContext)(Jt.j),{spec:T,logger:b,UBIFragment:C}=(0,G.r)(J.e,{}),A=(0,a.useCallback)(e=>{d(e),e?b.logInteraction(T.searchBarFactory().keyStrokeFilter()):b.logInteraction(T.searchBarFactory().hitClearFilter())},[d,b,T]);return(0,a.useEffect)(()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case je.SEARCH:try{if(!r||r.query!==h&&""!==h){const t=await Ae(g,h,i);e&&l(t)}else""===h&&n([])}catch{n([])}r&&n(r.topResults);break;case je.ARTISTRESULTS:r&&n(r?.artists);break;case je.ALBUMRESULTS:r&&n(r?.albums);break;case je.TRACKRESULTS:r&&n(r?.tracks);break;case je.EPISODERESULTS:r&&n(r?.episodes);break;case je.ALBUM:try{const t=await fe(g,u.uri,100,0);e&&t&&n(t.tracks)}catch{n([])}break;case je.ARTIST:try{const t=await Re(g,u.uri,100,0);e&&t&&n([...t.albums,...t.tracks])}catch{n([])}}})(),()=>{e=!1}},[u,h,r,g,i]),(0,R.jsxs)(C,{spec:T,children:[(0,R.jsxs)("section",{className:Ve.A.playlistInlineCurationSection,children:[(0,R.jsxs)("div",{className:Ve.A.playlistInlineCurationWrapper,children:[(0,R.jsx)(o.E,{as:"h2",className:Ve.A.playlistInlineCurationTitle,variant:"titleSmall",children:m.Ru.get("playlist.curation.title")}),(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Oe,{placeholder:i?m.Ru.get("playlist.curation.search_placeholder-booklists"):m.Ru.get("playlist.curation.search_placeholder"),onChange:A})})]}),(0,R.jsx)("button",{className:Ve.A.playlistInlineCurationCloseButton,onClick:t,children:(0,R.jsx)(X.M,{"aria-label":m.Ru.get("close")})})]}),null!==u&&u.navType!==je.SEARCH?(0,R.jsxs)("button",{className:Ve.A.playlistInlineCurationBackButton,onClick:()=>p(),children:[c?(0,R.jsx)(Q.V,{"aria-label":m.Ru.get("navbar.go-back"),className:Ve.A.icon}):(0,R.jsx)(Z.g,{"aria-label":m.Ru.get("navbar.go-back"),className:Ve.A.icon}),(0,R.jsx)(o.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,R.jsx)("div",{className:Ve.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,R.jsx)(Wt,{playlistUri:e,term:h,level:u,resultList:s,navToEntity:x,navToResults:y,isRTL:c,isBooklist:i})})]})};var Xt=i(89888),Qt=i(95264),Zt=i(66147),ei=i(19878),ti=i(80408);const ii=(0,a.createContext)({getReference:()=>null,setReference:()=>{}}),ai=({children:e})=>{const t=(0,a.useRef)(null),i=(0,a.useCallback)(()=>t.current,[]),s=(0,a.useCallback)(e=>{t.current=e},[]),n=(0,a.useMemo)(()=>({getReference:i,setReference:s}),[i,s]);return(0,R.jsx)(ii.Provider,{value:n,children:e})};var si=i(78146);const ni=(e,t,i)=>{const{name:n,uri:r,uid:l}=e,{sortState:o}=(0,a.useContext)(B.cL),c=o.order!==$e.Ht.NONE,{draggable:u,onDragStart:d}=(0,Yt.P)({itemIds:[l],itemUris:[r],itemMimeTypes:[_.fl.AUDIOBOOKS],dragLabelText:n,contextUri:t}),{setReference:m,getReference:x}=(0,a.useContext)(ii),y=(0,a.useCallback)(e=>{m({uri:r,uid:l}),d(e)},[d,m,l,r]),h=(0,s.wA)(),g=(0,si.m)(),T=(0,a.useCallback)((e,i)=>{const a=e[_.fl.AUDIOBOOKS];if(!a)return;const s=x();s?i===D.Nz.BEFORE?g.move(t,[s],{before:{uri:r,uid:l}}):g.move(t,[s],{after:{uri:r,uid:l}}):i===D.Nz.BEFORE?h((0,p.io)(t,a,{before:{uri:r,uid:l}})):h((0,p.io)(t,a,{after:{uri:r,uid:l}})),m(null)},[t,h,x,g,m,l,r]),b=i&&!c?[_.fl.AUDIOBOOKS]:[];return{...(0,U.A)({uri:r,id:l,allowedMimeTypesByDropPosition:{[D.Nz.BEFORE]:b,[D.Nz.AFTER]:b},onDrop:T}),onDragStart:y,draggable:u}},ri="sVJrSdpOcXq5N_newR9E",li="YJUvKUZhJEz9VqmDILMg",oi=()=>(0,R.jsx)("div",{className:li}),ci=(0,a.memo)(function({item:e,contextUri:t,canEdit:i=!1,canRemove:a=!1,index:s,highlightText:n}){const{className:r,dropPosition:l,draggable:o,...c}=ni(e,t,i);return(0,R.jsxs)(ti.W,{className:r,"aria-posinset":s,reRunOnDOMUpdate:!0,children:[l===D.Nz.BEFORE&&(0,R.jsx)(oi,{}),(0,R.jsx)(we.H,{book:e,contextUri:t,index:s,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:a,className:r,draggable:o,showSeparator:0!==s,highlightText:n,...c}),l===D.Nz.AFTER&&(0,R.jsx)(oi,{})]})});var ui=i(16615);const di=({contextUri:e,canEdit:t,canRemove:i,ariaLabel:s})=>{const{filter:n}=(0,a.useContext)(Zt.g),r=(0,a.useCallback)((e,t)=>t===Xt.u.TITLE||t===Xt.u.SUBTITLE?(0,R.jsx)(Qt.M,{searchWords:[n],textToHighlight:e}):e,[n]),l=(0,a.useCallback)((a,s)=>(0,ui.pW)(a)?(0,R.jsx)(ci,{contextUri:e,item:a,canEdit:t,canRemove:i,index:s,highlightText:r},a.uri):null,[t,i,e,r]);return(0,R.jsx)("div",{className:ri,children:(0,R.jsx)(ai,{children:(0,R.jsx)(ei.M,{renderItem:l,columnCount:6,ariaLabel:s})})})};var mi=i(70796),pi=i(79898),xi=i(35394),yi=i(70613),hi=i(59861);const gi="AF0qw_GbqSO3AG_k5Ifg",Ti=({uri:e})=>{const[t,i]=function(e){const[t,i]=(0,hi.x)("daylist-snapshot-dismissed-link-back-uris",[]),a=t.includes(e),s=()=>{i([...t,e])};return[a,s]}(e);return t?null:(0,R.jsx)(mi.v,{id:"daylist-snapshot-link-back-banner",variant:"tinted",className:gi,title:(0,R.jsxs)(pi.d,{children:[(0,R.jsx)(o.E,{variant:"bodySmall",children:m.Ru.get("web-player.playlist.daylist.link-back-banner.title")})," ",(0,R.jsx)(Ut.N,{to:"spotify:playlist:37i9dQZF1EP6YuccBxUcC1",children:(0,R.jsx)(o.E,{variant:"bodySmallBold",children:m.Ru.get("web-player.playlist.daylist.link-back-banner.link-text")})})]}),trailing:(0,R.jsx)(xi.H,{iconOnly:X.M,size:"small",onClick:i})})},bi=({uri:e,formatListAttributes:t})=>(0,c.NC)(yi.bph,{loadingValue:!1})&&"true"===t?.["daylist-eligible"]?(0,R.jsx)(Ti,{uri:e,formatListAttributes:t}):null;var Ci=i(8335),Ai=i(11183),fi=i(31808);const Ri=Spicetify.GraphQL.Definitions["moreLikeThisPlaylist"]=new $.l("moreLikeThisPlaylist","query","5973b2230ee523c2fc589bfc296fbac7c5b822c1cd9d8c92a2a1ebb4821e8c01",null);function ji(e,t){const{data:i}=(s={playlistUri:e},n={enabled:t,staleTime:36e5,gcTime:72e5},(0,F.I)(Ri,s,n));var s,n;return(0,a.useMemo)(()=>function(e){if(!e?.homeSections||"HomeSectionCollection"!==e.homeSections.__typename)return;const t=e.homeSections.sections[0];if("HomeSection"!==t?.__typename||!t.sectionItems?.items)return;const i=[];for(const e of t.sectionItems.items){if("PlaylistResponseWrapper"!==e.content.__typename||"Playlist"!==e.content.data.__typename)continue;const t=e.content.data;i.push({uri:t.uri,name:t.name,images:t.images.items.flatMap(e=>e.sources.map(e=>({url:e.url,width:e.width,height:e.height}))),owner:"User"===t.ownerV2.data.__typename?{display_name:t.ownerV2.data.name}:void 0})}return i.length>0?i:void 0}(i),[i])}var Ii=i(98014),Ei=i(49348);const vi=Ii.aig().catch(300);var Si=i(12627);const Pi="Fzs1Gw606u66zPtoSEvC",ki="iVUgP6SAXy8vTN6TkX7o",Ni="FUos9VwDLipR1tuhetTo",_i=(0,a.memo)(({uri:e})=>{const t=(0,Si.SF)(),{ref:i,inView:s}=(0,Ci.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),n=ji(e,s),r=(0,a.useRef)(null),l=function(e){const[t,i]=(0,hi.x)("mlt-height",vi),s=(0,a.useCallback)(()=>{const t=e.current?.getBoundingClientRect()?.height;t&&i(t)},[e,i]);return(0,Ei.w)({refOrElement:e,observeOnly:"height",onResize:s,observeOnMount:!0}),t}(r);return 0===n?.length?null:(0,R.jsx)("div",{className:Pi,style:{"--last-height":`${l}px`},ref:i,children:(0,R.jsx)("div",{className:ki,children:n&&(0,R.jsx)(fi.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:m.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:n.length,elementRef:r,className:Ni,children:n.map((e,t)=>(0,R.jsx)(Ai.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri))})})})}),Di=(0,a.memo)(({uri:e})=>(0,c.NC)(yi.UUT)?(0,R.jsx)(_i,{uri:e}):null);var Ui=i(47556),Li=i(40948),Oi=i(17686),wi=i(86825),Bi=i(3437),Mi=i(22141),$i=i(75300),Fi=i(64300),Vi=i(7213),qi=i(31407),Ki=i(27348),Yi=i(52460),zi=i(42264),Wi=i(99148),Hi=i(74668),Ji=i(34401),Gi=i(76056);const Xi="IgyVZvzbDkuK666jJmrR",Qi="fIrT8EzUsXZkJqyzByFX",Zi="CNPjrX7Pf0GAseSSGapo",ea="onsie5c3fxySQ9zTLEyV",ta="XKxjQQEVlm8kUnmpsvtP",ia="KIpgLeKOcd3yMkLBxKgg",aa="Na5dWaAjtCCMvRBrPjEs",sa="LOaxQ4xuWiq2ELuTOXAm",na="E9izrSQK4vTgKaJ5T7Pq",ra="la7ChubTxxtvHXOZx3hg",la="alrbf27vYCjcB8USddye",oa="DWIabsKiPzMNV7HphphB",ca="BmbbhQfGuARvXxY6MWWF",ua=({onClick:e,isPlaying:t,size:i="medium",ariaPauseLabel:a,ariaPlayLabel:s,isMixingApplied:n})=>(0,R.jsxs)("div",{className:Xi,children:[(0,R.jsxs)("div",{className:ve()(ea,{[ta]:n}),children:[(0,R.jsx)("div",{className:la}),(0,R.jsx)("div",{className:ra}),(0,R.jsx)("div",{className:na}),(0,R.jsx)("div",{className:aa}),(0,R.jsx)("div",{className:ia}),(0,R.jsx)("div",{className:sa}),(0,R.jsx)("div",{className:Zi}),(0,R.jsx)("div",{className:Qi})]}),(0,R.jsx)("div",{className:oa,children:(0,R.jsx)(Gi.D,{onClick:e,isPlaying:t,size:i,ariaPlayLabel:s,ariaPauseLabel:a,className:ve()(ca,{[ta]:n})})})]});var da=i(52498);const ma=({togglePlay:e,isPlaying:t,size:i,name:a,isPlaylistMixed:s})=>{const n=(0,da.p)(),r=(0,c.NC)(yi.V6C);return n?(0,R.jsx)(ua,{onClick:e,isPlaying:t,size:i,ariaPlayLabel:m.Ru.get("playlist.a11y.play",a),ariaPauseLabel:m.Ru.get("playlist.a11y.pause",a),isMixingApplied:s&&r}):(0,R.jsx)(Gi.D,{onClick:e,isPlaying:t,size:i,ariaPlayLabel:m.Ru.get("playlist.a11y.play",a),ariaPauseLabel:m.Ru.get("playlist.a11y.pause",a)})};var pa=i(51173);const xa=(0,a.lazy)(async()=>{const{TogglePlaylistMixingButton:e}=await Promise.all([i.e(1015),i.e(9851)]).then(i.bind(i,56510));return{default:e}});var ya=i(91015),ha=i(88089);const ga=({isOpen:e,onConfirm:t,onClose:i})=>(0,R.jsx)(ha.T,{isOpen:e,"aria-label":m.Ru.get("web-player.tuna.turn-on-shuffle-modal.title"),titleText:m.Ru.get("web-player.tuna.turn-on-shuffle-modal.title"),descriptionText:m.Ru.get("web-player.tuna.turn-on-shuffle-modal.body"),confirmText:m.Ru.get("web-player.tuna.turn-on-shuffle-modal.confirm"),cancelText:m.Ru.get("web-player.tuna.turn-on-shuffle-modal.cancel"),onConfirm:t,onClose:i,onOutside:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0});var Ta=i(35331),ba=i(31273);const Ca=({playlistUri:e,isMixed:t,isOwnedBySelf:i,hasCustomTransitions:s,referrer:n})=>{const r=(0,da.p)(),[l,o]=(0,a.useState)(!1),{spec:c,logger:u}=(0,G.r)(ya.L,{});(0,a.useEffect)(()=>{l&&u.logImpression(c.enableShuffleDialogFactory().impression())},[l,u,c]);const[d,m]=(0,hi.x)("mixing-shuffle-confirmation-notification",{}),{shuffleMode:p,setShuffleMode:x}=(0,Ta.v)(e),y=(0,a.useCallback)(()=>{r&&t&&!i&&p!==ba.j.OFF&&s&&!d[e]?.[n]&&(o(!0),m(t=>({...t,[e]:{...t[e],[n]:!0}})))},[r,t,i,p,s,d,e,n,m]),h=(0,a.useCallback)(()=>{u.logInteraction(c.enableShuffleDialogFactory().confirmButtonFactory().hitUiHide()),u.logInteraction(c.enableShuffleDialogFactory().confirmButtonFactory().hitSelectShuffleMode({previousMode:p===ba.j.ON?"shuffle":"smart_shuffle",selectedMode:"linear"})),o(!1),x(ba.j.OFF)},[u,x,p,c]),g=(0,a.useCallback)(()=>{u.logInteraction(c.enableShuffleDialogFactory().cancelButtonFactory().hitUiHide()),o(!1)},[u,c]);return{maybeOpenModal:y,modal:r?(0,R.jsx)(ga,{isOpen:l,onConfirm:h,onClose:g}):null}};var Aa=i(95401),fa=i(35389),Ra=i(89673),ja=i(13992),Ia=i(81694),Ea=i(67885),va=i(43114),Sa=i(55247),Pa=i(60257);const ka=a.memo(function({playlist:e,capabilities:t,spec:i,isPlaying:s,isActive:n,togglePlay:r,isBooklist:l,isConcert:o=!1,backgroundColor:u,tracklistDomRef:d,sortableColumns:p,className:x,watchFeedEntityEntryPoint:y,formatListAttributes:h,isVideoFirst:g}){const{metadata:{uri:T,name:b,unfilteredTotalLength:C,isOwnedBySelf:A,isRootlistable:f,canPlay:j,isPublished:I,totalLength:E,formatListData:v,isSaved:S}}=e,P=(0,Ia.n)(),k=(0,Pa.s)(),N=(0,a.useMemo)(()=>i.shuffleButtonContainerFactory(),[i]),_=t.canFilter&&C>0,D=t.canSort&&C>0,U=C>0,L=(0,fa.X)(),O=(0,da.p)(),w=(0,pa.e)({formatListData:v}),B=(0,c.NC)(yi.V6C),{maybeOpenModal:M,modal:$}=Ca({playlistUri:T,isMixed:w,hasCustomTransitions:"true"===h?.["has-custom-transitions"],isOwnedBySelf:A,referrer:"actionBar"}),F=(0,a.useCallback)(()=>{M(),r()},[M,r]),[V,q]=(0,va.A)(T),K=(0,a.useCallback)(async()=>{try{await q(!V)}catch{}},[V,q]),Y=(0,a.useCallback)(()=>{const e=i.shareButtonFactory().hitShare({entityToBeShared:T,shareId:""});k.logInteraction(e)},[i,k,T]),z=(0,zi.d$)(),{spec:W,logger:H}=(0,G.r)(Ui.e,{data:{uri:T}});(0,a.useEffect)(()=>{z&&H.logImpression(W.impression())},[z,H,W]);const J=(0,a.useCallback)(()=>{let e;const t=i.heartButtonFactory();V?e=t.hitUnfollow({itemToBeUnfollowed:T}):(e=t.hitFollow({itemToBeFollowed:T}),z&&H.logInteraction(W.hitFollow({itemToBeFollowed:T}))),k.logInteraction(e),K()},[i,K,V,k,T,z,H,W]),X=(0,ja.j)(),Q=_&&D,Z=(0,a.useMemo)(()=>f&&(!A||!S),[f,A,T]);return(0,R.jsx)(Li.E,{backgroundColor:u,className:x,isTransparent:B&&w,children:(0,R.jsxs)(Oi.S,{children:[j&&!l?(0,R.jsx)(ma,{togglePlay:F,isPlaying:s,size:X,name:b,isPlaylistMixed:w}):null,$,y&&(0,R.jsx)(Sa.r,{spec:i,children:(0,R.jsx)(Ra.H,{entryPoint:y,watchFeedTitle:b,type:se.c.PLAYLIST,entityUri:T})}),L&&E>0&&!l&&(0,R.jsx)(Sa.r,{spec:N,children:(0,R.jsx)(Aa.Y,{entityName:b,contextUri:T,isActive:n,size:X})}),Z?(0,R.jsx)(qi.e,{children:(0,R.jsx)(wi.M,{isAdded:V,onClick:J,size:X,condensed:!0})}):null,U&&!l&&!g&&(0,R.jsx)(Bi.f,{uri:T,isFollowing:V,canDownload:U,onClick:(e,t)=>(0,Ea.Qv)(t,i.downloadButtonFactory(),k,T),onFollow:K,size:X,condensed:!0}),e.metadata.permissions?.canAdministratePermissions&&P&&(0,R.jsx)(Ji.m,{onClick:Y,label:m.Ru.get("permissions.invite-collaborators",b),uri:T,size:X}),(o||l)&&(0,R.jsx)($i.w,{uri:T,sharingInfo:null,onClick:Y,size:X,ariaLabel:m.Ru.get("contextmenu.share.copy-playlist-link")}),O&&(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(xa,{playlistMetadata:e.metadata})}),false,(0,R.jsx)(Fi.b,{onShow:()=>(0,Ea.R2)(i,k),menu:(0,R.jsx)(Vi.W,{uri:T,isPublished:I}),children:(0,R.jsx)(Mi.e,{label:m.Ru.get("more.label.context",b),size:X})}),Q?(0,R.jsx)(Sa.r,{spec:i,children:(0,R.jsx)(Wi.d,{filterPlaceholder:m.Ru.get("playlist.search_in_playlist"),sortOptions:(0,Hi.rE)(p,w),defaultSortField:"custom-order",enableViewModeMenu:!l,className:Ve.A.searchBoxContainer,elementRef:d})}):(0,R.jsx)("div",{className:Ve.A.leadingSlot,children:(0,R.jsx)(Ki.u,{property:yi.mA2,renderNewExperience:()=>(0,R.jsx)(Yi.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})});var Na=i(40539),_a=i(88439);const Da=e=>{const t=(0,Pa.s)(),i=(0,a.useMemo)(()=>e.spec.promoCardFactory(),[e.spec]),s=(0,_a.n)(i.getAbsoluteLocation(),i);return(0,R.jsxs)("div",{className:Ve.A.concertsFooter,children:[(0,R.jsx)(Ut.N,{to:"/concerts",className:Ve.A.ctaLink,onClick:()=>{const e=i.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,R.jsxs)("div",{className:Ve.A.promoRow,ref:s,children:[(0,R.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:Ve.A.promoTitle,children:m.Ru.get("concerts.find_more")}),(0,R.jsx)(Na.v,{as:"span",selected:!0,children:m.Ru.get("concerts.find_nearby")}),(0,R.jsx)("img",{className:Ve.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,R.jsx)("div",{className:Ve.A.disclaimerContainer,children:(0,R.jsx)(o.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:m.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Ua=i(63239),La=i(18189),Oa=i(50867),wa=i(76248),Ba=i(91714),Ma=i(38982),$a=i(70013),Fa=i(94450),Va=i(39989),qa=i(26053);var Ka=i(15430),Ya=i(84322);const za="WrdxFrRpvSlmo0SaeTos",Wa="OinPHsxJIT9aPTFKmUcg",Ha="session_control_display",Ja="session_control_display.displayName.",Ga="session-control-reset",Xa="session_control.selected_signals",Qa="session-control-clear",Za=({uri:e,formatListAttributes:t,availableSignals:i})=>{const s=(0,si.m)(),{logger:n,spec:r}=(0,G.r)(La.h,{}),l=(0,a.useMemo)(()=>r.chipsSectionFactory(),[r]),o=(0,_a.n)(l.getAbsoluteLocation(),l),{enqueueAddSnackbar:c,closeSnackbar:u}=function(){const{enqueueCustomSnackbar:e,closeSnackbar:t}=(0,qa.i)();return{enqueueAddSnackbar:(0,a.useCallback)(t=>e((0,R.jsx)(Ba.O,{children:(0,R.jsx)(Fa.P,{center:(0,R.jsx)($a.z,{children:m.Ru.get("web-player.playlist.session-control.retry-snackbar.title")}),trailing:t?(0,R.jsx)(Ma.M,{ctaText:m.Ru.get("web-player.playlist.session-control.retry-snackbar.cta-text"),onCtaClick:t}):null})}),{autoHideDuration:Va.r,keyPrefix:"session-control-retry"}),[e]),closeSnackbar:t}}(),[d,p]=(0,a.useState)(()=>t?.[Xa]),x=(0,a.useMemo)(()=>function(e,t,i){return e?.filter(({name:e})=>e.startsWith(Ha)).map(({name:e})=>({name:e,displayName:t?.[`${Ja}${e.split("$").at(-1)}`]??e,isLoading:i===e,isSelected:t?.[Xa]===e}))??null}(i,t,d),[i,t,d]),y=t?.[Xa];(0,a.useLayoutEffect)(()=>{p(void 0)},[y]);const h=t?.["correlation-id"],g=(0,a.useRef)(null);(0,a.useEffect)(()=>{h&&g.current&&(n.logInteraction(l.chipFactory({identifier:h,reason:g.current}).hitFilter()),g.current=null)},[l,h,n]);const T=(0,a.useCallback)(async t=>{await s.sendSignal(e,t)},[s,e]),b=(0,a.useCallback)(async(e,t)=>{n.logInteraction(r.retrySnackbarFactory({identifier:h??"",reason:e}).retryButtonFactory().hitRetry()),u(t),T(e)},[n,r,h,T,u]);if((0,Ya.e)(Ka.Lj.OPERATION_COMPLETE,({data:t})=>{if(t.uri===e&&t.operation===Ka.sP.SIGNAL&&t.error){const e=c(()=>b(t.signalIdentifier,e));p(void 0),n.logImpression(r.retrySnackbarFactory({identifier:h??"",reason:t.signalIdentifier}).impression())}}),!x?.length)return null;const C=x.filter(({isSelected:e})=>e).map(({name:e,displayName:t})=>({id:e,getName:()=>t,ubiId:e,isLoading:d===e})),A=C.length?[]:x.map(({name:e,displayName:t,isLoading:i})=>({id:e,getName:()=>t,ubiId:e,isLoading:i}));return(0,R.jsx)("div",{className:ve()(za,"contentSpacing"),ref:o,children:(0,R.jsx)(wa.s,{scrollContentClassName:Wa,availableFilters:A,selectedFilters:C,toggleFilterId:()=>{},resetFilterIds:async()=>{const e=C?.at(0);n.logInteraction(l.clearButtonFactory({identifier:h??"",reason:e?.id??""}).hitClearFilter()),p(Qa),T(Ga)},onFilterClick:async(e,t)=>{e&&(t?n.logInteraction(l.clearButtonFactory({identifier:h??"",reason:e}).hitClearFilter()):g.current=e,p(e),T(t?Ga:e))},ariaLabel:(0,Oa.v)("Filters"),clearBtnAriaLabel:(0,Oa.v)("Clear filters"),applyLightThemeControls:!0,isClearActionLoading:d===Qa})})},es=e=>(0,c.NC)(yi.MFf)?(0,R.jsx)(Za,{...e}):null;var ts=i(14),is=i(79877),as=i(87274),ss=i(58473),ns=i(40299),rs=i(14244),ls=i(74029);const os=(0,a.createContext)(null),cs=()=>{const e=(0,a.useContext)(os);if(!e)throw new Error("ItemContext not found");return e},us=()=>{const{item:e}=cs(),{addedAt:t}=e;return t?(0,R.jsx)(ls.L,{dateAdded:new Date(t)}):null};var ds=i(70839),ms=i(72453);const ps="multiUserAttributionDisplayNamesV2",xs=e=>e.length>1?[{url:e}]:[];var ys=i(24075),hs=i(3658),gs=i(76392);const Ts=()=>{const{item:e,spec:t,externalFlags:i}=cs(),{canDecorateAddedBy:a}=(0,hs.a)(),{isCompactMode:s}=(0,ys.a)(),n=i.addedByAsFacepile&&((e,t)=>{const i=[];if(!t)return i;const a=t[ps]?ps:"multiUserAttributionDisplayNames",s=t?.[a]?.split(","),n=t?.multiUserAttributionImages?.split(",");if(!s||!n)return i;const r=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=s.length;for(let e=0;e<o;e++){const t=r[e],a=t&&(0,d.Qjr)(t).toURI();i.push({username:t,uri:a,displayName:s[e]??"",images:xs(n[e]??""),recsplanation:l[e]})}return i.sort((t,i)=>t.username?t.username===e?.username?-1:i.username===e?.username?1:0:0)})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[],r=n.at(0),l=(0,gs.g)(r?.images,{desiredWidth:24,desiredLabel:"small"});return(0,R.jsx)(R.Fragment,{children:i.addedByAsFacepile?(0,R.jsx)(ms.R,{users:n,spec:t}):(0,R.jsx)(ds.i,{name:r?.displayName||r?.username||"",isCompactMode:s,uri:r?.uri||"",imageUrl:l?.url||"",showAvatar:a,spec:t})})},bs=e=>{const t=(0,ui.Jy)(e),i=(0,ui.xp)(e),a=(0,ui.pW)(e),s=(0,ui.bb)(e),n=(0,ui.v9)(e);let r=t?e.artists:void 0,l=r?.map(e=>e.name).join(m.Ru.getSeparator())||"";return i?l=e.show?.publisher??"":a?l=e.authorName||"":(s||n)&&(r=e.contributors,l=e.contributors.at(0)?.name??""),{creators:r,songBy:l}},Cs=e=>(0,ui.xp)(e)?e.show?{uri:e.show.uri,name:e.show.name}:null:(0,ui.Jy)(e)?e.album?{uri:e.album.uri,name:e.album.name}:null:(0,ui.bb)(e)||(0,ui.v9)(e)?e.parent:null,As=e=>(0,ui.Jy)(e)&&e.isLocal,fs=()=>{const{item:e,spec:t}=cs(),{filter:i}=(0,a.useContext)(Zt.g),{creators:s}=bs(e),n=Cs(e);return n?(0,R.jsx)(mt.g,{nonInteractive:As(e),uri:n.uri,name:n.name,creatorUri:s?.[0]?.uri,spec:t,children:(0,R.jsx)(Qt.M,{searchWords:[i],textToHighlight:n.name})}):null};var Rs=i(91850),js=i(41347),Is=i(6917);const Es=e=>{const t=(0,ui.Jy)(e),i=(0,ui.xp)(e),a=t?e.associatedAudioUri:void 0,s=i&&e.show?.mediaType===Is.Q.VIDEO;return{associatedAudioUri:a,isVideoTrack:t&&!!e.associatedAudioUri,isVideoShow:s}},vs=(e,t)=>{const i=(0,ui.Jy)(e),a=(i&&e.hasAssociatedVideo&&t)??!1;return{hasAssociatedVideo:a,isUnmappedMusicVideo:i&&!a&&!e.hasAssociatedAudio&&e.mediaType===re.IX.Video}},Ss=()=>{const{item:e,spec:t}=cs(),{filter:i}=(0,a.useContext)(Zt.g),{isVideoShow:s}=Es(e),{creators:n,songBy:r}=bs(e),l=(0,ui.xp)(e),o=(0,ui.pW)(e);return(0,R.jsxs)(js.Y,{children:[!l&&!s&&n&&(0,R.jsx)(Rs.E,{nonInteractive:As(e),artists:n,filter:i,spec:t}),(l||o)&&!s&&r]})},Ps=()=>{const{item:e}=cs();return(0,ui.Jy)(e)&&e.bpm?(0,R.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:e.bpm}):null};var ks=i(3913);const Ns=e=>{const t=e.formatListAttributes?.concert_uri,i=e.formatListAttributes?.concert_date,a=e.formatListAttributes?.concert_subtitle,s=String(e.formatListAttributes?.concert_uris?.split(",").length??0),n=e?.formatListAttributes?.ticketingSite,r=e?.formatListAttributes?.eventDate;return{concertURI:t,concertDate:i,concertVenue:a,concertsCount:s,ticketingSiteURL:n,eventDate:r}},_s=()=>{const{item:e,index:t,spec:i}=cs(),{concertURI:a,concertDate:s,concertVenue:n,concertsCount:r}=Ns(e),{isCompactMode:l}=(0,ys.a)();return a&&s&&n?(0,R.jsx)(ks.F,{isCompactMode:l,concertsCount:r,concertDate:s,concertURI:a,concertVenue:n,index:t,spec:i}):null};var Ds=i(50217);const Us=()=>{const{item:e,index:t,spec:i}=cs(),{concertURI:a,concertVenue:s,concertsCount:n}=Ns(e);return s&&a?(0,R.jsx)(Ds.F,{concertURI:a,concertsCount:n,concertVenue:s,index:t,spec:i}):null};var Ls=i(7275),Os=i(5475),ws=i(72941),Bs=i(42626);const Ms=e=>{const t=(0,ui.Jy)(e),i=(0,ui.xp)(e),a=(0,ui.pW)(e),s=(0,ui.bb)(e),n=(0,ui.v9)(e);return t||i||a||s||n?e.name:""},$s=e=>"1"===e?.formatListAttributes?.["dislike-feedback-selected"],Fs=e=>(0,ui.pW)(e)&&!!e.isOutOfMarket,Vs=({hideDuration:e})=>{const{item:t,list:i,menu:a,spec:s,contextualBans:n}=cs(),r=(0,ws.$)(),{uri:l,type:o}=t,{uri:c,name:u,isOwnedBySelf:d,formatListData:p}=i.metadata,x=p?.attributes["dislike-endpoint"],y=p?.attributes["delete-endpoint"],h=(0,Bs.X)(i.metadata.formatListData?.type),{associatedAudioUri:g,isVideoTrack:T,isVideoShow:b}=Es(t),{songBy:C}=bs(t);let A=0;(0,ui.Jy)(t)||(0,ui.xp)(t)||(0,ui.bb)(t)||(0,ui.v9)(t)?A=t.duration.milliseconds:(0,ui.pW)(t)&&(A=t.durationMs||0);const f=(0,ui.Jy)(t)||(0,ui.xp)(t),j=t?.formatListAttributes?.feedback_uri,I=$s(t),E=h&&r;return(0,R.jsxs)(R.Fragment,{children:[(E&&!T||n.hasContextualBan)&&n.canContextualBan?(0,R.jsx)(Ls.A,{itemUri:l,contextUri:c,isBanned:n.hasContextualBan||I,contextName:u,spec:s}):x&&y&&(0,R.jsx)(Os.O,{isDisliked:I,feedbackPath:x,deleteFeedbackPath:y,feedbackUri:j||l,name:u,contextUri:c}),!b&&!Fs(t)&&f&&(0,R.jsx)(Mt.d,{uri:g??l,spec:s,type:o,isOwnedBySelf:d}),!e&&(0,R.jsx)(Ot.P,{duration:A}),(0,R.jsx)(wt.Y,{menu:a,label:m.Ru.get("more.label.track",Ms(t),C),spec:s})]})};var qs=i(39001);const Ks=()=>{const{item:e}=cs(),{eventDate:t,ticketingSiteURL:i}=Ns(e);return t&&i?(0,R.jsx)(qs.N,{eventDate:t,ticketingSiteURL:i}):null},Ys=()=>{const{item:e,index:t,spec:i}=cs(),{concertURI:a,concertVenue:s,concertsCount:n}=Ns(e);return s&&a?(0,R.jsx)(Ds.F,{concertsCount:n,concertVenue:s,concertURI:a,index:t,spec:i}):null};var zs=i(13057),Ws=i(1609),Hs=i(461),Js=i(43157),Gs=i(4644),Xs=i(25379),Qs=i(77936);let Zs=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const en={[Zs.DOWN]:()=>(0,R.jsx)(Gs.y,{size:"small",className:St.A.statusChangeDown}),[Zs.UP]:()=>(0,R.jsx)(Xs.J,{size:"small",className:St.A.statusChangeUp}),[Zs.NEW]:()=>(0,R.jsx)(Qs.Z,{className:St.A.notificationDot}),[Zs.EQUAL]:()=>null},tn=({status:e,number:t})=>{const i=en[e];return(0,R.jsxs)("div",{className:ve()(St.A.rowChartStatus),children:[(0,R.jsx)(o.E,{variant:"bodyMedium",children:t}),(0,R.jsx)(i,{})]})};var an=i(70655),sn=i(26471);const nn=e=>{const t=(0,ui.xp)(e),i=(0,ui.pW)(e),a=!!t&&e.podcastSubscription.isUserSubscribed,s=i?e.consumptionCapExplanation:void 0,n=t&&e.podcastSubscription.isPaywalled||i&&e.isLocked&&!e.isOutOfMarket,r=n&&!a;return{isUserSubscribed:a,consumptionCapExplanation:s,isPaywalled:n,unboughtPaywalledEpisode:r,unboughtPaywalledBook:i&&r}},rn="bcNs8RhiGnQHwBolYTFU",ln=({isMixedMedia:e,isVideoShow:t,isEpisode:i,isBook:a,index:s})=>{let n=s+1;return e&&(n=t?(0,R.jsx)(zs.B,{"data-testid":"video-icon",size:"small","aria-hidden":"true"}):i?(0,R.jsx)(Ws.L,{"data-testid":"podcast-icon",size:"small","aria-hidden":"true"}):a?(0,R.jsx)(Hs.l,{"data-testid":"audiobook-icon",size:"small","aria-hidden":"true"}):(0,R.jsx)(Js.v,{"data-testid":"track-icon",size:"small","aria-hidden":"true"})),(0,R.jsx)(sn.a,{children:n})},on=({chartStatusChange:e})=>{const{item:t,playerContext:i,externalFlags:a,spec:s,index:n}=cs(),{uri:r}=t,l=(0,ui.pW)(t),o=(0,ui.xp)(t),{unboughtPaywalledEpisode:c}=nn(t),{isVideoShow:u}=Es(t),{songBy:d}=bs(t),p=Cs(t),x=i.togglePlay;return(0,R.jsx)(as.N,{showUri:p?.uri??"",renderInline:!1,enabled:c,children:(0,R.jsx)(an.$,{uri:r,playAriaLabel:m.Ru.get("tracklist.a11y.play",Ms(t),d),onClick:x,isPlaying:i.isPlaying,isActive:i.isActive,isLocked:c,spec:s,className:ve()({[rn]:e}),children:e?(0,R.jsx)(tn,{number:n+1,status:e}):(0,R.jsx)(ln,{isMixedMedia:a.isMixedMedia,isVideoShow:u,isEpisode:o,isBook:l,index:n})})})},cn=()=>{const{item:e}=cs();return(0,ui.Jy)(e)&&e.key?(0,R.jsx)(o.E,{variant:"bodySmall",style:{color:e.key.color},children:e.key.camelotKey}):null};var un=i(95227);const dn=()=>{const{item:e}=cs(),t=(0,ui.xp)(e);return t?(0,R.jsx)(un.w,{releaseDate:t&&e.release.isoString||""}):null};var mn=i(50355),pn=i(18204);const xn=({title:e})=>{const{filter:t}=(0,a.useContext)(Zt.g);return(0,R.jsx)(bt.p,{titleText:e,children:(0,R.jsx)(Qt.M,{searchWords:[t],textToHighlight:e})})},yn=e=>{const t=(0,ui.Jy)(e),i=(0,ui.xp)(e),a=(0,ui.pW)(e),s=(0,ui.bb)(e),n=(0,ui.v9)(e),r=t||i||a||s||n;return{isMOGEFRestricted:(t||i||s||n)&&e.is19PlusOnly,isExplicit:(r&&e.isExplicit)??!1}};var hn=i(31139);const gn=()=>{const{item:e,externalFlags:t}=cs(),{uri:i}=e,a=(0,It.T)(i),{isWeb:s}=(0,Ft.V)(),n=(0,ui.pW)(e),r=Ms(e),{isExplicit:l,isMOGEFRestricted:o}=yn(e),{isPaywalled:c}=nn(e),{hasAssociatedVideo:u,isUnmappedMusicVideo:d}=vs(e,t.showVideoLabel),{badges:m,hasBadges:p}=(0,vt.b)({downloadAvailability:a,isExplicit:l,isMOGEFRestricted:o,isPaywalled:c,isVideo:u||d});return(0,R.jsxs)(mn.q,{children:[s||n?(0,R.jsx)(Ut.N,{to:i,className:St.A.rowTitle,"data-testid":"internal-track-link",children:(0,R.jsx)(xn,{title:r})}):(0,R.jsx)(xn,{title:r}),p&&(0,R.jsxs)(pt.P,{children:[m.download&&(0,R.jsx)(Rt._,{}),m.explicit&&(0,R.jsx)(ft.U,{}),m.paid&&(0,R.jsx)(hn.y,{}),m.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16}),m.isVideo&&(0,R.jsx)(pn.l,{separator:""})]})]})};var Tn=i(38529),bn=i(69869);var Cn=i(97727),An=i(1187);const fn=()=>{const{item:e,externalFlags:t,spec:i}=cs(),{uri:s}=e,n=(0,It.T)(s),{hasAssociatedVideo:r,isUnmappedMusicVideo:l}=vs(e,t.showVideoLabel),{isExplicit:o,isMOGEFRestricted:c}=yn(e),u=(0,bn.o)(o,l),{isWeb:d}=(0,Ft.V)(),{filter:m}=(0,a.useContext)(Zt.g),p=(0,ui.xp)(e)?e.gatedEntityRelations:null,x=(0,Cn.v)(p,s),{isVideoShow:y,isVideoTrack:h}=Es(e),g=t.isVideoFirstList&&h,{creators:T,songBy:b}=bs(e),{isPaywalled:C}=nn(e),A=(0,ui.xp)(e),f=(0,ui.pW)(e),j=(e=>{let t;(0,ui.xp)(e)?t=e.images.concat(e.show?.images||[]):(0,ui.Jy)(e)?t=e.album?.images:((0,ui.pW)(e)||(0,ui.bb)(e)||(0,ui.v9)(e))&&(t=e.images);const i=(0,gs.g)(t,{desiredSize:40,desiredLabel:"small"});return i?.url??""})(e),I=Ms(e),{badges:E,hasBadges:v}=(0,vt.b)({downloadAvailability:n,isExplicit:o,isMOGEFRestricted:c,isPaywalled:C,isVideo:h&&!g||r||l});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Tn.e,{src:u?void 0:j,isVideo:y,isEpisode:A,isVideoFirst:g}),(0,R.jsxs)(yt.l,{children:[d||f?(0,R.jsx)(Ut.N,{to:s,className:St.A.rowTitle,"data-testid":"internal-track-link",children:(0,R.jsx)(xn,{title:I})}):(0,R.jsx)(xn,{title:I}),v&&(0,R.jsxs)(pt.P,{children:[E.download&&(0,R.jsx)(Rt._,{}),E.explicit&&(0,R.jsx)(ft.U,{}),x?(0,R.jsx)(An.x,{gatedEntityRelations:p}):E.paid&&(0,R.jsx)(hn.y,{}),E.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16}),E.isVideo&&(0,R.jsx)(pn.l,{})]}),(0,R.jsxs)(Bt.p,{children:[!A&&!y&&T&&(0,R.jsx)(Rs.E,{nonInteractive:As(e),artists:T,filter:m,spec:i}),(A||f)&&!y&&b]})]})]})},Rn=({columnType:e,columnIndex:t,options:i,playCount:a,chartStatusChange:s})=>{const{displayedColumns:n}=(0,ss.h)(),r=(0,rs.y)(t,e,n);return(0,R.jsx)(r,{ariaColIndex:t,children:(()=>{switch(e){case $e.$C.INDEX:return(0,R.jsx)(on,{chartStatusChange:s});case $e.$C.TITLE_AND_ARTIST:case $e.$C.TITLE_AND_AUTHOR:return(0,R.jsx)(fn,{});case $e.$C.TITLE:return(0,R.jsx)(gn,{});case $e.$C.ARTIST:case $e.$C.AUTHOR:return(0,R.jsx)(Ss,{});case $e.$C.ALBUM_OR_PODCAST:case $e.$C.ALBUM:return(0,R.jsx)(fs,{});case $e.$C.ADDED_BY:return(0,R.jsx)(Ts,{});case $e.$C.RELEASE_DATE:return(0,R.jsx)(dn,{});case $e.$C.EVENT_DATE:return(0,R.jsx)(Ks,{});case $e.$C.CONCERT:return(0,R.jsx)(_s,{});case $e.$C.EVENT_INFO:return(0,R.jsx)(Ys,{});case $e.$C.CONCERT_VENUE:return(0,R.jsx)(Us,{});case $e.$C.ADDED_AT:return(0,R.jsx)(us,{});case $e.$C.DURATION:return(0,R.jsx)(Vs,{hideDuration:i?.hideDuration??!1});case $e.$C.BPM:return(0,R.jsx)(Ps,{});case $e.$C.KEY:return(0,R.jsx)(cn,{});case $e.$C.ACTIONS:case $e.$C.ADD:case $e.$C.ALBUM_OR_SHOW:case $e.$C.REASONING:return null;case $e.$C.PLAYS:return a?(0,R.jsx)(ns.Y,{playcount:a}):null;default:(0,de.d)(e)}return null})()})};var jn=i(66761),In=i(6414);var En=i(19717),vn=i(58248);var Sn=i(21943),Pn=i(73312),kn=i(74690),Nn=i(1041),_n=i(92689),Dn=i(87587),Un=i(25236),Ln=i(97378),On=i(710);const wn=a.memo(function({uri:e,uid:t,contextUri:i,sharingInfo:a,episodeUri:s,canBeRemovedFromPlaylist:n}){const{spec:r}=(0,On.o)(e);return(0,R.jsxs)(kn.W,{children:[(0,R.jsx)(Un.o,{spec:r,uris:[e]}),t&&(0,R.jsx)(Dn.D,{uris:[e],uids:[t],playlistUri:i||"",canBeRemoved:n}),(0,R.jsx)(_n.du,{uri:s}),(0,R.jsx)(Ln.h,{children:(0,R.jsx)(Nn.m,{spec:r,uri:e,sharingInfo:a,displayText:m.Ru.get("context-menu.copy-generic-link")})})]})});var Bn=i(9606);const Mn=({item:e,context:t,canContextualBan:i,hasContextualBan:a})=>{const{uri:s,uid:n}=e,{uri:r,canRemove:l,name:o}=t.metadata,c=Cs(e);return(0,ui.Jy)(e)?e.isLocal?(0,R.jsx)(Pn.A,{uri:s,uid:n,contextUri:r,canBeRemovedFromPlaylist:l}):e.associatedAudioUri?(0,R.jsx)(Bn.o,{uri:s,uid:n,canBan:!1,artists:e.artists,contextUri:r,saveTrackUri:e.associatedAudioUri,albumUri:e.associatedAudioAlbumUri}):(0,R.jsx)(Dt.P,{uri:s,uid:n,albumUri:c?.uri,artists:e.artists,contextUri:r,isBanned:a||$s(e),canBan:i,canBeRemovedFromPlaylist:l,contextName:o}):(0,ui.xp)(e)?(0,R.jsx)(dt.b,{uri:s,uid:n,showUri:c?.uri,contextUri:r,canBeRemovedFromPlaylist:l}):(0,ui.pW)(e)?(0,R.jsx)(Sn.p,{uri:s,uid:n,contextUri:r,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:l}):(0,ui.bb)(e)?(0,R.jsx)(wn,{uri:s,uid:n,contextUri:r,episodeUri:c?.uri,canBeRemovedFromPlaylist:l}):(0,ui.v9)(e)?(0,R.jsx)(Dt.P,{uri:s,uid:n,albumUri:c?.uri,artists:e.contributors,contextUri:r,isBanned:a||$s(e),canBan:i,canBeRemovedFromPlaylist:l,contextName:o,canSaveToLibrary:!1}):null},$n=e=>{const t=(0,ui.xp)(e),i=(0,ui.Jy)(e),a=(0,ui.pW)(e),s=(0,ui.bb)(e),n=(0,ui.v9)(e),r=i||t||s||n,{isUserSubscribed:l}=nn(e);return!(!t||!e.podcastSubscription.isPaywalled||l)||(r?e.isPlayable&&!$s(e):!!a)};var Fn=i(73553),Vn=i(10246);const qn=a.memo(({item:e,index:t,usePlayContextItem:i,hasCustomOrder:n,isMixedMedia:r,isVideoFirstList:l,addedByAsFacepile:o=!1,onMove:u,onInsert:p,playCount:x,chartStatusChange:y,onTogglePlay:h,onTriggerPlay:g,shouldHighlight:T})=>{const{uri:b,uid:C,playIndex:A}=e,{playlist:f}=(0,In.g)(),{uri:j,canRemove:I,name:E}=f.metadata,{spec:v}=(0,Vt.D)(_t.i,{data:{position:t,reason:"",uri:b}}),S=(0,vn.g)(),{isCompactMode:P}=(0,ys.a)(),k=(0,c.NC)(yi.LX5),{enqueueSnackbar:N}=(0,is.dh)(),{displayedColumns:D}=(0,ss.h)(),U=(0,Vn.b)(j,b,!!(0,ui.Jy)(e)&&e.isBanned),L=(0,Fn.A)(b,j,!!I,U),{creators:O,songBy:w}=bs(e),{unboughtPaywalledEpisode:B,unboughtPaywalledBook:M}=nn(e),{isArtistBanned:$,unbanArtist:F}=(0,$t.D)(O?.[0]?.uri),V=(0,At.g)(b,{isPlayable:$n(e),isLocal:As(e),isOutOfMarket:Fs(e),isArtistBanned:$,hasContextualBan:U}),q=(0,zt.P)({uri:b},{featureIdentifier:"playlist"}),K=i({uid:C,uri:b,index:A??t}),{isActive:Y,isPlaying:z,triggerPlay:W,togglePlay:H}=(0,ui.pW)(e)?q:K,J=(e=>{const{playlist:t}=(0,In.g)(),{canAdd:i,canRemove:a,hasSpotifyAudiobooks:s}=t.metadata,{allColumns:n}=(0,ss.h)(),{trackListSortState:r}=(0,jn.B)({columns:n.map(({columnType:e})=>e),hasCustomOrder:e});let l=[];return i&&a&&null===r.column&&(l=[_.fl.TRACKS,_.fl.LOCAL_TRACKS,_.fl.EPISODES,_.fl.PODCAST_CHAPTERS,_.fl.KALLAX,...s?[_.fl.AUDIOBOOKS]:[]]),l})(n),{onTriggerPlay:G,onTogglePlay:X}=((e,t,i,n)=>{const r=(0,s.wA)(),l=(0,vn.g)(),o=(0,ui.pW)(e),{isUnmappedMusicVideo:c}=vs(e,n),{consumptionCapExplanation:u,unboughtPaywalledBook:m}=nn(e),{uri:p}=e,x=(0,a.useMemo)(()=>c?{modes:{media:"audio"}}:void 0,[c]);return{onTriggerPlay:(0,a.useCallback)((e,i)=>{o&&u?r((0,En._3)()):t({loggingParams:i,...x})},[u,r,o,x,t]),onTogglePlay:(0,a.useCallback)((e,t)=>{o&&u?r((0,En._3)()):m?l((0,d.o_h)(p).toURLPath(!0)):i({loggingParams:t,...x})},[u,r,o,l,x,i,m,p])}})(e,W,H,k),Q=(0,a.useCallback)((e,t)=>{h?.(),X(e,t)},[X,h]),Z=(0,a.useCallback)((e,t)=>{g?.(),G(e,t)},[G,g]),ee=(0,a.useCallback)(()=>{(0,ui.pW)(e)?S((0,d.o_h)(b).toURLPath(!0)):N(m.Ru.get("feedback.unable-to-play"))},[N,e,S,b]),{isExplicit:te,isMOGEFRestricted:ie}=yn(e),ae=(0,a.useMemo)(()=>(0,R.jsx)(Mn,{item:e,context:f,canContextualBan:L,hasContextualBan:U}),[e,f,L,U]),se=Cs(e),ne=(0,a.useMemo)(()=>({list:f,item:e,index:t,spec:v,menu:ae,contextualBans:{hasContextualBan:U,canContextualBan:L},playerContext:{isPlaying:z,isActive:Y,togglePlay:Q},externalFlags:{showVideoLabel:k,isVideoFirstList:l,isMixedMedia:r,addedByAsFacepile:o}}),[f,e,t,v,ae,U,L,z,Y,Q,k,l,r,o]);return(0,R.jsx)(as.N,{renderInline:!1,enabled:!0,showUri:se?.uri,children:(i,a)=>(0,R.jsx)(ut.h,{menu:ae,children:(0,R.jsx)(Ct.w,{uri:b,contextUri:j,index:t,onTriggerPlay:Z,isCompactMode:P,onTriggerPaywall:e=>{M?S((0,d.o_h)(b).toURLPath(!0)):a(e)},onDoubleClick:ee,isLocked:B,isActive:Y,ariaRowIndex:t+1,isPlayable:V,isArtistBanned:$,isBannedInContext:U,contextName:E,handleArtistBanUndoClick:F,ageRestricted:ie,dragMetadata:{name:Ms(e),createdBy:w},onMove:u,onInsert:p,allowedDropTypes:J,spec:v,canRemovePlaylistItems:I,isExplicit:te,initialSelectedState:T,children:(0,R.jsx)(os.Provider,{value:ne,children:D.map(({columnType:e,options:t},i)=>(0,R.jsx)(Rn,{columnType:e,columnIndex:i,options:t,playCount:x,chartStatusChange:y},`column-${i}`))})})})})});var Kn=i(29805);var Yn=i(87879);const zn="pVXvjbkqiIKEY3meF8l5",Wn=a.memo(function({ariaLabel:e,playlistUri:t,isMixedMedia:i,usePlayContextItem:n,tracklistRef:r,tracklistDomRef:l,spec:o,columns:c,isVideoFirstPlaylist:u=!1,formatListData:d,disableColumnReordering:m=!1,isOwnedBySelf:x=!1,isChart:y=!1,highlightURI:h}){const g=(0,Pa.s)(),T=(0,da.p)(),b=(0,pa.e)({formatListData:d}),C=(0,si.m)(),A=(0,s.wA)(),f=(0,Kn.K)(),{maybeOpenModal:j,modal:I}=Ca({playlistUri:t,isMixed:b,hasCustomTransitions:"true"===d?.attributes?.["has-custom-transitions"],isOwnedBySelf:x,referrer:"tracklistRow"}),E=(0,a.useCallback)((e,i,a)=>{if(!r?.current)return;const s=r.current.getRows()[i];s&&(g.logInteraction(o.dragSort()),a===Ct.Y.Before?C.move(t,e,{before:s}):C.move(t,e,{after:s}))},[r,g,o,C,t]),v=(0,a.useCallback)((e,i,a)=>{if(!r?.current)return;const s=r.current.getRows()[i];s&&(g.logInteraction(o.dragAddToPlaylist({playlist:t,itemToBeAdded:e[0]})),a===Ct.Y.Before?A((0,p.io)(t,e,{before:{uri:s.uri,uid:s.uid}})):A((0,p.io)(t,e,{after:{uri:s.uri,uid:s.uid}})))},[r,g,o,t,A]),S=(0,a.useCallback)((e,t)=>{const a=y?parseInt(e.formatListAttributes?.rank||"0",10):void 0,s=y&&(r=e.formatListAttributes?.status,r&&r in Zs)?e.formatListAttributes?.status:void 0;var r;return(0,R.jsx)(qn,{item:e,index:t,usePlayContextItem:n,hasCustomOrder:!0,isMixedMedia:i,isVideoFirstList:u,shouldHighlight:h===e.uri,onMove:E,onInsert:v,playCount:a,chartStatusChange:s,onTogglePlay:j,onTriggerPlay:j})},[y,n,i,u,E,v,j,h]),{shouldRenderTransitionRow:P,maybeDeferredIsPlaylistMixed:k}=((e,t)=>{const i=(0,a.useDeferredValue)(t),[s,n]=(0,a.useState)(e&&t);return(0,a.useEffect)(()=>{i&&!t&&setTimeout(()=>{n(!1)},1e3),!i&&t&&n(!0)},[i,t]),t?{shouldRenderTransitionRow:!0,maybeDeferredIsPlaylistMixed:i}:{shouldRenderTransitionRow:s,maybeDeferredIsPlaylistMixed:t}})(T??!1,b),N=(0,a.useCallback)((e,i)=>{const s=f.getItem(i+1,{cachedOnly:!0})??null;return(0,R.jsxs)(a.Fragment,{children:[S(e,i),P&&s&&(0,R.jsx)(Yn.Z,{track:e,nextTrack:s,playlistUri:t,isPlaylistMixed:k,isOwnedBySelf:x})]},i+e.uri)},[f,S,P,t,k,x]),_=(0,a.useCallback)(e=>{const t=e===$e.$C.BPM||e===$e.$C.KEY,i=t?"small":void 0;return b?{isVisibleByDefault:!0,canToggle:!t,defaultWidth:t?"1fr":void 0,size:i}:e===$e.$C.CONCERT?{isVisibleByDefault:!0,canToggle:!0,size:"large",defaultWidth:"5fr"}:{isVisibleByDefault:!t,canToggle:!0,size:i}},[b]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ts.V,{ariaLabel:e,columns:c,columnPersistenceKey:b?$e.SZ.MIXED_PLAYLIST:$e.SZ.PLAYLIST,tracklistClassName:ve()({[zn]:b}),renderItem:N,defaultSortField:"custom-order",tracklistDomRef:l,extraRowHeight:b?32:void 0,tracklistRef:r,testID:"playlist-tracklist",disableColumnReordering:m,getColumnConfig:_,isSortingEnabled:!b}),I]})});var Hn=i(39858),Jn=i(53126),Gn=i(12211),Xn=i(73367);const Qn=Spicetify.GraphQL.Definitions["getAudiobooksMetadata"]=new $.l("getAudiobooksMetadata","query","523c71c64749a628f83e6b31a122c76663243730bf02df01fd64abf0f62f572f",null);var Zn=i(55517);const er=3e5;function tr(e,t){return["list-extender",e,t]}const ir=(e,t,i=10,s)=>{const n=2*i,r=3*i,l=(0,Xn.jE)(),o=(0,a.useRef)(0),[c,d]=(0,a.useState)(e),[m,p]=(0,a.useState)(()=>l.getQueriesData({queryKey:tr(e,t),stale:!1}).at(0)?.[1]??[]),x=(0,a.useRef)(m.map(e=>e.uri??"")),{spec:y,logger:h}=(0,Zn.$)(u.K,{data:{uri:e}}),g=(0,a.useMemo)(()=>y.recommendedFactory(),[y]);(0,Ya.e)(Ka.Lj.OPERATION_COMPLETE,({data:i})=>{i.uri===e&&(i.operation===Ka.sP.ADD?p(e=>e.filter(e=>i.uris.every(t=>t!==e.uri))):i.operation===Ka.sP.REMOVE&&p(e=>e.filter(e=>i.items.every(t=>t.uri!==e.uri))),i.operation!==Ka.sP.ADD&&i.operation!==Ka.sP.REMOVE||l.invalidateQueries({queryKey:tr(e,t)}))});const T=(0,a.useRef)(!0);(0,a.useEffect)(()=>(T.current||(p([]),d(e),x.current=[],o.current=o.current+1),T.current=!0,()=>{o.current=o.current+1}),[e]),(0,a.useEffect)(()=>{if(m.length<n){const e=Math.min(n,r-m.length),i=o.current,a=tr(c,t),u=T.current&&0===x.current.length;(u?l.fetchQuery({queryKey:a,queryFn:()=>s(c,[],e),staleTime:er,gcTime:er}):s(c,x.current,e)).then(t=>{if(i!==o.current||!t)return;const s=t.map(e=>e?.uri&&e.uri).filter(e=>null!==e);t.length<e&&x.current.length?x.current=[]:x.current=[...x.current,...s],p(e=>[...e,...t]),u&&l.setQueryData(a,t)})}T.current=!1},[n,r,c,m.length,l,s,t]);const b=(0,a.useCallback)(()=>{if(y){const e=g.refreshButtonFactory().hitRefreshContent();h.logInteraction(e)}p(e=>e.slice(i))},[h,g,y,i]);return{recommendations:m.slice(0,i),_bufferedRecommendations:m.slice(i),refresh:b}},ar=a.memo(function({uri:e,canEdit:t}){const{recommendations:i,refresh:s}=((e,t=10)=>{const i=(0,si.m)(),{request:s}=(0,a.useContext)(Jt.j),n=(0,a.useCallback)(async(e,t,a)=>{const n=await i.getRecommendedBookUris(e,t,a),r=await s(Qn,{uris:n});return r?.data?.podcasts?.map(e=>"Audiobook"===e.__typename?le(e):null).filter(ue.P)??[]},[i,s]);return ir(e,"book",t,n)})(e),{draggable:n,onDragStart:r}=(0,Yt.P)(),{addItems:l}=(0,Et.x)(e),c=(0,Jn.p)(),u=(0,a.useCallback)(e=>{l([e],{after:"end"})},[l]);return c?i?.length&&i.length>0?(0,R.jsxs)("div",{className:Ve.A.recommendedTrackList,"data-testid":"recommended-books",children:[(0,R.jsx)("div",{className:Ve.A.top,children:(0,R.jsxs)("div",{className:Ve.A.header,children:[(0,R.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,R.jsx)(o.E,{variant:"bodySmall",className:Ve.A.subtitle,children:m.Ru.get("playlist.extender.songs.in.playlist")})]})}),c&&(0,R.jsxs)(R.Fragment,{children:[i.map((i,a)=>i?(0,R.jsx)(we.H,{contextUri:e,index:a,featureIdentifier:"playlist_recommendations",book:i,sharingInfo:i.sharingInfo,isRecommendation:!0,draggable:n,onAddClick:t?u:void 0,onDragStart:e=>{r(e,{itemUris:[i.uri],itemMimeTypes:[_.fl.AUDIOBOOKS],dragLabelText:i.name})},showSeparator:0!==a},a):null),(0,R.jsx)(xi.H,{className:Ve.A.refreshButton,onClick:s,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,R.jsx)("div",{className:Ve.A.recommendedTrackList,children:(0,R.jsx)("div",{className:Ve.A.top,children:(0,R.jsxs)("div",{className:Ve.A.header,children:[(0,R.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,R.jsx)(o.E,{variant:"bodySmall",className:Ve.A.subtitle,children:m.Ru.get("web-player.playlist.booklist-recommender-dsa-message")})]})})})});var sr=i(32284);const nr=a.memo(function({playlistUri:e,canEdit:t,tracks:i}){const s="1"===(0,sr.$)("filter-age-restricted-content"),{usePlayContextItem:n}=(0,zt.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:i.map(e=>({...e,provider:null,type:se.c.TRACK,uid:null}))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,a.useCallback)((i,a)=>{const r=i.duration;return(0,R.jsx)(qt,{index:a,imgUrl:i.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:i.uri,isPlayable:!(s&&i.isMOGEFRestricted),name:i.name,artists:i.artists,album:{...i.album,imgUrl:i.album.imageUrl},isExplicit:i.explicit,isMOGEFRestricted:i.isMOGEFRestricted,usePlayContextItem:n,durationMs:r,shouldRenderDuration:!t,internalLink:!0},`${a}-${i.uri}`)},[e,s,n,t]),l=(0,a.useMemo)(()=>[$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADDED_AT,$e.$C.ADD],[]),o=(0,a.useCallback)(e=>({uri:e.uri,uid:e.id}),[]),c=(0,a.useMemo)(()=>i.slice(0,Math.min(i.length,10)),[i]);return(0,R.jsx)(Me.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(i.length,10),rowPlaceholder:Be.qq,tracks:c,renderRow:r,resolveItem:o,columns:l},`${e}-recommended`)}),rr=a.memo(function({playlistUri:e,playlistLength:t,canEdit:i}){const{recommendations:s,refresh:n}=((e,t=10)=>{const i=(0,si.m)(),s=(0,a.useCallback)(async(e,t,a)=>{const s=t.map(e=>Gn.r.from(e).id??"");return i.getRecommendedTracks(e,s,a)},[i]);return ir(e,"track",t,s)})(e),r=!t||0===t,l=(0,Jn.p)(),c=r?m.Ru.get("playlist.extender.empty.playlist"):m.Ru.get("playlist.extender.songs.in.playlist");return l?s.length>0?(0,R.jsxs)("div",{className:Ve.A.recommendedTrackList,children:[(0,R.jsx)("div",{className:Ve.A.top,children:(0,R.jsxs)("div",{className:Ve.A.header,children:[(0,R.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,R.jsx)(o.E,{variant:"bodySmall",className:Ve.A.subtitle,children:c})]})}),l&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(nr,{playlistUri:e,canEdit:i,tracks:s}),(0,R.jsx)(xi.H,{className:Ve.A.refreshButton,onClick:n,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,R.jsx)("div",{className:Ve.A.recommendedTrackList,children:(0,R.jsx)("div",{className:Ve.A.top,children:(0,R.jsxs)("div",{className:Ve.A.header,children:[(0,R.jsx)(o.E,{variant:"titleSmall",as:"h2",children:m.Ru.get("playlist.extender.recommended.title")}),(0,R.jsx)(o.E,{variant:"bodySmall",className:Ve.A.subtitle,as:"h3",children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})});var lr=i(740),or=i(14918);var cr=i(78633),ur=i(7854),dr=i(81369),mr=i(83688),pr=i(21623);const xr=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),rootlistabilityTrait:(0,dr.lq)(mr.J.ROOTLISTABILITY_TRAIT)}),yr=a.memo(function({uri:e,capabilities:t,isPlaying:i,isActive:s,togglePlay:n,backgroundColor:r,tracklistDomRef:l,sortableColumns:o}){const{identityTrait:c,rootlistabilityTrait:u}=(0,pr.K)(xr,{uri:e}),{nrValidItems:d}=(0,ur.S)(),p=(0,fa.X)(),[x,y]=(0,va.A)(e),h=(0,a.useCallback)(async()=>{try{await y(!x)}catch{}},[x,y]),g=(0,ja.j)(),T=t.canFilter,b=t.canSort,C=c?.name??"";return(0,R.jsx)(Li.E,{backgroundColor:r,children:(0,R.jsxs)(Oi.S,{children:[(0,R.jsx)(ma,{togglePlay:n,isPlaying:i,size:g,name:C}),null,p&&d>0&&(0,R.jsx)(Aa.Y,{entityName:C,contextUri:e,isActive:s,size:g}),u?.rootlistable?(0,R.jsx)(qi.e,{children:(0,R.jsx)(wi.M,{isAdded:x,onClick:h,size:g,condensed:!0})}):null,(0,R.jsx)(Bi.f,{uri:e,isFollowing:x,onFollow:h,size:g,condensed:!0}),(0,R.jsx)(Fi.b,{menu:(0,R.jsx)(Vi.W,{uri:e}),children:(0,R.jsx)(Mi.e,{label:m.Ru.get("more.label.context",C),size:g})}),T&&b&&(0,R.jsx)(Wi.d,{filterPlaceholder:m.Ru.get("playlist.search_in_playlist"),sortOptions:(0,Hi.rE)(o,!1),defaultSortField:"custom-order",enableViewModeMenu:!0,className:Ve.A.searchBoxContainer,elementRef:l})]})})});var hr=i(12552),gr=i(68131),Tr=i(86487),br=i(17422),Cr=i(29934),Ar=i(83130),fr=i(8134),Rr=i(54839),jr=i(20005),Ir=i(26428),Er=i(34384),vr=i(6372);const Sr=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),visualIdentityTrait:(0,dr.lq)(mr.J.VISUAL_IDENTITY_TRAIT)}),Pr=a.memo(function({uri:e,isPlaying:t,togglePlay:i,backgroundColor:a}){const{identityTrait:s,visualIdentityTrait:n}=(0,pr.K)(Sr,{uri:e}),r=(0,vr.y)(n?.wideFullBleedImage?.instances)??[],l=(0,vr.y)(n?.squareCoverImage?.instances)??[],c={backgroundColor:a},u=r.length>0;u&&(c.backgroundImages=r);const d=s?.name??"",m=s?.description??"",p=(0,R.jsx)(Vi.W,{uri:e});return(0,R.jsxs)(hr.z,{...c,children:[(0,R.jsxs)(br.h,{children:[(0,R.jsx)(Gi.D,{size:"medium",onClick:i,isPlaying:t}),(0,R.jsx)(ut.h,{menu:p,children:(0,R.jsx)(Cr.X,{text:d,dragUri:e,dragLabel:d})})]}),(0,R.jsx)(R.Fragment,{children:u?null:(0,R.jsx)(ut.h,{menu:p,children:(0,R.jsx)(gr.K,{dragUri:e,images:l.map(e=>({url:e.url,width:e.width||void 0,height:e.height||void 0})),name:d,placeholderType:"artist",shape:Ar.u.SQUARE})})}),(0,R.jsxs)(Tr.Y,{children:[(0,R.jsx)(fr.B,{children:s?.type}),(0,R.jsx)(ut.h,{menu:p,children:(0,R.jsx)(Rr.mm,{canEdit:!1,dragUri:e,dragLabel:d,scaleAtMinWidth:Rr.tw,children:d})}),m&&(0,R.jsx)("div",{children:(0,R.jsx)(jr.Zp,{label:(0,Ir.v)(m),children:(0,R.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,R.jsx)(Er.q,{html:m,className:Ve.A.playlistDescription})})})})]})]})});var kr=i(50789);const Nr=(0,a.createContext)(null),_r=()=>{const e=(0,a.useContext)(Nr);if(!e)throw new Error("ItemContext not found");return e},Dr=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),visualIdentityTrait:(0,dr.lq)(mr.J.VISUAL_IDENTITY_TRAIT)}),Ur=({uri:e})=>{const{spec:t}=_r(),{isCompactMode:i}=(0,ys.a)(),{identityTrait:a,visualIdentityTrait:s}=(0,pr.K)(Dr,{uri:e}),n=(0,vr.y)(s?.squareCoverImage?.instances)??[],r=(0,gs.g)(n,{desiredWidth:24,desiredLabel:"small"})?.url??"";return(0,R.jsx)(ds.i,{name:a?.name??"",isCompactMode:i,uri:e,imageUrl:r,showAvatar:!0,spec:t})},Lr=()=>{const{item:e}=_r();return e.addedBy?.uri?(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Ur,{uri:e.addedBy.uri})}):null},Or=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT)}),wr=()=>{const{item:e,spec:t}=_r(),{filter:i}=(0,a.useContext)(Zt.g),{identityTrait:s}=(0,pr.K)(Or,{uri:e.uri}),n=s?.contributors??[],r=s?.contentHierarchyParent??null;return r?(0,R.jsx)(mt.g,{nonInteractive:(0,d.PkR)(e.uri),uri:r.uri,name:r.name,creatorUri:n?.[0]?.uri,spec:t,children:(0,R.jsx)(Qt.M,{searchWords:[i],textToHighlight:r.name})}):null};var Br=i(75917);const Mr=(0,dr.m5)({entityTypeTrait:(0,dr.lq)(mr.J.ENTITY_TYPE_TRAIT),consumptionExperienceTrait:(0,dr.lq)(mr.J.CONSUMPTION_EXPERIENCE_TRAIT),identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT)}),$r=()=>{const{item:e,spec:t}=_r(),{filter:i}=(0,a.useContext)(Zt.g),{entityTypeTrait:s,consumptionExperienceTrait:n,identityTrait:r}=(0,pr.K)(Mr,{uri:e.uri}),l=n?.formats.includes(2)??!1,o=r?.contributors??[],c=o?.[0]?.name??"",u=s?.type===Br.c.ENTITY_TYPE_PODCAST_EPISODE,m=s?.type===Br.c.ENTITY_TYPE_AUDIOBOOK;return(0,R.jsxs)(js.Y,{children:[!u&&!l&&o&&(0,R.jsx)(Rs.E,{nonInteractive:(0,d.PkR)(e.uri),artists:o.map(e=>({uri:e.uri??"",name:e.name})),filter:i,spec:t}),(u||m)&&!l&&c]})},Fr=(0,dr.m5)({audioAttributesV2:(0,dr.lq)(mr.J.AUDIO_ATTRIBUTES_V2)}),Vr=()=>{const{item:e}=_r(),{audioAttributesV2:t}=(0,pr.K)(Fr,{uri:e.uri});return t?.bpm?(0,R.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t.bpm}):null},qr=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),consumptionExperienceTrait:(0,dr.lq)(mr.J.CONSUMPTION_EXPERIENCE_TRAIT)}),Kr=({hideDuration:e})=>{const{item:t,menu:i,spec:a}=_r(),{identityTrait:s,consumptionExperienceTrait:n}=(0,pr.K)(qr,{uri:t.uri}),r=s?.contributors.at(0)?.name??"";return(0,R.jsxs)(R.Fragment,{children:[!e&&(0,R.jsx)(Ot.P,{duration:1e3*parseInt(n?.duration?.seconds??"0",10)}),(0,R.jsx)(wt.Y,{menu:i,label:m.Ru.get("more.label.track",s?.name??"",r),spec:a})]})},Yr=({isMixedMedia:e,isVideoShow:t,isEpisode:i,isBook:a,index:s})=>{let n=s+1;return e&&(n=t?(0,R.jsx)(zs.B,{"data-testid":"video-icon",size:"small","aria-hidden":"true"}):i?(0,R.jsx)(Ws.L,{"data-testid":"podcast-icon",size:"small","aria-hidden":"true"}):a?(0,R.jsx)(Hs.l,{"data-testid":"audiobook-icon",size:"small","aria-hidden":"true"}):(0,R.jsx)(Js.v,{"data-testid":"track-icon",size:"small","aria-hidden":"true"})),(0,R.jsx)(sn.a,{children:n})},zr=(0,dr.m5)({entityTypeTrait:(0,dr.lq)(mr.J.ENTITY_TYPE_TRAIT),podcastSubscription:(0,dr.lq)(mr.J.PODCAST_SUBSCRIPTIONS),consumptionExperienceTrait:(0,dr.lq)(mr.J.CONSUMPTION_EXPERIENCE_TRAIT),identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT)}),Wr=({chartStatusChange:e})=>{const{item:t,playerContext:i,spec:a,index:s}=_r(),{uri:n}=t,{entityTypeTrait:r,podcastSubscription:l,consumptionExperienceTrait:o,identityTrait:c}=(0,pr.K)(zr,{uri:n}),u=r?.type===Br.c.ENTITY_TYPE_AUDIOBOOK,d=r?.type===Br.c.ENTITY_TYPE_PODCAST_EPISODE,p=(l?.isPaywalled??!1)&&!(l?.isUserSubscribed??!1),x=o?.formats.includes(2)??!1,y=c?.contributors.at(0)?.name??"",h=c?.contentHierarchyParent??null,g=i.togglePlay;return(0,R.jsx)(as.N,{showUri:h?.uri??"",renderInline:!1,enabled:p,children:(0,R.jsx)(an.$,{uri:n,playAriaLabel:m.Ru.get("tracklist.a11y.play",c?.name??"",y),onClick:g,isPlaying:i.isPlaying,isActive:i.isActive,isLocked:p,spec:a,className:ve()({[rn]:e}),children:e?(0,R.jsx)(tn,{number:s+1,status:e}):(0,R.jsx)(Yr,{isMixedMedia:!1,isVideoShow:x,isEpisode:d,isBook:u,index:s})})})},Hr=(0,dr.m5)({audioAttributesV2:(0,dr.lq)(mr.J.AUDIO_ATTRIBUTES_V2)}),Jr=()=>{const{item:e}=_r(),{audioAttributesV2:t}=(0,pr.K)(Hr,{uri:e.uri});return t?.key?.camelotKey?(0,R.jsx)(o.E,{variant:"bodySmall",style:{color:t.key.camelotKey.color},children:t.key.camelotKey.value}):null},Gr=(0,dr.m5)({publishingMetadataTrait:(0,dr.lq)(mr.J.PUBLISHING_METADATA_TRAIT)}),Xr=()=>{const{item:e}=_r(),{publishingMetadataTrait:t}=(0,pr.K)(Gr,{uri:e.uri});if(!t?.firstPublishedAt?.yearMonthAndDay)return null;const{year:i,month:a,day:s}=t.firstPublishedAt.yearMonthAndDay;return(0,R.jsx)(un.w,{releaseDate:`${i}-${a}-${s}`})},Qr=({title:e})=>{const{filter:t}=(0,a.useContext)(Zt.g);return(0,R.jsx)(bt.p,{titleText:e,children:(0,R.jsx)(Qt.M,{searchWords:[t],textToHighlight:e})})};var Zr=i(53811);const el=(0,dr.m5)({entityTypeTrait:(0,dr.lq)(mr.J.ENTITY_TYPE_TRAIT),podcastSubscription:(0,dr.lq)(mr.J.PODCAST_SUBSCRIPTIONS),consumptionExperienceTrait:(0,dr.lq)(mr.J.CONSUMPTION_EXPERIENCE_TRAIT),identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT)}),tl=()=>{const{item:e}=_r(),{uri:t}=e,i=(0,It.T)(t),{isWeb:a}=(0,Ft.V)(),{entityTypeTrait:s,podcastSubscription:n,consumptionExperienceTrait:r,identityTrait:l}=(0,pr.K)(el,{uri:t}),o=s?.type===Br.c.ENTITY_TYPE_AUDIOBOOK,c=l?.name??"",u=r?.contentRatings.includes(Zr.HG.CONTENT_RATING_EXPLICIT)??!1,d=r?.contentRatings.includes(Zr.HG.CONTENT_RATING_SOUTH_KOREA_19)??!1,m=n?.isPaywalled??!1,p=r?.formats.includes(2)??!1,{badges:x,hasBadges:y}=(0,vt.b)({downloadAvailability:i,isExplicit:u,isMOGEFRestricted:d,isPaywalled:m,isVideo:p});return(0,R.jsxs)(mn.q,{children:[a||o?(0,R.jsx)(Ut.N,{to:t,className:St.A.rowTitle,"data-testid":"internal-track-link",children:(0,R.jsx)(Qr,{title:c})}):(0,R.jsx)(Qr,{title:c}),y&&(0,R.jsxs)(pt.P,{children:[x.download&&(0,R.jsx)(Rt._,{}),x.explicit&&(0,R.jsx)(ft.U,{}),x.paid&&(0,R.jsx)(hn.y,{}),x.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16}),x.isVideo&&(0,R.jsx)(pn.l,{separator:""})]})]})},il=(0,dr.m5)({entityTypeTrait:(0,dr.lq)(mr.J.ENTITY_TYPE_TRAIT),podcastSubscription:(0,dr.lq)(mr.J.PODCAST_SUBSCRIPTIONS),consumptionExperienceTrait:(0,dr.lq)(mr.J.CONSUMPTION_EXPERIENCE_TRAIT),identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),visualIdentityTrait:(0,dr.lq)(mr.J.VISUAL_IDENTITY_TRAIT),gatedEntityRelations:(0,dr.lq)(mr.J.GATED_ENTITY_RELATIONS)}),al=()=>{const{item:e,spec:t}=_r(),{uri:i}=e,s=(0,It.T)(i),{entityTypeTrait:n,podcastSubscription:r,consumptionExperienceTrait:l,identityTrait:o,visualIdentityTrait:c,gatedEntityRelations:u}=(0,pr.K)(il,{uri:e.uri}),m=l?.formats.includes(2)??!1,p=l?.contentRatings.includes(Zr.HG.CONTENT_RATING_EXPLICIT)??!1,x=l?.contentRatings.includes(Zr.HG.CONTENT_RATING_SOUTH_KOREA_19)??!1,y=(0,bn.o)(p,m),{isWeb:h}=(0,Ft.V)(),{filter:g}=(0,a.useContext)(Zt.g),T=(0,Cn.v)(u,i),b=o?.contributors??[],C=b?.[0]?.name??"",A=r?.isPaywalled??!1,f=n?.type===Br.c.ENTITY_TYPE_PODCAST_EPISODE,j=n?.type===Br.c.ENTITY_TYPE_AUDIOBOOK,I=(0,vr.y)(c?.squareCoverImage?.instances)??[],E=(0,gs.g)(I,{desiredSize:40,desiredLabel:"small"})?.url,v=o?.name??"",{badges:S,hasBadges:P}=(0,vt.b)({downloadAvailability:s,isExplicit:p,isMOGEFRestricted:x,isPaywalled:A,isVideo:m});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Tn.e,{src:y?void 0:E,isVideo:m,isEpisode:f}),(0,R.jsxs)(yt.l,{children:[h||j?(0,R.jsx)(Ut.N,{to:i,className:St.A.rowTitle,"data-testid":"internal-track-link",children:(0,R.jsx)(Qr,{title:v})}):(0,R.jsx)(Qr,{title:v}),P&&(0,R.jsxs)(pt.P,{children:[S.download&&(0,R.jsx)(Rt._,{}),S.explicit&&(0,R.jsx)(ft.U,{}),T?(0,R.jsx)(An.x,{gatedEntityRelations:u}):S.paid&&(0,R.jsx)(hn.y,{}),S.nineteen&&(0,R.jsx)(jt.q,{className:St.A.nineteen,size:16}),S.isVideo&&(0,R.jsx)(pn.l,{})]}),(0,R.jsxs)(Bt.p,{children:[!f&&b&&(0,R.jsx)(Rs.E,{nonInteractive:(0,d.PkR)(e.uri),artists:b.map(e=>({uri:e.uri??"",name:e.name})),filter:g,spec:t}),(f||j)&&C]})]})]})},sl=()=>{const{item:e}=_r(),{addedAt:t}=e;return t?(0,R.jsx)(ls.L,{dateAdded:new Date(t)}):null},nl=()=>{const{item:e,index:t,spec:i}=_r(),{concertURI:a,concertDate:s,concertVenue:n,concertsCount:r}=Ns(e),{isCompactMode:l}=(0,ys.a)();return a&&s&&n?(0,R.jsx)(ks.F,{isCompactMode:l,concertsCount:r,concertDate:s,concertURI:a,concertVenue:n,index:t,spec:i}):null},rl=()=>{const{item:e,index:t,spec:i}=_r(),{concertURI:a,concertVenue:s,concertsCount:n}=Ns(e);return s&&a?(0,R.jsx)(Ds.F,{concertURI:a,concertsCount:n,concertVenue:s,index:t,spec:i}):null},ll=()=>{const{item:e}=_r(),{eventDate:t,ticketingSiteURL:i}=Ns(e);return t&&i?(0,R.jsx)(qs.N,{eventDate:t,ticketingSiteURL:i}):null},ol=()=>{const{item:e,index:t,spec:i}=_r(),{concertURI:a,concertVenue:s,concertsCount:n}=Ns(e);return s&&a?(0,R.jsx)(Ds.F,{concertsCount:n,concertVenue:s,concertURI:a,index:t,spec:i}):null},cl=({columnType:e,columnIndex:t})=>{const{displayedColumns:i}=(0,ss.h)(),a=(0,rs.y)(t,e,i);return(0,R.jsx)(a,{ariaColIndex:t,children:(()=>{switch(e){case $e.$C.INDEX:return(0,R.jsx)(Wr,{});case $e.$C.TITLE_AND_ARTIST:case $e.$C.TITLE_AND_AUTHOR:return(0,R.jsx)(al,{});case $e.$C.TITLE:return(0,R.jsx)(tl,{});case $e.$C.ARTIST:case $e.$C.AUTHOR:return(0,R.jsx)($r,{});case $e.$C.ALBUM_OR_PODCAST:case $e.$C.ALBUM:return(0,R.jsx)(wr,{});case $e.$C.ADDED_BY:return(0,R.jsx)(Lr,{});case $e.$C.RELEASE_DATE:return(0,R.jsx)(Xr,{});case $e.$C.EVENT_DATE:return(0,R.jsx)(ll,{});case $e.$C.CONCERT:return(0,R.jsx)(nl,{});case $e.$C.EVENT_INFO:return(0,R.jsx)(ol,{});case $e.$C.CONCERT_VENUE:return(0,R.jsx)(rl,{});case $e.$C.ADDED_AT:return(0,R.jsx)(sl,{});case $e.$C.DURATION:return(0,R.jsx)(Kr,{});case $e.$C.BPM:return(0,R.jsx)(Vr,{});case $e.$C.KEY:return(0,R.jsx)(Jr,{});case $e.$C.ACTIONS:case $e.$C.ADD:case $e.$C.ALBUM_OR_SHOW:case $e.$C.REASONING:case $e.$C.PLAYS:return null;default:(0,de.d)(e)}return null})()})},ul=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT),contextualBanState:(0,dr.lq)(mr.J.CONTEXTUAL_BAN_STATE)}),dl=(0,dr.m5)({identityTrait:(0,dr.lq)(mr.J.IDENTITY_TRAIT)}),ml=a.memo(({item:e,index:t,usePlayContextItem:i,tracklistRef:n,hasCustomOrder:r})=>{const{list:l}=(0,cr.O)(),{uri:o,uid:c}=e,u=(0,s.wA)(),d=(0,or.M)(),{isCompactMode:m}=(0,ys.a)(),{displayedColumns:x}=(0,ss.h)(),y=(e=>{const{list:t}=(0,cr.O)(),{canEditItems:i}=t.capabilities,{allColumns:a}=(0,ss.h)(),{trackListSortState:s}=(0,jn.B)({columns:a.map(({columnType:e})=>e),hasCustomOrder:e});let n=[];return i&&null===s.column&&(n=[_.fl.TRACKS,_.fl.LOCAL_TRACKS,_.fl.EPISODES,_.fl.PODCAST_CHAPTERS,_.fl.KALLAX,_.fl.AUDIOBOOKS]),n})(r),{identityTrait:h}=(0,pr.K)(dl,{uri:l.uri}),{identityTrait:g,contextualBanState:T}=(0,pr.K)(ul,{uri:o,contextUri:l.uri}),b=T?.isBanned??!1,{isActive:C,triggerPlay:A,isPlaying:f,togglePlay:j}=i({uri:o,uid:c??void 0}),{spec:I}=(0,Vt.D)(_t.i,{data:{position:t,reason:"",uri:o}}),E=(0,a.useCallback)((e,t,i)=>{if(!n?.current)return;const a=n.current.getRows()[t];a&&(i===Ct.Y.Before?d.move(l.uri,e,{before:a}):d.move(l.uri,e,{after:a}))},[n,d,l.uri]),v=(0,a.useCallback)((e,t,i)=>{if(!n?.current)return;const a=n.current.getRows()[t];a&&(i===Ct.Y.Before?u((0,p.io)(l.uri,e,{before:{uri:a.uri,uid:a.uid}})):u((0,p.io)(l.uri,e,{after:{uri:a.uri,uid:a.uid}})))},[n,l.uri,u]),S=(0,a.useMemo)(()=>({list:l,item:e,index:t,spec:I,menu:null,playerContext:{isPlaying:f,isActive:C,togglePlay:(e,t)=>{j({loggingParams:t})}}}),[l,e,t,I,f,C,j]);return(0,R.jsx)(Ct.w,{uri:o,contextUri:l.uri,index:t,onTriggerPlay:()=>{A()},isCompactMode:m,isActive:C,ariaRowIndex:t+1,isPlayable:!0,isBannedInContext:b,contextName:h?.name??"",dragMetadata:{name:g?.name??"",createdBy:g?.contributors[0]?.name??""},onMove:E,onInsert:v,allowedDropTypes:y,children:(0,R.jsx)(Nr.Provider,{value:S,children:x.map(({columnType:e},t)=>(0,R.jsx)(cl,{columnType:e,columnIndex:t},`column-${t}`))})})});var pl=i(73375);const xl=ul.combine(Dr).combine(Or).combine(Mr).combine(Fr).combine(qr).combine(zr).combine(Hr).combine(Gr).combine(el).combine(il),yl=({usePlayContextItem:e,columns:t,columnPersistenceKey:i,defaultSortField:s,tracklistDomRef:n})=>{const r=(0,or.M)(),{canFetchAllTracks:l,canSort:o}=r.getCapabilities(),c=(0,pl.Sk)(),{list:u}=(0,cr.O)(),d=(0,a.useRef)(null),{isCompactMode:m}=(0,ys.a)(),p="custom-order"===s;(0,kr.h)(d);const[,x]=(0,M.z)(),{trackListSortState:y,onSort:h}=(0,jn.B)({columns:t,hasCustomOrder:p}),g=(0,a.useCallback)(e=>({uri:e.uri,uid:e.uid}),[]),T=(0,a.useMemo)(()=>o?new Set((0,Hi.g6)(t)):new Set,[t,o]),b=(0,a.useCallback)((t,i)=>(0,R.jsx)(a.Suspense,{fallback:(0,R.jsx)(Be.nd,{height:`${(0,Me.gi)(m,!1,0)}px`}),children:(0,R.jsx)(ml,{item:t,index:i,usePlayContextItem:e,tracklistRef:d,hasCustomOrder:p})},i+t.uri),[p,m,e]);return(0,R.jsx)(Me.g0,{ariaLabel:"",hasHeaderRow:!0,columns:t,sortableColumns:T,sortState:y,onSort:h,renderRow:b,resolveItem:g,itemsCache:c,canFetchAllTracks:l,isCompactMode:m,columnPersistenceKey:i,outerRef:d,outerDomRef:n,onNrValidItemsChange:x},u.uri+m)},hl=dl,gl=xl,Tl=a.memo(function({tracklistDomRef:e,columns:t,usePlayContextItem:i}){return(0,R.jsx)(yl,{usePlayContextItem:i,columns:t,columnPersistenceKey:$e.SZ.PLAYLIST,defaultSortField:"custom-order",tracklistDomRef:e})}),bl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADDED_AT,$e.$C.DURATION],Cl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADDED_AT,$e.$C.BPM,$e.$C.KEY,$e.$C.DURATION],Al=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADDED_BY,$e.$C.ADDED_AT,$e.$C.DURATION],fl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM_OR_PODCAST,$e.$C.RELEASE_DATE,$e.$C.ADDED_AT,$e.$C.DURATION],Rl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM_OR_PODCAST,$e.$C.ADDED_BY,$e.$C.RELEASE_DATE,$e.$C.ADDED_AT,$e.$C.DURATION],jl=[$e.$C.INDEX,$e.$C.TITLE_AND_AUTHOR,$e.$C.ADDED_AT,$e.$C.DURATION],Il=[$e.$C.INDEX,$e.$C.TITLE_AND_AUTHOR,$e.$C.ADDED_BY,$e.$C.ADDED_AT,$e.$C.DURATION],El=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.EVENT_DATE,$e.$C.DURATION],vl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.CONCERT,$e.$C.DURATION],Sl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.ADDED_BY,$e.$C.DURATION],Pl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.BPM,$e.$C.KEY,$e.$C.ALBUM,$e.$C.ADDED_AT,$e.$C.DURATION],kl=[$e.$C.INDEX,$e.$C.TITLE,$e.$C.BPM,$e.$C.KEY,$e.$C.ARTIST,$e.$C.ALBUM,$e.$C.ADDED_AT,$e.$C.DURATION],Nl=[$e.$C.INDEX,$e.$C.TITLE_AND_ARTIST,$e.$C.ALBUM,$e.$C.DURATION],_l=e=>{const{isCompactMode:t=!1,...i}=e;let a=(e=>{const{isMixedMedia:t=!1,hasEpisodes:i=null,hasSpotifyAudiobooks:a=null,hasDateAdded:s=!0,isLive:n=!1,isChart:r=!1,isConcert:l=!1,isBlend:o=!1,nrCollaborators:c=0,isBooklist:u=!1,showPlayCount:d=!1,isVideoFirstPlaylist:m=!1,isMixedPlaylist:p=!1,isPlaylistMixingEnabled:x=!1}=e;let y=x?[...Cl]:[...bl];const h=c>1;if(t){h&&y.splice(3,0,$e.$C.ADDED_BY);const e=y.indexOf($e.$C.ALBUM);a?y.splice(e,1):y.splice(e,1,$e.$C.ALBUM_OR_PODCAST)}else p?y=[...Pl]:r?(y=[...Nl],d&&y.splice(y.indexOf($e.$C.TITLE_AND_ARTIST)+1,0,$e.$C.PLAYS)):i&&h?y=[...Rl]:i?y=[...fl]:o?y=[...Sl]:u&&h?y=[...Il]:u?y=[...jl]:h?y=[...Al]:n?y=[...El]:l&&(y=[...vl]);if(!s){const e=y.indexOf($e.$C.ADDED_AT);-1!==e&&y.splice(e,1)}if(m){const e=y.indexOf($e.$C.ALBUM);-1!==e&&y.splice(e,1)}return y})(i);return a=((e,t,i)=>t?i?kl:e.flatMap(e=>e===$e.$C.TITLE_AND_ARTIST?[$e.$C.TITLE,$e.$C.ARTIST]:e===$e.$C.TITLE_AND_AUTHOR?[$e.$C.TITLE,$e.$C.AUTHOR]:e):e)(a,t,e.isMixedPlaylist),a};function Dl(e){const{hasDateAdded:t,isMixedMedia:i,hasEpisodes:s,hasSpotifyAudiobooks:n,isLive:r,isChart:l,isConcert:o,isBlend:c,nrCollaborators:u,isBooklist:d,isCompactMode:m,showPlayCount:p,isVideoFirstPlaylist:x,isMixedPlaylist:y,isPlaylistMixingEnabled:h}=e;return(0,a.useMemo)(()=>_l({isMixedMedia:i,hasEpisodes:s,hasSpotifyAudiobooks:n,hasDateAdded:t,isLive:r,isChart:l,isConcert:o,isBlend:c,nrCollaborators:u,isBooklist:d,isCompactMode:m,showPlayCount:p,isVideoFirstPlaylist:x,isMixedPlaylist:y,isPlaylistMixingEnabled:h}),[t,s,n,y,c,d,l,m,o,r,i,x,u,p,h])}var Ul=i(52753),Ll=i(114);const Ol=(0,dr.m5)({visualIdentityTrait:(0,dr.lq)(mr.J.VISUAL_IDENTITY_TRAIT)}).combine(hl).combine(xr).combine(Sr),wl=gl,Bl=()=>{const{list:{uri:e,formatListData:t},contentsOptions:i}=(0,cr.O)(),s=(0,or.M)().getCapabilities(),{isPlaying:n,isActive:r,togglePlay:l,usePlayContextItem:o}=(0,zt.P)((0,Ll.A)(e,i),{featureIdentifier:"playlist"}),c=(0,a.useRef)(null),u=t?.attributes||{},{visualIdentityTrait:d}=(0,pr.K)(Ol,{uri:e}),m=d?.squareCoverImage?.instances?.[0]?.flatFile?.cdnUrl||null,p=u.header_image_url_desktop||u.image_url||null,x=null!==p?p:m||null,y=(0,Ul.H)(x),h=Dl({nrCollaborators:2}),g=(0,a.useMemo)(()=>{let e;return e=s.canSort?new Set((0,O.zq)(h)):new Set([]),e},[h,s]);return(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsxs)("section",{role:"presentation","data-testid":"playlist-page","data-test-uri":e,className:Ve.A.playlistPage,children:[(0,R.jsx)(Pr,{uri:e,isPlaying:n,togglePlay:l,backgroundColor:y}),(0,R.jsxs)("div",{className:Ve.A.playlistContent,children:[(0,R.jsx)(yr,{uri:e,capabilities:s,isPlaying:n,isActive:r,togglePlay:l,backgroundColor:y,tracklistDomRef:c,sortableColumns:g}),(0,R.jsx)("div",{className:"contentSpacing",children:(0,R.jsx)(Tl,{usePlayContextItem:o,columns:h,tracklistDomRef:c})})]})]})})};var Ml=i(46515),$l=i(65791);const Fl=({uri:e})=>(0,R.jsx)($l.P,{surface:Ml.u.PLAYLIST,uris:[e],children:(0,R.jsx)(lr.K,{uri:e,options:{itemDataStatement:wl,listDataStatement:Ol},children:(0,R.jsx)(Bl,{})})});var Vl=i(25547),ql=i(56236),Kl=i(53032);var Yl=i(78034),zl=i(42975),Wl=i(80850),Hl=i(41262);const Jl=["meta+v"];var Gl=i(7577),Xl=i(95488),Ql=i(47537);const Zl=a.lazy(()=>i.e(4789).then(i.bind(i,91716))),eo=a.lazy(()=>i.e(3632).then(i.bind(i,37619))),to=a.lazy(()=>i.e(9718).then(i.bind(i,84052))),io=new Set([]),ao=a.memo(function({playlist:e,capabilities:t,isSponsoredV2:i}){const{metadata:{uri:r,name:x,images:y,totalLength:h,unfilteredTotalLength:g,isOwnedBySelf:T,hasEpisodes:C,canAdd:A,canRemove:f,formatListData:j,hasDateAdded:I,collaborators:E,isPublished:v,hasSpotifyAudiobooks:S,hasSpotifyTracks:k,availableSignals:N,dynamicColors:$},contents:{items:Y}}=e,{spec:z,logger:W,UBIFragment:H}=(0,Zn.$)(u.K,{data:{uri:r}});(e=>{const t=(0,Kl.o)(),i=(0,si.m)(),s=(0,da.p)();(0,a.useEffect)(()=>{s?t.maybeAutoApplyMixingLens(e):i.requestLenses(e,ql.q5,!1)},[i,t,e,s])})(r);const X=(0,Ia.n)(),Q=(0,c.NC)(Ql.Cf,{loadingValue:!1}),{isCompactMode:Z}=(0,ys.a)(),ee=j?.attributes||{},te=ee.header_image_url_desktop||ee.image_url||null;(0,w.q)(i?null:$);const ie=a.useMemo(()=>z.headerFactory(),[z]),ae=a.useMemo(()=>z.tracklistFactory(),[z]),se=a.useMemo(()=>z.actionBarFactory(),[z]),ne="chart"===j?.type,re="concerts-near-you"===j?.type&&Q,le="live-streams"===j?.type,oe=["blend","celebrity-blend","friends-mix"].indexOf(j?.type||"")>-1,ce=[k,C,S].filter(Boolean).length>1,ue=!ce&&!!S&&(0,Hn.R)(Y),de=(0,da.p)(),me=(0,pa.e)({formatListData:j}),[pe]=(0,n.ok)(),xe=pe.get("highlight")||void 0,ye="artistsets"===j?.type||"this-is"===j?.attributes["editorial.series"],he=(0,Vl.D)(e.metadata),ge=A&&f,{isInlineCurationVisible:Te,showInlineCuration:be,hideInlineCuration:Ce}=((e,t)=>{const[i,s]=(0,a.useState)(e&&0===t),{spec:n,logger:r}=(0,G.r)(J.e,{});return{isInlineCurationVisible:i,showInlineCuration:(0,a.useCallback)(()=>{s(!0),r.logInteraction(n.findMoreButtonFactory().hitUiReveal())},[r,n]),hideInlineCuration:(0,a.useCallback)(()=>{s(!1),r.logInteraction(n.closeButtonFactory().hitUiHide())},[r,n])}})(ge,g),{productState:Ae}=(0,s.d4)(b.Ht),fe=!!Ae?.ads&&parseInt(Ae.ads,10)>0,Re="spotify"===e.metadata.owner.username,je=(0,s.wA)(),Ie=(Ee={uri:r},ve={gcTime:5*F.i,enabled:ye},(0,F.I)(V,Ee,ve)).data?.playlistV2;var Ee,ve;const Pe="Playlist"===Ie?.__typename?Ie.artistsOnTour?.[0]:null,ke="Playlist"===Ie?.__typename?Ie.concerts?.items.map(e=>e.data):null,Ne=ke?.flatMap(e=>"ConcertV2"===e.__typename?[e]:[]).map(e=>{const t=[e.location.name,e.location.city].join(m.Ru.getSeparator()),i=e.artists.items.flatMap(e=>"Artist"===e.data.__typename?[e.data]:[]);return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:i[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}}),_e=(0,a.useRef)(null),De=(0,a.useRef)(null),[Ue]=y,Le=null!==te?te:Ue?.url||null,Oe=(0,Ul.H)(i?null:Le,l.wdA),{contentsOptions:we}=(0,K.g)(),{isPlaying:Be,isActive:Me,togglePlay:$e,usePlayContextItem:Fe}=(0,zt.P)((0,Ll.A)(r,we),{featureIdentifier:"playlist"}),qe=(0,a.useCallback)(()=>{const e=(0,Ea.$I)({isPlaying:Be,isActive:Me,spec:se.playButtonFactory(),logger:W,uri:r});$e({loggingParams:e})},[Be,Me,$e,se,W,r]);!function(e){const t=(0,Yl._)(),i=(0,Se.YQ)(()=>{t.paste().then(t=>e(t))},500,{leading:!0,trailing:!1});(0,Hl.f)(Jl,i),(0,Wl.x)(zl.W.PASTE,i)}((0,a.useCallback)(e=>{const t=e.split(/[\r\n]+/g).map(e=>(0,d.o_h)(e)).filter(e=>null!==e&&((0,d.U_m)(e)||(0,d.gHQ)(e)||(0,d.PkR)(e)));if(t.length>0&&A){const e=t.map(e=>e.toURI()),i=_e.current?.getSelected()?.slice(-1)?.[0],a={after:i??"end"};je((0,p.io)(r,e,a))}},[A,je,r]));const Ke=(0,a.useCallback)(e=>{const t=[...e[_.fl.TRACKS]||[],...e[_.fl.LOCAL_TRACKS]||[],...e[_.fl.EPISODES]||[],...e[_.fl.ALBUMS]||[],...e[_.fl.AUDIOBOOKS]||[]];t[0]&&A&&(W.logInteraction(z.dragAddToPlaylist({playlist:r,itemToBeAdded:t[0]})),je((0,p.io)(r,t)))},[A,W,z,r,je]),Ye=!Re&&0!==g,ze=!ue&&X&&(ge&&!Te||Ye),We=ue&&X&&(ge&&!Te||Ye),He=T&&X,Je=!ge&&!ue&&!Ye&&X,Ge=E?.count??1,[Xe]=(0,M.z)(),Qe="plays"===ee.rank_type,Ze=Dl({isMixedMedia:ce,hasEpisodes:C,hasSpotifyAudiobooks:S,hasDateAdded:I,isLive:le,isConcert:re,isBlend:oe,nrCollaborators:Ge,isBooklist:ue,isCompactMode:Z,isChart:ne,showPlayCount:Qe,isVideoFirstPlaylist:he,isMixedPlaylist:me,isPlaylistMixingEnabled:de}),et=(0,a.useMemo)(()=>{let e;return e=t.canSort?ue?new Set(B.dh):new Set((0,O.zq)(Ze)):io,e},[Ze,ue,t]),tt=ue&&!Z,it=(0,a.useMemo)(()=>{const e=ue?[_.fl.AUDIOBOOKS]:[_.fl.TRACKS,_.fl.LOCAL_TRACKS,_.fl.EPISODES,_.fl.ALBUMS,_.fl.PODCAST_CHAPTERS,_.fl.KALLAX];return{[D.Nz.ON]:A?e:[]}},[A,ue]),{className:at,dropPosition:st,...nt}=(0,U.A)({allowedMimeTypesByDropPosition:it,onDrop:Ke});return(0,R.jsxs)(a.Suspense,{fallback:null,children:[(0,R.jsx)(q.c,{artistOrShow:e.metadata.owner.displayName,title:x,uri:r,entityType:q.p.PLAYLIST}),(0,R.jsx)(L.Q,{children:(0,Xl.Q2)({playlistName:x,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Re})}),(0,R.jsxs)("section",{role:"presentation","data-testid":"playlist-page","data-test-uri":r,className:Ve.A.playlistPage,...nt,children:[(0,R.jsx)(Ua.x,{metadata:e.metadata,isPlaying:Be,isPublished:v,isSponsored:i,totalItems:Xe,togglePlay:qe,backgroundColor:i?l.wdA:Oe,spec:ie,className:at,shouldEnableDynamicColors:!te}),(0,R.jsxs)("div",{className:Ve.A.playlistContent,"data-transition":"sponsoredPlaylistContent",children:[(0,R.jsx)(ka,{playlist:e,capabilities:t,spec:se,isPlaying:Be,isActive:Me,togglePlay:qe,isBooklist:ue,backgroundColor:i?l.l0o:Oe,tracklistDomRef:De,isConcert:re,sortableColumns:et,className:at,watchFeedEntityEntryPoint:he?void 0:e.metadata.watchFeedEntityEntryPoint,formatListAttributes:ee,isVideoFirst:he}),(0,R.jsx)(es,{uri:r,formatListAttributes:ee,availableSignals:N}),(0,R.jsxs)("div",{className:at,children:[(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Zl,{formatListData:e.metadata.formatListData})}),(0,R.jsxs)("div",{className:"contentSpacing",children:[!!Pe&&Ne&&Ne.length>0&&(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(eo,{liveEvents:Ne,artistConcertsUri:Pe.uri||"",artistName:Pe.title||"",spec:z})}),(0,R.jsx)(bi,{uri:r,formatListAttributes:ee}),fe?(0,R.jsx)(P,{playlistUri:r}):null,fe&&Re&&!i?(0,R.jsx)(to,{uri:r,playlistName:x}):null,h>0&&(0,R.jsx)(a.Suspense,{fallback:null,children:tt?(0,R.jsx)(di,{contextUri:r,canEdit:ge,canRemove:f,ariaLabel:x}):(0,R.jsx)(H,{spec:ae,children:(0,R.jsx)(Wn,{ariaLabel:x,nrTracks:h,playlistUri:r,isMixedMedia:ce,highlightURI:xe,usePlayContextItem:Fe,tracklistRef:_e,tracklistDomRef:De,spec:ae,columns:Ze,isVideoFirstPlaylist:he,formatListData:e.metadata.formatListData,disableColumnReordering:me,isOwnedBySelf:T??!1,isChart:ne},r)})}),He&&(0,R.jsx)(a.Suspense,{fallback:null,children:Te?(0,R.jsx)(Gt,{playlistUri:r,hideInlineCuration:Ce,isBooklist:ue}):(0,R.jsx)("button",{className:Ve.A.seeMore,onClick:be,children:(0,R.jsx)(o.E,{as:"div",variant:"bodySmallBold","aria-label":m.Ru.get("playlist.curation.find_more-a11y.label"),children:m.Ru.get("playlist.curation.find_more")})})}),ze?(0,R.jsx)("div",{"data-testid":"recommended-track",children:(0,R.jsx)(rr,{playlistUri:r,playlistLength:e.metadata.unfilteredTotalLength,canEdit:ge})}):null,We?(0,R.jsx)(ar,{uri:r,canEdit:ge}):null,Je&&(0,R.jsx)(Di,{uri:r})]})]})]}),re&&(0,R.jsx)(Da,{spec:z.footerSectionFactory()})]})]})}),so=a.memo(function({uri:e}){const t=(0,N.S)(),{isEligible:i}=(0,k.K)(e,t??[]);A(e,{enabled:i});const{playlist:s}=(0,K.g)(),n=(0,hs.a)(),{isMagpieEnabled:r}=(0,H.O)();return r&&(0,z.l)(s.metadata)?(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Gl.d,{dynamicColors:s.metadata.dynamicColors,children:(0,R.jsx)(W,{playlist:s})})}):(0,R.jsx)(Gl.d,{dynamicColors:i?null:s.metadata.dynamicColors,children:(0,R.jsx)(ao,{playlist:s,capabilities:n,isSponsoredV2:i})})}),no=()=>{const{playlistId:e,listNamespace:t,listId:i}=(0,r.g)();let a=(0,d.Pse)((e??"").split("&")[0]).toURI();t&&i&&(a=`spotify:list:${t}:${encodeURIComponent(i)}`);return(0,c.NC)(yi.TpC)?(0,R.jsx)(Fl,{uri:a}):(0,R.jsx)($l.P,{surface:Ml.u.PLAYLIST,uris:[a],children:(0,R.jsx)(Y.W,{uri:a,children:(0,R.jsx)(so,{uri:a})})})}},42626:(e,t,i)=>{i.d(t,{X:()=>c,$:()=>d});var a=i(51318),s=i(65662),n=i(43114),r=i(79421),l=i(90662);const o=["artistsets","artist-mix-reader","blend","daily-mix","daylist","discover-weekly","descripto","inspiredby-mix","on-repeat","release-radar","repeat-rewind","topic-mix"],c=e=>!!e&&o.includes(e),u=(e,t)=>"autoplay"===e.provider||!("context"!==e.provider||!c(t.metadata?.format_list_type)),d=(e,t)=>{const i=(0,a.$)(),o=(0,s.i)(e.uri),[c]=(0,n.A)(o),d=(0,l.g)();return(0,r.v)(e)&&t&&i&&e.uri===o&&!d?c?{canDisplayButton:u(e,t),hideButton:!0}:{canDisplayButton:u(e,t),hideButton:!1}:{canDisplayButton:!1,hideButton:!0}}},51318:(e,t,i)=>{i.d(t,{$:()=>r});var a=i(91198),s=i(49694),n=i(47537);const r=()=>{const e=(0,s.j)(),t=(0,a.NC)(n.en,{loadingValue:!1});return e.getCapabilities().canBan&&t}},52753:(e,t,i)=>{i.d(t,{H:()=>l});var a=i(30758),s=i(66917),n=i(47812),r=i(87308);function l(e=null,t=s.l0o){const i=(0,r.z)(e);return(0,a.useEffect)(()=>((0,n.s)(i,!1),()=>{}),[i]),i||t}},53032:(e,t,i)=>{i.d(t,{o:()=>n});var a=i(7670),s=i(94209);function n(){return(0,s.N)(a.S)}},72941:(e,t,i)=>{i.d(t,{$:()=>a.$});var a=i(51318)},87308:(e,t,i)=>{i.d(t,{r:()=>c,z:()=>u});var a=i(30758),s=i(66917),n=i(26571),r=i(17500),l=i(794),o=i(1812);function c(e=null){const{request:t}=(0,a.useContext)(l.j),{data:i}=(0,o.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,r.j)(t,e).then(e=>{const t=e?.[0];return t?{colorDark:t.colorDark.toCSS(n.a.HEX),colorLight:t.colorLight.toCSS(n.a.HEX),colorRaw:t.colorRaw.toCSS(n.a.HEX)}:null}):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return i??void 0}function u(e=null,t=s.l0o,i="colorRaw"){return c(e)?.[i]??t}},87879:(e,t,i)=>{i.d(t,{Z:()=>a});const a=(0,i(30758).lazy)(async()=>{const{TracklistTransitionRow:e}=await Promise.all([i.e(1015),i.e(9851)]).then(i.bind(i,29387));return{default:e}})}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map