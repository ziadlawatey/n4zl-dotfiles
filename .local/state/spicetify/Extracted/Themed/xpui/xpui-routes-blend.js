"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[42],{9930:(t,e,n)=>{n.d(e,{Ay:()=>s});const i=t=>{window.location.href=t};let o=i;const a=()=>window.location.href;let r=a;const s=()=>{const t=r();return o(`https://accounts.spotify.com/login?continue=${encodeURIComponent(t)}`),null}},22748:(t,e,n)=>{n.d(e,{OL:()=>s,VE:()=>i,ev:()=>a,rg:()=>r,xg:()=>o});const i="blend-deleted-container",o="blend-two-user-container",a="blend-multi-user-container",r="blend-full-container",s="blend-cta-button"},29296:(t,e,n)=>{n.r(e),n.d(e,{default:()=>_});var i=n(30758),o=n(62411),a=n(55337),r=n(54091),s=n(29947),l=n(82146),c=n(9930),d=n(73282),u=n(86292),h=n(92524),p=n(51629),b=n(12586),m=n(55517),g=n(26887),x=n(76392),E=n(86070);const v={page_type:d.pd.PENDING_INVITATION,get title(){return r.Ru.get("web-player.blend.group-invite.header")},get subtitle(){return r.Ru.get("web-player.blend.duo-invite.description")},get button_text(){return r.Ru.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},_=()=>{const{spec:t,logger:e}=(0,m.$)(a.f,{}),n=(0,h.y)(t,e),{ref:d,breakpoint:_}=(0,u.G)(),{user:y}=(0,o.d4)(p.Ht),A=y?.uri?(0,g.v)(y?.uri):"",f=(t=>({...v,members:[t],footnote:r.Ru.get("web-player.blend.group-invite.warning")}))({name:y?.display_name||"",username:A,image_url:(0,x.g)(y?.images)?.url||null,hash:""});return y?(0,E.jsxs)(i.Suspense,{fallback:null,children:[(0,E.jsx)(s.Q,{children:r.Ru.get("web-player.blend.invite.page-title")}),(0,E.jsx)(b.o.Provider,{value:_,children:(0,E.jsx)(l.d,{invitation:f,callToActionClicked:n,breakpointEltRef:d})})]}):(0,E.jsx)(c.Ay,{})}},33531:(t,e,n)=>{n.d(e,{O:()=>p});var i=n(73136),o=n(78717),a=n(22748),r=n(58760),s=n(12586),l=n(96166),c=n(86070);const d={[r.E.MEDIUM]:"titleMedium",[r.E.LARGE]:"titleMedium",[r.E.XLARGE]:"headlineMedium"},u={[r.E.LARGE]:"bodyMedium",[r.E.XLARGE]:"bodyMediumBold"},h={[r.E.LARGE]:"bodySmall",[r.E.XLARGE]:"bodySmall"},p=({title:t,subtitle:e,body:n,footnote:r,buttonText:p,callToActionClicked:b})=>{const m=(0,s.y)(),g=m&&d[m]||"titleSmall",x=m&&u[m]||"bodySmall",E=m&&h[m]||"marginal";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.E,{as:"h1",variant:g,semanticColor:"textBase",className:l.A.title,children:t}),(0,c.jsx)(o.E,{as:"h2",variant:x,semanticColor:"textSubdued",className:l.A.subtitle,children:e}),n,b&&(0,c.jsx)(i.$,{className:l.A.button,colorSet:"invertedLight",onClick:b,"data-testid":a.OL,children:p}),r&&(0,c.jsx)(o.E,{as:"p",variant:E,semanticColor:"textSubdued",className:l.A.note,children:r})]})}},35648:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Q});var i=n(30758),o=n(62411),a=n(85387),r=n(47760),s=n(55337),l=n(27360),c=n(54091),d=n(80128),u=n(90814),h=n(33531),p=n(22748),b=n(96166),m=n(86070);const g=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>(0,m.jsxs)("div",{className:b.A.container,"data-testid":p.rg,ref:n,children:[(0,m.jsx)(u.u,{size:"xxxlarge"}),(0,m.jsx)(h.O,{title:t.title,subtitle:t.subtitle,buttonText:t.button_text,footnote:null,callToActionClicked:e})]});var x=n(29947),E=n(97500),v=n.n(E),_=n(78717),y=n(57055),A=n(82898),f=n(9092),w=n(76826);const j="tJlu8JnLJNua56RWOkTC",N="QMSlB5rqwTf22mk5ZvT9",R="bZbHByHJ1gNdOHkrXhKK",L="LMWxZ5DbYv1IFNQKbIP5",T="VAQ9pYsaAvFpxEbeK2Tq",I="ba286Upt_xmpQn1OzeHL",C=({uri:t,imageUrl:e,name:n})=>(0,m.jsx)("li",{children:(0,m.jsx)(A.h,{menu:(0,m.jsx)(f.B,{uri:t}),children:(0,m.jsx)(w.N,{to:t,children:(0,m.jsxs)("div",{className:L,children:[(0,m.jsx)(y.e,{images:[{url:e,width:null,height:null}],label:n,width:32,userIconSize:"medium",className:T}),(0,m.jsx)(_.E,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:n})]})})})}),k=({members:t,headingText:e,className:n})=>(0,m.jsxs)("div",{className:v()(j,n),children:[(0,m.jsx)("div",{children:(0,m.jsx)(_.E,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:N,children:e})}),(0,m.jsx)("ul",{className:R,children:t&&t.map(t=>(0,m.jsx)(C,{imageUrl:t.image_url||"",name:t.name,uri:(0,l.Qjr)(t.username).toURI()},t.username))}),(0,m.jsx)("div",{className:I})]}),D=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>{const i=t.members||[],o=(0,m.jsx)("div",{className:b.A.userListContainer,"data-testid":p.ev,children:(0,m.jsx)(k,{className:b.A.userList,headingText:t.members_title,members:i})});return(0,m.jsxs)("div",{className:b.A.container,ref:n,children:[(0,m.jsx)(x.Q,{children:c.Ru.get("blend.join.title")}),(0,m.jsx)(h.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,body:o,buttonText:t.button_text,callToActionClicked:e})]})};var M=n(82146),O=n(73282),V=n(86292),S=n(92524),B=n(24189),P=n(58248),Y=n(96022);var J=n(12586),U=n(45167),G=n(55517);const F=({invitationId:t})=>{const e=(0,P.g)(),{data:n,error:o,loading:a}=(0,U.Z)(O.YW,[t]),{spec:u,logger:x}=(0,G.$)(s.f,{}),E=(0,S.y)(u,x),v=function(t,e,n){const{enqueueSnackbar:i}=(0,B.d)(),o=(0,Y.A)(),a=(0,P.g)();return async()=>{try{const e=await(0,O.OE)(o,t),n=(0,l.o_h)(e?.body.playlist_uri).toURLPath(!0);if(!n)throw new Error("unable to join");a(n,{replace:!0})}catch{i(c.Ru.get("error.request-playlist-failure"))}if(e&&n){const t=e.joinButtonFactory().hitCreatePlaylist();n.logInteraction(t)}}}(t,u,x),{ref:_,breakpoint:y}=(0,V.G)();(0,i.useEffect)(()=>{if(n?.body?.page_type===O.pd.ALREADY_JOINED){const t=(0,l.o_h)(n?.body.playlist_uri)?.toURLPath(!0);t&&e(t,{replace:!0})}},[n?.body?.page_type,n?.body?.playlist_uri,e]);const A=null===n||!n.body;if(A||a||o)return(0,m.jsx)(d.LoadingPage,{timeoutInMs:1e3,hasError:!!o||!a&&A,errorMessage:c.Ru.get("error.generic")});switch(n?.body.page_type){case O.pd.DELETED:return(0,m.jsx)(J.o.Provider,{value:y,children:(0,m.jsxs)("div",{className:b.A.container,ref:_,"data-testid":p.VE,children:[(0,m.jsx)(r.x,{size:"xxxlarge"}),(0,m.jsx)(h.O,{title:n.body.title,subtitle:n.body.subtitle,buttonText:n.body.button_text,footnote:n.body.footnote,callToActionClicked:E})]})});case O.pd.ALREADY_JOINED:return(0,m.jsx)(d.LoadingPage,{hasError:!1,errorMessage:c.Ru.get("error.request-playlist-failure")});case O.pd.READY_TO_JOIN_EMPTY_BLEND:return(0,m.jsx)(J.o.Provider,{value:y,children:(0,m.jsx)(M.d,{invitation:n.body,breakpointEltRef:_,callToActionClicked:v})});case O.pd.READY_TO_JOIN_ALREADY_CREATED_BLEND:return(0,m.jsx)(J.o.Provider,{value:y,children:(0,m.jsx)(D,{invitation:n.body,callToActionClicked:v,breakpointEltRef:_})});case O.pd.MAX_MEMBERS:return(0,m.jsx)(J.o.Provider,{value:y,children:(0,m.jsx)(g,{invitation:n.body,callToActionClicked:E,breakpointEltRef:_})});case O.pd.PENDING_INVITATION:return(0,m.jsx)(J.o.Provider,{value:y,children:(0,m.jsx)(M.d,{invitation:n.body,callToActionClicked:E,breakpointEltRef:_})});default:return(0,m.jsx)(d.LoadingPage,{timeoutInMs:1e3,hasError:!0,errorMessage:c.Ru.get("error.generic")})}};var H=n(9930),z=n(51629);const q=({invitationId:t})=>{const{user:e}=(0,o.d4)(z.Ht);return e?(0,m.jsx)(i.Suspense,{fallback:null,children:(0,m.jsx)(F,{invitationId:t})}):(0,m.jsx)(H.Ay,{})},Q=(0,i.memo)(()=>{const{invitationId:t=""}=(0,a.g)();return(0,m.jsx)(q,{invitationId:t})})},55337:(t,e,n)=>{n.d(e,{f:()=>l});var i=n(31143);const o="music",a="1.0.0",r="default",s="17.0.0";function l(t){return new c(t)}class c{constructor(t){this.specType=i.a.ROOT,this._path=[{name:"desktop-blend-invitation"}]}inviteButtonFactory(){return new c.InviteButtonEventFactory({path:this._path})}joinButtonFactory(){return new c.JoinButtonEventFactory({path:this._path})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[r,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[a,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}}!function(t){t.InviteButtonEventFactory=class{constructor({path:t,data:e}){this._path=t.concat({name:"invite_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[r,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[a,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitCopyToClipboard(){return{actionName:"copy_to_clipboard",actionVersion:1,app:o,generatorVersion:s,interactionType:"hit",specificationMode:r,specificationVersion:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}impression(){return{app:o,generatorVersion:s,specificationVersion:a,specificationMode:r,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(c||(c={})),function(t){t.JoinButtonEventFactory=class{constructor({path:t,data:e}){this._path=t.concat({name:"join_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[r,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[a,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitCreatePlaylist(){return{actionName:"create_playlist",actionVersion:1,app:o,generatorVersion:s,interactionType:"hit",specificationMode:r,specificationVersion:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}impression(){return{app:o,generatorVersion:s,specificationVersion:a,specificationMode:r,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(c||(c={}))},73282:(t,e,n)=>{n.d(e,{B6:()=>s,OE:()=>r,YW:()=>a,pd:()=>o});var i=n(38895);let o=function(t){return t.PENDING_INVITATION="PENDING_INVITATION",t.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",t.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",t.MAX_MEMBERS="MAX_MEMBERS",t.ALREADY_JOINED="ALREADY_JOINED",t.DELETED="DELETED",t}({});const a=(t,e)=>t.build().withHost(i.t2).withPath(`/v3/view-invitation/${encodeURIComponent(e)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(t.locale).send(),r=(t,e)=>t.build().withHost(i.t2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(e)}`).withEndpointIdentifier("join/{invitationId}").send(),s=t=>t.build().withHost(i.t2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},82146:(t,e,n)=>{n.d(e,{d:()=>_});var i=n(97500),o=n.n(i),a=n(54091),r=n(57055),s=n(29947),l=n(33531),c=n(22748);const d="PmmRM54q8vgeeCINowWY",u="dwlPbjFJu24QWLBH3Lqg";var h=n(86070);const p=t=>(0,h.jsx)("div",{className:d,children:(0,h.jsx)("div",{className:u,children:(0,h.jsx)("svg",{width:t.iconSize,height:t.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var b=n(58760),m=n(12586),g=n(96166);const x={name:"",username:"",image_url:null,hash:""},E={[b.E.MEDIUM]:164,[b.E.LARGE]:164,[b.E.XLARGE]:270},v=(t,e)=>(0,h.jsx)(r.e,{label:a.Ru.get("web-player.blend.invite.button-title"),images:[],width:t,userIconSize:"xxxlarge",customPlaceholder:(0,h.jsx)(p,{iconSize:e}),piled:!0}),_=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>{const i=!!t.members?.length,d=i&&t.members?.[0]||t.recipient||x,u=i&&t.recipient||null,p=(0,m.y)(),b=p&&E[p]||128,_=Math.round(.475*b);return(0,h.jsxs)("div",{className:o()(g.A.container,g.A.TwoUsers),"data-testid":c.xg,ref:n,children:[(0,h.jsx)(s.Q,{children:a.Ru.get("blend.invite.page-title")}),(0,h.jsxs)("div",{className:g.A.facepile,children:[(0,h.jsx)(r.e,{label:d.name,images:[{url:d.image_url??"",width:b,height:b}],width:b,userIconSize:"xxxlarge"}),u?(0,h.jsx)(r.e,{label:u.name,images:[{url:u.image_url??"",width:b,height:b}],width:b,userIconSize:"xxxlarge",piled:!0}):v(b,_)]}),(0,h.jsx)(l.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,buttonText:t.button_text,callToActionClicked:e})]})}},86292:(t,e,n)=>{n.d(e,{G:()=>a});var i=n(58760),o=n(77639);const a=()=>(0,o.x)({[i.E.SMALL]:536,[i.E.MEDIUM]:792,[i.E.LARGE]:1048,[i.E.XLARGE]:1688})},92524:(t,e,n)=>{n.d(e,{y:()=>u});var i=n(30758),o=n(79877),a=n(62411),r=n(54091),s=n(73282),l=n(51629),c=n(96022),d=n(21090);function u(t,e){const{user:n}=(0,a.d4)(l.Ht),{enqueueSnackbar:u}=(0,o.dh)(),h=(0,c.A)(),p=(0,i.useCallback)(async()=>{const t=await(0,s.B6)(h),e=t.body?.invite;if(!e)throw new Error("unable to generate invite link");return n?.display_name?r.Ru.get("blend.invite.body-with-name",n.display_name,t.body?.invite):r.Ru.get("blend.invite.body-without-name",t.body?.invite)},[n?.display_name,h]);return async()=>{try{await(0,d.l)(p()),u(r.Ru.get("feedback.link-copied"))}catch{u(r.Ru.get("error.generic"))}if(t&&e){const n=t.inviteButtonFactory().hitCopyToClipboard();e.logInteraction(n)}}}},96166:(t,e,n)=>{n.d(e,{A:()=>i});const i={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"eViDFHLyqFszEHo7btkk",TwoUsers:"klV560dS0gtlU6FTensy",subtitle:"vT9qDfp7MLcCDRlUr3sR",facepile:"kh9dZ8v3rh4cUDAA10dS",title:"QtMSDgZnEAXJ_IJxx4r6",button:"Yxb5dbH2njn46jejCwUw",userList:"KdND50NIDHvTakgqVSeg",userListContainer:"dJFOxjlEQ6gknlpCALI7",note:"cmiLo0YI13K32kxxgTuA"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map