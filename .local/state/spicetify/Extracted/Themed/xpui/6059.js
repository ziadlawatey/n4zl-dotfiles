"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6059],{2050:(e,t,a)=>{a.d(t,{y:()=>g});var r=a(30758),n=a(97500),i=a.n(n),s=a(13140),o=a(2710),l=a(95098);const c="OCd0CcYAKK2XCXGMzWgV",d="mZtLzXVf0mrEjvh5G9L1";var u=a(86070);const m=(0,r.memo)(({isLoading:e})=>{const t=(0,o.h)("shimmer");return(0,u.jsx)("div",{className:l.A.imageContainer,children:(0,u.jsx)("div",{ref:t,className:i()(l.A.imageWrapper,{[d]:e})})})}),p=(0,r.memo)(({isLoading:e})=>(0,u.jsx)("div",{className:i()(l.A.shortcut,c),"data-testid":"skeleton-shortcut",children:(0,u.jsxs)("div",{className:l.A.draggable,children:[(0,u.jsx)(m,{isLoading:e}),(0,u.jsx)("div",{className:i()(l.A.main,l.A.skeletonShortcut),children:(0,u.jsx)(s.Y,{as:"p",variant:"bodyMediumBold",className:l.A.name,isLoading:e})})]})})),g=(0,r.memo)(({withTitle:e})=>(0,u.jsxs)("section",{className:l.A.shortcuts,children:[e&&(0,u.jsx)("div",{className:l.A.title,children:(0,u.jsx)(s.Y,{as:"h2",variant:"titleMedium",charCount:25,isLoading:!0})}),(0,u.jsx)("div",{className:i()(l.A.grid,{[l.A.gridOf4Columns]:true}),children:[...new Array(8).keys()].slice(0,8).map((e,t)=>(0,u.jsx)(p,{isLoading:!0},t))})]}))},6525:(e,t,a)=>{a.d(t,{b:()=>s});var r=a(82388),n=a(97533),i=a(86070);const s=()=>(0,i.jsx)("div",{className:n.A.coverContainer,children:(0,i.jsx)(r.P,{iconSize:"xxxlarge",className:n.A.coverIcon})})},13565:(e,t,a)=>{a.d(t,{Cu:()=>u,J6:()=>o,Tz:()=>c,Z8:()=>m,cC:()=>l,cM:()=>i});var r=a(9472),n=a.n(r);let i=function(e){return e[e.CONTENT_TYPE_UNSPECIFIED=0]="CONTENT_TYPE_UNSPECIFIED",e[e.CONTENT_TYPE_MUSIC=1]="CONTENT_TYPE_MUSIC",e[e.CONTENT_TYPE_PODCASTS=2]="CONTENT_TYPE_PODCASTS",e[e.CONTENT_TYPE_AUDIOBOOKS=3]="CONTENT_TYPE_AUDIOBOOKS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function s(e){switch(e){case 0:case"CONTENT_TYPE_UNSPECIFIED":return i.CONTENT_TYPE_UNSPECIFIED;case 1:case"CONTENT_TYPE_MUSIC":return i.CONTENT_TYPE_MUSIC;case 2:case"CONTENT_TYPE_PODCASTS":return i.CONTENT_TYPE_PODCASTS;case 3:case"CONTENT_TYPE_AUDIOBOOKS":return i.CONTENT_TYPE_AUDIOBOOKS;default:return i.UNRECOGNIZED}}function o(e){switch(e){case i.CONTENT_TYPE_UNSPECIFIED:return"CONTENT_TYPE_UNSPECIFIED";case i.CONTENT_TYPE_MUSIC:return"CONTENT_TYPE_MUSIC";case i.CONTENT_TYPE_PODCASTS:return"CONTENT_TYPE_PODCASTS";case i.CONTENT_TYPE_AUDIOBOOKS:return"CONTENT_TYPE_AUDIOBOOKS";case i.UNRECOGNIZED:default:return"UNRECOGNIZED"}}let l=function(e){return e[e.RECENT_TYPE_UNSPECIFIED=0]="RECENT_TYPE_UNSPECIFIED",e[e.RECENT_TYPE_SAVED=1]="RECENT_TYPE_SAVED",e[e.RECENT_TYPE_PLAYED=2]="RECENT_TYPE_PLAYED",e[e.RECENT_TYPE_SHARED=3]="RECENT_TYPE_SHARED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function c(e){switch(e){case l.RECENT_TYPE_UNSPECIFIED:return"RECENT_TYPE_UNSPECIFIED";case l.RECENT_TYPE_SAVED:return"RECENT_TYPE_SAVED";case l.RECENT_TYPE_PLAYED:return"RECENT_TYPE_PLAYED";case l.RECENT_TYPE_SHARED:return"RECENT_TYPE_SHARED";case l.UNRECOGNIZED:default:return"UNRECOGNIZED"}}const d={encode(e,t=n().Writer.create()){0!==e.contentType&&t.uint32(8).int32(e.contentType),t.uint32(18).fork();for(const a of e.subFilters)t.int32(a);return t.ldelim(),t},decode(e,t){const a=e instanceof n().Reader?e:n().Reader.create(e);let r=void 0===t?a.len:a.pos+t;const i={contentType:0,subFilters:[]};for(;a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:if(8!==e)break;i.contentType=a.int32();continue;case 2:if(16===e){i.subFilters.push(a.int32());continue}if(18===e){const e=a.uint32()+a.pos;for(;a.pos<e;)i.subFilters.push(a.int32());continue}}if(4==(7&e)||0===e)break;a.skipType(7&e)}return i},fromJSON:e=>({contentType:p(e.contentType)?s(e.contentType):0,subFilters:globalThis.Array.isArray(e?.subFilters)?e.subFilters.map(e=>function(e){switch(e){case 0:case"RECENT_TYPE_UNSPECIFIED":return l.RECENT_TYPE_UNSPECIFIED;case 1:case"RECENT_TYPE_SAVED":return l.RECENT_TYPE_SAVED;case 2:case"RECENT_TYPE_PLAYED":return l.RECENT_TYPE_PLAYED;case 3:case"RECENT_TYPE_SHARED":return l.RECENT_TYPE_SHARED;default:return l.UNRECOGNIZED}}(e)):[]}),toJSON(e){const t={};return 0!==e.contentType&&(t.contentType=o(e.contentType)),e.subFilters?.length&&(t.subFilters=e.subFilters.map(e=>c(e))),t},create:e=>d.fromPartial(e??{}),fromPartial(e){const t={contentType:0,subFilters:[]};return t.contentType=e.contentType??0,t.subFilters=e.subFilters?.map(e=>e)||[],t}};const u={encode(e,t=n().Writer.create()){for(const a of e.filters)d.encode(a,t.uint32(10).fork()).ldelim();return t},decode(e,t){const a=e instanceof n().Reader?e:n().Reader.create(e);let r=void 0===t?a.len:a.pos+t;const i={filters:[]};for(;a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:if(10!==e)break;i.filters.push(d.decode(a,a.uint32()));continue}if(4==(7&e)||0===e)break;a.skipType(7&e)}return i},fromJSON:e=>({filters:globalThis.Array.isArray(e?.filters)?e.filters.map(e=>d.fromJSON(e)):[]}),toJSON(e){const t={};return e.filters?.length&&(t.filters=e.filters.map(e=>d.toJSON(e))),t},create:e=>u.fromPartial(e??{}),fromPartial(e){const t={filters:[]};return t.filters=e.filters?.map(e=>d.fromPartial(e))||[],t}};const m={encode(e,t=n().Writer.create()){0!==e.itemsCount&&t.uint32(8).int32(e.itemsCount);for(const a of e.entityUris)t.uint32(18).string(a);for(const a of e.userUris)t.uint32(26).string(a);return t},decode(e,t){const a=e instanceof n().Reader?e:n().Reader.create(e);let r=void 0===t?a.len:a.pos+t;const i={itemsCount:0,entityUris:[],userUris:[]};for(;a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:if(8!==e)break;i.itemsCount=a.int32();continue;case 2:if(18!==e)break;i.entityUris.push(a.string());continue;case 3:if(26!==e)break;i.userUris.push(a.string());continue}if(4==(7&e)||0===e)break;a.skipType(7&e)}return i},fromJSON:e=>({itemsCount:p(e.itemsCount)?globalThis.Number(e.itemsCount):0,entityUris:globalThis.Array.isArray(e?.entityUris)?e.entityUris.map(e=>globalThis.String(e)):[],userUris:globalThis.Array.isArray(e?.userUris)?e.userUris.map(e=>globalThis.String(e)):[]}),toJSON(e){const t={};return 0!==e.itemsCount&&(t.itemsCount=Math.round(e.itemsCount)),e.entityUris?.length&&(t.entityUris=e.entityUris),e.userUris?.length&&(t.userUris=e.userUris),t},create:e=>m.fromPartial(e??{}),fromPartial(e){const t={itemsCount:0,entityUris:[],userUris:[]};return t.itemsCount=e.itemsCount??0,t.entityUris=e.entityUris?.map(e=>e)||[],t.userUris=e.userUris?.map(e=>e)||[],t}};function p(e){return null!=e}},17541:(e,t,a)=>{a.d(t,{Q:()=>wa});var r=a(30758),n=a(91198),i=a(80188),s=a(51249),o=a(97500),l=a.n(o),c=a(33039),d=a(8335),u=a(8413),m=a(32432),p=(a(3666),a(54091)),g=a(62411),h=a(15273),y=a(41751),v=a(22141),f=a(64300),x=a(74690),C=a(48564),b=a(1331),E=a(98649),P=a(59867);let T=function(e){return e.Clicked="event_clicked",e.Viewed="event_viewed",e}({}),I=function(e){return e.Card="card",e.Heart="heart",e.Play="play",e.ThreeDots="three_dots",e}({});const N=e=>{const t=(0,P.vh)(),{homePromotionsTrackingMetadata:a}=(0,E.r)(),{id:n,creativeId:i,lineitemId:s,playbackId:o,productName:l}=a?.[e]??{};return(0,r.useCallback)(({reason:e,type:a=T.Clicked})=>{const r=(0,b.A)({ad_id:n,creative_id:i,event:a,event_reason:e,lineitem_id:s,product_name:l,slot:l}),c={...r,data:{...r.data,playback_id:o}};t.send(c)},[t,n,i,s,o,l])};var j=a(45066);const _="VDdRNp8L7AJU7uZ_1KMA",k="If__FiKLaACl8JOxEUq_",S="wRV1YHlnd_NCma3tX6qV",A="yJfsvxIbL6zpQwtmSoNy",R="X07EwAwIakaMT3wOJaDB",w="yPGkL5pYK4dsohNOp8Qj",L="p8JZznCqGSCn0cC9OOyg",D="qknoSGCKWfwOoPcR4nhY",U="aTVZMVMK9arksSOFgd3F",O="HEtWjhutsG5UNhpfJg74",M="Ifzu9XwX6CpVPlv7dWiN",F="LX3kXVmzTCGL7aZsOruC",B="mDLIgbsXGowFLZ_toUua",H="FXJ9SkvBniZFhiuA8l8x";var V=a(86070);const Y=({onNotInterested:e,target:t})=>{const[a,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),o=N(t),c=(0,g.d4)(y.uW)||!!{}.STORYBOOK,d=(0,r.useMemo)(()=>l()(w,{[S]:a,[A]:i}),[a,i]);return c&&(0,V.jsx)(f.b,{menu:(0,V.jsx)(x.W,{children:(0,V.jsx)(C.D,{className:l()(R,j.A.menuItemButton),leadingIcon:(0,V.jsx)(h.P,{semanticColor:"textSubdued",size:"small"}),onClick:e,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),role:"menuitem",children:p.Ru.get("promotions.context-menu.not-interested")})}),onHide:()=>s(!1),onShow:()=>s(!0),children:(0,V.jsx)(v.e,{size:v.M.xs,label:p.Ru.get("show_more"),className:d,onClick:()=>o({reason:I.ThreeDots}),placement:"bottom"})})};var z=a(54320);const G=e=>{(new Image).src=e},W=e=>{const{trackingMetadata:t}=(e=>{const{homePromotionsTrackingMetadata:t,responseIds:a}=(0,E.r)(),n=(0,r.useMemo)(()=>{if(void 0!==t&&e in t){const a=t[e];return(a?.events??[]).reduce((e,t)=>(e[t.event]=t.urls,e),{})}},[t,e]);return{responseId:a?.["/home"]?.continuum,trackingMetadata:n}})(e);return{triggerClickedEvent:(0,r.useCallback)((e=!1)=>{e||t?.clicked?.forEach(e=>{G(e)})},[t]),triggerImpressionEvent:(0,r.useCallback)(()=>{t?.viewed?.forEach(e=>G(e))},[t])}};var K=a(74523),Z=a(43114);var q=a(85387),$=a(27360);var J=a(38094),Q=a(98014),X=a(23647),ee=a(38895),te=a(96022);const ae=()=>{const e=(0,te.A)(),t=(0,X.l)();return(0,r.useCallback)(async({uri:a,reason:r="local"})=>Promise.all([e.build().withHost(ee.L1).withMethod("POST").withPath(`feedback/v1/feedback/home-promotion/dislike?uri=${encodeURIComponent(a)}&reason=${r}`).withEndpointIdentifier("feedback/v1/feedback/home-promotion/dislike").withoutMarket().send(),t.add("notinterested",[a])]),[e,t])};var re=a(59861);const ne=Q.zMY().catch(!1),ie=e=>(0,re.x)(`home-native-ads-not-interested:${e}`,ne);var se=a(67885),oe=a(49060);var le=a(60257),ce=a(86771),de=a(76392);const ue=["PLAY","ADD_TO_LIBRARY","NOT_INTERESTED"],me=({nativeAd:e,spec:t})=>{const{albumType:a,artists:n,coverArt:i,name:s,uri:o}=e.content.data,l=N(o),{triggerImpressionEvent:c}=W(o),g=(0,le.s)(),h=(0,r.useMemo)(()=>({logger:g,spec:t.nativeAdsItemFactory(),target:o}),[g,t,o]),{AddToLibraryIcon:y,handleAddToLibrary:v,isAddedToLibrary:f}=(({logger:e,spec:t,target:a})=>{const n=N(a),{triggerClickedEvent:i}=W(a),[s,o]=(0,Z.A)(a),{Icon:l,setState:c}=(0,K.Q)(s?z.t.CURATED:z.t.UNCURATED,(0,z.O)());return{AddToLibraryIcon:l,handleAddToLibrary:(0,r.useCallback)(()=>{const r=t.saveButtonFactory();a&&(i(s),e.logInteraction(s?r.hitRemoveLike({itemNoLongerLiked:a}):r.hitLike({itemToBeLiked:a})),c(s?z.t.UNCURATED:z.t.CURATED),n({reason:I.Heart}),o(!s))},[s,n,e,c,o,t,a,i]),isAddedToLibrary:s}})(h),{destination:x,handleNavigation:C}=(({logger:e,spec:t,target:a})=>{const n=N(a),{triggerClickedEvent:i}=W(a),s=(0,q.Zp)(),o=(0,r.useMemo)(()=>(0,$.o_h)(a)?.toURLPath()??"",[a]),l=(0,r.useCallback)((a,r)=>{r?.preventDefault(),i(),e.logInteraction(t.hitUiNavigate({destination:o})),n({reason:I.Card}),s(o)},[o,n,e,s,t,i]);return{destination:o,handleNavigation:l}})(h),{handleNotInterested:b}=(({logger:e,spec:t,target:a})=>{const[n,i]=ie(a),s=ae(),o=(0,r.useCallback)(()=>{e.logInteraction(t.notInterestedButtonFactory().hitDislike({itemToBeDisliked:a})),a&&i(!0);try{s({uri:a})}catch(e){(0,J.Cp)(e,{level:"warning"})}},[e,s,i,t,a]);return{isNotInterested:!!a&&n,handleNotInterested:o}})(h),{handlePlay:E,isPlaying:P}=(({logger:e,spec:t,target:a})=>{const n=N(a),{triggerClickedEvent:i}=W(a),{isActive:s,isPlaying:o,togglePlay:l}=(0,oe.P)({uri:a},{featureIdentifier:"home_native_ad"});return{handlePlay:(0,r.useCallback)(()=>{i(o),n({reason:I.Play});const r=(0,se.$I)({isActive:s,isPlaying:o,logger:e,spec:t.playButtonFactory(),uri:a});l({loggingParams:r})},[s,o,n,e,t,a,l,i]),isPlaying:o}})(h),j=(0,r.useMemo)(()=>ue.map(e=>({target:o,type:e})),[o]),_=(0,r.useMemo)(()=>(0,de.g)(i?.sources)?.url,[i]),S=(0,r.useMemo)(()=>i?.sources.map(({url:e,width:t})=>`${e} ${t}w`).join(", "),[i]),A=(0,r.useMemo)(()=>`${(0,ce.C)(a)} • ${n.items.map(({profile:e})=>e.name).join(p.Ru.getSeparator())}`,[a,n]),{ref:R}=(0,d.Wx)({onChange:e=>{e&&(c(),g.logImpression(t.impression()),l({type:T.Viewed}))},triggerOnce:!0});return(0,V.jsx)(m.MX,{actions:j,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:y,body:A,cardRef:R,className:k,contextMenu:(0,V.jsx)(Y,{onNotInterested:b,target:o}),href:x,isExternalLinkTargetFn:()=>!1,isInLibrary:f,isPlaying:P,mediaSlotImageFallbackIcon:u.I,mediaSlotImageSrc:_,mediaSlotImageSrcSet:S,onAddToLibrary:v,onNavigate:C,onPlay:E,onShare:()=>{},pauseButtonLabel:p.Ru.get("playlist.a11y.pause",s),playButtonLabel:p.Ru.get("playlist.a11y.play",s),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:"",title:s})};var pe=a(35394),ge=a(59039),he=a(69316),ye=a(30920),ve=a(37528);const fe="sponsored-recommendation-frame",xe=({isOpen:e,onClose:t})=>(0,V.jsxs)(ve.A,{animated:!0,animation:{modal:{base:U,afterOpen:O,beforeClose:M}},className:F,isOpen:e,onRequestClose:t,children:[(0,V.jsx)("iframe",{className:B,"data-testid":fe,id:fe,name:fe,sandbox:"allow-scripts allow-same-origin",src:"https://sponsored-recommendations.spotify.com/desktop",title:p.Ru.get("context-menu.about-recommendations")}),(0,V.jsx)(pe.H,{"aria-label":p.Ru.get("close_button_action"),className:H,iconOnly:ye.M,onClick:t,semanticColor:"textBase",size:"medium"})]}),Ce=({spec:e,subtitle:t,title:a})=>{const n=(0,le.s)(),[i,s]=(0,r.useState)(!1),o=(0,g.d4)(y.uW)||!!{}.STORYBOOK,l=(0,r.useCallback)(()=>{n.logInteraction(e.nativeAdsShelfHeaderFactory().sponsoredRecommendationToolTipFactory().hitShowTooltip()),s(!0)},[n,s,e]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(he.k,{title:a?.transformedLabel??"",subtitle:(0,V.jsxs)("span",{className:L,children:[t?.transformedLabel??"",o&&(0,V.jsx)(pe.H,{"aria-label":p.Ru.get("context-menu.about-recommendations"),className:D,"data-testid":"sponsored-recommendation-modal-trigger",iconOnly:ge.N,onClick:l,semanticColor:"textSubdued",size:"small"})]})}),(0,V.jsx)(xe,{isOpen:i,onClose:()=>s(!1)})]})};var be=a(91645),Ee=a(22094);const Pe=({nativeAd:e,section:t,spec:a})=>{const[r]=ie(e.content.data.uri);return!r&&(0,V.jsxs)("section",{className:l()(_,Ee.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(Ce,{spec:a,...t.data}),(0,V.jsx)(me,{nativeAd:e,spec:a})]})},Te=(0,s.mc)(({index:e,section:t})=>{const a=(0,r.useMemo)(()=>t.sectionItems.items.find(e=>"AlbumResponseWrapper"===e.content?.__typename&&"Album"===e.content.data?.__typename),[t]),{spec:n}=(0,be.r)(c.U,{data:{uri:a?.content.data.uri??"",position:e,reason:t.data.title?.transformedLabel??"",identifier:t.uri}});return a&&(0,V.jsx)(Pe,{nativeAd:a,section:t,spec:n})},{name:"HomeNativeAdsShelf"});var Ie=a(79890),Ne=a(35746),je=a(82898),_e=a(76855),ke=a(96436),Se=a(43157),Ae=a(13057),Re=a(82571),we=a(72045);const Le=e=>{let t,a,r,n;const i=[];return e.forEach(e=>{e.type!==we.j3.Navigate&&e.target&&e.type&&(e.type===we.j3.Play&&(t=e.target),e.type===we.j3.AddToLibrary&&(a=e.target),e.type===we.j3.Share&&(r=e.target),e.type===we.j3.NotInterested&&(n=e.target),i.push({target:e.target,type:e.type}))}),{iconActions:i,notInterestedUri:n,copyUri:r,libraryUri:a,playUri:t}},De=e=>{switch(e){case we.r7.Album:return u.I;case we.r7.Artist:return _e.r;case we.r7.Playlist:return ke.e;case we.r7.Track:return Se.v;case we.r7.Video:return Ae.B;default:return Re.d}},Ue=e=>{switch(e){case we.cf.TextAnnouncement:return"textAnnouncement";case we.cf.TextBrightAccent:return"textBrightAccent";case we.cf.TextNegative:return"textNegative";case we.cf.TextPositive:return"textPositive";case we.cf.TextSubdued:return"textSubdued";case we.cf.TextWarning:return"textWarning";default:return"textBase"}},Oe=e=>{if(!e||!("__typename"in e)||"ImageV2"!==e.__typename)return;const t=[];return e.sources.forEach(e=>{t.push(`${e.url} ${e.maxWidth}w`)}),{src:e.imageId,srcSet:t.length>0?t.join(", "):void 0}},Me=({adEventLogger:e,libraryUri:t,triggerClickedEvent:a,spec:n})=>{const i=(0,le.s)(),[s,o]=(0,Z.A)(t??""),{setState:l,Icon:c}=(0,K.Q)(s?z.t.CURATED:z.t.UNCURATED,(0,z.O)());return{MaybeAnimatedIcon:c,isInLibrary:s,handleAddToLibrary:(0,r.useCallback)(()=>{t&&(l(s?z.t.UNCURATED:z.t.CURATED),a(s),e({type:T.Clicked,reason:I.Card}),s?i.logInteraction(n.saveButtonFactory({uri:t}).hitRemoveLike({itemNoLongerLiked:t})):i.logInteraction(n.saveButtonFactory({uri:t}).hitLike({itemToBeLiked:t})),o(!s))},[e,s,t,l,o,n,a,i])}},Fe=({adEventLogger:e,triggerImpressionEvent:t,spec:a})=>{const n=(0,le.s)(),{responseIds:i}=(0,E.r)(),s=i?.["/home"]?.continuum,[o,l]=(0,r.useState)(void 0),{ref:c,inView:u}=(0,d.Wx)({threshold:[1]});return(0,r.useEffect)(()=>{u&&s!==o&&(t(),n.logImpression(a.impression()),e({type:T.Viewed}),l(s))},[u,e,n,a,t,s,o]),{promotionRef:c}};var Be=a(58248);const He=({adEventLogger:e,target:t,triggerClickedEvent:a,spec:n})=>{const i=(0,Be.g)(),{href:s,isExternalTarget:o}=(e=>{const t=(0,$.o_h)(e);return t?{href:t.toURLPath(),isExternalTarget:!1}:URL.canParse(e)&&!new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}})(t),l=(0,le.s)();return{href:s,isExternalTarget:o,handleNavigation:(0,r.useCallback)((t,r)=>{a(),e({type:T.Clicked,reason:I.Card}),l.logInteraction(n.hitUiNavigate({destination:s})),o||(r.preventDefault(),i(s))},[e,s,o,i,n,a,l])}},Ve=(0,r.createContext)({onSetDisliked:()=>{},isDislikedInLocalStorage:!1}),Ye=Q.zMY().catch(!1),ze=({children:e,promotionUri:t})=>{const[a,n]=(0,re.x)(`home-promotion-disliked:${t}`,Ye),i=(0,r.useMemo)(()=>({onSetDisliked:()=>n(!0),isDislikedInLocalStorage:a}),[a,n]);return a?null:(0,V.jsx)(Ve.Provider,{value:i,children:e})},Ge=({notInterestedUri:e,spec:t})=>{const a=(0,le.s)(),{onNotInterested:n}=(e=>{const{onSetDisliked:t,isDislikedInLocalStorage:a}=(0,r.useContext)(Ve),n=ae(),[i,s]=(0,r.useState)(a?"INIT":"SUCCESS");return{isMarkedNotInterested:a||"SUCCESS"===i,onNotInterested:(0,r.useCallback)(async()=>{if(s("PENDING"),e)try{await n({uri:e}),t(!0)}catch(e){s("ERROR")}},[e,n,t])}})(e);return(0,r.useCallback)(()=>{e&&a.logInteraction(t.notInterestedButtonFactory({uri:e}).hitDislike({itemToBeDisliked:e})),n()},[e,n,a,t])},We=({adEventLogger:e,playUri:t,triggerClickedEvent:a,spec:n})=>{const i=(0,le.s)(),{isPlaying:s,togglePlay:o,isActive:l}=(0,oe.P)({uri:t??""},{featureIdentifier:"home_promotion"}),c=(0,r.useCallback)(()=>{if(t){const r=(0,se.$I)({isPlaying:s,isActive:l,spec:n.playButtonFactory({uri:t}),logger:i,uri:t});a(s),e({type:T.Clicked,reason:I.Card}),o({loggingParams:r})}},[e,l,s,t,n,o,a,i]);return{isPlaying:s,isActive:l,handlePlay:c}};var Ke=a(80389);const Ze=({adEventLogger:e,copyUri:t,triggerClickedEvent:a,spec:n})=>{const i=(0,le.s)(),{onCopyLink:s}=(0,Ke.L)({sharingInfo:null,uri:t??""});return(0,r.useCallback)(()=>{t&&(a(),e({type:T.Clicked,reason:I.Card}),i.logInteraction(n.shareButtonFactory({uri:t}).hitCopyToClipboard()),s())},[t,a,e,i,n,s])};var qe=a(67659);const $e="gCmPRsck2PuSFehag1Hr",Je="zAVyqoIgWOaH4BCdXlGb",Qe="XpvrimbdtAOizcddwHbz",Xe=({handleNotInterested:e})=>(0,V.jsx)(f.b,{menu:(0,V.jsx)(x.W,{children:(0,V.jsx)(C.D,{role:"menuitem",leadingIcon:(0,V.jsx)(qe.r,{semanticColor:"textSubdued",size:"small"}),onClick:e,children:p.Ru.get("promotions.context-menu.not-interested")})}),children:(0,V.jsx)(v.e,{size:v.M.xs,label:p.Ru.get("show_more"),className:Qe})});var et=a(37668),tt=a(10817),at=a(7213),rt=a(19397),nt=a(21017);const it=({target:e})=>(0,r.useMemo)(()=>(e=>{switch(((0,$.o_h)(e)||{}).type){case $.NQG.ALBUM:return(0,V.jsx)(et.h,{uri:e});case $.NQG.EPISODE:return(0,V.jsx)(tt.b,{uri:e});case $.NQG.PLAYLIST:case $.NQG.PLAYLIST_V2:return(0,V.jsx)(at.W,{uri:e});case $.NQG.SHOW:return(0,V.jsx)(rt.H,{uri:e});case $.NQG.TRACK:return(0,V.jsx)(nt.P,{uri:e});default:return null}})(e),[e]),st=({promotion:e,spec:t})=>{const a=N(e.uri),{triggerClickedEvent:n,triggerImpressionEvent:i}=W(e.uri),{copyUri:s,iconActions:o,libraryUri:l,playUri:c,notInterestedUri:d}=(0,r.useMemo)(()=>Le(e.actions),[e.actions]),{promotionRef:u}=Fe({adEventLogger:a,triggerImpressionEvent:i,spec:t}),{handlePlay:g,isPlaying:h}=We({playUri:c,adEventLogger:a,triggerClickedEvent:n,spec:t}),{handleAddToLibrary:y,MaybeAnimatedIcon:v,isInLibrary:f}=Me({libraryUri:l,adEventLogger:a,triggerClickedEvent:n,spec:t}),{handleNavigation:x,href:C,isExternalTarget:b}=He({target:e.target,adEventLogger:a,triggerClickedEvent:n,spec:t}),E=Ze({copyUri:s,adEventLogger:a,triggerClickedEvent:n,spec:t}),P=Ge({notInterestedUri:d,spec:t}),T=it({target:e.target});return(0,V.jsx)(je.h,{menu:T,children:(0,V.jsx)(m.MX,{cardRef:u,actions:o,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:v,body:e.bodyTranslation?.transformedLabel,href:C,isExternalLinkTargetFn:()=>b,className:Je,contextMenu:d?(0,V.jsx)(Xe,{handleNotInterested:P}):null,isInLibrary:f,isPlaying:h,mediaSlotImageFallbackIcon:De(e.mediaSlot?.fallbackIcon),mediaSlotImageSrc:Oe(e.mediaSlot?.image?.data)?.src,onAddToLibrary:y,onNavigate:x,onPlay:g,onShare:E,pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e.titleTranslation?.transformedLabel||""),playButtonLabel:p.Ru.get("playlist.a11y.play",e.titleTranslation?.transformedLabel||""),pretitle:e.pretitleTranslation?.transformedLabel,pretitleSemanticColor:Ue(e.pretitleSemanticColor),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("context-menu.copy-generic-link"),subtitle:e.subtitleTranslation?.transformedLabel,title:e.titleTranslation?.transformedLabel})})},ot=({promotion:e,spec:t})=>{const a=it({target:e.target}),n=N(e.uri),{triggerClickedEvent:i,triggerImpressionEvent:s}=W(e.uri),{copyUri:o,iconActions:l,libraryUri:c,playUri:d,notInterestedUri:u}=(0,r.useMemo)(()=>Le(e.actions),[e.actions]),{promotionRef:g}=Fe({adEventLogger:n,triggerImpressionEvent:s,spec:t}),{handlePlay:h,isPlaying:y}=We({playUri:d,adEventLogger:n,triggerClickedEvent:i,spec:t}),{handleAddToLibrary:v,MaybeAnimatedIcon:f,isInLibrary:x}=Me({libraryUri:c,adEventLogger:n,triggerClickedEvent:i,spec:t}),{handleNavigation:C,href:b,isExternalTarget:E}=He({target:e.target,adEventLogger:n,triggerClickedEvent:i,spec:t}),P=Ze({copyUri:o,adEventLogger:n,triggerClickedEvent:i,spec:t}),T=Ge({notInterestedUri:u,spec:t}),I=(e=>{if(e.callToAction&&"NAVIGATE"===e.callToAction.type)return{target:e.callToAction.target||"",type:e.callToAction.type,text:e.callToAction.translatedText?.transformedLabel||"",buttonBackgroundColor:e.callToAction.buttonBackgroundColor?.hex,buttonTextColor:e.callToAction.buttonTextColor?.hex}})(e);return(0,V.jsx)(je.h,{menu:a,children:(0,V.jsx)(m._B,{foregroundColor:e.accentColor?.hex||void 0,cardRef:g,titleStyle:(j=e.posterFontVariant||void 0,j===we.Gf.AdaptiveVariant?m.m7.ADAPTIVE_VARIANT:m.m7.DEFAULT_VARIANT),bodyTextColor:e.bodyTextColor?.hex||void 0,callToAction:I||void 0,actions:l,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:f,body:e.bodyTranslation?.transformedLabel,href:b,isExternalLinkTargetFn:()=>E,hideBackgroundGradient:!!e.gradientOverlayDisabled,contextMenu:u?(0,V.jsx)(Xe,{handleNotInterested:T}):null,isInLibrary:x,isPlaying:y,onAddToLibrary:v,onNavigate:C,onPlay:h,onShare:P,pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e.titleTranslation?.transformedLabel||""),playButtonLabel:p.Ru.get("playlist.a11y.play",e.titleTranslation?.transformedLabel||""),pretitle:e.pretitleTranslation?.transformedLabel,removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),title:e.titleTranslation?.transformedLabel,backgroundImageSrc:Oe(e.background?.image?.data)?.src,titleImageSrc:Oe(e.logo?.image?.data)?.src})});var j};var lt=a(55247),ct=a(44451);const dt=e=>"PromotionResponseWrapper"===e.content?.__typename&&("PromotionDefaultNative"===e.content.data.__typename||"PromotionDefaultPoster"===e.content.data.__typename),ut=(0,s.mc)(({section:e,index:t})=>{const a=e.sectionItems.items.find(dt),{spec:r}=(0,ct.D)(Ie.b,{data:{uri:a?.uri,position:t,reason:"",identifier:e.uri}}),n=a?.content?.data;if(!n)return null;const i=((e,t)=>{const a=(0,$.o_h)(t.target)?t.target:t.uri;switch(t.__typename){case"PromotionDefaultNative":{const r=e.promotionItemFactory({identifier:"default_native",position:0,uri:a});return(0,V.jsx)(st,{promotion:t,spec:r})}case"PromotionDefaultPoster":{const r=e.promotionItemFactory({identifier:"default_poster",position:0,uri:a});return(0,V.jsx)(ot,{promotion:t,spec:r})}default:return null}})(r,n);if(null===i)return null;const s=(0,Ne.wA)(e.data.headerEntity,e.data.title??{transformedLabel:p.Ru.get("promotions.default-section-title")},null);return(0,V.jsx)(ze,{promotionUri:n.uri,children:(0,V.jsx)(lt.r,{spec:r,children:(0,V.jsxs)("section",{className:l()($e,Ee.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(he.k,{...s}),i]})})})},{name:"HomePromotionShelf"});var mt=a(27498),pt=a(21903),gt=a(67588),ht=a(20005),yt=a(54587),vt=a(37883),ft=a(88439),xt=a(62887);const Ct="KvTYQ11401pdYc8vGihY",bt="vF8v99zcm4_zcbj8ijgx",Et=({title:e,pretitle:t,body:a,uri:n,saveTrackUri:i,images:s,spec:o,contextMenu:l,onContextMenu:c,onTouchStart:d,onTouchEnd:u,useVideoLayout:g=!1})=>{const h=(0,le.s)(),y=(0,Be.g)(),v=i??n,f=g?{[vt.W.IS_SINGLE_TRACK_VIDEO_CONTENT]:"true"}:{},[x,C]=(0,Z.A)(v||""),{isPlaying:b,togglePlay:E,isActive:P}=(0,oe.P)({uri:n,metadata:f},{featureIdentifier:"album"}),{onCopyLink:T}=(0,Ke.L)({sharingInfo:null,uri:n}),I=(0,r.useCallback)(()=>{const e=(0,se.$I)({isPlaying:b,isActive:P,spec:o.playButtonFactory(),logger:h,uri:n});E({loggingParams:e})},[o,P,b,h,E,n]),{href:N,isExternalTarget:j}=(e=>{const t=(0,$.o_h)(e);return t?{href:t.toURLPath(),isExternalTarget:!1}:URL.canParse(e)&&new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}})(n),_=(0,r.useCallback)((e,t)=>{h.logInteraction(o.hitUiNavigate({destination:n})),j||(t.preventDefault(),y(N))},[h,o,n,j,y,N]),{setState:k,Icon:S}=(0,K.Q)(x?z.t.CURATED:z.t.UNCURATED,(0,z.O)()),A=(0,r.useCallback)(()=>{k(x?z.t.UNCURATED:z.t.CURATED),h.logInteraction(x?o.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:v}):o.saveButtonFactory().hitLike({itemToBeLiked:v})),C(!x)},[k,x,h,o,v,C]),R=(0,r.useCallback)(()=>{h.logInteraction(o.shareButtonFactory().hitCopyToClipboard()),T()},[o,h,T]),w=(0,ft.n)(o.getAbsoluteLocation(),o);return g?(0,V.jsx)(m._B,{cardRef:w,title:e,href:N,pretitle:t,body:a,isExternalLinkTargetFn:()=>!1,actions:[{target:n,type:"PLAY"},{target:v,type:"ADD_TO_LIBRARY"}],onPlay:I,onAddToLibrary:A,onShare:R,isPlaying:b,isInLibrary:x,onNavigate:_,backgroundImageSrc:(0,xt.h)(s,{desiredSize:640}),playButtonLabel:p.Ru.get("playlist.a11y.play",e),pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),addToLibraryIcon:S,className:bt,onContextMenu:c,onTouchStart:d,onTouchEnd:u,contextMenu:l,isVideoLayout:!0}):(0,V.jsx)(m.MX,{cardRef:w,title:e,href:N,pretitle:t,body:a,isExternalLinkTargetFn:()=>!1,actions:[{target:n,type:"PLAY"},{target:v,type:"ADD_TO_LIBRARY"},{target:n,type:"SHARE"}],onPlay:I,onAddToLibrary:A,onShare:R,isPlaying:b,isInLibrary:x,onNavigate:_,mediaSlotImageSrc:(0,xt.h)(s,{desiredSize:300}),playButtonLabel:p.Ru.get("playlist.a11y.play",e),pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),className:Ct,addToLibraryIcon:S,onContextMenu:c,onTouchStart:d,onTouchEnd:u})},Pt=({name:e,uri:t,images:a,artists:r,spec:n,type:i})=>(0,V.jsx)(je.h,{menu:(0,V.jsx)(et.h,{uri:t,artistUri:r?.[0]?.uri}),children:(0,V.jsx)(Et,{title:e,pretitle:`${(0,ce.C)(i)} • ${r.map(e=>e.name).join(p.Ru.getSeparator())}`,uri:t,images:a,spec:n})}),Tt=({name:e,uri:t,images:a,description:r,podcastName:n,videoThumbnailImages:i,spec:s})=>{const o=(0,V.jsx)(tt.b,{uri:t});return(0,V.jsx)(je.h,{menu:o,children:(0,V.jsx)(Et,{title:e,pretitle:[p.Ru.get("card.tag.episode"),n].join(" • "),body:r,uri:t,images:i.length>0?i:a,spec:s,useVideoLayout:i.length>0,contextMenu:(0,V.jsx)(f.b,{menu:o,children:(0,V.jsx)(v.e,{size:v.M.sm,label:p.Ru.get("more.label.context",e)})})})})},It=({name:e,uri:t,images:a,description:r,spec:n})=>(0,V.jsx)(je.h,{menu:(0,V.jsx)(at.W,{uri:t}),children:(0,V.jsx)(Et,{title:e,pretitle:p.Ru.get("playlist"),body:r,uri:t,images:a,spec:n})});var Nt=a(9606);const jt=({name:e,uri:t,associatedAudioUri:a,images:r,artists:n,spec:i})=>{const s=a?(0,V.jsx)(Nt.o,{uri:t,saveTrackUri:a}):(0,V.jsx)(nt.P,{uri:t});return(0,V.jsx)(je.h,{menu:s,children:(0,V.jsx)(Et,{title:e,pretitle:`${p.Ru.get("card.tag.track")} • ${n.map(e=>e.name).join(p.Ru.getSeparator())}`,saveTrackUri:a,uri:t,images:r,spec:i,useVideoLayout:!!a,contextMenu:(0,V.jsx)(f.b,{menu:s,children:(0,V.jsx)(v.e,{size:v.M.sm,label:p.Ru.get("more.label.context",e)})})})})};var _t=a(24636),kt=a(13059);const St=e=>({url:e.url,width:e.maxWidth,height:e.maxHeight}),At="YTqDeNnDIctMTX0qadD6",Rt="HIhwJpBOmCcmVyyYSFED",wt=(0,s.mc)(({section:e,shelfIndex:t})=>{const{spec:a,logger:n}=(0,ct.D)(gt.j,{data:{identifier:e.uri,uri:e.uri,position:t}}),i=(0,Ne.wA)(e.data.headerEntity,e.data.title,e.data.subtitle),s=e.sectionItems.items.map((e,t)=>((e,t)=>{if((0,yt.v)(e.content)){const a=e.content.data,r=(0,Ne.f0)(a);switch(a.__typename){case"Album":return(0,V.jsx)(Pt,{uri:a.uri,name:a.name,images:r,artists:(0,_t.K)(a.artists),type:a.albumType,spec:t});case"Playlist":return(0,V.jsx)(It,{uri:a.uri,name:a.name,description:a.description??void 0,images:r,spec:t});case"Episode":return(0,V.jsx)(Tt,{uri:a.uri,name:a.name,podcastName:"Podcast"===a.podcastV2.data.__typename?a.podcastV2.data.name:"",videoThumbnailImages:"ImageV2"===a.videoPreviewThumbnail?.imagePreview?.data.__typename?a.videoPreviewThumbnail.imagePreview.data.sources.map(St):[],description:a.description??void 0,images:r,spec:t});case"Track":return(0,V.jsx)(jt,{uri:a.uri,name:a.name,associatedAudioUri:a.associationsV3?.audioAssociations.items[0]?.trackAudio?a.associationsV3.audioAssociations.items[0].trackAudio._uri:void 0,images:r,spec:t,artists:(0,_t.K)(a.artists)});case"GenericError":case"NotFound":case"Artist":case"DiscoveryFeed":case"RestrictedContent":case"Audiobook":case"Chapter":case"Podcast":case"User":return null;default:return(0,kt.k)(a),null}}return null})(e,a.spotlightCardFactory({position:t,uri:e.uri}))).filter(e=>!!e),[o,c]=(0,r.useState)(0),d=s[o],u=(0,r.useMemo)(()=>e.sectionItems.items.map(e=>e.uri).join("|"),[e]);(0,r.useLayoutEffect)(()=>{c(0)},[u]);const m=(0,r.useCallback)(()=>{c(o+1),n.logInteraction(a.nextButtonFactory({position:o+1}).hitUiReveal())},[o,n,a]),g=(0,r.useCallback)(()=>{c(o-1),n.logInteraction(a.previousButtonFactory({position:o-1}).hitUiReveal())},[o,n,a]),h=s.length>1?(0,V.jsxs)("div",{className:Rt,children:[(0,V.jsx)(ht.Zp,{label:p.Ru.get("carousel.left"),children:(0,V.jsx)(pe.H,{size:"small",iconOnly:mt.g,"aria-label":p.Ru.get("carousel.left"),disabled:0===o,onClick:g})}),(0,V.jsx)(ht.Zp,{label:p.Ru.get("carousel.right"),children:(0,V.jsx)(pe.H,{size:"small",iconOnly:pt.V,"aria-label":p.Ru.get("carousel.right"),disabled:o===s.length-1,onClick:m})})]}):null,y=1===e.sectionItems.items.length?e.sectionItems.items.at(0):void 0,v=!!(f=y)&&"TrackResponseWrapper"===f.content.__typename&&"Track"===f.content.data.__typename&&f.content.data.associationsV3.audioAssociations.items.length>0||(e=>!!e&&"EpisodeOrChapterResponseWrapper"===e.content.__typename&&"Episode"===e.content.data.__typename&&"ImageV2"===e.content.data?.videoPreviewThumbnail?.imagePreview?.data?.__typename&&e.content.data.videoPreviewThumbnail.imagePreview.data.sources.length>0)(y);var f;const x=v?(e=>e&&"TrackResponseWrapper"===e.content.__typename?"Track"===e.content.data.__typename?e.content.data.name:void 0:e&&"EpisodeOrChapterResponseWrapper"===e.content.__typename&&"Episode"===e.content.data.__typename?e.content.data.name:void 0)(y):void 0;return s.length<1?null:(0,V.jsx)(lt.r,{spec:a,children:(0,V.jsxs)("section",{className:l()(At,Ee.A.fixedShelf,{[Ee.A.sixteenByNineShelf]:v}),"data-shelf-collapsable":!0,children:[(0,V.jsx)(he.k,{...i,trailing:h,onClickTitle:()=>{i.titleUri&&n.logInteraction(a.shelfHeaderFactory({position:o}).hitUiNavigate({destination:i.titleUri}))},entity:v&&x?{entityTitle:x,entityUri:y?.uri,onClickEntityTitle:()=>{v&&y?.uri&&n.logInteraction(a.shelfHeaderFactory({position:o}).hitUiNavigate({destination:y.uri}))}}:void 0}),d]})})},{name:"HomeV2SpotlightShelf"});var Lt=a(95097);const Dt=(0,s.mc)(({section:e,index:t})=>{const a=(0,Ne.wA)(e.data.headerEntity,e.data.title,"HomeGenericSectionData"===e.data.__typename?e.data.subtitle:null),n="GenreResponseWrapper"===e.data.headerEntity?.__typename&&"Genre"===e.data.headerEntity?.data?.__typename?e.data.headerEntity.data.uri:e.uri,i=(0,r.useMemo)(()=>e.sectionItems.items.map(yt.G).filter(e=>null!==e),[e.sectionItems.items]);return i.length?(0,V.jsx)(Lt.R,{seeAllUri:n,id:e.uri,className:Ee.A.homeRegularDensityCarouselShelf,index:t,...a,children:i}):null},{name:"HomeV2GenericShelf"});var Ut=a(1225),Ot=a(67480),Mt=a(18326);const Ft=(0,s.mc)(e=>{const{section:t,index:a}=e,n=(0,r.useMemo)(()=>e.section.sectionItems.items.map((e,t)=>{if("TrackResponseWrapper"!==e.content.__typename||"Track"!==e.content.data.__typename)return null;const a=e.content.data;return(0,V.jsx)(Ot.O,{title:a.name,trackUri:a.uri,audioAssociationUris:(0,Mt.$)(a.associationsV3),artists:a.artists.items,album:a.albumOfTrack,contentRating:a.contentRating,referrerIdentifier:"home",index:t},a.uri)}).filter(e=>null!==e),[e.section.sectionItems.items]);return(0,V.jsx)(Lt.R,{index:a,title:t.data.title?.transformedLabel??"",seeAllUri:t.uri,id:t.uri,className:Ee.A.homeMusicVideosCarouselShelf,children:n})},{name:"HomeV2MusicVideosShelf"});var Bt=a(33527),Ht=a(52782),Vt=a(96811),Yt=a(62623),zt=a(97858),Gt=a(69491),Wt=a(11183),Kt=a(76919),Zt=a(55986),qt=a(42366),$t=a(60404),Jt=a(96500);const Qt=({context:e,index:t,cardVariant:a,logCardImpressions:r=!1,role:n})=>{const i="Entity"===e.entity?.data?.__typename?e.entity.data.uri:"",{isPlaying:s}=(0,Jt.te)(i);if(!e.entity||(null===(o=e.entity.data)||"object"!=typeof o||!("__typename"in o)||"Entity"!==o.__typename))return null;var o;const l=e.entity.data,c="EntityTypeTrait"===l.entityTypeTrait?.__typename?l.entityTypeTrait.type:null,d="IdentityTrait"===l.identityTrait?.__typename?l.identityTrait:null,u=d?.name??"",m=(e=>"IdentityTrait"!==e?.__typename?[]:e.contributors?.items?.map(e=>({uri:e.uri??"",name:e.name}))??[])(l.identityTrait),p=d?.description??"",g=(e=>{if("VisualIdentityTrait"!==e?.__typename)return[];const t=e.squareCoverImage?.image.data;if("ImageV2"!==t?.__typename)return[];if(t.sources.length>0)return t.sources.map(e=>({url:e.url,width:e.maxWidth,height:e.maxHeight}));const a=e.squareCoverImage?.originalInstances;return void 0===a||0===a.length?[]:a.map(e=>({url:e.flatFile?.cdnUrl??"",width:void 0,height:void 0}))})(l.visualIdentityTrait),h=(0,qt.L)(e.formatListAttributes),y=h?.itemsCount??0;switch(c){case we.ck.EntityTypeAlbum:return(0,V.jsx)(Vt.a,{index:t,name:u,uri:l.uri,images:g,artists:m,sharingInfo:null,variant:a,logCardImpressions:r,role:n});case we.ck.EntityTypeArtist:return(0,V.jsx)(Yt.a,{index:t,name:u,uri:l.uri,images:g,variant:a,logCardImpressions:r,role:n});case we.ck.EntityTypePlaylist:return(0,V.jsx)(Wt.B,{index:t,name:u,uri:l.uri,images:g,description:p,authorName:m.at(0)?.name??"",authorUri:m.at(0)?.uri??"",isPlayable:!0,variant:a,logCardImpressions:r,leaveTitleVisible:!0,role:n,numberOfSongsAdded:y});case we.ck.EntityTypePodcastShow:return(0,V.jsx)(Kt.o,{index:t,name:u,uri:l.uri,images:g,publisher:m.at(0)?.name??"",sharingInfo:null,variant:a,logCardImpressions:r,role:n});case we.ck.EntityTypePodcastEpisode:{const e="ConsumptionExperienceTrait"===l.consumptionExperienceTrait?.__typename?l.consumptionExperienceTrait:null,a=e?.duration?.seconds?1e3*e.duration.seconds:0,r="EpisodeOrChapterResponseWrapper"===l.typedEntity.__typename&&"Episode"===l.typedEntity.data?.__typename?l.typedEntity.data.playedState:null,n={resume_position_ms:r?.playPositionMilliseconds??0,fully_played:r?.state===we._w.Completed};return(0,V.jsx)(Gt.U,{index:t,name:u,uri:l.uri,images:g,showImages:[],description:p,durationMilliseconds:a,isExplicit:!1,is19PlusOnly:!1,releaseDate:null,sharingInfo:null,resume_point:n,bodyContent:()=>n&&a>0&&(!n?.fully_played&&(n?.resume_position_ms??0)>0||s)?(0,V.jsx)($t.z,{current:n.resume_position_ms,max:a}):null})}case we.ck.EntityTypeAudiobook:return(0,V.jsx)(zt.M,{index:t,name:u,uri:l.uri,images:g,authorName:m.at(0)?.name??"",authors:m,signifierText:void 0,variant:a,logCardImpressions:r,consumptionCapExplanation:void 0,isPlayable:!0,role:n});case we.ck.EntityTypeTrack:return(0,V.jsx)(Zt.w,{index:t,name:u,uri:l.uri,images:g,is19PlusOnly:!1,artists:m,album:null,isExplicit:!1,sharingInfo:null,variant:a,logCardImpressions:r,role:n});case we.ck.EntityTypeAudiobookChapter:case we.ck.EntityTypeAuthor:case we.ck.EntityTypeConcert:case we.ck.EntityTypeCourse:case we.ck.EntityTypeKallax:case we.ck.EntityTypeLesson:case we.ck.EntityTypePodcastChapter:case we.ck.EntityTypeUnspecified:case we.ck.EntityTypeUser:case we.ck.EntityTypeUserHighlight:case we.ck.EntityTypeVenue:case we.ck.Unrecognized:case null:return null;default:return(0,kt.k)(c),null}};var Xt=a(40786);var ea=a(35682);const ta=({title:e,className:t,index:a,id:n})=>{const i=(()=>{const{data:e,loading:t}=(0,Xt.Y)();if(t||!e?.home)return null;const a=e.home;if("HomeResponsePayload"!==a.__typename)return null;const r=a.sectionContainer.sections.items.find(e=>"HomeRecentlyPlayedSectionData"===e.data?.__typename);return r?r.sectionItems.items.flatMap(e=>"ListResponseWrapper"!==e.content.__typename||"List"!==e.content.data?.__typename?[]:e.content.data.items.items.filter(e=>null!==e)??[]):null})(),s=(0,r.useMemo)(()=>i?i.map((e,t)=>(0,V.jsx)(Qt,{context:e,index:t,cardVariant:Ht._.Default,logCardImpressions:!1,role:"listitem"},"Entity"===e.entity?.data?.__typename?e.entity.data.uri:t)):[],[i]);return 0===s.length?null:(0,V.jsx)(Lt.R,{index:a,id:n,title:e,seeAllUri:ea.d,className:t,children:s})};var aa=a(70613);const ra=(0,s.mc)(({section:e,index:t})=>{const a=(0,n.NC)(aa.hN5,{loadingValue:!1}),r=e.data.title?.transformedLabel??p.Ru.get("view.recently-played");return a?(0,V.jsx)(ta,{title:r,index:t,id:e.uri,className:Ee.A.homeRegularDensityCarouselShelf}):(0,V.jsx)(Bt.RecentlyPlayedHomeCarouselShelf,{title:r,index:t,id:e.uri,className:Ee.A.homeRegularDensityCarouselShelf})},{name:"HomeV2RecentlyPlayedShelf"});var na=a(29490),ia=a(31162),sa=a(55043),oa=a(6422),la=a(8968),ca=a(72961),da=a(34321),ua=a(35274),ma=a(27454);const pa="FhNG_Ezi1jIXSbmVKS0q",ga="OjjD4FEw0VNvgMaRngwh",ha="AYY77NVXNkp9iLxuD0ST",ya="pUypeDvc20QceElte6t3",va="SOTIXF5Ki7bHHrfklZKU",fa="V0X3Cl5oH_Zd6aIWwDzg",xa="JSzHnOFHVADNtchCPnVT",Ca="jzl_J6un8DdsNwSHlwYr",ba="NMZMo1EsNLB6dDN5kYnQ";function Ea(e){return!!(e&&e.fileId&&e.uri)}const Pa=({canvas:e,canvasContainerClass:t,onCardLoaded:a})=>Ea(e)?(0,V.jsx)(la.Gg,{className:Ca,fileId:e.fileId,canvasUrl:e.url,overridePlatformId:da.Z,playerContainerClass:t,canvasUri:e.uri,playbackType:la.RT.LoopOnHover,useContainerMouseOverEvents:!0,onLoaded:a}):null,Ta=({canvas:e,onCardLoaded:t,className:a})=>{const r=(0,de.g)(e?.thumbnail?.sources,{desiredSize:300,desiredLabel:"standard"});return(0,V.jsx)(ua._,{className:l()(fa,a),src:r?.url,loading:"lazy",testid:"card-image",fadeIn:!0,onLoad:t,children:(0,V.jsx)(ke.e,{size:"xxxlarge",className:xa})})};var Ia=function(e){return e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(Ia||{});const Na=({uri:e,index:t,canvas:a,discoveryFeedUri:n,uri:i,canvasContainerClass:s,title:o})=>{const{open:c}=(0,ca.P)(),{spec:d,logger:u}=(0,be.r)(oa.y,{data:{position:t,uri:e}}),m=(0,ft.n)(d.getAbsoluteLocation(),d),p=(0,ma.j)(),[g,h]=(0,r.useState)(!1),[y,v]=(0,r.useState)(Ia.NOT_LOADED),f=()=>{const e=d.hitUiReveal(),{interactionId:t}=u.logInteraction(e);c({feedUri:n,type:"discovery",firstItemUri:i,interactionId:t})},x=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=x.current;if(p)return;if(!Ea(a))return;const t=()=>{v(Ia.LOADING)};return e?.addEventListener("pointerenter",t,{once:!0}),()=>{e?.removeEventListener("pointerenter",t)}},[a,p]);const C=(0,r.useCallback)(()=>{h(!0)},[]),b=(0,r.useCallback)(()=>{v(Ia.LOADED)},[]),E=!g,P=y!==Ia.LOADED,T=y===Ia.LOADING||y===Ia.LOADED;return(0,V.jsxs)("div",{className:pa,tabIndex:0,role:"button",onClick:f,ref:x,onKeyDown:e=>{"Enter"===e.key&&f()},children:[(0,V.jsxs)("div",{className:l()(ya,{[va]:y===Ia.LOADING}),ref:m,children:[E&&(0,V.jsx)("div",{className:ha}),T&&(0,V.jsx)(Pa,{canvas:a,canvasContainerClass:s,onCardLoaded:b}),P&&(0,V.jsx)(Ta,{canvas:a,onCardLoaded:C})]}),(0,V.jsx)("div",{className:ba,children:(0,V.jsx)(ia.Z,{variant:"ballad",lineClamp:2,title:o,dir:"auto",children:o})}),(0,V.jsx)(sa.A,{semanticColor:"textBase",size:"medium",className:ga})]})},ja=({children:e,index:t,section:a})=>(0,V.jsx)(Lt.R,{id:a.uri,title:a.data.title?.transformedLabel??"",className:Ee.A.homeWatchFeedCarouselShelf,index:t,withEncoreCards:!0,showSeeAll:!1,children:e}),_a=(0,s.mc)(e=>{const t=(0,r.useMemo)(()=>e.section.sectionItems.items.map((t,a)=>{if("DiscoveryFeedResponseWrapper"===t.content.__typename&&"DiscoveryFeed"===t.content.data.__typename){const r=((e,t,a,r)=>{if("TrackResponseWrapper"!==e.firstItem?.__typename||"Track"!==e.firstItem.data.__typename)return null;const n=e.firstItem.data;return(0,V.jsx)(Na,{index:a,uri:n.uri,discoveryFeedUri:t,canvas:n.canvas,title:e.title??"",canvasContainerClass:`Home_WatchFeed_Canvas_${r}_${a}`},`${n.uri}-${a}`)})(t.content.data,t.uri,a,e.index);if(r)return r}return null}).filter(e=>null!==e),[e.section.sectionItems.items,e.index]);return t.length?(0,V.jsx)(ja,{...e,children:t}):null},{name:"HomeV2WatchFeedShelf"});var ka=a(22853);const Sa="wCab1eTJLpMPkKgMXoSh",Aa=(0,s.mc)(({uri:e,shelfTitle:t,title:a,description:r})=>(0,V.jsxs)("section",{className:l()(Sa,Ee.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(he.k,{title:t}),(0,V.jsx)(ka.n,{uri:e,title:a,description:r})]}),{name:"HomeYourDJShelf"});function Ra(){const e=(0,n.NC)(aa.p5T,{loadingValue:!1});return function(t,a){if(!e)return!1;const r=(0,i.M)(t,a).sectionItems.items[0];return"PlaylistResponseWrapper"===r?.content.__typename&&"Playlist"===r.content.data.__typename}}const wa=(0,r.memo)(({greeting:e,section:t,index:a,hideFixedShelves:r=!1})=>{const s=Ra(),o=(0,n.NC)(aa.BYw),l=(0,n.NC)(aa.hWV);switch(t.data?.__typename){case"HomeGenericSectionData":return(0,V.jsx)(Dt,{section:(0,i.M)(t,t.data),index:a});case"HomeShortsSectionData":return(0,V.jsx)(na.$,{greeting:e,section:(0,i.M)(t,t.data),index:a});case"HomeRecentlyPlayedSectionData":return(0,V.jsx)(ra,{section:(0,i.M)(t,t.data),index:a});case"HomeGridSectionData":return l?(0,V.jsx)(Ut.A,{index:a,section:(0,i.M)(t,t.data)}):(0,V.jsx)(Dt,{section:(0,i.M)(t,t.data),index:a});case"HomePromotionSectionData":return r?null:(0,V.jsx)(ut,{section:(0,i.M)(t,t.data),index:a});case"HomeSpotlightSectionData":return r?null:(0,V.jsx)(wt,{section:(0,i.M)(t,t.data),shelfIndex:a});case"HomeNativeAdsSectionData":return r?null:(0,V.jsx)(Te,{section:(0,i.M)(t,t.data),index:a});case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{const e=(0,i.M)(t,t.data),{data:a,sectionItems:n}=e,o=n.items[0];if(s(t,t.data)&&"PlaylistResponseWrapper"===o?.content.__typename&&"Playlist"===o.content.data.__typename&&!r){const{data:e}=o.content;return(0,V.jsx)(Aa,{uri:e.uri,shelfTitle:a.title?.transformedLabel??"",title:e.name,description:e.description??""})}return null}case"HomeWatchFeedSectionData":if(o){const e=(0,i.M)(t,t.data);return(0,V.jsx)(_a,{index:a,section:e})}return null;case"HomeMusicVideosSectionData":return(0,V.jsx)(Ft,{section:(0,i.M)(t,t.data),index:a});case"HomeFeedBaselineSectionData":case"HomeFeatureActivationSectionData":case"HomeFeatureActivationSectionDataV2":case null:case void 0:case"HomeContentEvaluationListSectionData":case"HomePodcastVideosCarouselSectionData":return null;default:return(0,kt.k)(t.data),null}})},33527:(e,t,a)=>{a.r(t),a.d(t,{RecentlyPlayedHomeCarouselShelf:()=>k,default:()=>S});var r=a(30758),n=a(97500),i=a.n(n),s=a(14336),o=a(54091),l=a(96811),c=a(62623),d=a(97858),u=a(52782),m=a(11183),p=a(76919),g=a(55986),h=a(95097),y=a(31808),v=a(82880),f=a(3705),x=a(42417),C=a(61954),b=a(69040),E=a(88505);function P(e=!0){const t=(0,E.j)(),[a,n]=(0,r.useState)(()=>t.getContexts());return(0,r.useEffect)(()=>{if(!e)return;return t.getEvents().addListener(b.m5.UPDATE,({data:e})=>{n(e)})},[t,e]),a}var T=a(13059);const I="L7FhAjlq9QSzOko4hzjm";var N=a(86070);function j(e){const t=new Set;return e.filter(e=>{if(e.type===b.d2.LIKED_SONGS){if(t.has(e.type))return!1;t.add(e.type)}return!0})}const _=(e,t,a,r=!1,n)=>{const i=e.uri;switch(e.type){case b.d2.LIKED_SONGS:return(0,N.jsx)(v.o,{index:t,variant:a,role:n},i);case b.d2.YOUR_EPISODES:return(0,N.jsx)(x.e,{index:t,variant:a,role:n},i);case b.d2.ALBUM:return(0,N.jsx)(l.a,{index:t,name:e.name,uri:e.uri,images:e.images,artists:e.artists,sharingInfo:null,variant:a,logCardImpressions:r,role:n},i);case b.d2.ARTIST:return(0,N.jsx)(c.a,{index:t,name:e.name,uri:e.uri,images:e.images,variant:a,logCardImpressions:r,role:n},i);case b.d2.PLAYLIST:return(0,N.jsx)(m.B,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner.displayName,authorUri:e.owner.uri,isPlayable:!(0,C.p)(e.attributes),variant:a,logCardImpressions:r,leaveTitleVisible:!0,role:n},i);case b.d2.SHOW:return(0,N.jsx)(p.o,{index:t,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null,variant:a,logCardImpressions:r,role:n},i);case b.d2.AUDIOBOOK:return(0,N.jsx)(d.M,{index:t,name:e.name,uri:e.uri,images:e.images,authorName:e.authors.at(0)?.name??"",authors:e.authors,signifierText:e.signifierText,variant:a,logCardImpressions:r,consumptionCapExplanation:e.consumptionCapExplanation,isPlayable:e.isPlayable,role:n},i);case b.d2.TRACK:return(0,N.jsx)(g.w,{index:t,name:e.name,uri:e.uri,images:e.images,is19PlusOnly:e.isMOGEFRestricted,artists:e.artists,album:null,isExplicit:e.isExplicit,sharingInfo:null,variant:a,logCardImpressions:r,role:n},i);default:return(0,T.k)(e),null}},k=({title:e,className:t,index:a,id:n})=>{const i=P(!0),s=(0,r.useMemo)(()=>{if(!i)return[];return j(i).map((e,t)=>_(e,t,u._.Compact,!1,"listitem"))},[i]);return 0===s.length?null:(0,N.jsx)(h.R,{index:a,id:n,title:e,seeAllUri:`/genre/${f.r}`,className:t,children:s})},S=()=>{const e=P(!0);if(!e)return[];const t=j(e);return null===e?null:(0,N.jsx)("section",{className:i()("contentSpacing",I),children:(0,N.jsx)(y.p,{id:"recently-played",title:o.Ru.get("view.recently-played"),showAll:!0,index:0,rowGap:s.lT,fullPage:!0,children:t.map((e,t)=>_(e,t,u._.Default))})})}},34296:(e,t,a)=>{a.d(t,{q:()=>o});var r=a(78717),n=a(98033),i=a(54091),s=a(86070);const o=()=>(0,s.jsx)(n.s,{children:(0,s.jsx)(r.E,{as:"h1",children:i.Ru.get("view.web-player-home")})})},34321:(e,t,a)=>{a.d(t,{R:()=>n,Z:()=>r});const r="desktop-home-watch-feed",n="desktop-watch-feed"},41751:(e,t,a)=>{a.d(t,{$F:()=>s,Dr:()=>l,KI:()=>u,V0:()=>d,YO:()=>m,nC:()=>g,t$:()=>p,uW:()=>c,ye:()=>h});var r=a(42551),n=a(91728);const i=[n.Gm.NATIVE,n.Gm.IMAGE,n.Gm.HTML],s=e=>e.ads.hpto?.template||null,o=e=>e.ads.root.isHptoHidden,l=e=>e.ads.hpto?.hptoIsStable||null,c=e=>e.ads.root.isPremium,d=e=>"1"===e.session.productState?.["has-audiobooks-subscription"],u=e=>e.ads.hpto?.creativeFetchingState||null,m=(0,r.Mz)(e=>e.ads.hpto?.creative||null,e=>e.ads.hpto?.preview||null,(e,t)=>t||e),p=(0,r.Mz)(m,c,o,(e,t,a)=>{if(!e)return!1;return!(!i.includes(e.bannerMode)||t&&a)}),g=(0,r.Mz)(c,o,(e,t)=>!e||!t),h=(0,r.Mz)(m,e=>!!e&&i.includes(e.bannerMode))},42366:(e,t,a)=>{a.d(t,{L:()=>n});a(14248),a(91906),a(33214),a(59800),a(50616);var r=a(13565);function n(e){if(!e)return null;const t=e.find(e=>"group_metadata"===e.key);if(!t?.value)return null;try{const e=atob(t.value),a=new Uint8Array(e.length);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);return r.Z8.decode(a)}catch(e){return null}}},42417:(e,t,a)=>{a.d(t,{e:()=>g});var r=a(54091),n=a(52782),i=a(63087),s=a(32354),o=a(37647),l=a(6525),c=a(27799),d=a(49060),u=a(97533),m=a(86070);const p=({metadata:e,index:t,variant:a,role:o})=>{const{isPlaying:c,togglePlay:p}=(0,d.P)({uri:e.uri},{featureIdentifier:"your_library"}),{name:g,images:h}=e;return(0,m.jsx)(n.Z,{variant:a,index:t,delegatePlayback:!0,isPlaying:c,featureIdentifier:"your_library",onPlay:(e,t)=>p({loggingParams:t}),headerText:g,uri:e.uri,role:o,renderCardImage:()=>(0,m.jsx)(i.M,{images:h,FallbackComponent:l.b}),renderSubHeaderContent:()=>(0,m.jsx)(s.c,{children:r.Ru.get("tracklist-header.episodes-counter",e.totalLength)}),className:u.A.yourEpisodesCard})},g=({index:e,variant:t,role:a})=>{const r=(0,c.u)();return r?(0,m.jsx)(p,{metadata:r,index:e,variant:t,role:a}):(0,m.jsx)(o.u,{cardImage:(0,m.jsx)(i.M,{FallbackComponent:l.b}),isLoading:!0,variant:t})}},52040:(e,t,a)=>{a.r(t),a.d(t,{SKELETON_CARDS_COUNT:()=>k,SKELETON_SHELVES_COUNT:()=>_,default:()=>w,getRequestIdForImpressions:()=>S});var r=a(30758),n=a(51249),i=a(97500),s=a.n(i),o=a(60686),l=a(54091),c=a(29947),d=a(2050),u=a(80128),m=a(34296),p=a(62111),g=a(57748),h=a(40786),y=a(98649),v=a(22841),f=a(28389),x=a(53126),C=a(10994),b=a(72248),E=a(88896),P=a(95488),T=a(55247),I=a(55517),N=a(22094),j=a(86070);const _=6,k=6,S=e=>{const t="object"==typeof e?.responseIds?e?.responseIds:void 0;return t?.["/home"]?.continuum},A=(0,r.memo)(({shelfCount:e,cardCount:t})=>(0,j.jsxs)("div",{className:s()(N.A.homepageContent,"contentSpacing"),"data-testid":"home-page-skeleton",children:[(0,j.jsx)(d.y,{withTitle:!1}),[...new Array(e).keys()].map((e,a)=>(0,j.jsx)(g.f,{withTitle:!0,cardCount:t},a))]})),R=()=>{(0,C.m)("home");const e=(0,b.d)({type:"locale",uri:"home"}),{data:t,error:a,loading:r,extensions:n,isPlaceholderData:i}=(0,h.Y)(),d=!(0,x.p)(),{spec:g}=(0,I.$)(o.Y,{data:{identifier:"home",uri:"spotify:home",reason:S(n)??""}});if(r||i)return(0,j.jsxs)("section",{className:s()(N.A.home,N.A.homepageWithCarousels),"data-testid":"home-page",children:[(0,j.jsx)(m.q,{}),(0,j.jsx)(A,{shelfCount:_,cardCount:k})]});if(null!==a)return(0,j.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")});const v=t?.home;return"HomeResponsePayload"!==v?.__typename?(0,j.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")}):0===v.sectionContainer.sections.totalCount||0===v.sectionContainer.sections.items.length?((0,E.Jy)(new Error("Empty response from pathfinder"),"Home"),(0,j.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")})):(0,j.jsx)(T.r,{spec:g,children:(0,j.jsxs)(y.h,{extensionsData:n,children:[(0,j.jsx)(c.Q,{children:(0,P.pr)({i18n:l.Ru,shouldLocalize:e})}),(0,j.jsx)(p.g,{greeting:v.greeting?.transformedLabel??null,container:v.sectionContainer,showDsaMessage:d,enableFeedBaseline:!0})]})})},w=(0,n.mc)(()=>{const e=(0,v.f)();return e&&""!==e?(0,j.jsx)(f.$,{to:"/"}):(0,j.jsx)(R,{})},{name:"Home"})},57748:(e,t,a)=>{a.d(t,{f:()=>o});var r=a(30758),n=a(37647),i=a(16219),s=a(86070);const o=(0,r.memo)(({cardCount:e,showAll:t,withTitle:a})=>(0,s.jsx)(i._,{isLoading:!0,withTitle:a,showAll:t??!1,children:[...new Array(e).keys()].map((e,t)=>(0,s.jsx)(n.u,{isLoading:!0},t))}))},58521:(e,t,a)=>{a.d(t,{w:()=>i});var r=a(89307);function n(e){return{url:e.url,width:e.width||void 0,height:e.height||void 0}}function i(e){return{type:r.c.USER,uri:e.uri,username:e.id,displayName:e?.display_name||null,images:e?.images?.map(n)||[]}}},59057:(e,t,a)=>{a.d(t,{Nx:()=>s,lr:()=>i,q8:()=>o});var r=a(54390),n=a(79232);const i=()=>(0,r._)(e=>"/"===e.pathname),s=()=>(0,r._)(e=>"/home"===e.pathname),o=(e,t)=>{const a=t?350:80;return(0,n.i)(e,a,10)}},62111:(e,t,a)=>{a.d(t,{g:()=>Ja});var r=a(30758),n=a(97500),i=a.n(n),s=a(8550),o=a(21994),l=a(49348);var c=a(59057),d=a(34296),u=a(62411),m=a(78717),p=a(69365),g=a(35394),h=a(92953),y=a(54091),v=a(36729),f=a(60257),x=a(91645);const C="fKoqjCmlud6869722VoU";var b=a(86070);const E=()=>{const e=(0,u.wA)(),t=(0,f.s)(),{spec:a}=(0,x.r)(h.V,{}),n=(0,r.useCallback)(()=>{e(v.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())},[e,t,a]);return(0,b.jsxs)(m.E,{as:"p",semanticColor:"textBase",className:C,children:[(0,b.jsx)(p.p,{size:"small"}),y.Ru.get("home.dsa-message",(0,b.jsx)(g.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:n,children:y.Ru.get("home.dsa-message-link")}))]})};var P=a(7333),T=a(92785),I=a(12803),N=a(61270),j=a(83787),_=a(24148),k=a(8413),S=a(99974),A=a(47701),R=a(93485),w=a(18868),L=a(2854),D=a(91198),U=a(19717),O=a(281),M=a(29301),F=a(27360);const B="desktop-home-1d-card",H="AudioBrowsePreview",V="c268f7ea9b154a71a76b79be90a1ae0e";var Y=a(64932);const z={screenLg:"1200px",homeRegularDensityMinWidth:"210px",homeRegularDensityMinWidthSmallScreens:"160px",homeFeedBaselineMinWidth:"380px",homeFeedBaselineMaxWidth:"480px",homeFeedBaselineHalfWidth:"430px",gridContainer:"pApuZqNOmhMermP0rB4U",withFiniteRowCount:"kfVdTMTsUGeO_yZ3QXlc",uniformRowHeight:"svumERVHlDjGCtvt3boh",card:"Wwot_NoO8I52DIWFsJtA",overlayForCenteredImage:"ZgtkE_JQpPKYQumfJ5AZ",overlayForCenteredImageGradient:"mjFzIP3QLD8M0dtHQTSI",overlayForCenteredImageDynamicColors:"pZv7o3WiYmBZZUUd_k1y",overlayTop:"GQ7pYEaYc5RtbYCo3ndP",withFooterOverlay:"K3Z6DlJaJf57rAiW0kNF",overlayBottom:"XCdWf6uBX9wh5YTyfDIQ",hasFooter:"VBL7n7aOshCgf9FiJLsC",header:"fIZsFd7OCn0NeQdCuHQN",headerImage:"aZN9KFLD5aK47bka0q6n",withHeaderImage:"aYmjHaJiOFSyjyAxK4gJ",headerContainer:"o1hSTUTN5wZPtFntoyhf",titleClamp:"eOKyUoOQquZAAp0rA_q3",titleLink:"AdmV7_wsSTMZkjI55Ibk",audioPreviewContainerText:"Feg8tsHsVGRNpF31eSdn",carousel:"JKx3jMnVSXGAWC32bMqr",carouselScrollContent:"MYMRDtbfLLxwEVWrtGtF",carouselScroller:"FXnp_3D_kbTFjSLqhhMk",carouselChevrons:"aoKUUqrzkSSro6mIOPeg",fillSpaceAbsolute:"JSUxUPMQnKVw9_8uWETt",backgroundInCarousel:"RzmOvDyVTh4Eq767LQJb",canvasInCarousel:"E9DZWf1cBtHH1I2jYKjj",currentlyPlayingStatus:"XSI6DDHWJKHCPI3DBglM",footerPlayContainer:"i7FHiGZw0XzT9AzXxWfW",audioPreviewContainer:"wYh1xzwa92PgrKfek6iR",footerPlayContainerLeft:"fgM809is6y6WYptpwfAj",footerPlayContainerRight:"qvQ5XZ0UUNW0rEn9y1Mf",footer:"J42KHX9jD9YhovfaV9tI",footerDescription:"eCPEAtBDMPTVaiKEbaqH",footerDescriptionContent:"vTU2PptR6eTimpZUN2YC",expandFooterButton:"l1QjYI4cjs7B5r9o_O9l",playButtonContainer:"h01sLU3SfPK_7UEzTeaj",isListeningToPreview:"CEf79d2VbxXgyIAMr_GQ",isPlayingContext:"xAQW61S0wq3208AvQd7g",transcriptForAudio:"H2JsSoF0mMd8pQz4Wo3e",transcriptForVideo:"wYh06SYl5uZzgmhpZAA_",audioWave:"Aq3fDcNClyaP4p1Golmk",isExpandedFooter:"DTnV3OGljr_OvR4tvwIr",centeredContainer:"YRDqIpn80m2ZDcMDyNdT",artworkImage:"oUHJ6XpAPz8mzpWZSRn1",parentArtworkImage:"J1stNKqYgdyJ490TofI7",previewHasCompleted:"_r_8YSdrOz3P6s6yoRgV",videoPreview:"GEo_ZmtdsGF5OCzbpaRY",videoLoaded:"XPwwvkBRNnGDHu_3ZVyT",transcript:"wcCn7uqmGqGU53Ij1EP5",videoPreviewCompleted:"_hBDq59q5ThBdz82Dj7m",pulsateText:"gInmLfQHDDdSUdBJicx3",playing:"xb11dgP4xXrcoSWTOoVv",loading:"ApxExPW3qsuWzdzW4bbn",pulsateLoading:"TjmK6AkrUJfETouTfRng",transcriptText:"qm9Y9NEbkkGwKhG_UNAe",spoken:"JpLK8BLB1IaAAsIAtiRQ",unspoken:"Eo81bzyXf7t9n4rEUqGY",subtitle:"VIGvOtucq9nmwlmFyZ7p",previewHasCompletedContainer:"dkQmlhutXRi06sjgzRyg"},G=e=>{const{isExpandedFooter:t,setIsExpandedFooter:a,children:n,expandFooterDescribedBy:i}=e,s=(0,r.useRef)(null),o=(0,r.useRef)(null),[l,c]=(0,r.useState)(!1),d=t?y.Ru.get("show_less"):y.Ru.get("show_more"),u=(0,r.useCallback)(e=>{e.stopPropagation(),a(e=>!e)},[a]);(0,r.useEffect)(()=>{requestAnimationFrame(()=>{o.current&&s.current&&c(o.current.clientHeight>s.current.clientHeight)})},[]);const p={"--mask-image":`url(${(0,Y.bj)("images/mask.png")})`,"--mask-image-rtl":`url(${(0,Y.bj)("images/mask-rtl.png")})`};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{ref:s,className:z.footerDescription,style:p,children:(0,b.jsx)(m.E,{variant:"bodySmall",className:z.footerDescriptionContent,ref:o,children:n})}),(l||t)&&(0,b.jsx)(g.H,{onClick:u,className:z.expandFooterButton,size:"small",condensedAll:!0,semanticColor:"textBase",tabIndex:0,"aria-describedby":i,children:d})]})};var W=a(86825),K=a(35324),Z=a(14226),q=a(43114);const $=({uri:e,size:t})=>{const[a,r]=(0,q.A)(e);return(0,b.jsx)(W.M,{size:t,isAdded:a,onClick:()=>{r(!a)},condensed:!0})},J=({uri:e,size:t})=>(0,Z.v)(e)?(0,b.jsx)(K.g,{uri:e,size:t}):(0,b.jsx)($,{uri:e,size:t});var Q=a(22141),X=a(49461),ee=a(62960),te=a(4871),ae=a(5982),re=a(40780),ne=a(62887);const ie=({uri:e,name:t,togglePreview:a,isListeningToPreview:n,userHasCompletedPreview:s,standalonePlayer:o,durationMs:l})=>{const c=(0,F.gHQ)(e),[d,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null);d&&n&&u(!1);const h=(0,r.useCallback)(a=>{if(c&&(n||d)){const e=l&&a?(0,ne.f)(l-a):(0,ne.f)(NaN);return y.Ru.get("preview.remaining-time",{time:e})}const r=t??y.Ru.get("playing"),i=n&&!d;return(0,F.gHQ)(e)?i?r:y.Ru.get("preview.episode"):(0,F._Tv)(e)?i?r:y.Ru.get("preview.album"):(0,F.nuB)(e)?i?r:y.Ru.get("preview.playlist"):i?r:y.Ru.get("preview")},[c,n,l,d,t,e]),v=(0,r.useCallback)(()=>n?(0,b.jsx)(re.J,{animated:!0}):(0,b.jsx)(X.X,{size:"small"}),[n]);return(0,r.useEffect)(()=>{if(!c)return;if(!o)return;const e=e=>{g(e.data.position)};return o.addListener(ae.Pv.PROGRESS,e),()=>{o.removeListener(ae.Pv.PROGRESS,e)}},[o,c]),s?(0,b.jsx)(ee.n,{className:z.audioPreviewContainer,iconOnly:()=>(0,b.jsx)(te.r,{size:"small"}),onClick:e=>{e.stopPropagation(),a()},size:"small"}):(0,b.jsx)(ee.n,{className:i()(z.audioPreviewContainer,d?z.loading:null,n?z.playing:null),"data-testid":"big-card-toggle-preview-button",disabled:d,iconLeading:v,onClick:e=>{e.stopPropagation(),n||u(!0),a()},size:"small",children:(0,b.jsx)(m.E,{variant:"bodySmall",className:z.audioPreviewContainerText,children:h(p)})})},se=e=>{const{isPlayingContext:t}=e;return!t&&e.uri&&e.isPreviewAvailable?(0,b.jsx)(ie,{...e}):t?(0,b.jsxs)("div",{className:z.currentlyPlayingStatus,children:[(0,b.jsx)(re.J,{animated:!0}),(0,b.jsx)(m.E,{variant:"bodySmall",semanticColor:"textPositive",children:y.Ru.get("playing")})]}):null};var oe=a(64300),le=a(76056);const ce=e=>{const{uri:t,standalonePlayer:a,isPlayingContext:r,isPreviewAvailable:n,isListeningToPreview:i,togglePreview:s,durationMs:o,currentPreviewItem:l,isAddable:c,isPlayable:d,ariaPlayLabel:u,ariaPauseLabel:m,menu:p,onMoreButtonClick:g,handlePlayButtonClick:h,userHasCompletedPreview:v}=e;return(0,b.jsxs)("div",{className:z.footerPlayContainer,children:[(0,b.jsx)("div",{className:z.footerPlayContainerLeft,children:(0,b.jsx)(se,{isPreviewAvailable:n,isPlayingContext:r,isListeningToPreview:i,uri:l?.uri??null,name:l?.name??null,standalonePlayer:a,durationMs:o,togglePreview:s,userHasCompletedPreview:v})}),(0,b.jsxs)("div",{className:z.footerPlayContainerRight,onClick:e=>{e.stopPropagation()},children:[(0,b.jsx)(oe.b,{menu:p,children:(0,b.jsx)(Q.e,{size:"large",label:y.Ru.get("more"),onClick:g})}),c&&(0,b.jsx)(J,{size:"large",uri:t}),d&&(0,b.jsx)("div",{className:z.playButtonContainer,children:(0,b.jsx)(le.D,{isPlaying:r,onClick:h,ariaPlayLabel:u,ariaPauseLabel:m,version:r?le.H.primary:le.H.secondary})})]})]})};var de=a(63087),ue=a(20005),me=a(76826),pe=a(11354),ge=a(22396),he=a(73499);const ye=Number(z.homeFeedBaselineHalfWidth.replace("px",""))||430,ve=({uri:e,text:t,images:a,imageColor:n,renderSubtitle:s,cardRef:o})=>{const c=(0,r.useRef)(null),d=(0,pe.K)({ref:c}),[u,p]=(0,r.useState)(32),g=(0,r.useCallback)(()=>{const e=o.current?.clientWidth??he.Pm,a=2*(c.current?.clientWidth??he.Pm),r=e<ye?24:32,n=(0,ge.L)(t,r,700);p(n>a?24:32)},[o,t]);(0,r.useEffect)(()=>{g()},[g]),(0,l.w)({refOrElement:o,onResize:g,observeOnly:"width",observeOnMount:!1});const h={"--title-line-clamp":2,"--title-font-size":`${u}px`,"--title-font-size-small":(32===u?24:20)+"px"};return(0,b.jsxs)("header",{className:z.header,style:h,children:[(0,b.jsx)("div",{className:z.headerImage,children:(0,b.jsx)(de.M,{images:a,color:n,is1DCardHeader:!0})}),(0,b.jsxs)("div",{className:z.headerContainer,children:[(0,b.jsx)(me.N,{to:e,className:z.titleLink,children:(0,b.jsx)(ue.Zp,{label:t,disabled:!d,children:(0,b.jsx)(m.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",ref:c,className:z.titleClamp,id:e,children:t})})}),s?(0,b.jsx)(m.E,{as:"span",variant:"bodySmall",semanticColor:"textSubdued",className:i()(z.subtitle),children:s()}):null]})]})};var fe=a(26571),xe=a(7577);const Ce=e=>{const{carouselLayout:t,withFooterOverlay:a}=e,{dynamicColors:r}=(0,xe.q)(),n={"--background-base-high-contrast":r?.highContrast.backgroundBase.toCSS(fe.a.RGBA)||"","--higher-contrast-text-base-color":r?.higherContrast.textBase.toCSS(fe.a.RGBA)||""};return t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{"aria-hidden":!0,className:z.overlayTop}),(0,b.jsx)("div",{"aria-hidden":!0,className:i()({[z.withFooterOverlay]:a,[z.overlayBottom]:!a})})]}):(0,b.jsx)("div",{"aria-hidden":!0,style:n,className:i()(z.overlayForCenteredImage,z.overlayForCenteredImageDynamicColors)})};a(14248),a(91906),a(33214),a(59800);var be=a(8335),Ee=a(12627),Pe=a(55868);const Te=1e3/60,Ie=({forceAlwaysInView:e,playing:t})=>{const a=(0,r.useRef)(null),n=(0,r.useRef)(null),i=(0,Ee.SF)(),{ref:s,inView:o}=(0,be.Wx)({root:i.current,initialInView:!1}),[c]=(0,r.useState)(()=>function(e){const t=new Uint8Array(e),a=new Array(e).fill(80),r=Array.from({length:e},()=>100*Math.random()+80);return()=>{for(let n=0;n<e;n++)a[n]=a[n]+.4*(r[n]-a[n]),t[n]=Math.round(a[n]),Math.abs(a[n]-r[n])<1&&(r[n]=100*Math.random()+80);return t}}(32)),[d,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{if(!t){const e=setTimeout(()=>u(!1),500);return()=>clearTimeout(e)}return u(!0),()=>{}},[t]);const m=d&&(o||e),p=(0,r.useCallback)(()=>{if(!a.current)return;const e=a.current?.getContext("2d");if(!a.current||!e)return;const t=a.current.width/window.devicePixelRatio,r=a.current.height/window.devicePixelRatio;let n=null;n=c(),n&&function(e,t,a,r){const n=t/2,i=a/2;e.clearRect(0,0,t,a),e.fillStyle="rgba(255, 255, 255, 35%)";for(let t=0;t<32;t++){const a=Math.max(0,Math.min(255,r[t]??0))*(i/255),s=n+-192+12*t-1.5;e.beginPath(),e.roundRect(s,i-a,3,2*a,1.5),e.fill()}}(e,t,r,n)},[c]),g=(0,r.useCallback)(()=>{if(!a.current?.parentElement)return;const{offsetWidth:e,offsetHeight:t}=a.current.parentElement,r=window.devicePixelRatio||1;a.current.width=e*r,a.current.height=t*r,a.current.style.width=`${e}px`,a.current.style.height=`${t}px`;const n=a.current.getContext("2d");n?.scale(r,r)},[]);return(0,l.w)({onResize:(0,Pe.s)(g)(200),refOrElement:n}),(0,r.useEffect)(()=>{if(!m)return()=>{};let e,t=null;const a=r=>{(null===t||(t?r-t:0)>=Te)&&(p(),t=r),e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{e&&cancelAnimationFrame(e)}},[p,m]),(0,b.jsx)("div",{"aria-hidden":!0,ref:n,style:{width:"100%",height:"100%"},children:(0,b.jsx)("canvas",{style:{width:"100%",height:"100%"},ref:e=>{s(e),a.current=e,g()}})})};var Ne=a(73136);const je=({onClick:e})=>(0,b.jsx)("div",{className:z.previewHasCompletedContainer,children:(0,b.jsx)(Ne.$,{size:"large",onClick:t=>{t.stopPropagation(),t.preventDefault(),e()},colorSet:"invertedLight",children:y.Ru.get("preview.continue-playing")})}),_e=1500,ke=e=>1e3*parseFloat(e.replace("s","")),Se=({line:e,positionMs:t,playing:a})=>{const[n,i]=(0,r.useState)(0);(0,r.useEffect)(()=>{i(0)},[t]);const s=a;(0,r.useEffect)(()=>{let e;return()=>{e&&cancelAnimationFrame(e)}},[s]);const o=t+n;return(0,b.jsx)("div",{className:z.transcriptText,children:e.map(({word:e,start:t},a)=>(0,b.jsx)(m.E,{variant:"bodyMediumBold",className:o>=t?z.spoken:z.unspoken,children:e},a))})},Ae=({data:e,url:t,standalonePlayer:a,shiftTranscriptByOffsetFromURL:n})=>{const[i,s]=(0,r.useState)(0),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>(e=>{const t=new URL(e).searchParams.get("offsets.start");return t?ke(t):0})(t),[t]);(0,r.useEffect)(()=>{if(!a)return;const e=e=>{const t=e.data.position+(n?u:0);s(t)},t=()=>{l(!0),c||d(!0)},r=()=>{l(!1)};return a.on(ae.Pv.PROGRESS,e),a.on(ae.Pv.PLAYING,t),a.on(ae.Pv.PAUSED,r),()=>{a.removeListener(ae.Pv.PROGRESS,e),a.removeListener(ae.Pv.PLAYING,t),a.removeListener(ae.Pv.PAUSED,r)}},[n,u,a,c]);const m=((e,t)=>{const a=(0,r.useMemo)(()=>Math.floor(t/_e)*_e,[t]);return(0,r.useMemo)(()=>{const t=[];for(const r of e){const e=ke(r.offsets.start);if(e>=a&&e<a+_e){const a=ke(r.offsets.end);t.push({word:`${r.word} `,start:e,end:a})}if(e>=a+_e)break}return t},[e,a])})(e.words,i);return c&&m.length?(0,b.jsx)(Se,{line:m,positionMs:i,playing:o}):null};var Re=a(1812),we=a(78969),Le=a(26843);const De=(e,t=!0)=>{const{data:a,error:r}=(0,Re.I)({queryKey:["transcript",e],gcTime:15*Le.i,staleTime:15*Le.i,queryFn:async()=>{if(!e)return null;const t=await(async e=>we.n.getInstance().build().fromURL(e).withoutMarket().withoutAuthorization().send())(e);return"words"in t.body?t.body:null},enabled:t});return{data:a??null,error:r}};var Ue=a(70613);const Oe=e=>{const{hasAudioWave:t,userHasCompletedPreview:a,handleContinuePlayingButtonClick:r,standalonePlayer:n,previewState:s,parentImages:o,images:l,imageColor:c,handleCardClick:d,entityUrl:u,transcriptUrl:m,shiftTranscriptByOffsetFromURL:p}=e,g=(0,D.NC)(Ue.eSY),{data:h}=De(m,g),y=o&&o.length>0&&l?.[0]?.url!==o?.[0]?.url;return(0,b.jsxs)(me.N,{tabIndex:-1,onClick:d,to:u,className:z.centeredContainer,"aria-hidden":!0,children:[(0,b.jsxs)("div",{className:i()(z.artworkImage,{[z.previewHasCompleted]:a}),children:[t?(0,b.jsx)("div",{className:z.audioWave,children:(0,b.jsx)(Ie,{playing:s.playing})}):null,(0,b.jsx)(de.M,{images:l,color:c,desiredSize:180*window.devicePixelRatio}),y&&(0,b.jsx)("div",{className:z.parentArtworkImage,children:(0,b.jsx)(de.M,{images:o,color:c,desiredSize:80*window.devicePixelRatio})})]}),g&&h&&m&&(0,b.jsx)("div",{className:i()(z.transcript,z.transcriptForAudio),children:(0,b.jsx)(Ae,{url:m,data:h,standalonePlayer:n,shiftTranscriptByOffsetFromURL:p})}),a?(0,b.jsx)(je,{onClick:r}):null]})};var Me=a(8968),Fe=a(27454);const Be=({item:e,cardRef:t,playerContainerClass:a,isListening:r,overridePlatformId:n})=>{const i=(0,Fe.j)();return!e?.canvas?.fileId||i?(0,b.jsx)("div",{className:z.backgroundInCarousel,style:{backgroundColor:e.background?.color??"transparent"},children:e.background?.imageUrl&&(0,b.jsx)("img",{alt:"",src:e.background.imageUrl})}):(0,b.jsx)(Me.Gg,{className:z.canvasInCarousel,fileId:e.canvas.fileId,canvasType:e.canvas.type,canvasUri:e.canvas.uri,canvasUrl:e.canvas.url,canvasThumbnailUrl:e.canvas.thumbnailUrl,playbackType:r?Me.RT.Loop:Me.RT.LoopOnHover,playerContainerClass:`${a}_${e.canvas.fileId}`,mouseHoverRef:t,overridePlatformId:n,loadingStrategy:"lazy"})};var He=a(97149),Ve=a(88095);const Ye=`${B}-canvas`,ze=e=>{const{previewItems:t,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n,playPreview:s,isListeningToPreview:o,playerContainerClass:l,cardRef:c}=e,d=(0,r.useCallback)(e=>{if(!t)return;if(a===e)return;const r=t[e];r&&(n(e),s(r))},[a,s,t,n]);return(0,b.jsx)(He.FN,{wheelScrollEnabled:!1,scrollingMethod:He.Hv.SNAP,scrollSnapAlign:"center",className:i()(z.carousel,z.fillSpaceAbsolute),scrollContentClassName:z.carouselScrollContent,scrollerClassName:z.carouselScroller,chevronsClassName:z.carouselChevrons,showButtons:He.C_.ON_HOVER,edgeGradients:He.TB.NONE,onScroll:d,role:"presentation",children:t.map((e,t)=>(0,b.jsx)(Ve.A,{children:(0,b.jsx)(Be,{item:e,playerContainerClass:l,cardRef:c,isListening:o,overridePlatformId:Ye})},`${e.uri}_${t}`))})};var Ge=a(51938),We=a(74123);const Ke=({uri:e,fileId:t,poster:a,overridePlatformId:n,playerContainerClass:s,className:o,reportPreview:l=!1,children:c})=>{const{registerURI:d,unregisterURI:u}=(0,Ge.B)(),m=(0,r.useMemo)(()=>({videoPlayerContainer:`.${s}`}),[s]),p=(0,We.d)({config:m,overridePlatformId:n,reportPreview:l});(0,r.useEffect)(()=>(d(e,{uri:e,standalonePlayer:p}),()=>{u(e)}),[e,d,u,p]);const g=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t)return;const e=()=>{g.current&&g.current.classList.add(z.videoLoaded)};return p.addListener(ae.Pv.FIRST_BYTES,e),()=>{p.removeListener(ae.Pv.FIRST_BYTES,e)}},[e,p,t]),(0,b.jsxs)("div",{ref:g,className:i()(s,o),children:[a&&(0,b.jsx)("img",{"data-poster":!0,src:a,alt:""}),c]})},Ze=`${B}-video`,qe=e=>{const{userHasCompletedPreview:t,handleContinuePlayingButtonClick:a,standalonePlayer:r,transcriptUrl:n,uri:s,playerContainerClass:o,handleCardClick:l,entityUrl:c,fileId:d,poster:u,shiftTranscriptByOffsetFromURL:m}=e,p=(0,D.NC)(Ue.eSY),g=(0,D.NC)(Ue.nq0,{loadingValue:!1}),{data:h}=De(n,p);return(0,b.jsxs)(me.N,{tabIndex:-1,onClick:l,to:c,className:z.centeredContainer,"aria-hidden":!0,children:[(0,b.jsx)(Ke,{uri:s,fileId:d,className:i()(z.videoPreview,{[z.videoPreviewCompleted]:t}),playerContainerClass:`${o}_Video`,overridePlatformId:Ze,poster:u,reportPreview:g,children:p&&h&&n&&(0,b.jsx)("div",{className:i()(z.transcript,z.transcriptForVideo),children:(0,b.jsx)(Ae,{url:n,data:h,standalonePlayer:r,shiftTranscriptByOffsetFromURL:m})})}),t?(0,b.jsx)(je,{onClick:a}):null]})};var $e=a(32402),Je=a(49060),Qe=a(5232);const Xe=`${B}-audio`,et=(e,t)=>e.setVolume(t),tt=({currentPreviewItem:e,uri:t,playerContainerClass:a,loop:n})=>{const[i,s]=(0,r.useState)({playing:!1,muted:!0,completed:!1,duration:0}),o={uri:t,currentPreviewItem:e,previewState:i,setPreviewState:s,playerContainerClass:a,loop:n,enabled:!0},l=(({uri:e,currentPreviewItem:t,setPreviewState:a,previewState:n,enabled:i})=>{const{isPlaying:s}=(0,Je.P)({uri:e},{featureIdentifier:"home"}),o=(0,$e.G)(),l=(0,r.useRef)(!1),c=(0,Ge.B)(),d=c.getStateForURI(e)?.standalonePlayer??null,u=t?.video,m=(0,D.NC)(Ue.x8),p=Boolean(u?.fileId),g=i&&m&&p,[h,y]=(0,r.useState)(null),v=g&&null===h,f=u?.startOffsetMs??0,x=u?.endOffsetMs??0,C=u?.transcriptUrl??null,b=Boolean(n&&n.playing&&!n.muted),E=Boolean(n&&n.completed&&!s),P=(0,r.useCallback)(async()=>{d&&((await d.getState()).playbackState.playing?d.setMuted(!n.muted):(d.setVolume(o.currentPlayerVolume),d.setMuted(!1),d.resume()))},[d,n.muted,o.currentPlayerVolume]),T=(0,r.useCallback)(()=>{},[]),I=(0,r.useCallback)(()=>{d&&!l.current&&(l.current=!0,d.playTracks([(0,ae.KT)({mediaType:"video",format:"MANIFEST_ID",fileId:u?.fileId??"",uri:e,poster:u?.thumbnailUrl??"",options:{position:f},logData:{playbackId:(0,Qe.E)(),featureUUID:V,featureIdentifier:H}})],{paused:!1,loop:!1,muted:!0}),d.addListener(ae.Pv.FIRST_BYTES,()=>{l.current=!1},{once:!0}),a(e=>({...e,playing:!0})))},[a,d,e,u?.fileId,u?.thumbnailUrl,f]),N=(0,r.useCallback)(()=>{d&&d.pause().catch(()=>{})},[d]),j=(0,r.useCallback)(async()=>{v&&d&&(b||n.completed||((await d.getState()).track?d.resume():I(),d.setMuted(!0)))},[v,d,b,I,n.completed]),_=(0,r.useCallback)(()=>{if(!v)return;if(!d)return;if(b||E)return;const e=()=>{d.pause().catch(()=>{})};l.current?d.addListener(ae.Pv.FIRST_BYTES,e,{once:!0}):e()},[v,d,b,E]);return(0,r.useEffect)(()=>{if(!g)return;if(!d)return;const e=e=>{y(e.data.error)};return d.addListener(ae.Pv.ERROR,e),()=>{d.removeListener(ae.Pv.ERROR,e)}}),(0,r.useEffect)(()=>{if(!v)return;if(!d)return;const e=e=>{e.data.position>=x&&(d.seek(f),d.pause(),a(e=>({...e,completed:!0})))};return d.addListener(ae.Pv.PROGRESS,e),()=>{d.removeListener(ae.Pv.PROGRESS,e)}},[v,d,a,x,f]),{durationMs:x,isListeningToPreview:b,isPreviewAvailable:v,togglePreview:P,pausePreview:N,userHasCompletedPreview:E,playPreview:T,standalonePlayer:d,transcriptUrl:C,shiftTranscriptByOffsetFromURL:!1,onPointerEnter:j,onPointerLeave:_}})(o),c=(({uri:e,currentPreviewItem:t,previewState:a,playerContainerClass:n,loop:i,enabled:s})=>{const{isPlaying:o}=(0,Je.P)({uri:e},{featureIdentifier:"home"}),l=(0,$e.G)(),c=Boolean(t?.audio?.url),d=(0,D.NC)(Ue.o5i),u=(0,D.NC)(Ue.nq0,{loadingValue:!1}),m=s&&d&&c,p=t?.audio?.transcriptUrl??null,g=(0,r.useMemo)(()=>({audioPlayerContainer:`.${n}_Audio`,audioProcessorOptions:{disable:!0},preinitMediaElement:!1,disallowProtectedTracks:!0,enableWithoutEME:!0,createPlayer:()=>document.createElement("audio")}),[n]),[h,y]=(0,r.useState)(!1),v=Boolean(a&&a.playing&&h),f=Boolean(a&&a.completed&&!o),x=(0,r.useCallback)((e,t)=>t.playbackState.playing&&h,[h]),C=(0,r.useCallback)(e=>{y(!1),e.pause().catch(()=>{})},[y]),b=(0,We.d)({config:g,inactivateInstance:C,activeIndicator:x,volumeSetter:et,overridePlatformId:Xe,reportPreview:u}),E=(0,r.useCallback)((e,t)=>{y(t),b.setVolume(e)},[b]),P=(0,r.useCallback)(e=>{const t=e.audio?.url;t&&b.playTracks([(0,ae.KT)({noAuth:!0,format:"GENERIC_MEDIA",mediaType:"audio",uri:e.uri,url:t,logData:{playbackId:(0,Qe.E)(),featureUUID:V,featureIdentifier:H}})],{loop:i,paused:!1,muted:!1})},[b,i]),T=(0,r.useCallback)(async()=>{if(!m)return;if(!t)return;const e=await b.getCurrentState();e.track?.url===t.audio?.url?e.playbackState.playing?h?E(0,!1):E(l.currentPlayerVolume,!0):(E(l.currentPlayerVolume,!0),b.resume()):(E(l.currentPlayerVolume,!0),P(t))},[m,t,b,E,l.currentPlayerVolume,h,P]),I=(0,r.useCallback)(()=>{C(b)},[C,b]),N=(0,r.useCallback)(async()=>{if(!m)return;if(!t)return;if(v||f||o)return;const e=await b.getCurrentState();E(0,!1),e.track?.url===t?.audio?.url?b.resume():P(t)},[m,t,v,f,b,o,E,P]),j=(0,r.useCallback)(()=>{m&&(v||f||(E(0,!1),b.pause().catch(()=>{})))},[m,v,f,E,b]);return{durationMs:a.duration??0,isPreviewAvailable:m,isListeningToPreview:v,togglePreview:T,playPreview:P,pausePreview:I,standalonePlayer:b,userHasCompletedPreview:f,transcriptUrl:p,shiftTranscriptByOffsetFromURL:!0,onPointerEnter:N,onPointerLeave:j}})({...o,enabled:!l.isPreviewAvailable}),d=l.isPreviewAvailable?"video":"audio",u="video"===d?l:c,{isPreviewAvailable:m,standalonePlayer:p}=u;return(0,r.useEffect)(()=>{if(!m)return;if(!p)return;const e=e=>{s(t=>({...t,duration:e.data.duration}))},t=e=>{s(t=>({...t,muted:e.data.muted}))},a=()=>{s(e=>({...e,playing:!0,completed:!1}))},r=()=>{s(e=>({...e,playing:!1}))},n=()=>{s(e=>({...e,playing:!1,completed:!0}))};return p.on(ae.Pv.DURATION_CHANGED,e),p.on(ae.Pv.MUTED_CHANGED,t),p.on(ae.Pv.PLAYING,a),p.on(ae.Pv.PAUSED,r),p.on(ae.Pv.TRACK_ENDED,n),()=>{p.removeListener(ae.Pv.DURATION_CHANGED,e),p.removeListener(ae.Pv.MUTED_CHANGED,t),p.removeListener(ae.Pv.PLAYING,a),p.removeListener(ae.Pv.PAUSED,r),p.removeListener(ae.Pv.TRACK_ENDED,n)}},[p,m]),{...u,type:d,previewState:i}};const at=new(a(75072).l)("feedBaselineLookup","query","a950fb7c4ecdcaf2aad2f3ca9ee9c3aa4b9c43c97e1d07d05148c4d355bea7fc",null),rt=(e,t)=>(0,Le.I)(at,e,t);var nt=a(80188),it=a(63352),st=a(54587),ot=a(76392);const lt=(0,r.createContext)(new Map);function ct(e,t){const a=new Map;for(const t of e)a.set(t,null);return t&&t.lookup.forEach(e=>{if("AlbumResponseWrapper"===e.__typename||"PlaylistResponseWrapper"===e.__typename||"EpisodeOrChapterResponseWrapper"===e.__typename)switch(e.data.__typename){case"Album":case"Playlist":{const t=(e.data.previewItems?.items||[]).reduce((e,t)=>{if("TrackResponseWrapper"!==t.__typename)return e;if("Track"!==t.data.__typename)return e;const a=(0,ot.g)(t.data.albumOfTrack?.coverArt?.sources||[])?.url||null,r=t.data.albumOfTrack?.coverArt?.extractedColors?.colorDark?.hex||null,n=t.data.previews?.audioPreviews.items?.[0];return e.push({name:t.data.name,uri:t.data.uri,canvas:t.data.canvas?{uri:t.data.canvas.uri,type:t.data.canvas.type,fileId:t.data.canvas.fileId,url:t.data.canvas.url,thumbnailUrl:(0,ot.g)(t.data.canvas.thumbnail?.sources)?.url}:null,background:{color:r,imageUrl:a},audio:n?{url:n.url,startOffsetMs:0,endOffsetMs:0,transcriptUrl:null}:null,video:null}),e},[]);a.set(e._uri,t);break}case"Episode":{const{audioPreview:t,videoPreview:r}=e.data.previewPlayback??{};a.set(e._uri,[{name:e.data.name,uri:e.data.uri,canvas:null,background:null,audio:t?.cdnUrl?{url:t.cdnUrl,startOffsetMs:t.offset?.startTime?.totalMilliseconds??0,endOffsetMs:t.offset?.endTime?.totalMilliseconds??0,transcriptUrl:t.transcriptUrl}:null,video:r?{fileId:r.fileId,thumbnailUrl:"ImageV2"===r.placeholderImage?.data.__typename?(0,ot.g)(r.placeholderImage?.data.sources)?.url??null:null,startOffsetMs:r.offset?.startTime?.totalMilliseconds??0,endOffsetMs:r.offset?.endTime?.totalMilliseconds??0,transcriptUrl:r.transcriptUrl}:null}]);break}}}),a}var dt=a(56897),ut=a(58248),mt=a(59725),pt=a(72248),gt=a(6478),ht=a(44451),yt=a(88439),vt=a(38819);let ft=function(e){return e.VideoEpisode="VideoEpisode",e.Carousel="Carousel",e.AudioEpisode="AudioEpisode",e}({});const xt=({layout:e,onClick:t=()=>{},onPlay:a=()=>{},onContextMenu:n=()=>{},uri:s,headerText:o,renderFooter:l,isPlayable:c,isAddable:d,renderSubtitle:u,className:m,testId:p,ariaPlayLabel:g,ariaPauseLabel:h,index:y,requestId:v,images:f,parentImages:x,color:C,dragMimeType:E,onMoreButtonClick:P,menu:T,audioPreviewInLoop:I,logCardImpressions:N})=>{const j=(0,r.useRef)(null),{previewItems:_,currentPreviewItemIndex:k,setCurrentPreviewItemIndex:S,currentPreviewItem:A}=(e=>{const t=(0,D.NC)(Ue.o5i),[a,n]=(0,r.useState)(0),i=(0,r.useContext)(lt),s=!i.has(e),{data:o}=rt({uris:[e]},{enabled:s}),l=(0,r.useMemo)(()=>{let a=[];return a=i.has(e)?i.get(e)??[]:ct([e],o).get(e)??[],t?a:a.slice(0,1)},[o,t,i,e]);return{previewItems:l,currentPreviewItem:l[a]??null,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n}})(s),{dynamicColors:R}=(0,xe.q)(),w=R?.higherContrast.backgroundBase.toCSS(fe.a.RGBA)??C,L=`BigCard_${s.replace("spotify:","").replace(/:/g,"_")}`,{isPlaying:U,isActive:B,togglePlay:H}=(0,Je.P)({uri:s},{featureIdentifier:"home"}),V=e===ft.AudioEpisode,{durationMs:Y,isListeningToPreview:W,togglePreview:K,pausePreview:Z,standalonePlayer:q,userHasCompletedPreview:$,previewState:J,isPreviewAvailable:Q,playPreview:X,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,onPointerEnter:ae,onPointerLeave:re}=tt({uri:s,currentPreviewItem:A,loop:I,playerContainerClass:L}),ne=(0,ut.g)(),ie=(0,pt.d)({type:"link",uri:s}),{spec:se,logger:oe,UBIFragment:le}=(0,ht.D)(M.y,{data:{uri:s,position:y,reason:v??""}}),de=(0,yt.n)(se.getAbsoluteLocation(),se),{draggable:ue,onDragStart:me}=(0,mt.P)({itemUris:[s],itemMimeTypes:E?[E]:[],dragLabelText:o}),pe=(0,r.useCallback)(()=>{let e=se.cardPlayButtonFactory().hitPause({itemToBePaused:s});U||(e=B?se.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):se.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=oe.logInteraction(e);a(s,t)?.preventDefault||(H({loggingParams:t}),Z())},[se,s,U,oe,a,H,B,Z]),ge=(0,r.useCallback)(()=>{let e=se.cardPlayButtonFactory().hitPause({itemToBePaused:s});U||(e=B?se.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):se.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=oe.logInteraction(e);a(s,t),H({loggingParams:t})},[B,U,oe,a,se,H,s]),he=(0,r.useCallback)(()=>{const e=se.hitUiNavigate({destination:s});oe.logInteraction(e)},[oe,se,s]),ye=(0,r.useCallback)(()=>{t(s),he()},[t,s,he]),be=(0,F.o_h)(s)?.toURLPath(!0)??"",Ee=ie?(0,vt.hF)(be):be,[Pe,Te]=(0,r.useState)(!1),Ie=e===ft.VideoEpisode||e===ft.Carousel,Ne={...(0,gt.w)({contrast:"higherContrast"}),"--background-color":w||"","--background-base-high-contrast":R?.highContrast.backgroundBase.toCSS(fe.a.RGBA)||"","--higher-contrast-text-base-color":R?.higherContrast.textSubdued.toCSS(fe.a.RGBA)||""};return(0,b.jsx)(le,{spec:se,children:(0,b.jsx)(dt.E,{uri:s,trigger:dt.l.OnMouseDown,children:(0,b.jsxs)(O.a,{variant:"naked",onClick:()=>{ye(),ne(Ee)},ref:j,className:i()(z.card,m,"encore-medium-devices-theme",{[z.isPlayingContext]:U,[z.isListeningToPreview]:W,[z.isExpandedFooter]:Pe,[z.withHeaderImage]:Ie}),style:Ne,"data-testid":p,draggable:ue,onDragStart:me,onContextMenu:n,onPointerEnter:ae,onPointerLeave:re,children:[(0,b.jsx)("div",{"aria-hidden":!0,"data-uri":s,className:z.fillSpaceAbsolute,ref:N?de:null}),e===ft.Carousel?(0,b.jsx)(ze,{cardRef:j,isListeningToPreview:W,playPreview:X,playerContainerClass:L,previewItems:_,setCurrentPreviewItemIndex:S,currentPreviewItemIndex:k}):null,(0,b.jsx)(Ce,{carouselLayout:e===ft.Carousel,withFooterOverlay:Boolean(l)}),(0,b.jsx)(ve,{uri:s,text:o,images:f,imageColor:w,renderSubtitle:u,cardRef:j}),e===ft.VideoEpisode&&A?.video?(0,b.jsx)(qe,{userHasCompletedPreview:$,handleContinuePlayingButtonClick:ge,standalonePlayer:q,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,uri:s,playerContainerClass:L,handleCardClick:ye,entityUrl:Ee,fileId:A.video.fileId,poster:A.video.thumbnailUrl}):null,e===ft.AudioEpisode?(0,b.jsx)(Oe,{hasAudioWave:V,userHasCompletedPreview:$,handleContinuePlayingButtonClick:ge,standalonePlayer:q,playerContainerClass:L,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,uri:s,previewState:J,parentImages:x,images:f,imageColor:w,handleCardClick:ye,entityUrl:Ee}):null,(0,b.jsxs)("footer",{className:z.footer,children:[(0,b.jsx)(G,{isExpandedFooter:Pe,setIsExpandedFooter:Te,expandFooterDescribedBy:s,children:l?.()}),(0,b.jsx)(ce,{uri:s,standalonePlayer:q,isPreviewAvailable:Q,isPlayingContext:U,isListeningToPreview:W,durationMs:Y,togglePreview:K,userHasCompletedPreview:$,currentPreviewItem:A,isAddable:d,isPlayable:c,ariaPlayLabel:g,ariaPauseLabel:h,onMoreButtonClick:P,handlePlayButtonClick:pe,menu:T})]})]})})})};var Ct=a(88462),bt=a(82898),Et=a(37668),Pt=a(21943),Tt=a(10817),It=a(7213),Nt=a(10812),jt=a(36731),_t=a(18204),kt=a(35746),St=a(67793),At=a(22233),Rt=a(89631),wt=a(51490),Lt=a(85003),Dt=a(61954),Ut=a(55247),Ot=a(72045),Mt=a(24636),Ft=a(31567),Bt=a(16781),Ht=a(58873),Vt=a(4291),Yt=a(10183),zt=a(13059),Gt=a(44265);const Wt="idHG2QvJHvQf90DSY46x",Kt="poE16HkpVWFq3nhSTb2W",Zt="DDczIT0r8kdw06ayR6Pk",qt="HX4F7VZw1qkibtm9ZxTA",$t="RGa2pIWA4ZVoqy_HaA_O",Jt="gSWy1TRtHd_7douxrCnV",Qt="NEONF5EC6u6pAMcMhRzz",Xt="iR8cg_Rc1wUWtGzEaati",ea="ZP8VIceBAKjGIWxvfsOM",ta="Gxxtcs8rtQvNZfj4AD8J",aa="cpYk6uU9bT9nVvGAVNNw";function ra({data:e,index:t,shelfIndex:a}){const r=t,n=(0,kt.f0)(e),i=(0,kt.o8)(e),s=(0,kt.Uk)(e)??null,o=(0,u.wA)(),l=(0,D.NC)(Ue.x8);let c;switch(e.__typename){case"Album":c=(0,b.jsx)(Et.h,{uri:e.uri});break;case"Audiobook":c=(0,b.jsx)(Pt.p,{uri:e.uri});break;case"Episode":c=(0,b.jsx)(Tt.b,{uri:e.uri});break;case"Playlist":c=(0,b.jsx)(It.W,{uri:e.uri});break;default:return(0,zt.k)(e),null}switch(e.__typename){case"Album":return(0,b.jsx)(bt.h,{menu:c,children:(0,b.jsx)(xt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:s,isPlayable:!0,isAddable:!0,audioPreviewInLoop:!0,layout:ft.Carousel,renderFooter:()=>null,renderSubtitle:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ct.t,{children:e.albumType===Ot._m.Single?y.Ru.get("single"):y.Ru.get("card.tag.album")}),(0,b.jsx)("div",{className:aa,children:(0,Mt.K)(e.artists).map((e,t)=>[t>0&&y.Ru.getSeparator(),(0,b.jsx)(me.N,{to:e.uri,stopPropagation:!0,children:(0,b.jsx)(m.E,{variant:"bodySmall",className:Xt,children:e.name})},e.uri)])})]}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,(0,Mt.K)(e.artists).map(e=>e.name).join(y.Ru.getSeparator())),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,(0,Mt.K)(e.artists).map(e=>e.name).join(y.Ru.getSeparator()))})},r);case"Audiobook":{const i=!!(0,Ft.e)(e.accessInfo)?()=>(o((0,U._3)()),{preventDefault:!0}):void 0;return(0,b.jsx)(xe.d,{dynamicColors:(0,Lt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,b.jsx)(bt.h,{menu:c,children:(0,b.jsx)(xt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:s,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:ft.AudioEpisode,onPlay:i,renderFooter:()=>{const t=e.rating?.averageRating,a=e.accessInfo?.signifier?.text,r=(e.description||"").replace(/<[^>]*>?/gm,""),n=(0,Ht.JO)(e.publishDate),i=n?new Date(n):void 0;return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsx)(m.E,{variant:"bodySmall",as:"div",semanticColor:"textBrightAccent",children:a}),i&&!isNaN(i.getTime())&&(0,b.jsx)(Ct.t,{semanticColor:"textBase",className:ta,children:(0,Gt.gD)(i)}),e.audiobookDuration&&!isNaN(e.audiobookDuration.totalMilliseconds)&&(0,b.jsx)(Ct.t,{semanticColor:"textBase",className:ta,children:(0,b.jsx)(wt.d,{durationMs:e.audiobookDuration.totalMilliseconds})}),!0===t?.showAverage&&void 0!==t.average&&(0,b.jsxs)(Ct.t,{semanticColor:"textBase",className:ta,children:[(0,b.jsx)(P.j,{size:"xsmall"})," ",y.Ru.formatNumber(t.average,{maximumFractionDigits:1})]}),(0,b.jsx)("span",{children:(0,b.jsx)(Rt.N,{source:r??"",LinkComponent:me.N})})]})},renderSubtitle:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ct.t,{children:y.Ru.get("card.tag.audiobook")}),(0,b.jsx)("span",{children:e.authorsV2?.[0]?.name})]}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,e.authorsV2?.[0]?.name),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,e.authorsV2?.[0]?.name)})},r)})}case"Episode":{const o=e.mediaTypes?.includes(Vt.C.Video),d=o&&l;return(0,b.jsx)(xe.d,{dynamicColors:(0,Lt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,b.jsx)(bt.h,{menu:c,children:(0,b.jsx)(xt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,parentImages:i,color:s,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:d?ft.VideoEpisode:ft.AudioEpisode,renderSubtitle:()=>(0,b.jsxs)(b.Fragment,{children:[(0,Bt.V)(e.contentRating)&&(0,b.jsx)(St.U,{}),o?(0,b.jsx)(_t.T,{className:ea}):(0,b.jsx)(Ct.t,{children:y.Ru.get("card.tag.episode")}),(0,b.jsx)("div",{className:aa,children:"Podcast"===e.podcastV2.data.__typename?(0,b.jsx)(me.N,{to:e.podcastV2.data.uri,stopPropagation:!0,children:(0,b.jsx)(m.E,{variant:"bodySmall",className:Qt,children:e.podcastV2.data.name})}):""})]}),renderFooter:()=>{const t=(0,Ht.JO)(e.releaseDate),a=t?new Date(t):void 0;return(0,b.jsxs)(b.Fragment,{children:[a&&!isNaN(a.getTime())&&(0,b.jsx)(Ct.t,{semanticColor:"textBase",className:ta,children:(0,Gt.gD)(a)}),!isNaN(e.duration.totalMilliseconds)&&(0,b.jsx)(Ct.t,{semanticColor:"textBase",className:ta,children:(0,b.jsx)(wt.d,{durationMs:e.duration.totalMilliseconds})}),(0,b.jsx)("span",{children:(0,b.jsx)(Rt.N,{source:e.description??"",LinkComponent:me.N})})]})},menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,"Podcast"===e.podcastV2.data.__typename?e.podcastV2.data.name:""),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,"Podcast"===e.podcastV2.data.__typename?e.podcastV2.data.name:"")})},r)})}case"Playlist":return(0,b.jsx)(bt.h,{menu:c,children:(0,b.jsx)(xt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:s,isAddable:!0,audioPreviewInLoop:!0,layout:ft.Carousel,isPlayable:!(0,Dt.p)(e?.attributes),renderSubtitle:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ct.t,{children:y.Ru.get("card.tag.playlist")}),"User"===e.ownerV2.data.__typename&&(0,b.jsx)("div",{className:aa,children:e.ownerV2.data.name})]}),renderFooter:()=>(0,b.jsx)(Rt.N,{source:e.description??"",LinkComponent:me.N,onLinkClick:e=>{e.stopPropagation()}}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,"User"===e.ownerV2.data.__typename?e.ownerV2.data.name:""),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,"User"===e.ownerV2.data.__typename?e.ownerV2.data.name:"")})},r);default:return(0,zt.k)(e),null}}const na=({icon:e})=>{switch(e){case"trending":return(0,b.jsx)(T.L,{size:"small"});case"briefcase":return(0,b.jsx)(I.o,{size:"small"});case"enhance":return(0,b.jsx)(N.M,{size:"small"});case"headphones":return(0,b.jsx)(j.r,{size:"small"});case"add-to-playlist":return(0,b.jsx)(_.u,{size:"small"});case"album":return(0,b.jsx)(k.I,{size:"small"});case"edit":return(0,b.jsx)(S.G,{size:"small"});case"lab":return(0,b.jsx)(A.X,{size:"small"});case"light-bulb":return(0,b.jsx)(R.N,{size:"small"});case"preview":return(0,b.jsx)(w.W,{size:"small"});case"star":return(0,b.jsx)(L.a,{size:"small"});default:return null}},ia=({title:e,icon:t})=>(0,b.jsxs)("header",{className:$t,children:[e&&t&&(0,b.jsx)(na,{icon:t}),e&&(0,b.jsx)(m.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Jt,children:e})]});const sa=({item:e,index:t,shelfIndex:a})=>{const{sectionUri:r}=e,{spec:n}=(0,jt.w)({seeAllUri:"",index:t,id:r||""}),i=(0,yt.n)(n.getAbsoluteLocation(),n);return(0,st.v)(e.content)&&function(e){switch(e.__typename){case"Album":case"Audiobook":case"Episode":case"Playlist":return!0;default:return!1}}(e.content.data)?(0,b.jsx)(Ut.r,{spec:n,children:(0,b.jsx)("div",{className:Kt,ref:i,children:(0,b.jsx)("div",{className:Zt,children:(0,b.jsxs)("div",{className:qt,children:[(0,b.jsx)(ia,{icon:e.recsplanation?.iconName,title:e.recsplanation.title?.transformedLabel}),(0,b.jsx)(ra,{data:e.content.data,index:t,shelfIndex:a})]})})},t)}):null},oa=({section:e,index:t})=>{const a=e.items.map((e,a)=>(0,b.jsx)(sa,{item:e,index:a,shelfIndex:t},a)).filter(Yt.P);return 0===a.length?null:(0,b.jsx)(At.x,{config:(0,he.s1)(he.yV.HOME_FEED_BASELINE),children:(0,b.jsx)(Nt.$,{className:Wt,total:a.length,rowTruncationMethod:"floor",children:a})})};var la=a(17541),ca=a(41350),da=a(29369),ua=a(95130);var ma=a(39529);var pa=a(58848),ga=a(91816),ha=a(78030);const ya=()=>{const e=(t=(0,pa.J)(),!(0,ma.w2)(navigator.userAgent)&&(1===t.length||1===window.navigation?.entries().length));var t;const{isWeb:a}=(0,ga.V)(),n=a&&e,[i,s]=(0,r.useState)(n?(()=>{try{const e=window.innerHeight-da.uC-da.fO;return Math.ceil(e/Nt.Y)}catch(e){return e instanceof Error&&(0,ua.fE)({metric_type:ca.MetricTypes.COUNTER,tags:{message:e.message,source:"deriveLimit"},what:"dwp-lazy-shelves-error",value:1}),null}})():null),o=(e=>(0,r.useCallback)(()=>{try{e()}catch(e){e instanceof Error&&(0,ua.fE)({metric_type:ca.MetricTypes.COUNTER,tags:{message:e.message,source:"useHandleTrigger"},what:"dwp-lazy-shelves-error",value:1})}},[e]))((0,r.useCallback)(()=>{i&&s(null)},[i,s]));return((e,t)=>{(0,ha.i)(()=>t("scroll"),{disabled:null===e})})(i,o),((e,t)=>{(0,r.useEffect)(()=>{if(null===e)return;const a=setTimeout(()=>t("timeout"),3e3);return()=>{clearTimeout(a)}},[e,t])})(i,o),i};var va=a(27498),fa=a(21903),xa=a(89114),Ca=a(69316),ba=a(10700),Ea=a(50523);const Pa="Ll9BI5wiwxcacdsRrRkf",Ta="gIgDhuqX108luG0cBS9I",Ia="fXA5UFRNDfEfYnMl41oJ",Na="LaECibomCWOjwsYvvbQS",ja="zwESgq5KMrvECcrlDXsi",_a="PIdA3MMg5HmI2VVklFjD",ka=()=>(0,b.jsxs)("div",{className:Pa,children:[(0,b.jsx)("div",{className:Ta}),(0,b.jsxs)("div",{className:Ia,children:[(0,b.jsx)(ba.k,{size:"medium",className:Na}),(0,b.jsx)(Ea._,{as:"p",className:ja,variant:"titleMedium",semanticColor:"textBase",fontWeight:"extra-bold",fontWidth:"narrow",style:{fontSize:"40px"},children:y.Ru.get("web-player.onboarding-checklist.complete-card.title")}),(0,b.jsx)(m.E,{variant:"bodyMedium",className:_a,children:y.Ru.get("web-player.onboarding-checklist.complete-card.text")})]})]});var Sa=a(56363),Aa=a(20083),Ra=a(35274);const wa="FXbKqEwyL870mH6wICLs",La="bS4rZ45sqcnKc485UE07",Da="uImmOWgqj4xKFM8P9MmN",Ua="Cx3QtMX2WaMeuaPcC0Yo",Oa="N0VOVYvDmQiF7oQQeJMQ",Ma="EWt4vqEPkj75nfwDtOOD",Fa="C2RLAchBx_vTBJAJ_iYf",Ba="hTSxXXbJmBsyXZRud1p4",Ha="eC20cv2CQIcFl4YObeya",Va="Z_zzrNa3_GmOlinl28wx",Ya=({task:e})=>{const{performTask:t}=(0,Aa.V)(),a=(0,Sa.S)(),{spec:n,logger:s}=(0,ht.D)(xa.Y,{});return(0,r.useEffect)(()=>{s.logImpression(n.shelfCarouselFactory().taskCardFactory({identifier:e.id}).impression())},[s,n,e.id]),(0,b.jsxs)("div",{className:wa,style:{"--onboarding-card-color-dark":`${e.backgroundDark}`,"--background-base":`${e.backgroundDark}`,"--text-subdued":`${e.textSubdued}`,"--essential-subdued":`${e.textSubdued}`},children:[(0,b.jsx)("div",{className:La,style:{"--onboarding-card-color-light":`${e.backgroundLight}`}}),(0,b.jsxs)("div",{className:Da,children:[(0,b.jsxs)("div",{className:Ua,children:[(0,b.jsx)(Ea._,{as:"p",className:Ba,variant:"titleMedium",semanticColor:"textBase",fontWeight:"extra-bold",fontWidth:"narrow",style:{fontSize:"40px"},children:e.title}),(0,b.jsx)(m.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:e.description})]}),(0,b.jsxs)("div",{className:Fa,children:[(0,b.jsx)(Ne.$,{size:"small",onClick:()=>{t(e.id),(e=>{const t=n.shelfCarouselFactory().taskCardFactory({identifier:e}).actionButtonFactory();switch(e){case"start-playing":s.logInteraction(t.hitFocusInputField());break;case"save-playlist":case"watch-a-video":s.logInteraction(t.hitUiNavigate({destination:"/search"}));break;case"create-playlist":s.logInteraction(t.hitCreatePlaylist());break;default:s.logInteraction(t.hitUiReveal())}})(e.id)},className:Va,children:e.action}),(0,b.jsx)(g.H,{size:"small",onClick:()=>{a("openChecklist",{}),s.logInteraction(n.shelfCarouselFactory().taskCardFactory({identifier:e.id}).openChecklistButtonFactory().hitUiReveal())},className:i()(Ha,Va),children:y.Ru.get("web-player.onboarding-checklist.card.open-checklist-button")})]}),(0,b.jsx)("div",{className:Oa,children:(0,b.jsx)(Ra._,{src:(0,Y.bj)(`images/${e.imageKey}`),className:Ma,loading:"lazy"})})]})]})},za="Rsx0PO8bdu6rLQWsypvG",Ga="N5yrmZwif6k3rIqi5oNA",Wa="tJfgNecgIaL2uDX1luQS",Ka=()=>{const{spec:e,logger:t}=(0,ht.D)(xa.Y,{}),{tasks:a}=(0,Aa.V)(),n=(0,r.useMemo)(()=>a.filter(e=>!e.completed).map((e,t)=>(0,b.jsx)(Ya,{title:e.title,description:e.description,task:e},`onboarding-spotlight-card-${t}`)),[a]),[s,o]=(0,r.useState)(n[0]),[l,c]=(0,r.useState)(0),d=(0,r.useCallback)(()=>{t.logInteraction(e.shelfHeaderFactory().nextButtonFactory().hitUiReveal()),c(l+1),o(n[l+1])},[l,t,e,n]),u=(0,r.useCallback)(()=>{t.logInteraction(e.shelfHeaderFactory().prevButtonFactory().hitUiReveal()),c(l-1),o(n[l-1])},[l,t,e,n]);(0,r.useEffect)(()=>{n.length<=l?(o(n[n.length-1]),c(n.length-1)):o(n[l])},[l,n]);const m=(0,b.jsxs)("div",{className:Wa,children:[(0,b.jsx)(ue.Zp,{label:y.Ru.get("carousel.left"),children:(0,b.jsx)(g.H,{size:"small",iconOnly:va.g,"aria-label":y.Ru.get("carousel.left"),disabled:0===l,onClick:u})}),(0,b.jsx)(ue.Zp,{label:y.Ru.get("carousel.right"),children:(0,b.jsx)(g.H,{size:"small",iconOnly:fa.V,"aria-label":y.Ru.get("carousel.right"),disabled:l===n.length-1,onClick:d})})]}),p=n.length<1;return(0,b.jsxs)("section",{className:i()(Ga,za),"data-shelf-collapsable":!0,children:[(0,b.jsx)(Ca.k,{title:y.Ru.get("web-player.onboarding-checklist.shelf.title"),trailing:p?void 0:m}),p?(0,b.jsx)(ka,{}):s]})};var Za=a(29665),qa=a(61468),$a=a(22094);const Ja=({greeting:e,container:t,showDsaMessage:a,enableFeedBaseline:n,header:u})=>{const m=(0,c.lr)(),p=(0,Za.q)(),g=(0,qa.w)(),h=m&&!p&&[Ue.Vt9.NavAndHome,Ue.Vt9.NavHomeAndSpotlight].includes(g.variant),y=m&&!p&&g.variant===Ue.Vt9.NavAndHome,v=(0,r.useMemo)(()=>((e,t,a=!1)=>{const r=[];a&&r.push({localOverrideTypename:"DesktopOnboardingHomeShelf"});let n=[],i=null;const s=e.sections.items.reduce((e,a)=>{switch(a.data?.__typename){case"HomeFeedBaselineSectionData":if(!t)break;null===i&&(i={uri:`spotify:home:feed-baseline-unified-shelf:${e.length}`,items:[]},e.push({localOverrideTypename:"HomeFeedBaselineUnifiedShelf",localItem:i})),a.sectionItems.items.forEach(e=>{i&&i.items.push({uri:e.uri,sectionUri:a.uri,content:e.content,recsplanation:a.data})});break;default:i=null,e.push({localOverrideTypename:!1,item:a})}return e},[]);return n=function(e){const t=e.sections.items;return"HomeShortsSectionData"===t[0]?.data?.__typename}(e)?[s[0],...r,...s.slice(1)]:[...r,...s],n})(t,n,h),[t,n,h]),f=ya(),x=f?v.slice(0,f):v,C=function(e,t){const a=(0,r.useMemo)(()=>t?e.sections.items.reduce((e,t)=>("HomeFeedBaselineSectionData"===t.data?.__typename&&(0,nt.M)(t,t.data).sectionItems.items.forEach(t=>{const{content:a}=t;if((0,st.v)(a)){const{data:t}=a;"GenericError"!==t.__typename&&"NotFound"!==t.__typename&&"RestrictedContent"!==t.__typename&&"DiscoveryFeed"!==t.__typename&&e.push(t.uri)}}),e),[]):[],[e,t]),{data:n}=rt({uris:a},{enabled:a.length>0,gcTime:it.gO,staleTime:it.jl});return(0,r.useMemo)(()=>ct(a,n),[n,a])}(t,n),P=(0,r.useRef)(null);return(e=>{const t=(0,o.W)();(0,l.w)({refOrElement:e,observeOnly:"width",observeOnMount:!0,onResize:()=>{const a=e.current?.querySelectorAll(":scope > [data-shelf='carousel']");if(a?.length)for(const e of a)e instanceof HTMLElement&&((0,s.X)(e,t)?e.removeAttribute("data-shelf-notatedge"):e.setAttribute("data-shelf-notatedge","true"))}})})(P),(0,b.jsxs)("section",{className:i()($a.A.home,$a.A.homepageWithCarousels),"data-testid":"home-page",children:[(0,b.jsx)(d.q,{}),(0,b.jsxs)("div",{className:i()($a.A.homepageContent,"contentSpacing"),ref:P,children:[a&&(0,b.jsx)(E,{}),u,(0,b.jsx)(lt.Provider,{value:C,children:x.map((t,a)=>{switch(t.localOverrideTypename){case"HomeFeedBaselineUnifiedShelf":return(0,b.jsx)(oa,{section:t.localItem,index:a},`${a}-${t.localItem.uri}`);case"DesktopOnboardingHomeShelf":return(0,b.jsx)(Ka,{},`${a}-onboarding-spotlight`);default:return(0,b.jsx)(la.Q,{greeting:e,section:t.item,index:a,hideFixedShelves:y},`${a}-${t.item.uri}`)}})})]})]})}},79232:(e,t,a)=>{function r(e,t=1,a=0){if(a>t)return 1;let r=(e-a)/(t-a);return Number.isNaN(r)&&(r=1),Math.min(Math.max(r,0),1)}a.d(t,{i:()=>r})},82880:(e,t,a)=>{a.d(t,{o:()=>f});var r=a(54091),n=a(52782),i=a(63087),s=a(32354),o=a(37647),l=a(62411),c=a(41667),d=a(74777),u=a(51629),m=a(87524),p=a(58521);var g=a(7100),h=a(49060),y=a(86070);const v=({metadata:e,index:t,variant:a,role:o})=>{const{isPlaying:l,togglePlay:c}=(0,h.P)({uri:e.uri},{featureIdentifier:"your_library"}),{name:d,images:u}=e;return(0,y.jsx)(n.Z,{variant:a,index:t,delegatePlayback:!0,isPlaying:l,featureIdentifier:"your_library",onPlay:(e,t)=>c({loggingParams:t}),headerText:d,uri:e.uri,role:o,renderCardImage:()=>(0,y.jsx)(i.M,{images:u}),renderSubHeaderContent:()=>(0,y.jsx)(s.c,{children:r.Ru.get("tracklist-header.songs-counter",e.totalLength)})})},f=({index:e,variant:t,role:a})=>{const r=function(){const e=(0,m.d)({offset:0,limit:1}),{user:t}=(0,l.d4)(u.Ht),a=(0,c.Z)();if(null===e||null===t)return null;const r=(0,d.$R)(a);return r?{uri:r.uri,name:r.name,images:r.images,totalLength:e?.totalLength,unfilteredTotalLength:e.unfilteredTotalLength,owner:(0,p.w)(t)}:null}();return r?(0,y.jsx)(v,{metadata:r,index:e,variant:t,role:a}):(0,y.jsx)(o.u,{cardImage:(0,y.jsx)(i.M,{images:g.Wd}),isLoading:!0,variant:t})}},88505:(e,t,a)=>{a.d(t,{j:()=>i});var r=a(69040),n=a(94209);function i(){return(0,n.N)(r.X6)}},97533:(e,t,a)=>{a.d(t,{A:()=>r});const r={coverContainer:"xwmHcoGFMXA0G2iBT3jO",yourEpisodesCard:"CUZw29ncqG8glCwpFiG1",coverIcon:"dID9GW63ey3cbi7fIE6p"}},98649:(e,t,a)=>{a.d(t,{h:()=>s,r:()=>o});var r=a(30758),n=a(86070);const i=(0,r.createContext)({}),s=({children:e,extensionsData:t={}})=>(0,n.jsx)(i.Provider,{value:t,children:e}),o=()=>(0,r.useContext)(i)}}]);
//# sourceMappingURL=6059.js.map