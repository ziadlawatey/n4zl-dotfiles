"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6457],{5300:(e,t,r)=>{r.d(t,{P:()=>b});var i=r(30758),a=r(54091),n=r(74690),l=r(1041),s=r(92788),o=r(57355),c=r(26849),d=r(28937),u=r(82079),p=r(97378),m=r(39233),y=r(710),g=r(89307),x=r(86070);const b=i.memo(function({uri:e,artistUri:t,canPin:r=m.oT.NO,isPinned:i=!1,canRemove:b=!1}){const{spec:h}=(0,y.o)(e);return(0,x.jsxs)(n.W,{children:[b&&(0,x.jsx)(u.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,x.jsx)(s.z,{spec:h,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==m.oT.NO&&(0,x.jsx)(d.k,{uri:e,canPin:r,isPinned:i,type:g.c.PRE_RELEASE_ALBUM,spec:h}),(0,x.jsxs)(p.h,{divider:"before",children:[(0,x.jsx)(l.m,{uri:e,spec:h,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,x.jsx)(o.x,{spec:h,uri:e,type:g.c.PRE_RELEASE_ALBUM})]}),(0,x.jsx)(c.q,{spec:h,divider:"before",uri:e})]})})},49904:(e,t,r)=>{r.d(t,{u:()=>b});var i=r(30758),a=r(27932),n=r(15273),l=r(54091),s=r(74690),o=r(48564),c=r(1041),d=r(26849),u=r(28937),p=r(97378),m=r(39233),y=r(710),g=r(89307),x=r(86070);const b=i.memo(function({uri:e,onClickNotInterested:t,onClickReport:r,canPin:i=m.oT.NO,isPinned:b=!1}){const{spec:h}=(0,y.o)(e);return(0,x.jsxs)(s.W,{children:[!!t&&(0,x.jsx)(o.D,{role:"menuitem",leadingIcon:(0,x.jsx)(n.P,{semanticColor:"textSubdued",size:"small"}),onClick:t,children:l.Ru.get("concerts.not_interested.title")}),i!==m.oT.NO&&(0,x.jsx)(u.k,{uri:e,canPin:i,isPinned:b,type:g.c.CONCERT,spec:h}),(0,x.jsx)(p.h,{children:(0,x.jsx)(c.m,{spec:h,uri:e,displayText:l.Ru.get("context-menu.copy-concert-link")})}),!!r&&(0,x.jsx)(o.D,{role:"menuitem",leadingIcon:(0,x.jsx)(a.W,{semanticColor:"textSubdued",size:"small"}),onClick:r,children:l.Ru.get("concerts.flag_issue.title")}),(0,x.jsx)(d.q,{spec:h,uri:e})]})})},51632:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(68467);function a(){return(0,i.y)()[0]}},68467:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(30758),a=r(11085);function n(){const e=(0,a.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)(()=>{const t=e.subscribeIsEnabled(r);return()=>t()},[e]);return[t,(0,i.useCallback)(t=>e.setIsEnabled(t),[e])]}},73634:(e,t,r)=>{r.d(t,{x:()=>n});var i=r(71345),a=r(94209);function n(){return(0,a.N)(i.b)}},80628:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>Z});var i=r(30758),a=r(62960),n=r(79657),l=r(54091),s=r(716),o=r(7885);const c="Mtwyh8Z9qnyb_SQQhZlM";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=o.IB[e]??o.IB.en,r=(0,s.ZZ)(),u=(0,i.useCallback)(()=>{r({type:"OPEN"})},[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(a.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var p=r(8143),m=r(78717),y=r(81458),g=r(27360),x=r(72248),b=r(52262),h=r(89307),f=r(38819),P=r(44544);const C="_4oel5PYEi1kIvPp8Fk7Q",v=()=>window.location.pathname;let S=v;const w=()=>window.location.href;let j=w;const T=()=>window.location.origin;let I=T;const R=e=>{window.location.href=e};let A=R;const D=({children:e,locale:t,onClick:r,type:i="button"})=>{const a=t===b.Xn,n=(0,P.vf)(S()),s=(0,g.o_h)(S()),o=(0,x.d)({type:"route",uri:n?h.c.HOME:s?.toURI()}),c={className:C,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(j());j().includes("locale")&&t.searchParams.delete("locale"),A(t.href)}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,f.ll)(S(),!a),i=(0,f.hF)(r,(0,l.a7)(t).baseName),n=o?i:S(),s=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${I()}${n}`);return(0,d.jsx)("a",{href:s,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},O="g1F6wSz1rIjKqzVLXOab",E=({style:e,children:t})=>(0,d.jsx)("div",{className:O,style:e,children:t});var L=r(97500),N=r.n(L);const k="iyXyI4fcehg_5wuBOJwI",F="oygpB4ATp86RUlgUYVmW",B="XIWDBi1zOjfwUXZTvK3_",M="ndm_C8DJwThMeF8sXVgQ",U="rLVwh5YIyFYQ2BrwZ0hR",V="CA18C6gJaEyA1SpK0G8C",_=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:a}=(0,s.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:N()(k,{[F]:a}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},z=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,s.iL)();return(0,d.jsx)("div",{className:B,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var H=r(30920);const K=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:V,onClick:()=>{e()},children:(0,d.jsx)(H.M,{size:"small","aria-label":l.Ru.get("close")})});var Y=r(1994),G=r(30469),W=r(49348),X=r(87159);const Z=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,a]=(0,i.useState)("0"),n=(0,s.ZZ)(),c=(0,i.useCallback)(()=>{n({type:"CLOSE"})},[n]),{isOpen:u}=(0,s.iL)(),g=(0,i.useCallback)(()=>{a(`${t.current?.getBoundingClientRect().height}px`)},[a]),x=e=>{var t;(0,X.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),c()};if((0,Y.m)(c),(0,W.w)({refOrElement:t,observeOnly:"height",onResize:g}),(0,i.useEffect)(()=>{g()},[g]),!e.current)return null;const b="language-selection-title",h="language-selection-subtitle",f={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(G.s,{active:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(_,{onClose:c,children:(0,d.jsxs)(z,{ariaLabelledBy:b,ariaDescribedBy:h,children:[(0,d.jsxs)("div",{className:M,ref:t,children:[(0,d.jsxs)("div",{className:U,children:[(0,d.jsx)(m.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:b,paddingBottom:y.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(m.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:h,paddingBottom:y.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(K,{onClose:c})]}),(0,d.jsx)(E,{style:{...f},children:o.Np.map(e=>{const t=(0,l.a7)(e).baseName,r=(0,P.p)({urlLocale:t,type:"locale"});return(0,d.jsxs)(D,{onClick:x,locale:e,type:r?"link":"button",children:[(0,d.jsx)(m.E,{semanticColor:"textBase",children:o.IB[e].displayName}),(0,d.jsx)(m.E,{children:o.IB[e].displayNameEn})]},e)})})]})})})}),e.current)}},82079:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),a=r(62411),n=r(10700),l=r(19717),s=r(48564),o=r(81694),c=r(832),d=r(86070);const u=i.memo(function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),m=(0,c.f)(),y=(0,i.useCallback)(async()=>{u((0,l.aw)([{uri:e,isPrerelease:!0}]))},[u,e]);return(0,d.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!m?.getCapabilities().canModifyOffline,onClick:y,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})})},83994:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(62936);const a="R2QAD3ySx4eplaszeU4r";var n=r(86070);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},88505:(e,t,r)=>{r.d(t,{j:()=>n});var i=r(69040),a=r(94209);function n(){return(0,a.N)(i.X6)}},92437:(e,t,r)=>{r.d(t,{YourLibraryX:()=>Yc});var i=r(30758),a=r(97500),n=r.n(a),l=r(96131),s=r(62411),o=r(89408),c=r(88308),d=r(91198),u=r(3935),p=r(64932),m=r(82898),y=r(74690),g=r(92631),x=r(24148),b=r(54091),h=r(48564),f=r(40845),P=r(60257),C=r(86070);const v=({position:e,divider:t,onCreateCallback:r=()=>{},spec:a})=>{const{createPlaylist:n}=(0,f.A)(),l=(0,P.s)(),s=(0,i.useCallback)(()=>{const t=a.createButtonFactory().hitCreatePlaylist(),i=l.logInteraction(t);n(i.interactionId,e),r()},[a,l,n,e,r]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:s,leadingIcon:(0,C.jsx)(x.u,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.create-playlist")})},S=i.memo(function(e){return(0,C.jsx)(v,{...e})});var w=r(39233),j=r(710);const T=i.memo(function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,j.o)(e??w.gv);return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(S,{position:r,onCreateCallback:t,spec:i}),(0,C.jsx)(g.j,{position:r,onCreateCallback:t,spec:i})]})});var I=r(65671),R=r(67012),A=r(92363),D=r(33871),O=r(18185),E=r(66147),L=r(22582);let N=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class k{itemsRecord={[N.URGENT]:new Set,[N.CONTEXTUAL]:new Set,[N.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[N.URGENT,N.CONTEXTUAL,N.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return k.PRIORITIES.some(t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e}),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const a=this.getNextItem();return this.visibleItem=a,i===a?k.NO_CHANGE:{keyToShow:a,keyToHide:i}}}var F=r(64723);let B=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class M extends F.V{}const U=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new M}),V=({children:e})=>{const t=(0,i.useMemo)(()=>new k,[]),r=(0,i.useRef)(new M),a=(0,i.useCallback)((e,t)=>{t&&r.current.emitSync(B.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(B.VISIBILITY_GRANTED,{key:e})},[]),n=(0,i.useCallback)((e,r=N.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"add");a(i,n)},[t,a]),l=(0,i.useCallback)((e,r=N.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"remove");a(i,n)},[t,a]),s=(0,i.useMemo)(()=>({events:r.current,notifyShowInterest:n,notifyHideInterest:l}),[n,l]);return(0,C.jsx)(U.Provider,{value:s,children:e})};class _{events=new F.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const z=(0,i.createContext)(null),H=({children:e})=>{const t=(0,i.useMemo)(()=>new _,[]);return(0,C.jsx)(z.Provider,{value:t,children:e})},K=()=>null,Y=()=>null,G={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},W=(0,i.createContext)(G);class X{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const Z=({children:e})=>{const t=(0,i.useMemo)(()=>new X,[]);return(0,C.jsx)(W.Provider,{value:t,children:e})};var Q=r(80628),J=r(78717),q=r(46048),$=r(41156),ee=r(97159),te=r(4533);const re="D_6zDR19xV1TJcWGiLff",ie="u718uzqdcpnx60Mzh8wA",ae=()=>{const[e,t]=(0,i.useState)(!1),r=(0,$.V)(),a=(0,s.d4)(ee.JJ);(0,i.useEffect)(()=>{const e=setTimeout(()=>{t(!0)},1100);return()=>{t(!1),clearTimeout(e)}},[]);const n=(0,s.d4)(ee.mo);return r&&e?(0,C.jsx)(q.t5,{language:b.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,C.jsxs)("div",{className:re,"data-testid":"left-sidebar-legal-links",children:[(0,C.jsx)(q.JM,{}),(0,C.jsx)("a",{draggable:!1,href:te.Bl,target:"_blank",rel:"noopener",className:ie,children:(0,C.jsx)(J.E,{variant:"marginal",children:b.Ru.get("cookies")})}),n&&(0,C.jsx)("a",{draggable:!1,href:te.Vd,target:"_blank",rel:"noopener",className:ie,children:(0,C.jsx)(J.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},ne="RhM0SW5fzg9NUavD3vOl",le=(0,i.memo)(function({isAnonymous:e}){return(0,C.jsx)("div",{className:ne,"data-testid":"left-sidebar-footer",children:e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ae,{}),(0,C.jsx)(Q.X,{})]})})});var se=r(82899),oe=r(69365),ce=r(35394),de=r(92953),ue=r(20005),pe=r(62229),me=r(36729),ye=r(91645);const ge="VeKVFi3VeVHjMTDSZKhC",xe="TNeNlmOxjOdB7DApVDPE",be="_r0FOYKXA3sxPyNAvzTu",he=()=>{const{isCollapsed:e}=(0,pe.Q)(),t=(0,P.s)(),r=(0,s.wA)(),{spec:a}=(0,ye.r)(de.V,{}),n=b.Ru.get("web-player.your-library-x.dsa-message",b.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)(()=>{r(me.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())},[r,t,a]);return(0,C.jsx)("div",{className:ge,children:e?(0,C.jsx)(ue.Zp,{label:(0,C.jsx)(J.E,{children:n}),placement:"right",showDelay:0,children:(0,C.jsx)("div",{className:xe,children:(0,C.jsx)(oe.p,{"aria-label":n})})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(oe.p,{size:"small"})}),(0,C.jsx)(J.E,{as:"p",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.dsa-message",(0,C.jsx)(ce.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:be,children:(0,C.jsx)(J.E,{variant:"bodyMedium",children:b.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},fe="ADSPZBqTJECPQBYnTgvn",Pe="grsRBDrkOuaryiLrtSb0",Ce=({className:e})=>(0,C.jsx)("section",{className:n()(fe,e),children:(0,C.jsxs)("div",{className:Pe,children:[(0,C.jsx)(J.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,C.jsx)(J.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var ve=r(32197),Se=r(60906);const we={getTitle:()=>b.Ru.get("action-trigger.create-playlist"),getDescription:()=>b.Ru.get("action-trigger.login-playlist")},je=({children:e,renderInline:t})=>(0,C.jsx)(ve.y,{id:Se.x9,options:{...we,renderInline:t},children:e});var Te=r(73136),Ie=r(1722);const Re="eXXs5tKEDVXhq_6NzKdQ",Ae="UOWY8RBwYCHkdkz6kbag",De="Xawndb3DOJGnJfHtbHMi",Oe=(0,i.memo)(function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:s}=e;return(0,C.jsxs)("section",{className:n()(Re,s),children:[(0,C.jsxs)("div",{className:Ae,children:[(0,C.jsx)(J.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,C.jsx)(J.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,C.jsx)("div",{className:De,children:i&&(a||l)&&(0,C.jsx)(Te.$,{className:De,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:Ie.v,size:"small",children:i})})]})}),Ee=({className:e})=>{const{createPlaylist:t}=(0,f.A)(),r=(0,i.useCallback)(()=>{t()},[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(je,{renderInline:!1,children:(0,C.jsx)(Oe,{onClick:r,linkTitle:b.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:b.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:b.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,C.jsx)(Oe,{linkTo:"/genre/podcasts-web",linkTitle:b.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:b.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:b.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},Le="_VgA4a4F6klBP9ossYjD",Ne="VyA5OWPhks5BBIFOHv_O",ke="YaHClksgZq86VW5BXH7X",Fe="mB88_7sZwEKNDSrg3urk",Be=({query:e,className:t})=>(0,C.jsxs)("div",{className:n()(Le,t),"data-testid":"no-search-results-view",children:[(0,C.jsx)(J.E,{as:"h1",variant:"bodyMediumBold",className:Ne,children:b.Ru.get("web-player.your-library-x.empty-results-title-short",(0,C.jsx)("span",{className:ke,children:(0,C.jsx)("span",{className:Fe,children:e})}))}),(0,C.jsx)(J.E,{as:"h2",variant:"bodySmall",children:b.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var Me=r(37899);const Ue="fEQmSuQCPpGS7on9QneQ",Ve="VgOrxvKvrMFyWkcDcdJc",_e=({onClick:e})=>(0,C.jsxs)("div",{className:Ue,children:[(0,C.jsx)("div",{className:"icon",children:(0,C.jsx)(Me.b,{size:"xlarge",semanticColor:"textBase"})}),(0,C.jsxs)("div",{className:Ve,children:[(0,C.jsx)(J.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-title")}),(0,C.jsx)(J.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-body")})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Te.$,{onClick:e,colorSet:"invertedLight",size:"small",children:b.Ru.get("web-player.your-library-x.error-button")})})]}),ze=(0,i.createContext)(null);var He=r(59861);const Ke=({children:e})=>{const t=function(){const[e,t]=(0,He.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)(t=>e.includes(t),[e]),a=(0,i.useCallback)((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter(e=>e!==r))}},[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,C.jsx)(ze.Provider,{value:t,children:e})};var Ye=r(89393),Ge=r(97149);let We=function(e){return e[e.SELECTED_CHIP=0]="SELECTED_CHIP",e[e.REFINERS_PICKER_BUTTON=1]="REFINERS_PICKER_BUTTON",e}({});var Xe=r(40539),Ze=r(88095),Qe=r(13441),Je=r(832);const qe="kbgdAZHRrQ99j5wH9K5H",$e="P8gTtQ0mJHKunn6VwIs2",et="_Le6UGXcAo4URjDMJxWE",tt="u7Q8hSLEw6oZamFQ1pwf",rt="uxGLYdWQ5QlBykThPfYn",it={marginBlockEnd:0,willChange:"transform, opacity"},at=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=I.Vp,className:o,innerRef:c,index:d=0,spec:u,chipContainerClassName:p,...m})=>{const y=(0,P.s)(),g=(0,Je.f)(),x=m.selected,b=e?g.getFilterLabel(e):"",h=(0,i.useCallback)(()=>{!e||x&&t?(a(),x&&t&&e?y.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitClearFilter()):y.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),x?y.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitClearFilter()):y.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitFilter()))},[e,b,x,t,a,l,d,y,u]),f=(0,i.useCallback)(()=>{r||h()},[r,h]),{className:v,dropPosition:S,...w}=(0,Qe.A)({allowedMimeTypesByDropPosition:{[I.Nz.ON]:s},onLongDragOver:h});return(0,C.jsx)(Ye.nh,{className:p,onAction:f,textValue:m["aria-label"],children:(0,C.jsx)(Ze.A,{children:(0,C.jsx)(Xe.v,{...m,...w,...S===I.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,v,{[$e]:S===I.Nz.ON,[rt]:r}),selectedColorSet:S===I.Nz.ON?"invertedDark":"invertedLight",secondary:x&&!t,style:it,ref:c,tabIndex:-1,role:"presentation",as:"div"})})})};var nt=r(47170);const lt={marginBlockEnd:0,willChange:"transform, opacity"},st=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=I.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const m=(0,P.s)(),y=(0,Je.f)(),g=p.selected,x=e?y.getFilterLabel(e):"",b=(0,i.useCallback)(()=>{!e||g&&t?(a(),g&&t&&e?m.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):m.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),g?m.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):m.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))},[e,x,g,t,a,l,d,m,u]),h=(0,i.useCallback)(()=>{r||b()},[r,b]),{className:f,dropPosition:v,...S}=(0,Qe.A)({allowedMimeTypesByDropPosition:{[I.Nz.ON]:s},onLongDragOver:b});return(0,C.jsx)(Ye.nh,{onAction:h,textValue:p["aria-label"],children:(0,C.jsx)(Ze.A,{children:(0,C.jsx)(nt.m,{...p,...S,...v===I.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,f,{[$e]:v===I.Nz.ON,[rt]:r}),style:lt,ref:c,tabIndex:-1,role:"presentation",as:"div"})})})};var ot=r(62507);const ct=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.ARTISTS,ot.fl.AUTHORS,ot.fl.PLAYLISTS_V2,ot.fl.SHOWS,ot.fl.AUDIOBOOKS,ot.fl.EPISODES,ot.fl.FOLDERS],dt=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES,ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS],ut=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES,ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS];function pt(e){return{type:"contentType",id:e.id,name:e.name}}function mt(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:e.id,name:e.name,count:0}:pt(e)}var yt=r(41045);const gt="gL1dx5qB0CYIcGk542NH",xt="HvtjHDjnNdHwUWlCvQrO",bt=(0,i.memo)(function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:l,spec:s,inFolderView:o}){const c=!(t||e),{availableRefiners:d,activeRefiners:u,allContentTypeRefiners:p}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(pt);return{availableRefiners:i,activeRefiners:t?.map(mt)??[],allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:o}),{registerFocusElement:m}={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},y=c?p:[...u??[],...d??[]],g=(0,i.useRef)(null),x=(0,i.useCallback)(()=>{(0,yt.MS)(g.current,g.current?.nextElementSibling instanceof HTMLElement?g.current?.nextElementSibling:null),a()},[a]),h=!1;return y&&0!==y?.length?(0,C.jsx)(Ge.FN,{dragToScrollOptions:{isDisabled:!1},className:l,role:"presentation",scrollAnimationRange:{start:10,end:11},children:(0,C.jsxs)(Ye.qF,{className:gt,orientation:"horizontal","aria-label":b.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,C.jsx)(st,{resetFilterIds:x,toggleFilterId:r,allowedDropTargetMimeTypes:ct,"aria-label":b.Ru.get("web-player.your-library-x.clear_filters"),innerRef:g,spec:s}),y.map((e,t)=>{const i=u?.includes(e),l=0===t,o=y[0],d=t>0&&o&&u?.includes(o),p=(0,C.jsx)(at,{innerRef:i&&m?m(We.SELECTED_CHIP):void 0,filterId:e.id,isPrimaryFilter:l,isPlaceholder:c,resetFilterIds:a,toggleFilterId:r,selected:i,spec:s,index:t,"aria-label":e.name,chipContainerClassName:n()({[xt]:d&&i}),children:e.name},e.id);return p}),h]})}):null});var ht=r(98014),ft=r(27360);const Pt="",Ct=ht.YjP().catch(Pt),vt=(0,i.createContext)({openedFolderUri:Pt,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),St=({children:e})=>{const{setFilter:t}=(0,i.useContext)(E.g),[r,a]=(0,He.x)("opened-folder-uri",Ct),n=(0,i.useRef)([r??Pt]),l=(0,i.useRef)("PUSH"),s=(0,i.useCallback)(e=>{a(e),t(Pt)},[a,t]),o=(0,i.useCallback)(e=>{n.current.push(e),l.current="PUSH",s(n.current.at(-1))},[s]),c=(0,i.useCallback)(()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",s(e),e},[s]),d=(0,i.useCallback)(()=>{n.current=[Pt],s(Pt)},[s]),u=(0,i.useMemo)(()=>({openedFolderUri:(0,ft.fpb)(r)?r:Pt,pushFolder:o,popFolder:c,resetFolder:d,change:l.current}),[r,c,o,d]);return(0,C.jsx)(vt.Provider,{value:u,children:e})};var wt=r(18813),jt=r(37109),Tt=r(2626),It=r(27189),Rt=r(19717),At=r(37668),Dt=r(89668),Ot=r(95264),Et=r(85799),Lt=r(80408),Nt=r(56897),kt=r(8510),Ft=r(9391),Bt=r(7341),Mt=r(89307),Ut=r(13059);const Vt=(e,t)=>{switch(e){case Mt.c.ALBUM:return b.Ru.get("web-player.your-library-x.type-album");case Mt.c.ARTIST:return b.Ru.get("web-player.your-library-x.type-artist");case Mt.c.AUTHOR:return b.Ru.get("web-player.your-library-x.type-author");case Mt.c.FOLDER:return b.Ru.get("web-player.your-library-x.type-folder");case Mt.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.type-audiobook");case Mt.c.YOUR_EPISODES:case Mt.c.LOCAL_FILES:case Mt.c.LIKED_SONGS:case Mt.c.PLAYLIST:return(r=t??{}).isPlaylistMixed?(0,Bt.G)():r.isPromptPlaylist?b.Ru.get("web-player.your-library-x.type-prompted-playlist"):b.Ru.get("web-player.your-library-x.type-playlist");case Mt.c.SHOW:return b.Ru.get("web-player.your-library-x.type-show");case Mt.c.PRE_RELEASE_ALBUM:return b.Ru.get("web-player.your-library-x.type-prerelease-album");case Mt.c.PRE_RELEASE_BOOK:return b.Ru.get("web-player.your-library-x.type-prerelease-audiobook");case Mt.c.CONCERT:return"Event";case Mt.c.VENUE:return"Venue";default:return(0,Ut.d)(e)}var r},_t=(e,t,r)=>t?(e=>{switch(e){case"album":default:return b.Ru.get("web-player.your-library-x.type-album");case"ep":return b.Ru.get("ep");case"single":return b.Ru.get("single");case"compilation":return b.Ru.get("compilation")}})(t):Vt(e,r),zt=e=>e.type===Mt.c.ALBUM&&"album"!==e.albumType,Ht=e=>{switch(e){case Mt.c.YOUR_EPISODES:case Mt.c.LIKED_SONGS:case Mt.c.LOCAL_FILES:return Mt.c.PLAYLIST;default:return e}},Kt=({shouldShowType:e,type:t,subtitle:r,specialType:i,isPlaylistMixed:a,isPromptPlaylist:n})=>{const{isMagpieEnabled:l}=(0,Ft.O)(),s=l&&n?{isPromptPlaylist:!0}:{isPlaylistMixed:a};return(0,C.jsxs)(C.Fragment,{children:[e&&_t(t,i,s),!!r&&e&&" • ",r]})};var Yt=r(27614);const Gt="ypMcUr3T8yEiOFBVWe9I",Wt="M2Czbk0cBEVuzC9_BiHM",Xt="kZ5GDMby476XO7Vg0aCk",Zt="CicqRGKm_zeaoHcbASTP",Qt="oKtoCGETZ6uXQprg6IVw",Jt="IoaRNKAJNCEMMGLgrVOi",qt="drjXkbtaZQT34xM5KMRV",$t="lAlBr1m_JfWdmeZEuPDA",er="hWTXV1Ul4Htcs5p6ML1k",tr="dG81kVvy5TxHzrR6gBAL",rr="xA6zpX88l_tE0GkvjwKG",ir="Ilya_qKquDezeLa0vyQh",ar="ZBCPxPLjSpMkVk9qzsEo",nr="hxzBjqFeD_iEKZXZS7ww",lr="MTqV8n7zg0WcoUTTY951",sr="rFAWj6quKnLyBDsKPNZi",or="main-yourLibraryX-listItem",cr="HqnBIbdgZkWQHFxrJC6y",dr="kiygKGRh79QXpV14Dqgi",ur="wh4AxQ0GsD3717YB87UI",pr="K4UQ2Sq01c60PRfU4ipb",mr=({iconSize:e="small"})=>(0,C.jsx)("span",{className:Qt,children:(0,C.jsx)(Yt.C,{size:e,semanticColor:"textBrightAccent",className:Zt})}),yr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,C.jsx)(ue.Zp,{label:(0,C.jsxs)("div",{className:rr,children:[(0,C.jsxs)("div",{children:[t,r]}),i&&(0,C.jsx)(mr,{})]}),placement:"right",showDelay:0,children:e});var gr=r(10622),xr=r(59902),br=r(38161);const hr=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,C.jsx)("div",{className:br.A.subtitle,children:(0,C.jsxs)(gr.j,{className:br.A.link,id:i,dir:"auto",children:[(0,C.jsx)("span",{className:br.A.subtitleLeadingWrapper,children:e}),(0,C.jsx)("span",{className:br.A.subtitleText,children:t})]})})},fr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,C.jsx)("div",{className:br.A.subtitle,children:(0,C.jsxs)(xr.j,{lineClamp:1,className:br.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,C.jsx)("span",{className:br.A.subtitleLeadingWrapper,children:e}),t]})})};var Pr=r(79898),Cr=r(31162),vr=r(58248),Sr=r(72248),wr=r(96500);const jr=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function Tr(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),o=e.isComposing||229===e.keyCode,c=(d=e.key,jr.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||s||o||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a(r=>t?r.slice(0,-1):r+e.key),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>a(""),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}},[e,t]),r}const Ir=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Rr=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)(()=>({typeaheadResult:n,setTypeaheadResult:l}),[n,l]),o=Tr(t,a),c=(0,i.useRef)(o);c.current=o;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)(()=>{o&&a?d.current(o).then(e=>{o===c.current&&l({uid:e,str:o})}):l({uid:null,str:""})},[a,o,l]),(0,C.jsx)(Ir.Provider,{value:s,children:e})};var Ar=r(38819);const Dr={state:{referrer:"your_library",preventMoveFocus:!0}};function Or(e,t,r,a,n){const{filter:l}=(0,i.useContext)(E.g),{isActive:s}=(0,wr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(Ir);return t===e?r:null}(e),c=!!o,d=(0,Sr.d)({uri:e,type:"link"})?(0,Ar.hF)(t):t,u=(0,i.useRef)(null),p=(0,vr.g)(),m=(0,i.useCallback)(e=>{e.preventDefault(),n?n():d&&p(d,Dr)},[n,p,d]);(0,i.useLayoutEffect)(()=>{c&&u.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})},[c]);const y=a?`${a} • ${r}`:r;return{isActive:s,onClick:m,contents:l||o?(0,C.jsx)("span",{ref:u,children:(0,C.jsx)(Ot.M,{autoEscape:!0,searchWords:[l.trim(),...o?.split(" ")??""],textToHighlight:y})}):y}}const Er=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,ft.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,contents:c}=Or(t,l,r,i,s),d=`listrow-title-${e}`;return(0,C.jsx)(m.h,{menu:a,children:(0,C.jsx)(Pr.d,{id:d,lineClamp:1,className:n()(br.A.link,br.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:c})})},Lr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,ft.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,onClick:c,contents:d}=Or(t,l,r,i,s);return(0,C.jsx)(m.h,{menu:a,children:(0,C.jsx)(Cr.Z,{lineClamp:1,className:n()(br.A.link,br.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:l,onClick:c,role:"gridcell",dir:"auto",children:d})})};var Nr=r(10700),kr=r(85543),Fr=r(16247);const Br=({items:e,divider:t})=>{const r=(0,s.wA)(),a=(0,i.useCallback)(()=>{r((0,Rt.aw)(e))},[r,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:a,leadingIcon:(0,C.jsx)(Nr.k,{semanticColor:"textBrightAccent",size:"small"}),shortcut:(0,kr.e)(Fr._.ADD_TO_LIBRARY),children:b.Ru.get("contextmenu.remove-from-library")})},Mr=i.memo(function(e){return(0,C.jsx)(Br,{...e})});var Ur=r(22899);const Vr=i.memo(function({uris:e,uids:t}){const r=e.every(ft.tbX),{spec:i}=(0,j.o)(e[0]),a=e.map((e,r)=>({uri:e,uid:t[r]}));return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(Mr,{items:a}),r&&(0,C.jsx)(Ur.y,{itemsToBeAdded:a,spec:i,isInLibrary:!0})]})});var _r=r(36117);const zr=e=>e!==Mt.c.FOLDER,Hr=e=>{if(!zr(e.type))return{uri:"",uid:"",type:void 0};let t=e.uri;return e.type!==Mt.c.FOLDER&&e.type!==Mt.c.PLAYLIST||!e.rowId||(t=e.rowId),{uri:e.uri,uid:t,type:e.type}};var Kr=r(59725),Yr=r(70613);const Gr=[ot.fl.ALBUMS,ot.fl.ARTISTS,ot.fl.AUTHORS,ot.fl.PLAYLISTS_V2,ot.fl.SHOWS,ot.fl.FOLDERS,ot.fl.PSEUDO_PLAYLISTS],Wr=[ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS];var Xr=r(88089);const Zr=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,C.jsx)(Xr.T,{"aria-label":i,titleText:i,descriptionText:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function Qr({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Je.f)(),[n,l]=(0,i.useState)(null),s=(0,i.useCallback)(async(t,i,n)=>{if(r)return void e(t,i,n);const{[ot.fl.PLAYLISTS_V2]:s=[],[ot.fl.FOLDERS]:o=[]}=t,c=[...s,...o];if(!!c.length&&(await a.getIsPinned(...c)).some(Boolean)){if(c.length>1)throw new Error("Reordering multiple pinned items at once is not supported");l({dropData:t,dropPosition:i,dropMetadata:n})}else e(t,i,n)},[r,a,e]),o=(0,P.s)();return{applyDropWithUnpinConfirmation:s,unpinConfirmationDialog:n?(0,C.jsx)(Zr,{isConfirmationForPlaylist:!n.dropData[ot.fl.FOLDERS]?.length,onClose:()=>l(null),onConfirm:async()=>{const{[ot.fl.PLAYLISTS_V2]:r=[],[ot.fl.FOLDERS]:i=[]}=n.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&o.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(n.dropData,n.dropPosition,n.dropMetadata),l(null)}}):null}}function Jr(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(D.O_);return{dropOriginIsYLX:e===w.gv,entityIsInFolder:t>0}}var qr=r(9274);function $r(){const e=(0,qr.g)(),{dropOriginIsYLX:t}=Jr();return(0,i.useCallback)(async(t,r)=>{if(!t[0])return;const i=await e.contains(t.map(e=>e.uri));if(1!==new Set(i).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");i[0]?await e.move(t,r):await e.add(t.map(e=>e.uri),r)},[t,e])}var ei=r(31541);function ti({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,qr.g)(),n=(0,Je.f)(),l=(0,P.s)(),s=$r(),o=(0,i.useCallback)(async(i,o,c)=>{const{[ot.fl.PLAYLISTS_V2]:d=[],[ot.fl.FOLDERS]:[u]=[]}=i,p=o===I.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,ft.tbX)(e)||(0,ft.fpb)(e)){const t=ri((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,ft.tbX)(e)?await a.move([{uri:e}],{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,ft.Z0m)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,p),l.logInteraction(t.dragPinItem({itemToPin:e}))}else u?await a.moveFolder({uri:u},p):d.length&&await s(d.map((e,t)=>({uri:e,uid:c?.itemIds?.[t]})),p);l.logInteraction(t.dragSort())},[e,r,n,l,t,a,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Qr(r?{onApplyDrop:o,spec:t,isDropTargetPinned:r}:{onApplyDrop:o});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)(async(e,t,r)=>{const{[ot.fl.PLAYLISTS_V2]:i=[],[ot.fl.FOLDERS]:a=[]}=e;if(i.length&&a.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(a.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t,r)},[d]),unpinConfirmationDialog:c}}function ri(e,t,r=0){for(const i of e)if((0,ei.Af)(i)||(0,ei.sA)(i)){if((0,ft.B2u)(i.uri,t))return r;if((0,ei.sA)(i)){const e=ri(i.items,t,r+1);if(-1!==e)return e}}return-1}var ii=r(54390);const ai={state:{referrer:"your_library",preventMoveFocus:!0}};function ni({uri:e,to:t=(0,ft.o_h)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:s,allowedDropTargetDropOnMimeTypes:o=[],onDropTargetDropOn:c,onLongDragOver:u,openDeleteDialog:p,togglePlay:m,triggerPlay:y,isItemInGrid:g,playInsteadOfNavigating:x=!1,isPlaying:b,spec:h,folderDepth:f,index:v,menu:S}){const j=(0,Sr.d)({uri:e,type:"link"})?(0,Ar.hF)(t):t,T=(0,vr.g)(),{clearSelected:R}=(0,i.useContext)(L.m),A=(0,ii._)(t=>{const r=(0,ft.o_h)(t.pathname,{parseUnknown:!0})?.toURI();return!!r&&(0,ft.B2u)(e,r)}),D=(0,ii.M)(),O=(0,i.useCallback)(()=>{T(j,ai)},[T,j]),E=(0,P.s)(),N=(0,i.useRef)(0),k=(0,i.useRef)(null),F=(0,i.useCallback)(({target:e})=>e instanceof HTMLElement&&!k.current?.contains(e),[]),B=(0,i.useCallback)(t=>{if(F(t))return;if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),x){if(N.current>Date.now())return;return N.current=Date.now()+300,void(b||(m?.(),E.logInteraction(h.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}const r=D();a?a():j&&T(j,{...ai,replace:j===r.pathname}),E.logInteraction(h.yourLibraryItemFactory().hitUiNavigate({destination:e}))},[F,x,D,a,j,E,h,e,b,m,T]),M=(0,i.useCallback)(t=>{x||F(t)||y&&(E.logInteraction(h.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),y?.())},[x,F,y,E,h,e]),U=(0,i.useCallback)(()=>{E.logInteraction(h.yourLibraryItemFactory().secondaryHitUiReveal())},[E,h]);let V=[];l?V=Gr:s&&(V=Wr);const _={[I.Nz.ON]:o,[I.Nz.BEFORE]:V,[I.Nz.AFTER]:V},{handleDropBeforeOrAfterRootlistItem:z,unpinConfirmationDialog:H}=ti({dropTargetUri:e,spec:h,isDropTargetPinned:l}),K=(0,i.useCallback)((e,t,r)=>{t===I.Nz.ON?c?.(e,t,r):t!==I.Nz.BEFORE&&t!==I.Nz.AFTER||z(e,t,r),R()},[c,z,R]),{dropPosition:Y,className:G,...W}=(0,Qe.A)({uri:e,allowedMimeTypesByDropPosition:_,onDrop:K,onLongDragOver:u??O,reorderDirection:g?"horizontal":"vertical"}),X=(0,i.useCallback)(t=>{t.repeat||F(t)||("Backspace"!==t.key&&"Delete"!==t.key||!p||p(),"Enter"===t.key&&t.shiftKey&&m&&(t.preventDefault(),m()),"Enter"===t.key&&E.logInteraction(h.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))},[F,E,p,h,m,e]),{draggable:Z,onDragStart:Q,onClick:J,menu:q,isActiveOrSelected:$}=(({index:e,uri:t,type:r,dragLabel:a,folderDepth:n,onClick:l,menu:s,isViewActive:o})=>{const{getSelected:c,toggleSelected:u,isSelected:p}=(0,i.useContext)(L.m),m=c(),y=(0,d.NC)(Yr.Q0R,{loadingValue:!1}),{draggable:g,onDragStart:x}=(0,Kr.P)({itemUris:[t],itemMimeTypes:[(0,ot.j3)(r)],dragLabelText:a,sectionId:n??0,dropOriginUri:w.gv}),{onDragStart:b}=(0,_r.R)({index:e,contextUri:w.gv,sectionId:n,label:a}),h=zr(r)&&y,f=(0,i.useCallback)(t=>{h&&(u(e,t.shiftKey,t.ctrlKey||t.metaKey),t.shiftKey||t.ctrlKey||t.metaKey)||l(t)},[u,e,l,h]),P=p(e),v=m.length>0&&!P,S=m.length>1&&P;return{draggable:g,onDragStart:S?b:x,onClick:f,menu:S?(0,C.jsx)(Vr,{uris:m.map(({uri:e})=>e),uids:m.map(({uid:e})=>e)}):s,isActiveOrSelected:p(e)||o&&!v}})({index:v,uri:e,type:r,dragLabel:n??"",folderDepth:f??0,onClick:B,menu:S,isViewActive:A});return{onClick:J,onDoubleClick:M,draggable:Z&&!!n,onDragStart:Q,onKeyDown:X,unpinConfirmationDialog:H,dropPosition:Y,dropTargetClassName:G,logRightClick:U,isActiveOrSelected:$,itemRef:k,menu:q,...W}}var li=r(55255);const si=i.createContext(!1),oi=({children:e,isCompact:t})=>(0,C.jsx)(si.Provider,{value:t,children:e}),ci=()=>(0,i.useContext)(si),di={card:"PPUsdBz_XlMbP4z8qtsw",compactCard:"EB1r_5qn7Vn2g9XGvW1g",placeholderIcon:"BpIKX10dgEFEZpBookeb",cardImageContainer:"cGITuROmMvr7jSWFERVe",playButtonContainer:"iaUwiF_JWsAbJqcqLZAv",small:"aqyvo9U3tLVPnKlS2yBe",playButtonContainerVisible:"ZrcdmCEMX93uHWd4XlPg"},ui=({uri:e,to:t=(0,ft.o_h)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,namePrefix:s,subtitle:o,cover:c,type:d,specialType:u,downloadButton:p,canReorder:y,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:x,onLongDragOver:b,menu:h,leading:f,openDeleteDialog:P,togglePlay:v,triggerPlay:S,isPinned:w,shouldShowType:j,playbackUri:T,isPlaying:R,isActive:A,playInsteadOfNavigating:D,spec:O,index:E,animateClassName:L="",animateState:N,preReleaseIcon:k,newReleaseSignifier:F,lockedIcon:B,isPlaylistMixed:M,isPromptPlaylist:U})=>{const{onClick:V,onDoubleClick:_,draggable:z,onDragStart:H,onKeyDown:K,dropPosition:Y,dropTargetClassName:G,unpinConfirmationDialog:W,logRightClick:X,isActiveOrSelected:Z,itemRef:Q,menu:J,...q}=ni({uri:e,to:t,type:d,handleNavigate:r,dragLabel:a,isPinned:w,canReorder:y,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:x,openDeleteDialog:P,onLongDragOver:b,togglePlay:v,triggerPlay:S,isItemInGrid:!0,isPlaying:R,spec:O,playInsteadOfNavigating:D,index:E,menu:h}),$=(0,C.jsx)(Lr,{uri:e,title:l,titlePrefix:s,menu:J,handleNavigate:r,playbackUri:T}),ee=(0,C.jsx)(fr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(li.g,{pinned:w}),B,k,F,p,(0,C.jsx)(kt.K,{className:di.icon,isPlaylistMixed:M})]}),subtitle:(0,C.jsx)(Kt,{shouldShowType:j,type:d,subtitle:o,specialType:u,isPlaylistMixed:M,isPromptPlaylist:U}),uri:e}),te=(0,i.useRef)(null),re=ci();let ie=(0,C.jsx)(m.h,{menu:J,onShow:X,children:(0,C.jsx)(Nt.E,{uri:e,trigger:Nt.l.OnMouseDown,children:(0,C.jsx)(Et.Z,{id:e,title:$,subtitle:ee,media:c,size:"sm",leading:f,className:n()(di.card,{[L]:N}),variant:Z?"tinted":void 0,onClick:V,onDoubleClick:_,padding:"tighter",...q})})});return re&&(ie=(0,C.jsx)(yr,{title:$,subtitleSlot:ee,uri:e,isPlaying:R,parentRef:te,children:(0,C.jsx)("div",{children:(0,C.jsx)(m.h,{menu:J,onShow:X,children:(0,C.jsx)(Nt.E,{uri:e,trigger:Nt.l.OnMouseDown,children:(0,C.jsx)(Et.Z,{id:e,title:void 0,media:c,size:"sm",className:n()(di.card,di.compactCard,{[L]:N}),variant:Z?"tinted":void 0,onClick:V,onDoubleClick:_,padding:"tighter-2",ref:te,...q})})})})})),(0,C.jsxs)(C.Fragment,{children:[W,(0,C.jsx)(Lt.W,{draggable:z,onDragStart:H,onKeyDown:K,className:n()(G,{[qe]:Y===I.Nz.ON,[et]:Y===I.Nz.BEFORE,[tt]:Y===I.Nz.AFTER}),...q,innerRef:Q,"aria-selected":A,"aria-posinset":E,children:ie})]})};var pi=r(63087),mi=r(76056);const yi=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:s,size:o})=>{const c=(0,P.s)(),d=(0,i.useCallback)(()=>{l?s?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()},[l,s,c,a,r,t]);return(0,C.jsx)("div",{className:n()(di.playButtonContainer,{[di.playButtonContainerVisible]:s,[di.small]:"small"===o}),role:"gridcell",children:(0,C.jsx)(mi.D,{isPlaying:s,onClick:d,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:o})})};var gi=r(67885);const xi=({name:e,uri:t,togglePlay:r,spec:a,isActive:n,isPlaying:l,size:s})=>{const o=(0,P.s)(),c=(0,i.useCallback)(()=>{const e=(0,gi.$I)({spec:a,logger:o,uri:t,isActive:n,isPlaying:l});r({loggingParams:e})},[n,l,o,a,r,t]);return(0,C.jsx)(mi.D,{isPlaying:l,onClick:c,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:s,version:mi.H.transparent})};var bi=r(34503),hi=r(65992),fi=r(28516),Pi=r(49348),Ci=r(24903);const vi=(0,i.memo)(function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:s="",isPlaying:o,isActive:c,togglePlay:d,spec:u,uri:p,overlayElement:m}){const y=(0,Ci._)(),{isCollapsed:g}=(0,pe.Q)(),x=d&&!g;return(0,C.jsxs)("div",{className:n()({[br.A.imageContainer]:x||!!m}),children:[(0,C.jsx)(bi.b,{fadeIn:!0,images:y(r,48),shape:i?bi.u.CIRCLE:bi.u.ROUNDED_CORNERS,size:hi.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(br.A.entityImage,{[s]:l}),color:a,loadingMode:"eager"}),x&&(0,C.jsx)("div",{className:n()(cr,{[dr]:i,[ur]:!i}),children:(0,C.jsx)(xi,{spec:u.yourLibraryItemFactory().playButtonFactory(),name:e,uri:p,togglePlay:d,isPlaying:o,isActive:c,size:"medium"})}),m]})}),Si=(0,i.memo)(function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:s,spec:o,isActive:c,isPlaying:d,overlayElement:u}){const p=ci(),m=(0,Ci._)(),[y,g]=(0,i.useState)("medium"),x=(0,i.useRef)(null);return(0,Pi.w)({onResize:({width:e})=>{g(e<90?"small":"medium")},refOrElement:x}),(0,C.jsx)("div",{className:di.cardImageContainer,ref:x,children:(0,C.jsxs)(pi.M,{images:m(a,250),FallbackComponent:e=>(0,C.jsx)(fi.s,{semanticColor:"textSubdued",type:t,size:"xxxlarge",className:di.placeholderIcon,...e}),isCircular:n,color:s,loadingMode:"eager",children:[l&&!p&&(0,C.jsx)(yi,{name:e,uri:r,togglePlay:l,spec:o,isActive:c,isPlaying:d,size:y}),u]})})});var wi=r(20409);const ji="d3Q2c4b51R6fTTnxqbv6",Ti=({folderDepth:e=0})=>(0,C.jsx)("div",{className:ji,style:{"--ylx-folder-depth":e}}),Ii=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,ft.o_h)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:s,className:o,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:m,onLongDragOver:y,style:g,openDeleteDialog:x,togglePlay:b,triggerPlay:h,isPlaying:f,isActive:P,type:v,menu:S,name:w,namePrefix:j,subtitle:T,downloadButton:R,expandFolderButton:A,cover:D,alt:O,addedAt:E,lastPlayedAt:L,shouldShowType:N,playbackUri:k,playInsteadOfNavigating:F,spec:B,nrValidItems:M,index:U,lockedIcon:V,onKeyDown:_,preReleaseIcon:z,newReleaseSignifier:H,specialType:K,isPlaylistMixed:Y,isPromptPlaylist:G,...W}=e,{onClick:X,onDoubleClick:Z,onDragStart:Q,onKeyDown:J,dropPosition:q,dropTargetClassName:$,draggable:ee,unpinConfirmationDialog:te,logRightClick:re,isActiveOrSelected:ie,itemRef:ae,menu:ne,...le}=ni({uri:r,to:a,type:v,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:m,onLongDragOver:y,openDeleteDialog:x,togglePlay:b,triggerPlay:h,isPlaying:f,playInsteadOfNavigating:F,spec:B,folderDepth:s,isItemInGrid:!1,index:U,menu:S}),se=(0,i.useCallback)(e=>{J(e),_?.(e)},[J,_]);return(0,C.jsxs)(C.Fragment,{children:[te,q===I.Nz.BEFORE&&(0,C.jsx)(Ti,{folderDepth:s}),(0,C.jsx)(wi.$,{"aria-setsize":M,rowIndex:U,style:{"--ylx-folder-depth":s,...g},draggable:ee,onDragStart:Q,onDoubleClick:Z,className:n()(o,$,or,{[qe]:q===I.Nz.ON}),...W,...le,onKeyDown:se,innerRef:ae,"aria-selected":ie,children:(0,C.jsx)(t,{...e,menu:ne,to:a,isActive:P,isActiveOrSelected:ie,onClick:X,logRightClick:re,playInsteadOfNavigating:F,parentRef:ae})}),q===I.Nz.AFTER&&(0,C.jsx)(Ti,{folderDepth:s})]})};var Ri=r(90814);const Ai=()=>(0,C.jsx)(Ri.u,{semanticColor:"textSubdued",title:b.Ru.get("mwp.header.content.unavailable"),className:br.A.icon,size:"xsmall"});var Di=r(49060);function Oi(e){const{uri:t,artists:r,isPremiumOnly:a,isNewRelease:n}=e,{filter:l}=(0,i.useContext)(E.g),o=(0,d.NC)(Yr.Xih),{isPlaying:c,isActive:u}=(0,wr.l_)(t),p=(0,s.wA)(),m=(0,i.useCallback)(()=>{p((0,Rt.aw)([{uri:t}]))},[p,t]),{togglePlay:y,triggerPlay:g}=(0,Di.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:c,isActive:u,openDeleteDialog:m,togglePlay:a?void 0:y,triggerPlay:a?void 0:g,menu:(0,C.jsx)(At.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(Ot.M,{searchWords:[l.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,C.jsx)(Dt.M,{uri:t,size:"xsmall",className:br.A.icon,as:"span"}),newReleaseSignifier:n&&o?(0,C.jsx)(It.z,{size:"xsmall",semanticColor:"textSubdued",title:b.Ru.get("web-player.your-library-x.new-release")}):void 0}}const Ei=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,albumType:u,addedAt:p,lastPlayedAt:m,color:y,isPremiumOnly:g}=e,{isPlaying:x,isActive:b,openDeleteDialog:h,togglePlay:f,triggerPlay:P,menu:v,subtitleText:S,downloadButton:w,newReleaseSignifier:j}=Oi(e),T=(0,C.jsx)(vi,{title:o,type:d,images:s,color:y,uri:l,isPlaying:x,isActive:b,spec:i,togglePlay:f}),I=g?(0,C.jsx)(Ai,{}):void 0;return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:T,name:o,subtitle:S,downloadButton:w,alt:o,type:d,specialType:u,dragLabel:o,menu:v,togglePlay:f,triggerPlay:P,openDeleteDialog:h,addedAt:p,lastPlayedAt:m,isPinned:c,isPlaying:x,isActive:b,shouldShowType:t,spec:i,nrValidItems:a,index:n,lockedIcon:I,newReleaseSignifier:j})},Li=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,albumType:c,color:d,isPremiumOnly:u}=e,{togglePlay:p,triggerPlay:m,menu:y,subtitleText:g,downloadButton:x,openDeleteDialog:b,isPlaying:h,isActive:f,newReleaseSignifier:P}=Oi(e),v=(0,C.jsx)(Si,{title:l,type:o,images:n,uri:a,togglePlay:p,color:d,spec:r,isActive:f,isPlaying:h}),S=u?(0,C.jsx)(Ai,{}):void 0;return(0,C.jsx)(ui,{uri:a,name:l,subtitle:g,menu:y,dragLabel:l,cover:v,downloadButton:x,type:o,specialType:c,togglePlay:p,triggerPlay:m,isPinned:s,shouldShowType:t,openDeleteDialog:b,isPlaying:h,isActive:f,spec:r,index:i,lockedIcon:S,newReleaseSignifier:P})};var Ni=r(37731);function ki(e){const{uri:t}=e,r=(0,s.wA)(),{togglePlay:a,triggerPlay:n}=(0,Di.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:l,isActive:o}=(0,wr.l_)(t);return{togglePlay:a,triggerPlay:n,isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)(()=>{r((0,Rt.aw)([{uri:t}]))},[r,t]),menu:(0,C.jsx)(Ni.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Fi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:m}=e,{togglePlay:y,triggerPlay:g,isPlaying:x,isActive:b,openDeleteDialog:h,menu:f}=ki(e),P=(0,C.jsx)(vi,{title:o,type:c,images:s,isCircular:!0,color:m,uri:l,isPlaying:x,isActive:b,spec:i,togglePlay:y});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:P,name:o,type:c,alt:o,dragLabel:o,menu:f,togglePlay:y,triggerPlay:g,openDeleteDialog:h,addedAt:d,lastPlayedAt:u,isPlaying:x,isActive:b,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Bi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,openDeleteDialog:m,isPlaying:y,isActive:g}=ki(e),x=(0,C.jsx)(Si,{title:l,type:s,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:g,isPlaying:y});return(0,C.jsx)(ui,{uri:a,name:l,menu:p,dragLabel:l,cover:x,type:s,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:m,isPlaying:y,isActive:g,spec:r,index:i})};var Mi=r(21943),Ui=r(99022);function Vi(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(E.g),n=(0,Ui.T)(),l=(0,s.wA)(),o=!!e.consumptionCapExplanation,c=(0,d.NC)(Yr.HJU),{togglePlay:u,triggerPlay:p}=(0,Di.P)({uri:t},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),m=(0,i.useCallback)(()=>{e.consumptionCapExplanation&&l((0,Rt._3)())},[l,e.consumptionCapExplanation]),y=(0,i.useCallback)(async()=>{n.getAccessInfo(e.uri).then(e=>{e?.isConsumptionCapped&&l((0,Rt._3)())})},[e.uri,n,l]);let g,x;c&&(o?(g=m,x=m):e.isCappedWithoutExplanation?(x=y,g=y):e.isPlayable&&(g=p,x=u));const{isPlaying:b,isActive:h}=(0,wr.l_)(t);return{isPlaying:b,isActive:h,openDeleteDialog:(0,i.useCallback)(()=>{l((0,Rt.aw)([{uri:t}]))},[l,t]),menu:(0,C.jsx)(Mi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(Ot.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,C.jsx)(Dt.M,{uri:t,size:"xsmall",className:br.A.icon,as:"span"}),togglePlay:x,triggerPlay:g}}const _i=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:m}=e,{isPlaying:y,isActive:g,openDeleteDialog:x,menu:b,subtitleText:h,downloadButton:f,togglePlay:P,triggerPlay:v}=Vi(e),S=(0,C.jsx)(vi,{title:o,type:c,images:s,color:m,uri:l,isPlaying:y,isActive:g,spec:i,togglePlay:P}),w=e.isLocked?(0,C.jsx)(Ai,{}):void 0;return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:S,name:o,subtitle:h,alt:o,dragLabel:o,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:g,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:w,index:n,downloadButton:f,togglePlay:P,triggerPlay:v})},zi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:m,isActive:y,downloadButton:g,togglePlay:x,triggerPlay:b}=Vi(e),h=(0,C.jsx)(Si,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:y,isPlaying:m,togglePlay:x});return(0,C.jsx)(ui,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:h,isPinned:o,shouldShowType:t,type:s,openDeleteDialog:p,isPlaying:m,isActive:y,spec:r,index:i,downloadButton:g,triggerPlay:b,togglePlay:x})};var Hi=r(44856);function Ki(e){const{uri:t}=e,r=(0,s.wA)();return{openDeleteDialog:(0,i.useCallback)(()=>{r((0,Rt.aw)([{uri:t}]))},[r,t]),menu:(0,C.jsx)(Hi.L,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Yi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:m}=e,{openDeleteDialog:y,menu:g}=Ki(e),x=(0,C.jsx)(vi,{title:o,type:c,images:s,isCircular:!0,color:m,uri:l,isPlaying:!1,isActive:!1,spec:i});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:x,name:o,type:c,alt:o,dragLabel:o,menu:g,openDeleteDialog:y,addedAt:d,lastPlayedAt:u,isPlaying:!1,isActive:!1,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Gi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,openDeleteDialog:u}=Ki(e),p=(0,C.jsx)(Si,{title:l,type:s,images:n,uri:a,isCircular:!0,color:c,spec:r,isPlaying:!1,isActive:!1});return(0,C.jsx)(ui,{uri:a,name:l,menu:d,dragLabel:l,cover:p,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:u,isPlaying:!1,isActive:!1,spec:r,index:i})};var Wi=r(49904);function Xi(e,t){const{uri:r,cityName:a,locationName:n}=e,{filter:l}=(0,i.useContext)(E.g),s=(0,C.jsx)(Wi.u,{uri:r,canPin:e.canPin,isPinned:e.pinned}),o=e.startTime?(0,C.jsxs)("div",{className:br.A.eventDateOverlay,children:[(0,C.jsx)(J.E,{variant:t?"bodySmall":"marginal",children:b.Ru.formatDate(new Date(e.startTime),{month:"short"})}),(0,C.jsx)(J.E,{variant:t?"titleSmall":"bodyMediumBold",children:b.Ru.formatDate(new Date(e.startTime),{day:"numeric"})}),t&&(0,C.jsx)(J.E,{variant:"bodySmall",children:b.Ru.formatDate(new Date(e.startTime),{year:"numeric"})})]}):null,c=b.Ru.get("web-player.your-library-x.event-item.subtitle",{locationName:n,cityName:a});return{menu:s,subtitleText:(0,C.jsx)(Ot.M,{searchWords:[l.trim()],textToHighlight:c}),imageOverlay:o}}const Zi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:m}=e,{menu:y,subtitleText:g,imageOverlay:x}=Xi(e,!1),b=(0,C.jsx)(vi,{title:o,type:d,images:s,color:m,uri:l,isPlaying:!1,isActive:!1,spec:i,overlayElement:x});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:g,alt:o,type:d,dragLabel:o,menu:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Qi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,imageOverlay:p}=Xi(e,!0),m=(0,C.jsx)(Si,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1,overlayElement:p});return(0,C.jsx)(ui,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:m,type:o,isPinned:s,shouldShowType:t,isPlaying:!1,isActive:!1,spec:r,index:i})};var Ji=r(25379),qi=r(4644),$i=r(93315);const ea=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,s.wA)(),n=(0,i.useCallback)(()=>{a((0,Rt.OB)(e,r))},[a,r,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:n,leadingIcon:(0,C.jsx)($i.P,{semanticColor:"textSubdued",size:"small"}),shortcut:(0,kr.e)(Fr._.DELETE),children:b.Ru.get("contextmenu.delete")})},ta=i.memo(function(e){return(0,C.jsx)(ea,{...e})});var ra=r(28937),ia=r(43258),aa=r(55043);const na=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,Di.P)({uri:e},{featureIdentifier:"folder"}),l=(0,P.s)(),s=(0,i.useCallback)(()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))},[n,a,l,t,r,e]);return(0,C.jsx)(h.D,{role:"menuitem",onClick:s,leadingIcon:a?(0,C.jsx)(ia._,{semanticColor:"textSubdued",size:"small"}):(0,C.jsx)(aa.A,{semanticColor:"textSubdued",size:"small"}),children:a?b.Ru.get("pause"):b.Ru.get("play")})},la=i.memo(function(e){return(0,C.jsx)(na,{...e})});var sa=r(99974);const oa=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,P.s)(),o=(0,s.wA)(),c=(0,i.useCallback)(()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),o((0,Rt.O2)(t,n))},[o,l,t,n,a,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,C.jsx)(sa.G,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.rename")})},ca=i.memo(function(e){return(0,C.jsx)(oa,{...e})}),da=i.memo(function({reference:e,name:t="",onRename:r,onCreateCallback:i=()=>{},onDeleteCallback:a,canPin:n=w.oT.NO,isPinned:l=!1,isPlayable:s=!0}){const{spec:o}=(0,j.o)(e.uri),c=s;return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(ca,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,C.jsx)(ta,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==w.oT.NO||l)&&(0,C.jsx)(ra.k,{uri:e.uri,canPin:n,isPinned:l,type:Mt.c.FOLDER,spec:o}),(0,C.jsx)(S,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(g.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(Ur.y,{itemsToBeAdded:[{uri:e.uri}],isInLibrary:!0,spec:o}),c&&(0,C.jsx)(la,{uri:e.uri,spec:o})]})});function ua(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,f.A)(),n=(0,P.s)(),l=(0,qr.g)(),s=$r(),o=(0,i.useCallback)((r,i,a)=>{if(!t)return;const{[ot.fl.PLAYLISTS_V2]:o=[],[ot.fl.FOLDERS]:c=[]}=r,d={after:{uri:t}};o.length&&(s(o.map((e,t)=>({uri:e,uid:a?.itemIds?.[t]})),d),n.logInteraction(e.dragSort())),c.length&&(l.moveFolder({uri:c[0]},d),n.logInteraction(e.dragSort()))},[s,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Qr({onApplyDrop:o});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)(async(i,l,s)=>{if(!t)return;const{[ot.fl.TRACKS]:o=[],[ot.fl.LOCAL_TRACKS]:c=[],[ot.fl.ALBUMS]:u=[],[ot.fl.EPISODES]:p=[],[ot.fl.PLAYLISTS_V2]:m=[],[ot.fl.FOLDERS]:y=[]}=i,g={after:{uri:t}};m.length||y.length?d(i,I.Nz.ON,s):u.length?(r(u[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(o.length||c.length||p.length)&&(a([...o,...c,...p],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))},[t,d,r,n,e,a])}}var pa=r(92270),ma=r(52632),ya=r(13600),ga=r(15430),xa=r(84322),ba=r(24023),ha=r(59452);const fa=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,pa.x)(),n=(0,i.useCallback)(()=>{r(!0),setTimeout(()=>{r(!1)},500)},[]);return(0,ya.l)(ma.UV.OPERATION_COMPLETE,t=>{"add"===t.data.operation&&t.data.uris[0]&&e===a.getDefaultCurationContextUri(t.data.uris[0])&&n()}),(0,xa.e)(ga.Lj.OPERATION_COMPLETE,t=>{"add"===t.data.operation&&e===t.data.uri&&n()}),(0,ba.b)(ha.tD.OPERATION_COMPLETE,t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,ft.fpb)(e)&&n()}),{animateState:t,animateClassName:br.A.pulse}};var Pa=r(91816),Ca=r(95525),va=r(10183);function Sa(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:o}=e,{isPlaying:c,isActive:d}=(0,wr.l_)(r),{pushFolder:u}=(0,i.useContext)(vt),p=(0,s.wA)(),{togglePlay:m,triggerPlay:y}=(0,Di.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),{isDesktop:g}=(0,Pa.V)(),x=g&&!e.isEmpty,{handleDropOnFolder:h,unpinConfirmationDialog:f}=ua(t,r),{renameFolder:P}=(0,Ca.Z)(),v=h,S=[l>0||!n?b.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?b.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(va.P).join(b.Ru.getSeparator()),w=(0,i.useCallback)((t="")=>{P(e,t)},[e,P]),j=(0,i.useCallback)(()=>{u(e.uri)},[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)(()=>{p((0,Rt.OB)(r))},[p,r]),togglePlay:x?m:void 0,triggerPlay:x?y:void 0,menu:(0,C.jsx)(da,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:o,onRename:w,isPlayable:!e.isEmpty}),subtitleText:S,onDropTargetDropOn:v,handleNavigate:j,dropOnFolderUnpinConfirmationDialog:f,isPlaying:c,isActive:d}}const wa=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:s,folderDepth:o,name:c,type:d,isFlattened:u,pinned:p,canReorder:m}=e,{openDeleteDialog:y,togglePlay:g,triggerPlay:x,menu:h,subtitleText:f,onDropTargetDropOn:v,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:w,isPlaying:j,isActive:T}=Sa(e,r),[I,R]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(ze);return[(0,i.useMemo)(()=>t(e),[t,e]),(0,i.useCallback)(t=>{r(e,t)},[r,e])]}(s),A=(0,P.s)(),D=(0,i.useCallback)(()=>{R(!0),A.logInteraction(r.yourLibraryItemFactory().dragUiReveal())},[A,R,r]),O=(0,i.useCallback)(e=>{e.stopPropagation()},[]),E=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),R(!I),I?A.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):A.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())},[R,I,A,r]),L=!u&&(0,C.jsx)(ce.H,{"aria-label":I?b.Ru.get("web-player.your-library-x.collapse-folder"):b.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:I?Ji.J:qi.y,size:"small",condensedAll:!0,onClick:E,onDoubleClick:O,tabIndex:-1,className:n()(Qt,Jt)}),{animateState:N,animateClassName:k}=fa({uri:s}),F=(0,C.jsx)(vi,{title:c,type:d,animateState:N,animateClassName:k,uri:s,isPlaying:j,isActive:T,spec:r,togglePlay:g});return(0,C.jsxs)(C.Fragment,{children:[w,(0,C.jsx)(Ii,{RowVariantComponent:t,uri:s,to:`/folder/${(0,ft.o_h)(s)?.id??""}`,handleNavigate:S,folderDepth:o,cover:F,name:c,subtitle:f,alt:c,dragLabel:c,menu:h,canReorder:m,allowedDropTargetDropOnMimeTypes:ut,onDropTargetDropOn:v,onLongDragOver:D,togglePlay:g,triggerPlay:x,openDeleteDialog:y,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:j,isActive:T,expandFolderButton:L,spec:r,nrValidItems:a,index:l})]})},ja=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:s}=e,{togglePlay:o,triggerPlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,handleNavigate:m,openDeleteDialog:y,isPlaying:g,isActive:x}=Sa(e,t),{animateState:b,animateClassName:h}=fa({uri:i}),f=(0,C.jsx)(Si,{title:a,type:n,uri:i,togglePlay:o,spec:t,isActive:x,isPlaying:g});return(0,C.jsx)(ui,{uri:i,to:`/folder/${(0,ft.o_h)(i)?.id??""}`,handleNavigate:m,cover:f,name:a,subtitle:u,menu:d,dragLabel:a,canReorder:s,allowedDropTargetDropOnMimeTypes:ut,onLongDragOver:m,onDropTargetDropOn:p,togglePlay:o,triggerPlay:c,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:y,isPlaying:g,isActive:x,spec:t,index:r,animateState:b,animateClassName:h})};var Ta=r(15881);const Ia=i.memo(function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,j.o)(e);return(0,C.jsxs)(y.W,{children:[i?(0,C.jsx)(Ta.dw,{spec:a,uri:i}):null,t!==w.oT.NO&&(0,C.jsx)(ra.k,{uri:e,canPin:t,isPinned:r,type:Mt.c.PLAYLIST,spec:a})]})});var Ra=r(51629);const Aa=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS];function Da(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,s.d4)(Ra.Ht),n=(0,ft.fHB)(a?.id).toURI(),l=n,o=n,{togglePlay:c,triggerPlay:d}=(0,Di.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),u=(0,Je.f)(),{isPlaying:p,isActive:m}=(0,wr.l_)(l),y=(0,i.useCallback)(e=>{const{[ot.fl.TRACKS]:t=[],[ot.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&u?.add({uris:i})},[u]);return{isPlaying:p,isActive:m,togglePlay:c,triggerPlay:d,menu:(0,C.jsx)(Ia,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:o}),downloadButton:(0,C.jsx)(Dt.M,{uri:o,size:"xsmall",className:br.A.icon,as:"span"}),subtitleText:(0,C.jsx)(C.Fragment,{children:b.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:y,playbackUri:l,uri:r,...fa({uri:r})}}const Oa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:s,type:o,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:m,isActive:y,togglePlay:g,triggerPlay:x,menu:b,subtitleText:h,onDropTargetDropOn:f,playbackUri:P,uri:v,downloadButton:S,animateState:w,animateClassName:j}=Da(e),T=(0,C.jsx)(vi,{title:s,type:o,images:l,color:p,animateState:w,animateClassName:j,uri:v,isPlaying:m,isActive:y,spec:i,togglePlay:g});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:v,cover:T,name:s,subtitle:h,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:Aa,onDropTargetDropOn:f,togglePlay:g,triggerPlay:x,addedAt:d,lastPlayedAt:u,isPlaying:m,isActive:y,isPinned:c,shouldShowType:t,type:o,playbackUri:P,downloadButton:S,spec:i,nrValidItems:a,index:n})},Ea=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,subtitleText:p,onDropTargetDropOn:m,playbackUri:y,uri:g,downloadButton:x,isPlaying:b,isActive:h,animateState:f,animateClassName:P}=Da(e),v=(0,C.jsx)(Si,{title:n,type:l,images:a,uri:y,togglePlay:c,color:o,spec:r,isActive:h,isPlaying:b});return(0,C.jsx)(ui,{uri:g,name:n,subtitle:p,menu:u,dragLabel:n,allowedDropTargetDropOnMimeTypes:Aa,onDropTargetDropOn:m,cover:v,togglePlay:c,triggerPlay:d,isPinned:s,shouldShowType:t,type:l,playbackUri:y,downloadButton:x,isPlaying:b,isActive:h,spec:r,index:i,animateState:f,animateClassName:P})};var La=r(36057),Na=r(83994),ka=r(74777),Fa=r(56046);function Ba(e){const{numberOfFiles:t}=e,r=Fa.bV,i=(0,ka.Iu)().uri,{isPlaying:a,isActive:n}=(0,wr.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,C.jsx)(Ia,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,C.jsx)(La.F,{size:"xsmall",className:br.A.icon,semanticColor:"textBrightAccent"}),subtitleText:b.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Ma=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:s,lastPlayedAt:o,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:m,menu:y,subtitleText:g,downloadButton:x,isActive:b}=Ba(e),h=(0,C.jsx)("div",{className:qt,children:(0,C.jsx)(Na.e,{iconSize:24,title:l})});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:p,name:l,subtitle:g,alt:l,dragLabel:l,menu:y,addedAt:s,lastPlayedAt:o,isPinned:d,isPlaying:m,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:h,type:c,spec:i,nrValidItems:a,index:n})},Ua=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:s}=e,{playbackUri:o,uri:c,menu:d,downloadButton:u,subtitleText:p,isPlaying:m,isActive:y}=Ba(e),g=(0,C.jsx)("div",{className:di.cardImageContainer,children:(0,C.jsx)(pi.M,{images:n,FallbackComponent:e=>(0,C.jsx)(Na.e,{size:"xxxlarge",className:di.placeholderIcon,...e})})});return(0,C.jsx)(ui,{uri:c,name:a,subtitle:p,menu:d,cover:g,type:l,playbackUri:o,downloadButton:u,isPinned:s,shouldShowType:t,isPlaying:m,isActive:y,spec:r,index:i})};var Va=r(81458),_a=r(89829);const za=({index:e,type:t})=>{const r=ci();return(0,C.jsx)(_a.T,{columnIndex:0,children:(0,C.jsx)(Et.Z,{className:n()(di.card,{[di.compactCard]:r}),media:(0,C.jsx)(pi.M,{images:[],FallbackComponent:()=>(0,C.jsx)(fi.s,{type:t,size:"xxxlarge",className:di.placeholderIcon,semanticColor:"textSubdued"}),isCircular:t===Mt.c.ARTIST}),variant:"naked",id:e,title:"",padding:r?Va.vw:Va.CJ})})};var Ha=r(43971),Ka=r(64909),Ya=r(7477),Ga=r(1041),Wa=r(43141),Xa=r(97129),Za=r(85149),Qa=r(97101),Ja=r(31441),qa=r(57355),$a=r(65705),en=r(56721),tn=r(89049),rn=r(25236),an=r(97378),nn=r(39341),ln=r(1930),sn=r(12786),on=r(96432),cn=r(85093),dn=r(35255);const un=i.memo(function({reference:e,isPublished:t,canPin:r=w.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,s=(0,cn.J)(l),o=!!s?.permissions?.isPrivate,c=(0,dn.v)(l)??s?.isPublished??t,{spec:d}=(0,j.o)(l),u=s?.hasSpotifyAudiobooks,p=(0,ln.D)(s),m=(0,on.d)(s),x=(0,nn.l)(s),h=!s?.isOwnedBySelf&&!m,f=s?.isOwnedBySelf||m;return s&&(0,C.jsxs)(y.W,{children:[!u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ya.K,{spec:d,uris:[l]}),(0,C.jsx)(sn._,{uri:l,spec:d})]}),!o&&(0,C.jsx)(en._,{spec:d,divider:s.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),s.isOwnedBySelf&&(0,C.jsx)(Xa.T,{spec:d,uri:l,name:s.name,description:s.description,image:s.images[0]}),!s.isOwnedBySelf&&(0,C.jsx)(tn.P,{spec:d,uri:l}),h&&(0,C.jsx)(Ka.ET,{uri:l,useDialog:a,initialState:n}),f&&(0,C.jsx)(Wa.u,{spec:d,uri:l}),!u&&!p&&(0,C.jsx)(Ta.dw,{spec:d,uri:l}),(0,C.jsx)(S,{position:{after:e},divider:"before",spec:d}),(0,C.jsx)(g.j,{position:{after:e},spec:d}),s.permissions?.canAdministratePermissions&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)($a.U,{spec:d,divider:"before",uri:l,isPrivate:o}),!u&&!x&&(0,C.jsx)(Qa.n,{uri:l,spec:d})]}),s.permissions?.canCancelMembership&&(0,C.jsx)(Ja._,{spec:d,divider:"before",uri:l}),(0,C.jsx)(Za.w,{spec:d,uri:l}),(0,C.jsx)(Ur.y,{itemsToBeAdded:[{uri:l}],isInLibrary:!0,spec:d}),!u&&(0,C.jsx)(rn.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==w.oT.NO||i)&&(0,C.jsx)(ra.k,{uri:l,canPin:r,isPinned:i,type:Mt.c.PLAYLIST,spec:d}),(s.isOwnedBySelf||!o)&&(0,C.jsxs)(an.h,{divider:"before",children:[(0,C.jsx)(Ga.m,{spec:d,uri:l,displayText:b.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:o}),(0,C.jsx)(qa.x,{spec:d,uri:l,type:Mt.c.PLAYLIST})]})]})}),pn=i.memo(function({reference:e,canPin:t=w.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,j.o)(i);return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(S,{position:{after:e},divider:"before",spec:a}),(0,C.jsx)(g.j,{position:{after:e},spec:a}),t!==w.oT.NO&&(0,C.jsx)(ra.k,{uri:i,canPin:t,isPinned:r,type:Mt.c.PLAYLIST,spec:a})]})});var mn=r(77693),yn=r(6944);var gn=r(22541);const xn=({message:e})=>(0,C.jsxs)(J.E,{semanticColor:"textBrightAccent",className:br.A.progressSubtitle,variant:"bodySmall",children:[(0,C.jsx)(gn.a3,{size:"small",as:"span",semanticColor:"textBrightAccent"}),(0,C.jsx)("span",{className:br.A.progressSubtitleText,children:e})]}),bn=({madeForName:e,creatorName:t,generationStatus:r,showType:i,filter:a})=>{return"queued"===(n=r)||"processing"===n?b.Ru.get("web-player.your-library-x.generating-subtitle"):(e=>"success"===e)(r)&&e?b.Ru.get("web-player.your-library-x.made-for-subtitle",e):i?(0,C.jsx)(Ot.M,{searchWords:[a.trim()],textToHighlight:t}):b.Ru.get("web-player.your-library-x.prompted-by-subtitle",t);var n};var hn=r(78146);function fn(e,t,r){const{uri:a,isLoading:n,owner:l,pinned:o,canView:c,isPromptPlaylist:d,promptGenerationStatus:u,madeForName:p}=e,m=(0,hn.m)(),{filter:g}=(0,i.useContext)(E.g),x=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES,ot.fl.PODCAST_CHAPTERS,ot.fl.KALLAX],h=[ot.fl.AUDIOBOOKS],f=(e=>{const t=(0,yn.H)(),[r,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>t.getEvents()?.addListener(mn.U.UPDATE,({data:t})=>{t.playlistUri===e&&a(t.message?.name??null)}),[t,e]),r})(a);(0,i.useEffect)(()=>{n&&m.resync(a)},[m,a,n]);const{togglePlay:v,triggerPlay:S}=(0,Di.P)({uri:a},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:w,isActive:j}=(0,wr.l_)(a),T=(0,s.wA)(),I=(0,P.s)();let R,A=[];const D=(0,i.useCallback)(async e=>{const{[ot.fl.TRACKS]:r=[],[ot.fl.LOCAL_TRACKS]:i=[],[ot.fl.ALBUMS]:n=[],[ot.fl.EPISODES]:l=[],[ot.fl.AUDIOBOOKS]:s=[],[ot.fl.PODCAST_CHAPTERS]:o=[],[ot.fl.KALLAX]:c=[]}=e,d=[...r,...i,...n,...l,...s,...o,...c];T((0,Ha.io)(a,d)),I.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:d.at(0)??"",playlist:a}))},[T,I,t,a]);e.canAddTo&&(A=e.isEmpty?[...h,...x]:e.isBooklist?h:x,R=D);const O=(0,i.useCallback)(()=>{T((0,Rt.O)(a))},[T,a]),L=(0,Tt.c0)(a),N=n&&!e.name;let k;k=L?(0,C.jsx)(pn,{reference:e,canPin:e.canPin,isPinned:o}):N?(0,C.jsx)(y.W,{children:(0,C.jsx)(Ka.ET,{uri:a,initialState:!0})}):(0,C.jsx)(un,{reference:e,canPin:e.canPin,isPinned:o,useDialogForUnfollow:!0,isInLibrary:!0});const F=(0,C.jsx)(Dt.M,{uri:a,size:"xsmall",className:br.A.icon,as:"span"}),{isMagpieEnabled:B}=(0,Ft.O)(),M=f?(0,C.jsx)(xn,{message:f}):(0,Tt.c0)(a)?b.Ru.get("ylx.clicktoplay"):c?d&&B?(0,C.jsx)(bn,{madeForName:p,creatorName:l.name,generationStatus:u,showType:r,filter:g}):(l.uri,(0,C.jsx)(Ot.M,{searchWords:[g.trim()],textToHighlight:l.name})):b.Ru.get("web-player.your-library-x.playlist-unavailable"),U=!!(0,Tt.c0)(a)||!e.isBooklist&&!e.isEmpty;return{openDeleteDialog:O,togglePlay:U?v:void 0,triggerPlay:U?S:void 0,isPlaying:w,isActive:j,menu:k,downloadButton:F,subtitleText:M,allowedDropTargetDropOnMimeTypes:A,onDropTargetDropOn:R,showType:r&&!f,...fa({uri:a})}}const Pn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,folderDepth:o,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:m,color:y,canReorder:g,namePrefix:x,isMixed:b,isPromptPlaylist:h}=e,{openDeleteDialog:f,togglePlay:P,triggerPlay:v,isPlaying:S,isActive:w,menu:j,downloadButton:T,subtitleText:I,allowedDropTargetDropOnMimeTypes:R,onDropTargetDropOn:A,animateState:D,animateClassName:O,showType:E}=fn(e,i,t),L=(0,C.jsx)(vi,{title:c,type:d,images:s,color:y,animateState:D,animateClassName:O,uri:l,isPlaying:S,isActive:w,togglePlay:P,spec:i});return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,folderDepth:o,cover:L,name:c,namePrefix:x,subtitle:I,alt:c,dragLabel:c,menu:j,canReorder:g,allowedDropTargetDropOnMimeTypes:R,onDropTargetDropOn:A,togglePlay:P,triggerPlay:v,openDeleteDialog:f,addedAt:p,lastPlayedAt:m,isPlaying:S,isActive:w,isPinned:u,shouldShowType:E,type:d,downloadButton:T,spec:i,playInsteadOfNavigating:(0,Tt.c0)(l),nrValidItems:a,index:n,isPlaylistMixed:b,isPromptPlaylist:h})})},Cn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c,canReorder:d,namePrefix:u,isMixed:p,isPromptPlaylist:m}=e,{togglePlay:y,triggerPlay:g,menu:x,downloadButton:b,subtitleText:h,onDropTargetDropOn:f,allowedDropTargetDropOnMimeTypes:P,openDeleteDialog:v,isPlaying:S,isActive:w,animateState:j,animateClassName:T,showType:I}=fn(e,r,t),R=(0,C.jsx)(Si,{title:l,type:s,images:n,uri:a,togglePlay:y,color:c,spec:r,isActive:w,isPlaying:S});return(0,C.jsx)(ui,{uri:a,name:l,namePrefix:u,subtitle:h,menu:x,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:f,cover:R,togglePlay:y,triggerPlay:g,isPinned:o,shouldShowType:I,type:s,downloadButton:b,openDeleteDialog:v,isPlaying:S,isActive:w,spec:r,playInsteadOfNavigating:(0,Tt.c0)(a),index:i,animateState:j,animateClassName:T,isPlaylistMixed:p,isPromptPlaylist:m})};var vn=r(13109),Sn=r(5300),wn=r(26849),jn=r(82079);const Tn=i.memo(function({uri:e,canPin:t=w.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,j.o)(e);return(0,C.jsxs)(y.W,{children:[i&&(0,C.jsx)(jn.p,{uri:e,removeLabel:b.Ru.get("contextmenu.remove-from-library")}),t!==w.oT.NO&&(0,C.jsx)(ra.k,{uri:e,canPin:t,isPinned:r,type:Mt.c.PRE_RELEASE_BOOK,spec:a}),(0,C.jsx)(Ga.m,{uri:e,spec:a,displayText:b.Ru.get("context-menu.copy-book-link")}),(0,C.jsx)(wn.q,{spec:a,divider:"before",uri:e})]})});function In(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(E.g),o=(0,s.wA)(),c=(0,i.useCallback)(()=>{o((0,Rt.aw)([{uri:t,isPrerelease:!0}]))},[o,t]);let d,u="";if(n===Mt.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,C.jsx)(Sn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,C.jsx)(Tn,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,C.jsx)(Ot.M,{searchWords:[l.trim()],textToHighlight:u})}}const Rn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:m}=e,{openDeleteDialog:y,menu:g,subtitleText:x}=In(e),b=(0,C.jsx)(vi,{title:o,type:d,images:s,color:m,uri:l,isPlaying:!1,isActive:!1,spec:i,togglePlay:void 0});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:x,alt:o,type:d,dragLabel:o,menu:g,openDeleteDialog:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,C.jsx)(vn.t,{size:"xsmall",className:br.A.icon})})},An=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=In(e),m=(0,C.jsx)(Si,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(ui,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:m,type:o,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,C.jsx)(vn.t,{size:"xsmall",className:br.A.icon})})};var Dn=r(19397);function On(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(E.g),n=(0,s.wA)(),{togglePlay:l,triggerPlay:o}=(0,Di.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:c,isActive:d}=(0,wr.l_)(t);return{isPlaying:c,isActive:d,openDeleteDialog:(0,i.useCallback)(()=>{n((0,Rt.aw)([{uri:t}]))},[n,t]),togglePlay:l,triggerPlay:o,menu:(0,C.jsx)(Dn.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,C.jsx)(Dt.M,{uri:t,size:"xsmall",className:br.A.icon,as:"span"}),subtitleText:(0,C.jsx)(Ot.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const En=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:m}=e,{isPlaying:y,isActive:g,openDeleteDialog:x,togglePlay:b,triggerPlay:h,menu:f,downloadButton:P,subtitleText:v}=On(e),S=(0,C.jsx)(vi,{title:o,type:c,images:s,color:m,uri:l,isPlaying:y,isActive:g,spec:i,togglePlay:b});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:S,name:o,subtitle:v,alt:o,dragLabel:o,menu:f,togglePlay:b,triggerPlay:h,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:g,isPinned:p,shouldShowType:t,type:c,downloadButton:P,spec:i,nrValidItems:a,index:n})},Ln=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,downloadButton:m,subtitleText:y,openDeleteDialog:g,isPlaying:x,isActive:b}=On(e),h=(0,C.jsx)(Si,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:b,isPlaying:x});return(0,C.jsx)(ui,{uri:a,name:l,subtitle:y,menu:p,dragLabel:l,cover:h,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,type:s,downloadButton:m,openDeleteDialog:g,isPlaying:x,isActive:b,spec:r,index:i})},Nn=(0,i.memo)(({uri:e,canPin:t,isPinned:r=!1})=>{const{spec:i}=(0,j.o)(e);return(0,C.jsxs)(y.W,{children:[t!==w.oT.NO&&(0,C.jsx)(ra.k,{uri:e,canPin:t,isPinned:r,type:Mt.c.VENUE,spec:i}),(0,C.jsx)(an.h,{children:(0,C.jsx)(Ga.m,{spec:i,uri:e,displayText:b.Ru.get("context-menu.copy-generic-link")})})]})});function kn(e){const{uri:t,cityName:r,locationName:a}=e,{filter:n}=(0,i.useContext)(E.g),l=(0,C.jsx)(Nn,{uri:t,canPin:e.canPin,isPinned:e.pinned}),s=[a,r].join(b.Ru.getSeparator());return{menu:l,subtitleText:(0,C.jsx)(Ot.M,{searchWords:[n.trim()],textToHighlight:s})}}const Fn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:m}=e,{menu:y,subtitleText:g}=kn(e),x=(0,C.jsx)(vi,{title:o,type:d,images:s,color:m,uri:l,isPlaying:!1,isActive:!1,spec:i});return(0,C.jsx)(Ii,{RowVariantComponent:r,uri:l,cover:x,name:o,subtitle:g,alt:o,type:d,dragLabel:o,menu:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Bn=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u}=kn(e),p=(0,C.jsx)(Si,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(ui,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:p,type:o,isPinned:s,shouldShowType:t,isPlaying:!1,isActive:!1,spec:r,index:i})},Mn=[ot.fl.EPISODES];function Un(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,a=r,n=w.Xn,{togglePlay:l,triggerPlay:s}=(0,Di.P)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:o,isActive:c}=(0,wr.l_)(a),d=(0,Je.f)(),u=(0,i.useCallback)(e=>{const{[ot.fl.EPISODES]:t=[]}=e;t?.length&&d?.add({uris:t})},[d]);return{isPlaying:o,isActive:c,togglePlay:l,triggerPlay:s,menu:(0,C.jsx)(Ia,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,C.jsx)(La.F,{size:"xsmall",className:br.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:b.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n,...fa({uri:n})}}const Vn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a,shouldShowType:n})=>{const{images:l,name:s,type:o,pinned:c,lastPlayedAt:d,addedAt:u,color:p}=e,{isPlaying:m,isActive:y,togglePlay:g,triggerPlay:x,menu:b,downloadButton:h,subtitleText:f,onDropTargetDropOn:P,playbackUri:v,uri:S,animateState:w,animateClassName:j}=Un(e),T=(0,C.jsx)(vi,{title:s,type:o,images:l,color:p,animateState:w,animateClassName:j,uri:S,isPlaying:m,isActive:y,spec:r,togglePlay:g});return(0,C.jsx)(Ii,{RowVariantComponent:t,uri:S,cover:T,name:s,subtitle:f,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:Mn,onDropTargetDropOn:P,togglePlay:g,triggerPlay:x,addedAt:u,lastPlayedAt:d,isPlaying:m,isActive:y,isPinned:c,shouldShowType:n,type:o,downloadButton:h,playbackUri:v,spec:r,nrValidItems:i,index:a})},_n=({libraryItem:e,spec:t,index:r,shouldShowType:i})=>{const{images:a,name:n,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,downloadButton:p,subtitleText:m,onDropTargetDropOn:y,playbackUri:g,uri:x,isPlaying:b,isActive:h,animateState:f,animateClassName:P}=Un(e),v=(0,C.jsx)(Si,{title:n,type:l,images:a,uri:x,togglePlay:c,color:o,spec:t,isActive:h,isPlaying:b});return(0,C.jsx)(ui,{uri:x,name:n,subtitle:m,menu:u,dragLabel:n,allowedDropTargetDropOnMimeTypes:Mn,onDropTargetDropOn:y,cover:v,togglePlay:c,triggerPlay:d,playbackUri:g,downloadButton:p,isPinned:s,shouldShowType:i,type:l,isPlaying:b,isActive:h,spec:t,index:r,animateState:f,animateClassName:P})},zn=(e,t,r,a)=>{const n=(0,d.NC)(Yr.Gry,{loadingValue:!1});(0,i.useEffect)(()=>{if(!n)return()=>{};const i=e.current,l=i?.parentNode?.querySelector(".os-scrollbar-vertical .os-scrollbar-handle"),s=a.current.rowHeight,o=a.current.numColumns??1;if(!l||!i||!s)return()=>{};const c=t(0,r-1,{cachedOnly:!0}),d=()=>{const e=Math.floor(o*(i.scrollTop-i.offsetTop)/s),t=c.at(e),r=t?.groupLabel;r&&!t.pinned?l.setAttribute("data-group-by",(e=>{const[t,r=""]=e.split(":");if("D"===t){const e=parseInt(r.substring(0,4),10),t=parseInt(r.substring(4,6),10),i=parseInt(r.substring(6,8),10),a=new Date(e,t-1,i);return b.Ru.formatDate(a,{month:"short",year:"numeric"})}return r})(r)):l.removeAttribute("data-group-by")};return d(),i.addEventListener("scroll",d),()=>{i.removeEventListener("scroll",d)}})};var Hn=r(4411),Kn=r(22233),Yn=r(73499),Gn=r(7848);const Wn=(0,r(86182).g)(Mt.c),Xn=(0,i.memo)(function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,Tt.c0)(e.uri)&&(Ht(e.type)!==t||zt(e)),spec:r,index:i},n=(0,d.NC)(Yr.lDH);switch(e.type){case Mt.c.FOLDER:return(0,C.jsx)(ja,{libraryItem:e,...a});case Mt.c.ALBUM:return(0,C.jsx)(Li,{libraryItem:e,...a});case Mt.c.ARTIST:return(0,C.jsx)(Bi,{libraryItem:e,...a});case Mt.c.AUDIOBOOK:return(0,C.jsx)(zi,{libraryItem:e,...a});case Mt.c.AUTHOR:return(0,C.jsx)(Gi,{libraryItem:e,...a});case Mt.c.SHOW:return(0,C.jsx)(Ln,{libraryItem:e,...a});case Mt.c.PLAYLIST:return(0,C.jsx)(Cn,{libraryItem:e,...a});case Mt.c.LIKED_SONGS:return(0,C.jsx)(Ea,{libraryItem:e,...a});case Mt.c.YOUR_EPISODES:return(0,C.jsx)(_n,{libraryItem:e,...a});case Mt.c.LOCAL_FILES:return(0,C.jsx)(Ua,{libraryItem:e,...a});case Mt.c.PRE_RELEASE_ALBUM:return n?(0,C.jsx)(An,{libraryItem:e,...a}):null;case Mt.c.PRE_RELEASE_BOOK:return(0,C.jsx)(An,{libraryItem:e,...a});case Mt.c.CONCERT:return(0,C.jsx)(Qi,{libraryItem:e,...a});case Mt.c.VENUE:return(0,C.jsx)(Bn,{libraryItem:e,...a});default:(0,Ut.d)(e)}}),Zn=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{itemsView:l}=(0,Hn.t)(),s=l===Hn.X.GRID_COMPACT,o=(0,Yn.s1)((e=>e?Yn.yV.YLX_COMPACT:Yn.yV.YLX)(s)),c=(0,i.useRef)({});zn(t,e,a,c),(0,jt.g)(t);const d=(0,i.useCallback)(e=>(0,C.jsx)(za,{index:e,type:Wn(r)?r:void 0},e),[r]),u=(0,i.useCallback)((t,i)=>e(t,i).map((e,i)=>{const a=t+i;return e?(0,C.jsx)(Xn,{item:e,spec:n,primaryFilter:r,index:a},`${e.uri}-${a}`):d(`${a}`)}),[e,r,d,n]),p=(0,i.useCallback)((e,t)=>{c.current={numColumns:e,rowHeight:t}},[]);return(0,C.jsx)(Kn.x,{config:o,children:(0,C.jsx)(oi,{isCompact:s,children:(0,C.jsx)(wt.R,{firstInteractiveIsWrapper:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(c.current.numColumns??1)),"aria-colcount":c.current.numColumns,children:(0,C.jsx)(Gn.F,{renderItems:u,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:p})})})})};var Qn=r(20746),Jn=r(11311),qn=r(31673),$n=r(98033);const el="b2LUdwZOrUuUETSvak0G",tl="EZ0DodWeNZb_gDFdrJ95",rl="lsrLTX2g9H3hmP5QCUcr",il="BFcR3FeXWsIvQXHYY0ZP",al="_lVH_C166JV99SJFGZsI",nl="bWCF4uPvQVdToZfID_NP",ll="ytvhgfquuy5jutqXeseA",sl=({isCollapsed:e,toggleCollapsedState:t,dropTargetClassName:r,folderUri:i,...a})=>(0,C.jsx)("div",{className:n()(el,e&&nl,!e&&il),...a,children:(0,C.jsxs)("button",{type:"button","aria-label":e?b.Ru.get("web-player.your-library-x.open-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:t,className:n()(tl,r),children:[(0,C.jsx)("span",{className:al,children:e?(0,C.jsx)(Qn.M,{}):(0,C.jsx)(Jn.C,{size:"small"})}),e&&(0,C.jsx)("span",{className:ll,children:(0,C.jsx)(qn.t,{})}),i||e?(0,C.jsx)($n.s,{children:(0,C.jsx)(J.E,{as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")})}):(0,C.jsx)(J.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:rl,as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")})]})});var ol=r(91925);const cl=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a}=(0,pe.Q)(),{toggleCollapseYLX:n}=(0,ol.u)(),l=(0,i.useCallback)(()=>{n(r)},[r,n]);return(0,C.jsx)(ue.Zp,{label:a?b.Ru.get("web-player.your-library-x.open-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,C.jsx)(sl,{isCollapsed:a,toggleCollapsedState:l,dropTargetClassName:t,folderUri:e})})};var dl=r(27936),ul=r(94685);const pl="main-yourLibraryX-header",ml="U08lwkPheR3zRBKWTjzc",yl="FZl_BgaZPeYPrCJrYo1W",gl="OWYl5sGd35QYBKwnbvJg",xl="main-yourLibraryX-headerContent",bl="main-yourLibraryX-headerIsCollapsed",hl="main-yourLibraryX-collapseButton",fl="XMeHpMzSB4XsWJZU3z8J",Pl="dzzX3EujtAPhmLCH_P4S",Cl="v7pq5cg0c9Ofh3MxWpSf",vl="xoUEIVtweRDj3UqKRrFF",Sl="CjGVphOR96me80esGFpV",wl="rlWB9lviQThKPFKIJSNA",jl="x2pVVR565DrF1gBBu0A1",Tl="mHv5_ucn1VOKWo1R0nYT",Il="acpzUa5amHGMA0jS9Ac6",Rl="_Oia64aLsYdtC3dDhXLg",Al=({dropTargetClassName:e,spec:t})=>{const{setLeftSidebarState:r}=(0,se.ae)(),{isExpanded:i}=(0,pe.Q)(),a=(0,P.s)();return(0,C.jsx)(ue.Zp,{label:i?b.Ru.get("web-player.your-library-x.show-less"):b.Ru.get("web-player.your-library-x.show-more"),children:(0,C.jsx)(ce.H,{className:n()(Pl,Sl,e),iconOnly:i?dl.G:ul.h,"aria-label":i?b.Ru.get("web-player.your-library-x.reduce-your-library"):b.Ru.get("web-player.your-library-x.enlarge-your-library"),onClick:()=>{r(i?se.ZS.DEFAULT:se.ZS.EXPANDED),a.logInteraction(t.hitToggleState({stateBeforeToggle:i?"expanded":"default",stateAfterToggle:i?"default":"expanded"}))},size:"small"})})};var Dl=r(27498);const Ol=({handleNavigateBack:e,isCollapsed:t,isFullscreen:r,parentFolderUri:i,spec:a})=>{const{handleDropBeforeOrAfterRootlistItem:l}=ti({dropTargetUri:i,spec:a}),{dropPosition:s,className:o,...c}=(0,Qe.A)({allowedMimeTypesByDropPosition:{[I.Nz.ON]:ct},onDrop:async e=>{l(e,I.Nz.BEFORE)},onLongDragOver:e});return(0,C.jsx)(ue.Zp,{label:b.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,C.jsx)(ce.H,{className:n()(Pl,Cl,o,{[$e]:s===I.Nz.ON,[Il]:!t&&!r}),"aria-label":b.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:Dl.g,size:"small",...c})})};var El=r(43289),Ll=r(64300);const Nl=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,C.jsx)(Ll.b,{menu:e,children:(0,C.jsx)("span",{className:vl,children:(0,C.jsx)(ue.Zp,{label:b.Ru.get("more.label.context",t),children:(0,C.jsx)(ce.H,{className:n()(Pl,Sl,r),iconOnly:El.x,"aria-haspopup":"menu","aria-label":b.Ru.get("more.label.context",t),size:"small"})})})});var kl=r(83498),Fl=r(96573),Bl=r(78065),Ml=r(3877),Ul=r(87789);const Vl=({dropTargetClassName:e,spec:t})=>{const r=(0,Ul.S)(),i=(0,Ml.l)(),{setLeftSidebarState:a}=(0,se.ae)(),l=(0,P.s)(),s=r===Bl.z.LIBRARY?b.Ru.get("web-player.your-library-x.minimize-your-library-fullscreen"):b.Ru.get("web-player.your-library-x.expand-your-library-fullscreen");return(0,C.jsx)(ue.Zp,{label:s,children:(0,C.jsx)(ce.H,{className:n()(Pl,Sl,e),iconOnly:r===Bl.z.LIBRARY?kl.b:Fl.L,"aria-label":s,onClick:()=>{r===Bl.z.LIBRARY?(i(Bl.z.CLOSED),a(se.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"fullscreen",stateAfterToggle:"default"}))):(i(Bl.z.LIBRARY),a(se.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"default",stateAfterToggle:"fullscreen"})))},size:"small"})})};var _l=r(70870),zl=r(34101);const Hl=e=>{const{createPlaylistFromAlbum:t,createPlaylistFromTracks:r,createPlaylistFromPlaylist:a}=(0,f.A)();return(0,Qe.A)({allowedMimeTypesByDropPosition:{[I.Nz.ON]:[ot.fl.TRACKS,ot.fl.EPISODES,ot.fl.ALBUMS,ot.fl.PLAYLISTS_V2,ot.fl.AUDIOBOOKS]},onDrop:(0,i.useCallback)(i=>{const{[ot.fl.TRACKS]:n=[],[ot.fl.LOCAL_TRACKS]:l=[],[ot.fl.EPISODES]:s=[],[ot.fl.AUDIOBOOKS]:o=[],[ot.fl.ALBUMS]:c=[],[ot.fl.PLAYLISTS_V2]:d=[]}=i,u=e?{after:{uri:e}}:{before:"start"},p=[...n,...l,...s];o.length>0?r(o,u):p.length?r(p,u):c[0]?t(c[0],u):d[0]&&a(d[0],u)},[t,a,r,e])})},Kl="UCyimCp8rEfL5nB8paBu",Yl="yoyv1_1LPucwCXYDe5AN",Gl="ZdJvNnfE3rlPCyM599YE",Wl="d593JHt3l8dr2Ifvx0a_",Xl=({iconOnly:e=!1,folderUri:t,spec:r})=>{const{className:a,dropPosition:l,...s}=Hl(),o=(0,P.s)(),c=(0,i.useCallback)(()=>{const e=r.hitUiReveal();o.logInteraction(e)},[r,o]);return(0,C.jsx)(Ll.b,{menu:(0,C.jsx)(zl.r,{folderUri:t,ylxMenuSpec:r.createMenuFactory()}),onShow:c,children:(t,r,i)=>(0,C.jsx)(ue.Zp,{label:b.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,C.jsxs)("button",{type:"button",ref:i,onClick:r,className:n()(Kl,a,{[Gl]:t,[Wl]:e,[$e]:l===I.Nz.ON}),"aria-label":b.Ru.get("web-player.global-nav-bar.create-button.label"),...s,children:[(0,C.jsx)(_l.u,{className:Yl,size:"small"}),!e&&(0,C.jsx)(J.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.global-nav-bar.create-button.label")})]})})})};var Zl=r(83491),Ql=r(66990);const Jl=()=>null,ql=(0,i.lazy)(async()=>{const{CreateMagpieMenuItem:e}=await Promise.all([r.e(5801),r.e(3241),r.e(8538),r.e(2435),r.e(5872)]).then(r.bind(r,10150));return{default:e}}),$l=()=>{const{isMagpieEnabled:e}=(0,Ft.O)();return e?(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ql,{})}):null},es=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,f.A)(),{createFolder:i}=(0,Ca.Z)(),a=(0,P.s)(),n=(0,$.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(h.D,{onClick:()=>{const e=a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist());r(e.interactionId,l)},role:"menuitem",leadingIcon:(0,C.jsx)(x.u,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,C.jsx)(h.D,{onClick:()=>{i(b.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,C.jsx)(Ql.h,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")}),(0,C.jsx)(Jl,{}),(0,C.jsx)($l,{})]})},ts=({className:e="",folderUri:t,tooltipPlacement:r,spec:i})=>{const a=b.Ru.get("web-player.your-library-x.create.button-label"),l=(0,P.s)(),{className:s,dropPosition:o,...c}=Hl(t);return(0,C.jsx)(Zl.t,{renderInline:!0,menu:(0,C.jsx)(es,{folderUri:t,spec:i.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,d,u)=>(0,C.jsx)(ue.Zp,{label:a,placement:r,children:(0,C.jsx)(ce.H,{ref:u,iconOnly:_l.u,className:n()(e,s,{[$e]:o===I.Nz.ON}),"aria-label":a,onClick:e=>{d(e),l.logInteraction(i.hitUiReveal())},size:"small",...c})})})},rs=(0,i.forwardRef)(function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:o,isCollapsed:c,isFullscreen:d},u){const{isActive:p}=(0,wr.l_)(e??"not-a-folder"),y=(0,s.wA)(),g=(0,P.s)(),x=(0,i.useCallback)(()=>{y((0,Rt.O2)(t,a)),g.logInteraction(l.hitRenameFolder({uri:e}))},[y,t,e,g,a,l]);return(0,C.jsx)(ue.Zp,{label:t,showDelay:ue.uF,children:(0,C.jsx)("div",{className:n()(jl,o,{[Rl]:!c&&!d}),children:(0,C.jsx)(m.h,{menu:r,children:(0,C.jsx)(ce.H,{"aria-label":t,onClick:x,size:"small",condensed:!0,className:n()(Pl),ref:u,children:(0,C.jsx)(J.E,{variant:"bodyMediumBold",semanticColor:p?"textBrightAccent":void 0,className:Tl,as:"h2",children:t})})})})})});var is=r(84962),as=r(67784),ns=r(50948);const ls="YAKLWku6JFwURkIlV49i",ss="_OmvhWDtz7Pua9MjHn22",os=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=as.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)(e=>t(e.data.progress),[]);return(0,ns.b)(r,a),e}();return e?(0,C.jsxs)("div",{className:ls,children:[(0,C.jsxs)("div",{className:ss,children:[(0,C.jsx)(J.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-title")}),(0,C.jsx)(J.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,C.jsx)(is.z,{value:t})]}):null};var cs=r(96344),ds=r(58760),us=r(77639);const ps=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l,openedFolderIsPlayable:s})=>{const{canExpand:o,canCollapse:u}=(0,se.ae)(),{isDefault:p,isCollapsed:m,isExpanded:y,isFullscreen:g}=(0,cs.Q)(),{renameFolder:x}=(0,Ca.Z)(),{popFolder:h}=(0,i.useContext)(vt),f=(0,i.useCallback)((e="")=>{r&&x({uri:r},e)},[r,x]),P=(0,i.useCallback)(()=>{h()},[h]),v=r?(0,C.jsx)(da,{reference:{uri:r},name:a,onRename:f,onDeleteCallback:P,isPlayable:s}):null,{dropOriginIsYLX:S}=Jr(),w=!m&&r&&void 0!==a,j=(0,i.useRef)(null),T=(0,i.useRef)(null),I=(0,i.useRef)(null),R=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)(()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"},[a]);(0,i.useLayoutEffect)(n,[n]),(0,Pi.w)({refOrElement:r,observeOnly:"width",onResize:n})}(R,(0,i.useMemo)(()=>({get current(){return I.current?.firstElementChild instanceof HTMLElement?I.current?.firstElementChild:null}}),[]),j,a,w);const{breakpoint:A}=(0,us.x)({[ds.E.SMALL]:0,[ds.E.MEDIUM]:300},j),D=(0,d.NC)(Yr.s_6,{loadingValue:Yr.G2o.NONE}),O=D===Yr.G2o.YOUR_LIBRARY,E=!m||t&&m,L=D===Yr.G2o.GLOBAL_NAV,N=(0,d.NC)(Yr.OB1);return(0,C.jsxs)("header",{className:n()(pl,{[wl]:m}),ref:j,children:[!m&&(0,C.jsx)(os,{}),(0,C.jsxs)("div",{className:n()(xl,{[bl]:m}),children:[(0,C.jsxs)("div",{className:n()(hl,{[bl]:m}),ref:T,children:[u&&!g?(0,C.jsx)(cl,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory()}):(0,C.jsx)(J.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:fl,as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")}),r&&(0,C.jsx)(Ol,{handleNavigateBack:P,parentFolderUri:r,spec:l.folderBackButtonFactory(),isCollapsed:m,isFullscreen:g}),w&&(0,C.jsx)(rs,{folderUri:r,folderName:a,folderMenu:v,onRename:f,spec:l.folderTitleFactory(),isCollapsed:m,isFullscreen:g,className:S?e:void 0,ref:I},r)]}),(0,C.jsxs)("div",{className:n()(yl,ml,{[gl]:L}),children:[!O&&E&&(0,C.jsx)("span",{ref:R,children:(0,C.jsx)(ts,{className:n()(Pl,Sl),folderUri:r,tooltipPlacement:m?"right":void 0,spec:l.createMenuButtonFactory()})}),O&&(0,C.jsx)(Xl,{iconOnly:m||A===ds.E.SMALL,folderUri:r,spec:l.createMenuButtonFactory()}),r&&!m&&(0,C.jsx)(Nl,{folderName:a,folderMenu:v,dropTargetClassName:e}),(p&&o||y)&&(0,C.jsx)(Al,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory()}),!N||m||t?null:(0,C.jsx)(Vl,{dropTargetClassName:e,spec:l.toggleFullscreenModeButtonFactory()})]})]})]})};var ms=r(8335),ys=r(30920),gs=r(9861),xs=r(21903),bs=r(50247),hs=r(25494),fs=r(59867),Ps=r(87159),Cs=r(8476);const vs=()=>{const e=(0,$.V)(),t=(0,s.d4)(ee.JJ),r=(0,fs.vh)(),{isDesktop:i}=(0,Pa.V)(),a=(0,d.NC)(Yr.GIo),n=(0,d.NC)(Yr.Zze);return({dismiss:l})=>{const s={action:"click",category:"your_library_banner_"+(l?"dismiss":"click"),country:t,label:i?"desktop":"dwp",os:(0,Cs.f)(),sp_t:(0,Ps.v8)("sp_t"),variant:JSON.stringify({inactiveVariant:a,newVariant:n})};e?r.send((0,hs.r)(s)):r.send((0,bs._)(s))}};var Ss=r(85387),ws=r(20276),js=r(65823);const Ts=(e,t)=>{const r=(0,Ss.zy)(),i=(0,ws.o)(e,r),a=(0,d.NC)(Yr.GIo);return i||a===t},Is=()=>Ts(js.P.LibraryImportMoreProminent,Yr.wrI.MoreProminent),Rs=()=>Ts(js.P.LibraryImportLessProminent,Yr.wrI.LessProminent),As=(e,t)=>{const r=(0,Ss.zy)(),i=(0,ws.o)(e,r),a=(0,d.NC)(Yr.Zze);return i||a===t},Ds=()=>As(js.P.LibraryImportMoreProminent,Yr.JbC.MoreProminent),Os=()=>As(js.P.LibraryImportLessProminent,Yr.JbC.LessProminent);var Es=r(78969),Ls=r(38895);const Ns="libImpDisplayState",ks=()=>{const e=localStorage.getItem(Ns);return e?JSON.parse(e):null},Fs=e=>localStorage.setItem(Ns,JSON.stringify(e)),Bs=()=>{const[e,t]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!0),[n,l]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{const e=await(async e=>{const t=window.location.search,r=new URLSearchParams(t).get("ts");return r&&"1"===r?{completed:!1}:(await e.build().withHost(Ls.Y9).withPath("/transfer-status").withoutMarket().withEndpointIdentifier("/transfer-status").send()).body})(Es.n.getInstance());l(e.completed)}catch{l(!1)}finally{a(!1)}})()},[]),(0,i.useEffect)(()=>{if(r)return;const e=Date.now(),i=ks();if(n)return void t(!1);if(i?.dismissed)return void t(!1);if(!i)return Fs({sessionsShown:1,dismissed:!1}),void t(!0);if(1===i.sessionsShown&&"number"!=typeof i.lastHiddenAt)return void t(!0);if(i.sessionsShown>=2)return void t(!1);1===i.sessionsShown&&"number"==typeof i.lastHiddenAt&&e-i.lastHiddenAt>=864e5&&(Fs({...i,sessionsShown:2}),t(!0))},[n,r]);const s=(0,i.useCallback)(()=>{const e=ks()??{sessionsShown:0,dismissed:!1};Fs({...e,dismissed:!0}),t(!1)},[]);return(0,i.useEffect)(()=>{const e=e=>{if(e.persisted)return;const t=ks();t&&1===t.sessionsShown&&"number"!=typeof t.lastHiddenAt&&Fs({...t,lastHiddenAt:Date.now()})};return window.addEventListener("pagehide",e),()=>{window.removeEventListener("pagehide",e)}},[]),{displayCTA:e,dismissCTA:s}},Ms="TlMFkwANLJrFHUsnTOQf",Us="GhNXvPcgJ6SwCH2oT9Fg",Vs="YzLgJpgTs5ApbigDIug6",_s="u4yTqjicafhRlFtczlCQ",zs="QJSGpTI7i4gFrdZYjwUM",Hs="r4P3wE7bvGga337z9hnx",Ks="fQOt8N4l1V7XzxHUFnBS",Ys=(0,i.memo)(({dismissCTA:e})=>{const t=vs(),r=(0,i.useMemo)(()=>(0,p.bj)("images/library-import.webp"),[]);return(0,C.jsxs)("div",{className:Us,style:{"--background-image":`url(${r})`},children:[(0,C.jsx)(ce.H,{size:"small",iconOnly:ys.M,"aria-label":b.Ru.get("close"),className:Ks,semanticColor:"textBase",onClick:()=>{e(),t({dismiss:!0})}}),(0,C.jsx)(J.E,{as:"h2",variant:"bodySmallBold",semanticColor:"textBase",className:zs,children:b.Ru.get("library-import.title")}),(0,C.jsx)(J.E,{as:"h3",variant:"bodySmall",semanticColor:"textBase",paddingBottom:"16px",children:b.Ru.get("library-import.description")}),(0,C.jsx)(Te.$,{href:"https://www.spotify.com/import-music",colorSet:"invertedLight",size:"small",onClick:()=>{t({dismiss:!1})},target:"_blank",rel:"noopener noreferrer",children:b.Ru.get("library-import.cta")})]})}),Gs=(0,i.memo)(()=>{const e=vs();return(0,C.jsx)("a",{href:"https://www.spotify.com/import-music",className:Vs,onClick:()=>{e({dismiss:!1})},target:"_blank",rel:"noopener noreferrer",children:(0,C.jsxs)("div",{className:_s,children:[(0,C.jsxs)("div",{className:Hs,children:[(0,C.jsx)(gs.T,{semanticColor:"textBase"}),(0,C.jsx)(J.E,{as:"h2",variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("library-import.title")})]}),(0,C.jsx)(xs.V,{semanticColor:"textBase"})]})})}),Ws=(0,i.memo)(()=>{const e=Is(),t=Rs(),r=Ds(),a=Os(),n=e||r,l=t||a,{displayCTA:o,dismissCTA:c}=Bs(),u=(()=>{const e=(0,$.V)(),t=(0,s.d4)(ee.JJ),r=(0,fs.vh)(),{isDesktop:i}=(0,Pa.V)(),a=(0,d.NC)(Yr.GIo),n=(0,d.NC)(Yr.Zze);return()=>{const l={action:"banner_visible",category:"your_library_banner_visible",country:t,label:i?"desktop":"dwp",os:(0,Cs.f)(),sp_t:(0,Ps.v8)("sp_t"),variant:JSON.stringify({inactiveVariant:a,newVariant:n})};e?r.send((0,hs.r)(l)):r.send((0,bs._)(l))}})(),{inView:p,ref:m}=(0,ms.Wx)({threshold:1});return(0,i.useEffect)(()=>{o&&p&&u()},[u,o,p]),o?(0,C.jsxs)("article",{className:Ms,ref:m,children:[n&&(0,C.jsx)(Ys,{dismissCTA:c}),l&&(0,C.jsx)(Gs,{})]}):null});var Xs=r(57045);const Zs=({isScrolled:e})=>(0,C.jsxs)(wi.$,{rowIndex:0,className:n()(ir,lr,{[ar]:e}),children:[(0,C.jsx)(_a.T,{columnIndex:1,children:(0,C.jsx)(J.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader",children:b.Ru.get("web-player.your-library-x.expanded-list-header.title")})}),(0,C.jsx)(_a.T,{columnIndex:2,children:(0,C.jsx)(J.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader","aria-colindex":2,children:b.Ru.get("web-player.your-library-x.expanded-list-header.date-added")})}),(0,C.jsx)(_a.T,{columnIndex:3,children:(0,C.jsx)(J.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader","aria-colindex":3,children:b.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})})]});var Qs=r(70796),Js=r(42682);const qs=({date:e})=>(0,C.jsx)(J.E,{variant:"bodySmall",semanticColor:"textSubdued",className:nr,children:e&&b.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),$s=(0,i.memo)(e=>{const t=e.handleNavigate,r=(0,C.jsx)(Er,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,C.jsx)(mr,{})),a=(0,C.jsx)(hr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(li.g,{pinned:e.isPinned}),e.preReleaseIcon,e.newReleaseSignifier,e.downloadButton,e.lockedIcon,(0,C.jsx)(kt.K,{className:Zt,isPlaylistMixed:e.isPlaylistMixed})]}),subtitle:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Kt,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType,isPlaylistMixed:e.isPlaylistMixed,isPromptPlaylist:e.isPromptPlaylist})}),uri:e.uri}),n=e.logRightClick;return(0,C.jsx)(m.h,{menu:e.menu,onShow:n,children:(0,C.jsx)(Nt.E,{uri:e.uri,trigger:Nt.l.OnMouseDown,children:(0,C.jsx)(_a.T,{columnIndex:0,children:(0,C.jsx)(Qs.v,{className:Gt,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isActiveOrSelected?"tinted":void 0,padding:Va.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})})})}),eo=e=>{const t=e.handleNavigate,r=(0,C.jsx)(Er,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,C.jsx)(hr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(li.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(Kt,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType,isPlaylistMixed:e.isPlaylistMixed,isPromptPlaylist:e.isPromptPlaylist}),uri:e.uri}),a=e.logRightClick;return(0,C.jsx)(yr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,C.jsxs)(_a.T,{columnIndex:0,children:[(0,C.jsx)(m.h,{menu:e.menu,onShow:a,children:(0,C.jsx)(Nt.E,{uri:e.uri,trigger:Nt.l.OnMouseDown,children:(0,C.jsx)(Qs.v,{className:n()(Gt,Xt),media:e.cover,id:e.uri,padding:Va.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,C.jsxs)("span",{className:pr,children:[r," ",i]})]})})},to=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,C.jsx)(m.h,{menu:e.menu,onShow:r,children:(0,C.jsxs)("div",{className:ir,ref:t,children:[(0,C.jsx)($s,{...e,parentRef:t}),(0,C.jsx)(_a.T,{columnIndex:1,children:(0,C.jsx)(qs,{date:e.addedAt})}),(0,C.jsx)(_a.T,{columnIndex:2,children:(0,C.jsx)(qs,{date:e.lastPlayedAt})})]})})},ro=e=>{const t=e.handleNavigate,r=(0,C.jsxs)("div",{className:sr,children:[(0,C.jsx)(Er,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Js.v,{children:"•"}),(0,C.jsx)(Js.v,{lineClamp:1,children:_t(e.type,e.specialType,{isPlaylistMixed:e.isPlaylistMixed,isPromptPlaylist:e.isPromptPlaylist})})]}),(!e.shouldShowType&&e.type===Mt.c.ALBUM||(0,Tt.c0)(e.uri))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Js.v,{children:"•"}),(0,C.jsx)(hr,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,C.jsx)(li.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,C.jsx)(mr,{iconSize:"xsmall"}):(0,C.jsxs)(C.Fragment,{children:[e.downloadButton&&(0,C.jsx)("div",{className:Qt,children:e.downloadButton}),e.preReleaseIcon&&(0,C.jsx)("div",{className:Qt,children:e.preReleaseIcon}),e.lockedIcon&&(0,C.jsx)("div",{className:Qt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,C.jsx)(m.h,{menu:e.menu,onShow:l,children:(0,C.jsx)(Nt.E,{uri:e.uri,trigger:Nt.l.OnMouseDown,children:(0,C.jsx)(_a.T,{columnIndex:0,children:(0,C.jsx)(Qs.v,{className:n()(Gt,Wt),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isActiveOrSelected?"tinted":void 0,padding:`${Va.vw} ${Va.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})})},io=e=>{const t=e.logRightClick;return(0,C.jsx)(m.h,{menu:e.menu,onShow:t,children:(0,C.jsxs)("div",{className:ir,children:[(0,C.jsx)(ro,{...e}),(0,C.jsx)(_a.T,{columnIndex:1,children:(0,C.jsx)(qs,{date:e.addedAt})}),(0,C.jsx)(_a.T,{columnIndex:2,children:(0,C.jsx)(qs,{date:e.lastPlayedAt})})]})})},ao=({height:e,isCompact:t,primaryFilter:r})=>(0,C.jsx)(wi.$,{rowIndex:0,className:n()({[$t]:!t,[tr]:t,[er]:r===Mt.c.ARTIST}),style:{height:e}}),no=()=>{const{itemsView:e}=(0,Hn.t)(),{isCollapsed:t}=(0,pe.Q)();return e===Hn.X.LIST_DEFAULT||t?64:32};var lo=r(82487);const so="main-yourLibraryX-libraryContainer",oo="xUGeaiU1sWmepe7irxSb",co="main-yourLibraryX-libraryFilter",uo="sk3cJK5EGQYAniRpE6Iz",po="main-yourLibraryX-libraryItemContainer",mo="main-yourLibraryX-libraryRootlist",yo="G4x1juhr8jVza8dirSUd",go="P7U3v8wg2yAeraJLVzXg",xo="bBRGc_r0bDzpHurzpldg",bo="xr_jrdPy4l4NzCZnU1Nr",ho="bextOq_5YFeq7Im9BlTE",fo="main-yourLibraryX-filterArea",Po=(0,i.memo)(function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n,ylxIsCompact:l}){const s={shouldShowType:!(0,Tt.c0)(e.uri)&&(Ht(e.type)!==t||zt(e)&&!l),RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(Yr.lDH);switch(e.type){case Mt.c.FOLDER:return(0,C.jsx)(wa,{libraryItem:e,...s});case Mt.c.ALBUM:return(0,C.jsx)(Ei,{libraryItem:e,...s});case Mt.c.ARTIST:return(0,C.jsx)(Fi,{libraryItem:e,...s});case Mt.c.AUDIOBOOK:return(0,C.jsx)(_i,{libraryItem:e,...s});case Mt.c.AUTHOR:return(0,C.jsx)(Yi,{libraryItem:e,...s});case Mt.c.SHOW:return(0,C.jsx)(En,{libraryItem:e,...s});case Mt.c.PLAYLIST:return(0,C.jsx)(Pn,{libraryItem:e,...s});case Mt.c.LIKED_SONGS:return(0,C.jsx)(Oa,{libraryItem:e,...s});case Mt.c.YOUR_EPISODES:return(0,C.jsx)(Vn,{libraryItem:e,...s});case Mt.c.LOCAL_FILES:return(0,C.jsx)(Ma,{libraryItem:e,...s});case Mt.c.PRE_RELEASE_ALBUM:return o?(0,C.jsx)(Rn,{libraryItem:e,...s}):null;case Mt.c.PRE_RELEASE_BOOK:return(0,C.jsx)(Rn,{libraryItem:e,...s});case Mt.c.CONCERT:return(0,C.jsx)(Zi,{libraryItem:e,...s});case Mt.c.VENUE:return(0,C.jsx)(Fn,{libraryItem:e,...s});default:(0,Ut.d)(e)}}),Co=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:l,isScrolled:s,isExpandedList:o,hasItems:c})=>{const{isCollapsed:d,isExpanded:u,isFullscreen:p}=(0,pe.Q)(),{itemsView:m}=(0,Hn.t)(),y=no(),g=m===Hn.X.LIST_COMPACT,x=((e,t,r,i)=>e?eo:t||r?i?io:to:i?ro:$s)(d,u,p,g),h=(0,i.useMemo)(()=>({current:{rowHeight:y}}),[y]);zn(t,e,a,h),(0,jt.g)(t);const f=(0,i.useCallback)((e,t)=>(0,C.jsx)(ao,{height:e,isCompact:g,primaryFilter:r},t),[g,r]),P=(0,i.useCallback)((t,i)=>e(t,i).map((e,i)=>{const n=t+i;return e?(0,C.jsx)(Po,{item:e,spec:l,RowVariantComponent:x,primaryFilter:r,nrValidItems:a,index:n,ylxIsCompact:g},`${e.uri}-${n}`):f(`${y}px`,`${n}`)}),[e,l,x,r,a,g,f,y]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(Xs.f,{"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":a,"aria-colcount":o?3:1,children:[o&&c&&(0,C.jsx)(Zs,{isScrolled:s}),(0,C.jsx)("div",{className:n()({[go]:o}),children:(0,C.jsx)(lo.L,{renderRows:P,nrRows:a,rowHeight:y,scrollNodeRef:t,renderPlaceholder:f})})]})})};var vo=r(60940),So=r(18055),wo=r(18572),jo=r(41506),To=r(59023),Io=r(7585),Ro=r(13226),Ao=r(62813);const Do=e=>e?.parentElement?.querySelector("ul"),Oo=()=>[{itemsViewState:Hn.X.LIST_COMPACT,icon:To.d,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Hn.X.LIST_DEFAULT,icon:Io.N,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")},{itemsViewState:Hn.X.GRID_COMPACT,icon:Ro.E,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Hn.X.GRID_DEFAULT,icon:Ao.D,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")}];var Eo=r(82595),Lo=r(90113);const No=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===Lo.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling,s=!!l?.querySelector(Eo.kX);if(t instanceof HTMLUListElement||!s){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}};var ko=r(21994);const Fo="q5yNYsAl_GMkOgQnquWI",Bo="YrVXiSMvnPFGqwDCePCf",Mo=({selectedView:e,onViewSelect:t})=>{const r=(0,i.useRef)(null),a=(0,ko.W)(),n=(0,i.useCallback)(e=>{const r=Oo().find(t=>t.fullName===e);r&&t(r)},[t]);return(0,i.useLayoutEffect)(()=>{const t=Oo().findIndex(t=>t.itemsViewState===e.itemsViewState);r.current?.style.setProperty("--view-menu-selected-offset",(a?-100*t:100*t)+"%")},[e,a]),(0,C.jsxs)(y.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:No,getInitialFocusElement:Do,children:[(0,C.jsx)(jo.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),(0,C.jsx)("div",{className:Fo,ref:r,children:Oo().map(t=>{const r=t.itemsViewState===e.itemsViewState;return(0,C.jsx)(ue.Zp,{label:t.fullName,children:(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":r,onClick:()=>n(t.fullName),"aria-label":t.fullName,className:Bo,autoClose:!1,CheckedIcon:null,children:t.icon({size:"small"})})},t.fullName)})})]})},Uo="raQ_gk73kcdcdztW_GAU",Vo="X4pSwtpCoExGkVbCu9sB",_o=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,sortDirection:l,canChangeSortDirection:s,id:o})=>{const c=(0,i.useRef)(null);let d;return d=s&&null!==l?"forward"===l?So.R:wo.U:vo.i,(0,C.jsxs)("div",{id:o,className:Uo,ref:c,children:[(0,C.jsxs)(y.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:No,getInitialFocusElement:Do,children:[(0,C.jsx)(jo.y,{children:b.Ru.get("web-player.your-library-x.sort_by")}),n.map(({key:t,value:i},a)=>(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),autoClose:!1,CheckedIcon:d,children:i},t))]}),(0,C.jsx)(Mo,{onViewSelect:a,selectedView:t})]})},zo=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,sortDirection:a,canChangeSortDirection:n,headerSpec:l})=>{const s=(0,Je.f)(),o=(0,i.useMemo)(()=>l.sortbyViewasMenuButtonFactory(),[l]),c=(0,P.s)(),d=(0,i.useCallback)(()=>{c.logInteraction(o.hitUiReveal())},[c,o]),u=e.find(e=>e.id===t)??e?.at(0),p={key:u?.id??"",value:u?.name??""},m=(0,i.useCallback)((e,t)=>{r(e);const i=s.getSortOrderLabel(e);c.logInteraction(o.sortOptionFactory({identifier:i,position:t}).hitSort())},[s,c,r,o]),{itemsView:y,setItemsView:g}=(0,Hn.t)(),x=(0,i.useMemo)(()=>{return e=y,Oo().find(t=>t.itemsViewState===e)??Oo()[0];var e},[y]),h=(0,i.useCallback)(e=>{let t="",r=0;e.itemsViewState===Hn.X.LIST_DEFAULT?(g(Hn.X.LIST_DEFAULT),t="list-default"):e.itemsViewState===Hn.X.LIST_COMPACT&&(g(Hn.X.LIST_COMPACT),t="list-compact",r=2),e.itemsViewState===Hn.X.GRID_DEFAULT?(g(Hn.X.GRID_DEFAULT),t="grid-default",r=3):e.itemsViewState===Hn.X.GRID_COMPACT&&(g(Hn.X.GRID_COMPACT),t="grid-compact",r=4),c.logInteraction(o.viewAsOptionFactory({identifier:t,position:r}).hitUiElementToggle())},[c,g,o]);return(0,C.jsx)(Ll.b,{menu:(0,C.jsx)(_o,{selectedSort:p,selectedView:{itemsViewState:x.itemsViewState},sortDirection:a,canChangeSortDirection:n,sortOptions:e.map(({id:e,name:t})=>({key:e,value:t})),onSortSelect:m,onViewSelect:h,id:"sort-and-view-picker"}),placement:"bottom-end",children:(e,t,r)=>(0,C.jsx)(ce.H,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",p.value,x.fullName),onClick:e=>{d(),t(e)},onKeyDown:e=>{"ArrowDown"===e.key&&(d(),t(e))},size:"small",iconTrailing:x.icon,role:"combobox","aria-haspopup":"true","aria-controls":"sort-and-view-picker","aria-expanded":e,condensed:!0,children:(0,C.jsx)(J.E,{variant:"bodySmall",className:Vo,"data-sortbox-label":!0,ref:r,children:p.value})})})};var Ho=r(74134);const Ko=(0,i.createContext)(null),Yo=({children:e})=>{const t=(0,i.useRef)(null);return(0,C.jsx)(Ko.Provider,{value:t,children:e})},Go=()=>{const e=(0,i.useContext)(Ko);if(!e)throw new Error("useTextFilterFocusContext must be used within a TextFilterFocusProvider");return{registerFocusFunction:(0,i.useCallback)(t=>{e.current=t},[e]),getFocusFunction:(0,i.useCallback)(()=>e.current,[e])}};const Wo=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r,alwaysExpanded:a=!1})=>{const n=(0,Je.f)(),l=(0,P.s)(),{registerFocusFunction:s}=Go(),o=function(e){switch(e){case Mt.c.ALBUM:return b.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case Mt.c.ARTIST:return b.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case Mt.c.AUTHOR:return b.Ru.get("web-player.your-library-x.text-filter.authors-placeholder");case Mt.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case Mt.c.SHOW:return b.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case Mt.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return b.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case Mt.c.CONCERT:return b.Ru.get("web-player.your-library-x.text-filter.events-placeholder");case void 0:return b.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,Ut.k)(e)}}(t),c=(0,i.useCallback)(()=>(l.logInteraction(r.searchButtonFactory().hitUiReveal()),!0),[l,r]),d=(0,i.useCallback)(()=>(l.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0),[l,r]),u=(0,i.useCallback)(e=>{s(e)},[s]);return(0,C.jsx)(Ho.S,{placeholder:o,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:n?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:c,onClear:d,useExpandCallback:u,alwaysExpanded:a,ariaLabel:b.Ru.get("web-player.your-library-x.text-filter.additional-aria-label")})},Xo=({dropTargetClassName:e,openedFolderUri:t,containerRef:r,primaryFilter:a,availableSortOrders:l,selectedSortOrderId:s,setSelectedSortOrderId:o,sortDirection:c,canChangeSortDirection:d,headerSpec:u,isFullscreen:p})=>{const m=(0,i.useMemo)(()=>u.searchBarFactory(),[u]),{breakpoint:y}=(0,us.x)({[ds.E.SMALL]:0,[ds.E.MEDIUM]:800},r);return(0,C.jsxs)("div",{className:n()(co,e),children:[(0,C.jsx)(Wo,{clearOnEscapeInElementRef:r,primaryFilter:a,spec:m,alwaysExpanded:y===ds.E.MEDIUM&&p},t),(0,C.jsx)(zo,{sortOrders:l??[],activeSortOrderId:s,setActiveSortOrderId:o,sortDirection:c,canChangeSortDirection:d,headerSpec:u})]})},Zo="oQ2ZjO65wiElB8zx7Xbt",Qo="QMU9ZLnC4aynaBdvh9vl",Jo=({resetError:e})=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:Qo,children:(0,C.jsx)(J.E,{variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("error.generic")})}),(0,C.jsx)(Te.$,{colorSet:"invertedLight",size:"medium",onClick:e,children:b.Ru.get("error.reload")})]}),qo=({resetError:e})=>{const{isCollapsed:t}=(0,pe.Q)();return(0,C.jsxs)("div",{className:Zo,children:[(0,C.jsx)(Me.b,{size:"xlarge",semanticColor:"textBase"}),t?(0,C.jsx)($n.s,{children:(0,C.jsx)(Jo,{resetError:e})}):(0,C.jsx)(Jo,{resetError:e})]})};var $o=r(92010),ec=r(51078);const tc=()=>((0,$o.x)(),(0,ec.w)(),null),rc=()=>(0,Ul.S)()===Bl.z.LIBRARY?(0,C.jsx)(tc,{}):null;var ic=r(81694);var ac=r(77733);var nc=r(9400);function lc(){const[e,t]=(0,i.useState)(null);if((0,ya.l)(ma.UV.UPDATE_PIN_ERROR,e=>{t(e.data)}),void 0===e?.reason)return null;switch(e.reason){case ma.uL.TOO_MANY_PINS:return(0,C.jsx)(nc.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.title"),message:b.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ma.uL.NO_PIN_IN_FOLDER:return(0,C.jsx)(nc.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,Ut.k)(e),null}}const sc=ht.g1P(ht.YjP(),ht.YOg(ht.YjP())).catch({});var oc=r(99755),cc=r(70499);const dc=(0,i.createContext)(null),uc=({children:e})=>{const[t]=(0,i.useState)(()=>(0,oc.y)(()=>null));return(0,C.jsx)(dc.Provider,{value:t,children:e})},pc=()=>{const e=(0,i.useContext)(dc);if(!e)throw new Error("useHeaderStateStore must be used within a HeaderStateProvider");return e};function mc(e){const t=pc();return(0,cc.P)(t,e)}const yc=[],gc=()=>mc(e=>e?.selectedFilters)??yc;var xc=r(61615),bc=r(93856),hc=r(38989);const fc=ht.g1P(ht.YjP(),ht.Ikc({sortOrderId:ht.KCZ([ht.YjP(),ht.Vxk()]),sortDirection:ht.k5n(["forward","reverse"]).nullable()})).catch({}),Pc=ht.g1P(ht.YjP(),ht.YjP().optional()).catch({});function Cc(e){const t=(0,Je.f)(),r=t.getCapabilities().canReverseSort,a=(0,d.NC)(Yr.LMk),n=r&&a,[l,s]=function(){const e=(0,Je.f)().getCustomSortOrderId(),[t,r]=(0,He.x)("ylx-sort-order-and-direction-by-filter-id",fc),[a]=(0,He.x)("ylx-active-sort-order-by-filter-id",Pc);return(0,i.useEffect)(()=>{if(0===Object.keys(t).length&&Object.keys(a).length>0){const t={};for(const r of Object.keys(a)){const i=a[r];t[r]={sortOrderId:i,sortDirection:i!==e?"forward":null}}r(t)}},[t,a,r,e]),[t,r]}(),o=(e=>{const{openedFolderUri:t}=(0,i.useContext)(vt),r=(0,Je.f)().getContentsPrimaryFilterId(Mt.c.PLAYLIST);return`${t&&r?r:e}`})(e),{sortOrderId:c,sortDirection:u}=l[o]||{sortOrderId:void 0,sortDirection:null},p=(0,i.useCallback)(e=>{const r=t.getCustomSortOrderId()===e;let i=null;n&&(i=r?null:e!==c||r?"forward":"forward"===u?"reverse":"forward"),s({...l,[o]:{sortOrderId:e,sortDirection:i}})},[n,t,o,c,l,s,u]);return{selectedSortOrderId:c,setSelectedSortOrderId:p,sortDirection:n?u:null,canChangeSortDirection:n}}var vc=r(34280),Sc=r(23647),wc=r(59061),jc=r(11085),Tc=r(73634);var Ic=r(88505),Rc=r(69040);const Ac={[ma.Ir.ALBUMS]:Mt.c.ALBUM,[ma.Ir.ARTISTS]:Mt.c.ARTIST,[ma.Ir.AUTHORS]:Mt.c.AUTHOR,[ma.Ir.BOOKS]:Mt.c.AUDIOBOOK,[ma.Ir.EPISODES]:Mt.c.EPISODE,[ma.Ir.SHOWS]:Mt.c.SHOW,[ma.Ir.TRACKS]:Mt.c.TRACK,[ma.Ir.EVENTS]:Mt.c.CONCERT};function Dc(e,t,r){const a=(0,i.useCallback)(({data:{list:t}})=>{Oc(e,Ac[t])&&r()},[e,r]);(0,ya.l)(ma.UV.UPDATE,a),(0,ya.l)(ma.UV.UPDATE_PIN,r);const n=(0,i.useCallback)(()=>{Oc(e,Mt.c.PLAYLIST)&&r()},[e,r]);(0,ba.L)(n),function(e){((e,t,r,a,n)=>{const l=(0,Tc.x)(),s=(0,i.useRef)(r),o=(0,i.useRef)(),c=(0,i.useRef)();o.current=a,c.current=n,(0,i.useEffect)(()=>{const r={ident:e,isPrefix:t,onMessage:e=>s.current(e),onSubscribe:async e=>await(o.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}},[e,t,l])})("hm://collection/ylpin/",!0,e)}(r),function(e){const t=(0,jc.A)(),r=t.getEvents();(0,i.useEffect)(()=>r.addListener(wc.T.UPDATE,e),[t,r,e])}(r),function(e){const t=(0,Sc.l)().getEvents();(0,i.useEffect)(()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(vc.ar.ADDED,r),t.addListener(vc.ar.REMOVED,r),()=>{t.removeListener(vc.ar.ADDED,r),t.removeListener(vc.ar.REMOVED,r)}},[e,t])}(r),function(e,t){const r=(0,Je.f)(),a=(0,Ic.j)();(0,i.useEffect)(()=>e===r.getRecentsSortOrderId()?a.getEvents().addListener(Rc.m5.UPDATE,()=>{t()}):()=>{},[t,r,e,a])}(t,r)}function Oc(e,t){switch(e){case Mt.c.ALBUM:case Mt.c.ARTIST:case Mt.c.AUDIOBOOK:case Mt.c.SHOW:case Mt.c.AUTHOR:return e===t;case Mt.c.PLAYLIST:switch(t){case Mt.c.TRACK:case Mt.c.PLAYLIST:case Mt.c.EPISODE:return!0;default:return!1}default:return!0}}var Ec=r(38474),Lc=r(53126),Nc=r(59322),kc=r(88127),Fc=r(51632),Bc=r(88896);const Mc="BvQEHtP3ZQqa5AzpavFK";var Uc=r(96346);const Vc=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(Ir);return e?(0,C.jsx)(Uc.qb,{className:Mc,children:e}):null};var _c=r(88439),zc=r(55517);const Hc={items:[],totalLength:0},Kc=()=>{const{isAnonymous:e}=(0,s.d4)(e=>e.session),{filter:t}=(0,i.useContext)(E.g),[r,a]=(()=>{const e=pc();return[mc(e=>e),e.setState]})(),y=gc(),g=gc().map(e=>e.id),x=y.length>0,{refinersPickedByUserRef:b,selectedRefinerIds:h,resetRefinerIds:f,resetAndToggleRootRefiner:v,toggleRefinerId:S}=function(e){const{openedFolderUri:t=Pt,change:r,resetFolder:a}=(0,i.useContext)(vt),n=(0,i.useRef)(t),[l,s]=(0,He.x)("ylx-active-filter-ids",sc),o=(0,i.useRef)(!0),d=(0,c.U0)((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),o.current=i,s({...l,[t]:Array.from(a)})},[e,s,t]),u=(0,i.useCallback)(()=>s({...l,[t]:[]}),[t,l,s]),p=(0,i.useCallback)(e=>{t&&a(),s({...l,[Pt]:e?[e]:[]})},[t,a,l,s]);return(0,i.useLayoutEffect)(()=>{t!==n.current&&t!==Pt&&"PUSH"===r&&s({...l,[t]:l[n.current]??[]}),n.current=t},[r,t,l,s]),{refinersPickedByUserRef:o,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(g),{selectedSortOrderId:j,setSelectedSortOrderId:R,sortDirection:N,canChangeSortDirection:k}=Cc(h?.at(0)),F=(0,i.useRef)(null),B=(0,i.useRef)(null),M=(0,i.useRef)(null),{expandedFolders:U}=function(){const e=(0,i.useContext)(ze);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:V,resetFolder:_}=(0,i.useContext)(vt),z=(0,Lc.p)(),H=(0,Fc.P)(),G=(0,Je.f)(),W=!1,[X,Z]=(0,i.useState)(!1),{setLeftSidebarState:Q}=(0,se.ae)(),{isCollapsed:J,isExpanded:q,isFullscreen:te}=(0,pe.Q)();(e=>{const t=(0,Je.f)(),{isCollapsed:r}=(0,pe.Q)(),{toggleCollapseYLX:a}=(0,ol.u)(),{getFocusFunction:n}=Go(),l=(0,ko.W)(),s=(0,i.useCallback)(()=>{a()},[a]),o=(0,i.useCallback)(()=>{e(null),r&&a()},[r,e,a]),c=(0,i.useCallback)(()=>{if(e(null),r)a(),requestAnimationFrame(()=>{const e=n();e?.()});else{const e=n();e?.()}},[e,r,a,n]),d=(0,i.useCallback)(i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a()},[r,t,e,a]),u=d(Mt.c.PLAYLIST),p=d(Mt.c.SHOW),m=d(Mt.c.ARTIST),y=d(Mt.c.ALBUM),g=d(Mt.c.AUDIOBOOK);(0,hc.N)(l?(0,xc.p)(bc.r.TOGGLE_NPV_SIDEBAR):(0,xc.p)(bc.r.TOGGLE_LEFT_SIDEBAR),s),(0,hc.N)((0,xc.p)(bc.r.GO_TO_LIBRARY),o),(0,hc.N)((0,xc.p)(bc.r.GO_TO_PLAYLISTS),u),(0,hc.N)((0,xc.p)(bc.r.GO_TO_PODCASTS),p),(0,hc.N)((0,xc.p)(bc.r.GO_TO_ARTISTS),m),(0,hc.N)((0,xc.p)(bc.r.GO_TO_ALBUMS),y),(0,hc.N)((0,xc.p)(bc.r.GO_TO_AUDIOBOOKS),g),(0,hc.N)((0,xc.p)(bc.r.FOCUS_YLX_TEXT_FILTER),c)})(v);const{itemsView:re,isGridView:ie}=(0,Hn.t)(),{spec:ae,UBIFragment:ne}=(0,zc.$)(u.j,{data:{identifier:"yourlibraryx"}});let le;le=J?"collapsed":re===Hn.X.GRID_COMPACT?q?"expanded_compact_grid":"compact_grid":re===Hn.X.GRID_DEFAULT?q?"expanded_default_grid":"default_grid":re===Hn.X.LIST_COMPACT?q?"expanded_compact_list":"compact_list":q?"expanded_default_list":"default_list";const oe=(0,i.useMemo)(()=>ae.sidebarFactory({uri:V??Pt,identifier:le}),[ae,V,le]),ce=(0,_c.n)(oe.getAbsoluteLocation(),oe),de=(0,i.useMemo)(()=>oe.headerFactory(),[oe]),ue=(0,i.useMemo)(()=>de.filtersFactory(),[de]),me=(0,i.useMemo)(()=>oe.listFactory(),[oe]);!function(e=[],t=[],r){const a=(0,ic.n)(),n=(0,Je.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const s=(0,i.useRef)(t);s.current=t;const o=(0,i.useRef)(r);o.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(!n)return;const e=s.current.includes(n),t=l.current.includes(n),r=s.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),o.current(n,!1))},[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)(()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)},[n,t])}(r?.availableFilters?.map(e=>e.id),g,S);const{setDraggingIsInProgress:ye}=(0,i.useContext)(D.O_);(0,O.g)(F);const{dropTargetResult:{dropPosition:ge,className:xe,...be},unpinConfirmationDialog:fe}=(({sidebarSpec:e,openedFolderUri:t,isCollapsed:r,reorderAllowed:a})=>{const n=(0,i.useMemo)(()=>e.listFactory(),[e]),l=(0,Je.f)(),s=(0,qr.g)(),{setLeftSidebarState:o}=(0,se.ae)(),{handleDropOnFolder:c,unpinConfirmationDialog:d}=ua(n,t),u=$r(),p=(0,P.s)(),{dropOriginIsYLX:m,entityIsInFolder:y}=Jr(),g=t?dt:ct,x=y&&!a?[ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS]:[];return{dropTargetResult:(0,Qe.A)({allowedMimeTypesByDropPosition:{[I.Nz.ON]:m?x:g},onDrop:(0,i.useCallback)(async(e,r,i)=>{if(t)c(e,r,i);else{const{[ot.fl.TRACKS]:t=[],[ot.fl.LOCAL_TRACKS]:r=[],[ot.fl.ALBUMS]:a,[ot.fl.ARTISTS]:o,[ot.fl.AUTHORS]:c,[ot.fl.EPISODES]:d,[ot.fl.SHOWS]:y,[ot.fl.PLAYLISTS_V2]:g=[],[ot.fl.FOLDERS]:x,[ot.fl.AUDIOBOOKS]:b}=e,h=[...t,...r];h.length&&(l?.add({uris:h}),p.logInteraction(n.dragCreatePlaylist())),a?.length&&(l?.add({uris:a}),p.logInteraction(n.dragLike({itemToBeLiked:a.at(0)??""}))),o?.length&&(l?.add({uris:o}),p.logInteraction(n.dragLike({itemToBeLiked:o.at(0)??""}))),c?.length&&(l?.add({uris:c}),p.logInteraction(n.dragLike({itemToBeLiked:c.at(0)??""}))),d?.length&&(l?.add({uris:d}),p.logInteraction(n.dragLike({itemToBeLiked:d.at(0)??""}))),y?.length&&(l?.add({uris:y}),p.logInteraction(n.dragLike({itemToBeLiked:y.at(0)??""}))),b?.length&&(l?.add({uris:b}),p.logInteraction(n.dragLike({itemToBeLiked:b.at(0)??""}))),g.length&&(u(g.map((e,t)=>({uri:e,uid:i?.itemIds?.[t]})),{before:"start"}),m?p.logInteraction(n.dragSort()):p.logInteraction(n.dragLike({itemToBeLiked:g.at(0)??""}))),x?.length&&(s.moveFolder({uri:x[0]},{before:"start"}),p.logInteraction(n.dragSort()))}},[t,c,l,p,n,u,m,s]),onLongDragOver:(0,i.useCallback)(()=>{r&&o(se.ZS.DEFAULT)},[r,o])}),unpinConfirmationDialog:d}})({sidebarSpec:oe,openedFolderUri:V,isCollapsed:J,reorderAllowed:r?.reorderAllowed}),Pe=(0,d.NC)(Yr.lDH),ve=(0,i.useMemo)(()=>({filters:h,sortOrder:j,sortDirection:N,textFilter:t,includeLocalFiles:H,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:Pe,expandedFolders:U,filtersPickedByUser:b.current,folderUri:V}),[h,j,N,t,H,Pe,U,b,V]),Se=(0,i.useCallback)(async(e,t)=>{try{const r=await G.getContents({offset:e,limit:t,...ve}),{offset:i,limit:n,items:s,...o}=r;return Z(!1),{fetchedId:ve.folderUri,onCacheSuccess:()=>{a(e=>(0,l.j)(o,e)?e:o)},...r}}catch(e){return e instanceof w.c_?(f(),Hc):e instanceof w.IU?(R(void 0),Hc):e instanceof w.db?(_(),Hc):((0,Bc.UD)(e),Z(!0),Hc)}},[G,ve,f,R,_,a]),we=!1===r?.hasUnfilteredItems,je=r?.hasTextFilter&&0===r.totalLength&&""!==t,{setFilter:Te}=(0,i.useContext)(E.g);(0,i.useEffect)(()=>{je&&J&&Te("")},[je,J,Te]);const Ie=0===r?.totalLength&&x&&!r.passedFolderUri&&!r.hasTextFilter;(0,c.Ij)(()=>{const e=y.at(-1);Ie&&e&&S(e.id,!1)},[Ie,y]);const Re=G?.getCapabilities().canFetchAllItems,Ae=(0,i.useCallback)(e=>!J&&!ie||(!e||(e.type!==Mt.c.PLAYLIST&&e.type!==Mt.c.FOLDER||(void 0===e.folderDepth||0===e.folderDepth))),[J,ie]),{fetchedId:De,getItems:Oe,nrValidItems:Le,invalidateCache:Ne,hasItems:ke}=(0,kc.E)({nrItems:50,fetch:Se,limit:50,cacheAllOnInvalidation:Re,cacheAllLimit:5e4,itemIsValidPredicate:Ae}),Fe=(0,o.YQ)(Ne,200,{leading:!0,trailing:!0,maxWait:1e3});Dc(r?.primaryFilter,r?.selectedSortOrder.id,Fe);const Me=!V&&!De||V===De;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)(()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}},[e,t])})(F,De);const Ue=(0,i.useCallback)(()=>{Ne(),Z(!1)},[Ne]),{isScrolled:Ve}=(0,Nc.y)(F),Ke=!!r?.openedFolderName,Ye=(0,d.NC)(Yr._p8,{loadingValue:!1})&&Re,Ge=function(e,t,r){const{isGridView:a}=(0,Hn.t)(),n=no();return(0,i.useCallback)(async i=>{let l=n,s=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(s=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const o=r(0,5e4,{cachedOnly:!0}),c=o.find(e=>e?.name&&(0,ac.u)(i,e.name)),d=c?o.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/s)*l,l),c?.uri??null},[e,t,n,r,a])}(M,F,Oe),We=X?(0,C.jsx)(_e,{onClick:Ue}):null;let Xe;(0,i.useEffect)(()=>{X&&J&&Q(se.ZS.DEFAULT)},[X,J,Q]),(we&&!J||e)&&(Xe=Ke?(0,C.jsx)(Ce,{className:xe}):(0,C.jsx)(Ee,{className:xe}));const Ze=je?(0,C.jsx)(Be,{query:t,className:xe}):null,$e=!J&&!Xe&&(0,C.jsx)(Xo,{dropTargetClassName:xe,containerRef:B,headerSpec:de,primaryFilter:r?.primaryFilter,availableSortOrders:r?.availableSortOrders,selectedSortOrderId:j,setSelectedSortOrderId:R,sortDirection:N,canChangeSortDirection:k,openedFolderUri:V,isFullscreen:te}),et=X&&!r,tt=q||te,rt=!q&&!te,it=tt&&!ie&&!We&&!Xe,{cheetaraOnboardingIsActive:at,setCheetaraOnboardingIsActive:nt,cheetaraOnboardingDismissed:lt,setCheetaraOnboardingDismissed:st,handleCloseCheetaraOnboarding:ut}={cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}},pt=!J&&W,mt=(0,Ec.d)(),yt=(()=>{const e=Is(),t=Rs();return e||t})(),gt=(()=>{const e=Ds(),t=Os();return e||t})(),xt=yt||gt,ht=(()=>{const e=(0,$.V)(),t=(0,s.d4)(ee.JJ),r=(0,fs.vh)(),{isDesktop:i}=(0,Pa.V)(),a=(0,d.NC)(Yr.GIo),n=(0,d.NC)(Yr.Zze);return()=>{const l={action:"viewed",category:"your_library_desktop_in_view",country:t,label:i?"desktop":"dwp",os:(0,Cs.f)(),sp_t:(0,Ps.v8)("sp_t"),variant:JSON.stringify({inactiveVariant:a,newVariant:n})};e?r.send((0,hs.r)(l)):r.send((0,bs._)(l))}})();return(0,i.useEffect)(()=>{J||ht()},[ht,J]),(0,C.jsx)(Rr,{containerRef:B,findMatchingTypeaheadUid:Ge,isEnabled:Ye,children:(0,C.jsxs)(ne,{spec:ae,children:[at&&(0,C.jsx)(Y,{onClose:ut}),(0,C.jsx)(m.h,{menu:(0,C.jsx)(T,{folderUri:V}),children:(0,C.jsxs)("div",{className:n()(so,"YourLibraryX",{[qe]:ge===I.Nz.ON,[yo]:J,[bo]:at}),style:{"--placeholder-image":`url(${(0,p.bj)("images/ylx-row-placeholder.webp",{},{enableBrotliCDNExperiment:mt})})`,"--placeholder-artist-image":`url(${(0,p.bj)("images/ylx-artist-row-placeholder.webp",{},{enableBrotliCDNExperiment:mt})})`,"--placeholder-compact-image":`url(${(0,p.bj)("images/ylx-compact-row-placeholder.webp",{},{enableBrotliCDNExperiment:mt})})`},ref:e=>{B.current=e,ce(e)},...be,tabIndex:-1,onDragStart:()=>ye(!0),onDragEnd:()=>ye(!1),children:[fe,(0,C.jsxs)("div",{className:n()({[ho]:Ve&&!it}),children:[(0,C.jsx)(ps,{parentDropTargetClassName:xe,isLibraryCompletelyEmpty:we,folderUri:r?.passedFolderUri,folderName:r?.openedFolderName,spec:de.titleRowFactory(),openedFolderIsPlayable:r?.openedFolderIsPlayable}),!z&&(0,C.jsx)(ne,{spec:de,children:(0,C.jsx)(he,{})}),!J&&!et&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:n()(fo,oo),children:[false,(0,C.jsx)(bt,{selectedFilters:y,availableFilters:r?.availableFilters,toggleFilterId:S,resetFilterIds:f,className:n()({[xo]:!Me}),scrollNodeRef:F,spec:ue,inFolderView:!!r?.passedFolderUri},De),tt&&$e]}),xt&&(0,C.jsx)(Ws,{})]}),pt&&tt&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(K,{ylxIsExpanded:q,setCheetaraOnboardingIsActive:nt,onHide:()=>st(!0)})})]}),(0,C.jsx)(A.a,{className:po,scrollNodeRef:F,children:(0,C.jsxs)("div",{className:n()(mo,{[xo]:!X&&!Me,[yo]:J}),children:[pt&&rt&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(K,{ylxIsExpanded:q,setCheetaraOnboardingIsActive:nt,onHide:()=>st(!0)})}),rt&&(0,C.jsx)("div",{className:uo,children:$e}),We||Xe||Ze,(0,C.jsx)(L.k,{resolveItem:Hr,getItems:Oe,nrTracks:Le,defaultRangeSelectFromTop:!1,children:(0,C.jsx)("div",{ref:M,children:ie?(0,C.jsx)(Zn,{getItems:Oe,scrollNodeRef:F,primaryFilter:r?.primaryFilter,nrValidItems:Le,spec:me}):(0,C.jsx)(Co,{getItems:Oe,scrollNodeRef:F,primaryFilter:r?.primaryFilter,nrValidItems:Le,spec:me,isScrolled:Ve,isExpandedList:it,hasItems:ke})})})]})}),lc(),(0,C.jsx)(Vc,{})]})})]})})},Yc=()=>{const{isAnonymous:e}=(0,s.d4)(e=>e.session);(0,s.d4)(e=>e.ui.editRefinersModal);return(0,C.jsx)(R.s,{onError:e=>{(0,Bc.Jy)(e,"YourLibraryX")},Fallback:qo,children:(0,C.jsx)(uc,{children:(0,C.jsx)(E.s,{uri:w.gv,children:(0,C.jsx)(Ke,{children:(0,C.jsxs)(St,{children:[(0,C.jsx)(H,{children:(0,C.jsx)(Z,{children:(0,C.jsx)(Yo,{children:(0,C.jsxs)(V,{children:[(0,C.jsx)(Kc,{}),false,(0,C.jsx)(rc,{})]})})})}),(0,C.jsx)(le,{isAnonymous:e})]})})})})})}}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map