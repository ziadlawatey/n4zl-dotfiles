"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1972],{39839:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ut});var i=s(30758),n=s(97500),r=s.n(n),a=s(91198),o=s(33906),d=s(78717),c=s(54091),l=s(78439),u=s(32160);class v{constructor(){}static isStreamAd(e){return e.slot===u.kN.STREAM_SLOT_ID}static isPrerollAd(e){return e.slot===u.kN.PREROLL_SLOT_ID}}var m=s(54056),x=s(89204);const p={standardHeader:"f4PvXTgssqgZy1EHsGfG",fixedHeader:"Iqw2z8xCO2I7I3cyA7db",verticalVideoHeader:"K1g8ULrFzcTCDpMuOa0o"};var y=s(86070);const g=({item:e,variant:t="bodyMediumBold",semanticColor:s="textBase",experience:n="standard"})=>{const r=(0,m.mr)(),a=p[`${n}Header`],o=(0,i.useMemo)(()=>{return t=e,(s=r)&&v.isPrerollAd(s)?c.Ru.get("ad-formats.sponsored-playlist.preroll.reward-message",s.metadata.advertiser||l.Q.getAdvertiserName(t)||""):t.isPodcastAd?c.Ru.get("ad-formats.npv.header.podcast-context"):c.Ru.get("ad-formats.npv.header.music-context");var t,s},[e,r]);return(0,y.jsx)("div",{className:a,children:(0,y.jsx)(x.r,{title:o,children:(0,y.jsx)(d.E,{variant:t,semanticColor:s,children:o})},o)})};var h=s(62411),j=s(35274);const f="s4VUGwvALyZl4CxKMF1T",E=({url:e})=>(0,y.jsx)("div",{className:f,"data-testid":"canvas-image-container",children:(0,y.jsx)(j._,{testid:"cover-art-image",loading:"lazy",src:e})});var _=s(51240);const A=({item:e})=>{const{capturePlaybackError:t}=(0,i.useContext)(_.O),s=e.metadata?.["ad.canvas.url"];return(0,i.useEffect)(()=>{s||t()},[s,t]),s?(0,y.jsx)(E,{url:s}):null};var b=s(88308),T=s(5982),I=s(74123),C=s(96500),N=s(5232);const k="yV13sD5Vsidb_HVxkNHH";const M=({canvasUri:e,canvasUrl:t,children:s,fileId:n,playerContainerClass:a})=>{const{capturePlaybackError:o}=(0,i.useContext)(_.O),d=(0,i.useRef)(null),c=(0,i.useMemo)(()=>({disallowProtectedTracks:!1,enableWithoutEME:!0,videoPlayerContainer:`.${a}`,audioPlayerContainer:`.${a}`}),[a]),l=(0,I.d)({config:c}),{isPlaying:u}=(0,C.GK)();return(0,b.Ij)(()=>{const s=function(e,t,s){return(0,T.KT)({fileId:t,url:s,uri:e,mediaType:"video",format:{}.DEBUG_OVERTURE_WITHOUT_EME?"GENERIC_MEDIA":"MANIFEST_ID",options:{},logData:{playbackId:(0,N.E)()}})}(e,n,t);if(s)return l.playTracks([s],{paused:!u,muted:!0,loop:!0}),l.on(T.Pv.TRACK_LOADED,()=>{const e=document.getElementsByClassName(a),t=e[0]?.querySelector("video");t&&d.current&&(d.current.appendChild(t),t.autoplay=!0)}),l.on(T.Pv.ERROR,e=>{o()}),()=>{l.stop(),l.removeAllListeners()}},[n,e]),(0,y.jsx)("div",{"data-testid":"canvas-ad-player",className:r()(a,k),ref:d,children:s})};const S=({item:e})=>{const{capturePlaybackError:t}=(0,i.useContext)(_.O),s=e.metadata?.["ad.canvas.url"],n=e.metadata?.["ad.canvas.file_id"],r=(a=s,a?.split("/").pop());var a;const o=n||r;return(0,i.useEffect)(()=>{o||t()},[o,t]),o?(0,y.jsx)(M,{playerContainerClass:"canvasAdPlayerNpv",canvasUri:e.uri,fileId:o,canvasUrl:s}):null};var V=s(56444),P=s(89548),q=s(73599),w=s(76826);const Q="ctSKTqGj6JoFmO_VuL2M",O="MUTe3XSZ7Ayb8wKHicWU",R="KKHeyGm26Z6RoEJGYo7j",U=e=>{const{item:t,canvasAdType:s}=e;return"video"===s?(0,y.jsx)(S,{item:t}):(0,y.jsx)(A,{item:t})},D=e=>{const t=(0,h.wA)(),{url:s}=(0,V.b)(e.item),n=(0,i.useCallback)(()=>{t((0,q.q5)("video"===e.canvasAdType?P.c.VIDEO_PLAYER:P.c.CANVAS_IMAGE,P.V.AD_NPV))},[e.canvasAdType,t]);return(0,y.jsxs)("div",{className:Q,"data-testid":"canvas-ad-container",children:[(0,y.jsx)("div",{className:O}),(0,y.jsx)("div",{className:R,children:s?(0,y.jsx)(w.N,{to:s,onClick:n,children:(0,y.jsx)(U,{...e})}):(0,y.jsx)(U,{...e})})]})};var F=s(82001),L=s(515),B=s(84515);const H="WFs67DmpAsWWu54ydl13",z=({item:e})=>(0,y.jsxs)("div",{className:H,children:[(0,y.jsx)(B.T,{item:e}),(0,y.jsx)(L.t,{item:e})]});var G=s(23119),W=s(35433),Y=s(13655),K=s(70613);const $="FFEhMKjDXSU3FThGMISH",Z=({item:e})=>{const t=(0,a.NC)(K.lDj);return(0,y.jsxs)("div",{className:$,children:[(0,y.jsx)(Y.f,{item:e,surface:"AD_NPV"}),(0,y.jsx)(W.L,{item:e,surface:"AD_NPV"}),t&&(0,y.jsx)(G.U,{item:e})]})};var J=s(363),X=s(59867);function ee(){const e=(0,X.vh)();return{linkUbiEvent:function({adId:t,ubiEventId:s,product:i,format:n,requestId:r}){e.send((0,J.A)({ad_id:t,ad_request_id:r,ad_format:n,content_type:i,ubi_event_id:s}))}}}var te=s(74690),se=s(48564),ie=s(69365),ne=s(19717),re=s(22285),ae=s(60257);const oe=({item:e,spec:t,contextTrack:s})=>{const i=(0,h.wA)(),n=(0,ae.s)(),{linkUbiEvent:r}=ee(),a=`${l.Q.getAdFormat(s)}_${l.Q.getAdProduct(s)}`;return(0,y.jsx)(se.D,{role:"menuitem",testid:"about-this-ad-context-menu-item",leadingIcon:(0,y.jsx)(ie.p,{size:"small"}),"aria-label":c.Ru.get("ad-formats.dsa.aboutThisAd"),onClick:()=>{i((0,re.Oc)()),i((0,ne.b0)(e));const o=t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:a}).triggerDsaFactory().hitUiNavigate({destination:"/context_menu"}),{interactionId:d}=n.logInteraction(o);r({adId:e.adId,requestId:e.requestId,ubiEventId:d,format:l.Q.getAdFormat(s),product:l.Q.getAdProduct(s)})},divider:"before",children:c.Ru.get("ad-formats.dsa.aboutThisAd")})},de=(0,i.memo)(function(e){return(0,y.jsx)(oe,{...e})}),ce=(0,i.memo)(function({item:e,spec:t,contextTrack:s}){const n=(0,ae.s)(),{linkUbiEvent:r}=ee(),a=`${l.Q.getAdFormat(s)}_${l.Q.getAdProduct(s)}`;return(0,i.useEffect)(()=>{(()=>{const i=n.logImpression(t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:a}).impression());r({adId:e.adId,requestId:e.requestId,format:l.Q.getAdFormat(s),product:l.Q.getAdProduct(s),ubiEventId:i})})()},[]),(0,y.jsxs)(te.W,{children:[(0,y.jsx)(se.D,{role:"menuitem",testid:"ad-title-context-menu-item",divider:"after",disabled:!0,children:e.metadata.advertiser}),(0,y.jsx)(de,{item:e,spec:t,contextTrack:s})]})}),le="X_UmjLg7O0NBYPDFX1ZA",ue="GTfvmcnjXqYCdf_pNUrj",ve=({item:e,spec:t})=>{const s=(0,m.mr)(),i=(0,ae.s)(),{linkUbiEvent:n}=ee(),r=`${l.Q.getAdFormat(e)}_${l.Q.getAdProduct(e)}`;return(0,y.jsxs)("div",{className:le,children:[(0,y.jsx)(Z,{item:e}),(0,y.jsxs)("div",{className:ue,children:[(0,y.jsx)(z,{item:e}),s?.isDsaEligible&&(0,y.jsx)("div",{"data-testid":"PanelHeader_AdContextMenuButton",children:(0,y.jsx)(F.U,{menu:(0,y.jsx)(ce,{item:s,contextTrack:e,spec:t}),onClick:()=>{if(s){const a=t.infoContainerFactory().contextMenuButtonFactory({identifier:s.metadata?.lineitem_id,reason:r}).hitUiNavigate({destination:"/context_menu"}),{interactionId:o}=i.logInteraction(a);n({adId:s.adId,requestId:s.requestId,format:l.Q.getAdFormat(e),product:l.Q.getAdProduct(e),ubiEventId:o})}}})})]})]})};var me=s(88287);const xe=({item:e,context:t,index:s})=>t?(0,y.jsx)(me.h,{context:t,item:e,index:s}):null,pe="bGwbsgfipm4roNxs5XHR",ye=({item:e,spec:t,canvasAdType:s})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(D,{item:e,canvasAdType:s}),(0,y.jsx)("div",{className:pe,children:(0,y.jsx)(ve,{item:e,spec:t})})]}),ge=({item:e,spec:t,context:s,index:i})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(xe,{item:e,context:s,index:i}),(0,y.jsx)(ve,{item:e,spec:t})]}),he=e=>{const{item:t}=e,{state:s}=(0,i.useContext)(_.O),n=(0,a.NC)(K.U5l,{loadingValue:!1}),r=t?.metadata?.["ad.canvas.type"];return n&&("image"===r||"video"===r)&&s!==_.j.Errored?(0,y.jsx)(ye,{...e,canvasAdType:r}):(0,y.jsx)(ge,{...e})};var je=s(70796),fe=s(21765),Ee=s(79898),_e=s(21903),Ae=s(18827);const be="oba3DRwYih37VBdjRk1T",Te="xrgeEjVH2xszLbnfC_fR",Ie=(0,i.lazy)(()=>Promise.resolve().then(s.bind(s,6583))),Ce=({item:e,backgroundColor:t,className:s})=>{const n=(0,h.wA)(),{url:a,buttonMessage:o,tagline:d}=(0,V.b)(e),l=o||c.Ru.get("ad-formats.learnMore");if(!a)return null;const u=r()(be,s),v=(0,Ae.H)(a);return(0,y.jsx)(w.N,{to:v,"data-testid":"ad-companion-card",className:u,onClick:e=>{const t=e.target.closest("button");n((0,q.q5)(t?P.c.CTA_BUTTON:P.c.COMPANION_CARD,P.V.AD_NPV))},children:(0,y.jsx)(je.v,{style:{backgroundColor:t},className:Te,onClickHint:c.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,fe.po)("looser"),id:e.uri,title:(0,y.jsx)(Ee.d,{variant:"bodySmallBold","data-testid":"ad-companion-card-tagline",children:d||l}),trailing:(0,y.jsx)(i.Suspense,{fallback:(0,y.jsx)(_e.V,{}),children:d?(0,y.jsx)(Ie,{text:l}):(0,y.jsx)(_e.V,{semanticColor:"textBase"})})})})};var Ne=s(6063),ke=s(37899);const Me="iAAzbIR3Y5w5Q_dzSiL1",Se="R3Mbqn4LQR6MmumH4bRz",Ve=({isPodcastAd:e,noticeType:t,primaryText:s})=>{(0,i.useEffect)(()=>{const e=document.getElementById("connected-box");if(e){const t=e.offsetWidth;e.style.height=`${t}px`}},[]);const n=e?c.Ru.get("ad-formats.survey-podcast-content"):c.Ru.get("ad-formats.survey-music-content");return(0,y.jsx)("div",{className:Se,id:"connected-box",children:(0,y.jsxs)(y.Fragment,{children:["success"===t?(0,y.jsx)(Ne.T,{size:"xxxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-check"}):(0,y.jsx)(ke.b,{size:"xxxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-exclamation"}),(0,y.jsx)(d.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:Me,semanticColor:"textBase",children:s}),(0,y.jsx)(d.E,{children:n})]})})},Pe=({isPodcastAd:e,logger:t})=>((0,i.useEffect)(()=>{t.logSurveyAdEventWithoutAd({event:"event_survey_on_connect",eventReason:"secondary_device"})},[]),(0,y.jsx)(Ve,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("ad-formats.survey-connected-note")})),qe=({isPodcastAd:e,validationResult:t,logger:s})=>((0,i.useEffect)(()=>{s.logAdEvent({event:"errored",reason:"survey_malformed"}),s.logAdError({errorType:"survey_malformed",errorMessage:t.errorMessage})},[]),(0,y.jsx)(Ve,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("error-dialog.generic.header")}));var we=s(281),Qe=s(18545),Oe=s(49950),Re=s(11823),Ue=s(40765);const De=()=>{const{logger:e}=(0,m.yU)();return e},Fe="S1JUyKvTtNPsduGj2b5B",Le="EwbRMxkTv13SgrrcxtcJ",Be=({data:e,selected:t,handleOptionClick:s,className:i,ad:n})=>{const a=De(),o=(i,r)=>{const o={id:i.id,"aria-label":`Select ${i.primaryText}`};return e.surveyQuestionType===Qe.xV.MULTI_SELECT?(0,y.jsx)(Oe.c,{...o,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:r}),a.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:r,ad:n})}}):(0,y.jsx)(Re.M,{...o,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:r}),a.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:"event_option_selected",position:r,ad:n})}})};return(0,y.jsx)(Ue.g,{labelFor:e.id,withFieldset:!0,className:r()(Fe,i),children:(0,y.jsx)("div",{children:e.surveyQuestionOptions.map((i,r)=>(0,y.jsx)(je.v,{"data-testid":"survey-option-ad",className:Le,id:i.id,variant:"elevated",title:i.primaryText,leading:o(i,r),isSelected:t.has(i.id),onClick:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:r}),a.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:r,ad:n})}},i.id))})})};var He=s(73136);const ze="PY7AzzJ_r_g7xFQG7wFy",Ge="sSEZD0Oe3Zy7pTXyFW1g",We="PyftcjG16sHkSSZpHVqy",Ye="DaWPHy6mErgXYtO0EkZC",Ke=({selected:e,submitted:t,handleClick:s})=>(0,y.jsx)("div",{className:r()(ze,Ge,{[We]:t}),children:(0,y.jsx)(He.$,{disabled:0===e.size,size:"medium",fullWidth:!0,colorSet:"invertedLight",label:"Submit","data-testid":"survey-submit-button",onClick:s,id:Ye,children:c.Ru.get("ad-formats.survey-submit-button")})}),$e="PcALCxvGbCxCDnoc9PGK",Ze="bvwD9vL2Cefris3929Qx",Je="GjT48ZYG7bsVMxFpRRBx",Xe=({showThankYou:e,ad:t,questionId:s})=>{const n=De();return(0,i.useEffect)(()=>{e&&n.logSurveyAdEventWithAd({questionId:s,event:"event_thank_you_displayed",ad:t})},[s,e]),(0,y.jsxs)("div",{className:r()(Ze,{[Je]:e}),"data-testid":"survey-ad-thank-you",children:[(0,y.jsx)(Ne.T,{size:"xxxlarge",spacing:"small"}),(0,y.jsx)(d.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:$e,"data-testid":"survey-ad-thank-you",children:c.Ru.get("ad-formats.survey-thankyou")})]})};function et(){const[e,t]=(0,i.useState)(new Map),[s,n]=(0,i.useState)(!1);return{selected:e,handleOptionClick:({optionId:s,isExclusive:i,questionType:n,position:r})=>{let a=new Map(e);n===Qe.xV.MULTI_SELECT?a=function({optionId:e,selected:t,isExclusive:s,position:i}){let n;t.has(e)?(n=new Map(t),n.delete(e)):n=function({optionId:e,selected:t,isExclusive:s,position:i}){const n=new Map(t);s&&n.clear();return t.forEach(({isExclusive:e},t)=>{e&&n.delete(t)}),n.set(e,{isExclusive:s,position:i}),n}({optionId:e,isExclusive:s,selected:t,position:i});return n}({optionId:s,isExclusive:i,selected:e,position:r}):n===Qe.xV.SINGLE_SELECT&&(a=function({optionId:e,selected:t,position:s}){let i=new Map(t);t.has(e)||(i=function({optionId:e,selected:t,position:s}){const i=new Map(t);return i.clear(),i.set(e,{isExclusive:!0,position:s}),i}({optionId:e,selected:t,position:s}));return i}({optionId:s,selected:e,position:r})),t(a)},setSurveyIsSubmitted:n,submitted:s}}class tt{constructor(e){this.isValid=e.isValid,this.errorMessage=e.errorMessage}}var st=s(38374);const it=({ad:e,logger:t,questionId:s,selected:i})=>{const n=[];i.forEach((e,t)=>{const s=(({id:e,selectedOption:t})=>st.$y.create({selectedSurveyQuestionOptionId:e,optionPositionIndex:t.position.toString()}))({id:t,selectedOption:e});n.push(s)});const r=st.Tl.create({surveyQuestionId:s,selectedSurveyOptions:n}),a=st.BN.create({surveyQuestionAnswers:[r]}),o=st.A7.create({survey:a});t.logAdEvent({event:"survey_submitted",payload:o}),t.logAdEvent({event:"ended"}),t.logSurveyAdEventWithAd({ad:e,event:"event_survey_submitted",questionId:s,response:JSON.stringify(o)})};const nt=function(e,t=2e3){const s=(0,m.dY)();(0,i.useEffect)(()=>{if(!e)return;const i=setTimeout(()=>s.skipToNext(),t);return()=>clearTimeout(i)},[t,e,s])},rt="UZ87uJPMQ0mUZ4NKTaKb",at="zArFPzmi0d5HbqcZ5eVh",ot="QI3dvpUynaDYdx89wrlz",dt="TwzmnLBLlknRlYNcsPeZ",ct="UMrVpj7BwS6aQN514oXs",lt="QvOi98iRaHbtHoEqO8st",ut="ptnxT5OH7jvklfBoT1qs",vt=({question:e,ad:t})=>{const s=De(),n=(0,m.dY)();(0,i.useEffect)(()=>{s.logSurveyAdEventWithAd({questionId:e.id,event:"event_companion_viewed",ad:t})},[e.id]);const{selected:a,handleOptionClick:o,submitted:c,setSurveyIsSubmitted:l}=et();(0,i.useEffect)(()=>{e.surveyQuestionType in Qe.xV||(s.logAdEvent({event:"errored",reason:"survey_malformed"}),n.skipToNext())}),nt(c,2e3);return(0,y.jsxs)(we.a,{className:r()(rt,dt),padding:"looser",children:[(0,y.jsxs)("div",{className:r()(at,{[lt]:c}),children:[(0,y.jsxs)("div",{className:ut,children:[(0,y.jsx)(d.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",children:e.primaryText}),(0,y.jsx)(d.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:e.secondaryText})]}),(0,y.jsx)(Be,{className:r()(ot,ct),ad:t,selected:a,handleOptionClick:o,data:e})]}),(0,y.jsx)(Ke,{handleClick:()=>{l(!0),it({ad:t,selected:a,logger:s,questionId:e.id})},submitted:c,selected:a}),(0,y.jsx)(Xe,{showThankYou:c,ad:t,questionId:e.id})]})},mt=({survey:e,ad:t})=>{const s=e?.surveyQuestions[0];return s?(0,y.jsx)(vt,{question:s,ad:t}):null},xt=e=>{return t=e,t.survey?.surveyQuestions?.length?(e=>!e.survey?.surveyTransparencyContent||0===Object.keys(e.survey.surveyTransparencyContent).length)(e)?new tt({isValid:!1,errorMessage:"survey.survey_transparency_content : missing"}):new tt({isValid:!0}):new tt({isValid:!1,errorMessage:"survey.survey_questions : missing"});var t},pt=e=>{const t=e?.[0];if(s=t,!s?.id||s.id.length<1)return new tt({isValid:!1,errorMessage:"survey.survey_questions[0].id : missing"});var s;if((e=>(0,Qe.BM)(e?.surveyQuestionType)<=0)(t))return new tt({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_type : invalid type"});if((e=>!e?.primaryText||e?.primaryText?.length<1)(t))return new tt({isValid:!1,errorMessage:"survey.survey_questions[0].primary_text : missing"});if((e=>!e?.surveyQuestionOptions?.length)(t))return new tt({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_options : missing"});const i=t?.surveyQuestionOptions.find(e=>(e=>!e.id||e?.id?.length<1)(e));if(i)return new tt({isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(i)}].id : missing`});const n=t?.surveyQuestionOptions.find(e=>(e=>!e.primaryText||e.primaryText.length<1)(e));return new tt(n?{isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(n)}].primary_text : missing`}:{isValid:!0})},yt=e=>{if(!e)return new tt({isValid:!1,errorMessage:"no ad"});const t=(e=>e?.companions.find(e=>e.survey))(e);if(!t)return new tt({isValid:!1,errorMessage:"companions.survey : missing"});const s=xt(t);if(s&&!s.isValid)return s;const i=t?.survey?.surveyQuestions,n=pt(i);if(n&&!n.isValid)return n;const r=t?.survey?.surveyTransparencyContent,a=(o=r)&&(e=>!e?.transparencyLabel||e?.transparencyLabel.length<1)(o)?new tt({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_label : missing"}):o&&(e=>!e?.transparencyUrl||e?.transparencyUrl.length<1)(o)?new tt({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_url : missing"}):new tt({isValid:!0});var o;return a||new tt({isValid:!0})},gt=(0,i.memo)(function({displayText:e,url:t,ad:s,questionId:n}){const r=De();return(0,i.useEffect)(()=>{r.logSurveyAdEventWithAd({questionId:n,event:"event_context_menu",ad:s})},[n]),(0,y.jsx)(te.W,{children:(0,y.jsx)(se.D,{role:"menuitem",leadingIcon:(0,y.jsx)(ie.p,{size:"small"}),"aria-label":`${e}, link`,to:t,children:e})})});var ht=s(42729);const jt="vyhGTYEtXqbrhQLqm3CW",ft="lsujb8GJbkELE15fkHcA",Et=({item:e})=>{const t=(0,m.mr)(),s=yt(t),n=De(),r=(0,i.useMemo)(()=>t?.companions.find(e=>e.survey)?.survey,[t]),a=r?.surveyTransparencyContent,{currentDevice:o}=(0,ht.l)(),{isLocal:d}=o;return(0,y.jsxs)("div",{"data-testid":"survey-ad",className:ft,children:[d?t&&s.isValid?(0,y.jsx)(mt,{survey:r,ad:t}):(0,y.jsx)(qe,{isPodcastAd:e?.isPodcastAd,validationResult:s,logger:n}):(0,y.jsx)(Pe,{isPodcastAd:e?.isPodcastAd,logger:n}),(0,y.jsxs)("div",{className:jt,children:[(0,y.jsx)(Z,{item:e}),a&&t&&(0,y.jsx)(F.U,{"aria-label":"More options, button",menu:(0,y.jsx)(gt,{questionId:r?.surveyQuestions[0]?.id,ad:t,displayText:a.transparencyLabel,url:a.transparencyUrl})})]})]})},_t=e=>{const t=(0,h.d4)(e=>e.ads?.vto);return"audio"===e?.mediaType||!t?.isMinimized};var At=s(91934);const bt="zBDDiQsGXw_9c5J2pveF",Tt="EYrcwzThf7gtdAa_5kWx",It="oPQmlLlMUDklleYs86La",Ct="i7WDSGSHp1hZ6Y7Etj21",Nt="vHyGNnRzl_eJ_rmA0CQh",kt="Tc1SHazScuGECEaBB0Ik",Mt=({item:e,context:t,index:s,spec:i})=>{const n=_t(e),a="portrait"===e.videoOrientation,o=a&&!n?bt:"",d=r()(Nt,{[kt]:a}),c=r()({[Ct]:a});return(0,y.jsxs)("div",{className:d,children:[n?(0,y.jsx)(xe,{item:e,context:t,index:s}):(0,y.jsxs)("div",{className:It,children:[a&&(0,y.jsx)("div",{className:Tt}),(0,y.jsx)("div",{className:c,children:(0,y.jsx)(At.F,{})})]}),(0,y.jsx)("div",{className:o,children:(0,y.jsx)(ve,{item:e,spec:i})})]})};var St=s(66917),Vt=s(87308);var Pt=s(44451);const qt="EPAfBvsHUaH61gu8Is1h",wt="y7WicSUc7rBKF9gGOKiA",Qt="DHYqncWuJsraPUB1atpm",Ot="PSBYTWkpisDOWC8FVHij",Rt="JCgz3kkHeUPKAOi16Baw",Ut=({item:e,context:t,index:s})=>{const n=_t(e),{state:d}=(0,i.useContext)(_.O),c=(0,a.NC)(K.U5l),{spec:u,UBIFragment:v}=(0,Pt.D)(o.m,{}),m=(e=>{const{logoImage:t}=(0,V.b)(e),s=e?.images[0]?.url;return l.Q.isVideoAd(e)?t||s:s||t})(e),x=((e=null,t=0,s=St.CpN)=>{const[n,r]=(0,i.useState)(s),a=(0,Vt.z)(e,s,"colorDark");return(0,i.useEffect)(()=>{setTimeout(()=>{r(a)},t)},[t,a]),n})(m,600),p=(0,i.useMemo)(()=>l.Q.isVerticalVideoAd(e)&&!n,[e,n]),h=(0,i.useMemo)(()=>p?"verticalVideo":c&&l.Q.isCanvasAd(e)&&d!==_.j.Errored?"fixed":"standard",[d,c,e,p]),j=(e=>l.Q.isSurveyAd(e)?"survey":l.Q.isVideoAd(e)?"video":"audio")(e),f="survey"===j;return(0,y.jsx)("div",{className:r()(qt,{[wt]:f}),children:(0,y.jsx)(v,{spec:u,children:(0,y.jsxs)("div",{className:Qt,children:[(0,y.jsxs)("div",{className:r()(Ot,{[wt]:f}),children:[(0,y.jsx)(g,{item:e,experience:h}),(()=>{switch(j){case"video":return(0,y.jsx)(Mt,{item:e,spec:u,index:s,context:t});case"survey":return(0,y.jsx)(Et,{item:e});default:return(0,y.jsx)(he,{item:e,context:t,index:s,spec:u})}})()]}),f?null:(0,y.jsx)(Ce,{item:e,className:Rt,backgroundColor:x})]})})})}},82001:(e,t,s)=>{s.d(t,{U:()=>o});var i=s(54091),n=s(22141),r=s(64300),a=s(86070);const o=({menu:e,onClick:t,"aria-label":s})=>(0,a.jsx)(r.b,{menu:e,children:(0,a.jsx)(n.e,{size:n.M.xs,label:i.Ru.get("more"),ariaLabel:s,onClick:t})})}}]);
//# sourceMappingURL=1972.js.map