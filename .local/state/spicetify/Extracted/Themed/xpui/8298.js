"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8298],{8298:(e,a,t)=>{t.d(a,{DsaModal:()=>ne});var i=t(30758),s=t(62411),n=t(78717),d=t(78066),r=t(30920);function o(e){return{name:"AdDSAEvent",environments:["browser","device","desktop"],data:e}}var l=t(54091),c=t(19717),m=t(48521),u=t(35274),g=t(34457),h=t(62887);const v="yxK5NaxiXTaDozXpQr4j",E="wKDC0YqSVRMGyy7UgB2G";var x=t(86070);const f=({advertiser:e,legalEntityName:a})=>{const{item:t}=(0,m.L)()||{item:null},i=t&&(0,g.N)(t)?t?.images:void 0,s=(0,h.h)(i);return(0,x.jsxs)("div",{className:v,children:[s&&(0,x.jsx)(u._,{className:E,src:s,loading:"lazy"}),(0,x.jsx)(n.E,{variant:"bodyMediumBold","aria-label":e,children:e}),a&&(0,x.jsx)(n.E,{variant:"bodySmall",semanticColor:"textSubdued","aria-label":a,children:a})]})};var N=t(96683),T=t(28487);function b(e){var a,t,s,n,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M6.5.003a.75.75 0 0 0-.75.75V12.25c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V.753a.75.75 0 0 0-.75-.75zM7.25 11.5V1.503h1.5V11.5zM0 16h16v-1.5H0zm0-8.25A.75.75 0 0 1 .75 7h3a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75zm1.5.75v3H3v-3zm10.75-4.504a.75.75 0 0 0-.75.75v7.5c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-7.5a.75.75 0 0 0-.75-.75zm.75 7.5v-6h1.5v6z'/>"},{size:24,svgContent:"<path d='M9.25 3a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1zm3.5 1h-1.5v12h1.5zM22 22H2v-2h20zM3 10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm1 6v-4h1.5v4zm12.5-9a1 1 0 0 1 1-1H21a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1zm3.5 9V8h-1.5v8z'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return i.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((n=e.title,d=e.titleId,n?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(n,"</title>"):"")).concat((t=e.desc,s=e.descId,t?"<desc ".concat(s?'id="'.concat(s,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var y=t(492);const _="_0YNDaBu5KAuRX_H57KmV",j="hLklVR_AsSHtgJ9Wdt1n",A=({title:e,showTitle:a,children:t})=>(0,x.jsxs)("section",{className:_,children:[a&&(0,x.jsx)(n.E,{className:j,variant:"bodyMediumBold",as:"h3","aria-label":e,children:e}),t]});var R=t(60329);const p="ZiW83LVxhUNv3QvSmLBN",I=({text:e,icon:a})=>(0,x.jsxs)(R.K,{className:p,condensed:!0,children:[a,(0,x.jsx)(n.E,{variant:"bodyMedium","aria-label":e,as:"h4",children:e})]});t(14248),t(91906),t(33214),t(59800);let z=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.AGE=1]="AGE",e[e.GEO=2]="GEO",e[e.GENDER=3]="GENDER",e[e.INTEREST=4]="INTEREST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});const S={fromJSON:e=>({targetingTypes:globalThis.Array.isArray(e?.targetingTypes)?e.targetingTypes.map(e=>function(e){switch(e){case 0:case"UNKNOWN":return z.UNKNOWN;case 1:case"AGE":return z.AGE;case 2:case"GEO":return z.GEO;case 3:case"GENDER":return z.GENDER;case 4:case"INTEREST":return z.INTEREST;default:return z.UNRECOGNIZED}}(e)):[],legalEntityName:C(e.legalEntityName)?globalThis.String(e.legalEntityName):"",showTailoredAdsSection:C(e.showTailoredAdsSection)?Boolean(e.showTailoredAdsSection):void 0}),create:e=>S.fromPartial(e??{}),fromPartial(e){const a={targetingTypes:[],legalEntityName:"",showTailoredAdsSection:void 0};return a.targetingTypes=e.targetingTypes?.map(e=>e)||[],a.legalEntityName=e.legalEntityName??"",a.showTailoredAdsSection=e.showTailoredAdsSection??void 0,a}};const w={fromJSON:e=>({lineitemId:C(e.lineitemId)?globalThis.String(e.lineitemId):"",adId:C(e.adId)?globalThis.String(e.adId):""}),create:e=>w.fromPartial(e??{}),fromPartial(e){const a={lineitemId:"",adId:""};return a.lineitemId=e.lineitemId??"",a.adId=e.adId??"",a}};new Uint8Array([38,34,36,47,97,100,45,100,115,97,45,109,101,116,97,100,97,116,97,45,108,111,111,107,117,112,47,100,115,97,45,109,101,116,97,100,97,116,97]),new Uint8Array([43,34,41,47,97,100,45,100,115,97,45,109,101,116,97,100,97,116,97,45,108,111,111,107,117,112,47,109,111,99,107,47,100,115,97,45,109,101,116,97,100,97,116,97]);function C(e){return null!=e}const M="yi_uBVz8Rj5qO6z0LPIX",G="MwBs4zZsfccM9KIhz5hK",O="wPoLRqgK4TVFFY3wSKJg",B="uFD7wgQqhZTTg5QE_zbQ",V="BFbUKvZozThzgHdP7vab",D="mRWX62fWuQSvi16F_2tM",k="FJbHcYrOBdbeoIxleA7y",H="lfFfpaedv2uR62JtA0wW",L="THXAI8GuQ9nsvvc_mX0w";const U=({activeTargetingTypes:e})=>{const a=[z.GEO,z.INTEREST].some(a=>e.includes(a));if(!a)return null;const t=a&&e.some(e=>e===z.AGE||e===z.GENDER);return(0,x.jsx)(A,{title:l.Ru.get("ad-formats.dsa.modal.otherInfo"),showTitle:t,children:(0,x.jsx)(y.b,{className:L,condensedAll:!0,children:e.map(e=>{const a=function(e){switch(e){case z.GEO:return{icon:(0,x.jsx)(N.t,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.location")};case z.INTEREST:return{icon:(0,x.jsx)(b,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.interests")};default:return null}}(e);return a?(0,x.jsx)(I,{icon:a.icon,text:a.text},e):null})})})};function K(e){var a,t,s,n,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M9.5 2.4c0 .74-.302 1.207-.75 1.434v1.49h4.5c.966 0 1.75.784 1.75 1.75v1.917c0 .74-.284 1.415-.75 1.92v3.839c0 .69-.56 1.25-1.25 1.25H3c-.69 0-1.25-.56-1.25-1.25v-3.839A2.82 2.82 0 0 1 1 8.991V7.074c0-.966.784-1.75 1.75-1.75h4.5v-1.49C6.802 3.607 6.5 3.14 6.5 2.4c0-.937.809-1.723 1.284-2.184A9 9 0 0 0 8 0q.087.09.216.216C8.691.677 9.5 1.463 9.5 2.4m-6.25 9.364V14.5h9.5v-2.736q-.283.06-.583.06h-.094a2.73 2.73 0 0 1-1.975-.84 2.82 2.82 0 0 1-2.098.93c-.832 0-1.58-.359-2.098-.93-.499.518-1.2.84-1.975.84h-.094q-.3 0-.583-.06m6.833-3.43a.75.75 0 0 1 .75.75c0 .685.556 1.24 1.24 1.24h.094c.736 0 1.333-.597 1.333-1.333V7.074a.25.25 0 0 0-.25-.25H2.75a.25.25 0 0 0-.25.25v1.917c0 .736.597 1.333 1.333 1.333h.094a1.24 1.24 0 0 0 1.24-1.24.75.75 0 0 1 .75-.75h.003a.75.75 0 0 1 .75.75 1.33 1.33 0 1 0 2.66 0 .75.75 0 0 1 .75-.75z'/>"},{size:24,svgContent:"<path d='M13 5.793c.598-.284 1-.868 1-1.793 0-1.17-1.079-2.154-1.711-2.73Q12.116 1.114 12 1c-.076.076-.175.166-.289.27C11.08 1.846 10 2.83 10 4c0 .925.402 1.509 1 1.793V7.9H5a3 3 0 0 0-2.993 2.8H2v2.4a4 4 0 0 0 1 2.646V21a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5.254c.622-.705 1-1.632 1-2.646v-2.4h-.007A3 3 0 0 0 19 7.9h-6zM5 9.9h14a1 1 0 0 1 1 1v2.2a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0v-2.2a1 1 0 0 1 1-1m14 7.074V21H5v-4.026a4.01 4.01 0 0 0 4-1.228 4 4 0 0 0 3 1.354 4 4 0 0 0 3-1.354 3.99 3.99 0 0 0 4 1.228'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return i.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((n=e.title,d=e.titleId,n?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(n,"</title>"):"")).concat((t=e.desc,s=e.descId,t?"<desc ".concat(s?'id="'.concat(s,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var q=t(91843),F=t(21765),W=t(42805),Z=t(59867),P=t(46150),Q=t(4533),J=t(85969);const X=({activeTargetingTypes:e,item:a})=>{const t=(0,Z.vh)(),{openURLWithSessionTransfer:i}=(0,J.L)();return[z.AGE,z.GENDER].some(a=>e.includes(a))?(0,x.jsxs)(A,{title:l.Ru.get("ad-formats.dsa.modal.profileInfo"),showTitle:!0,children:[(0,x.jsx)(y.b,{className:L,condensedAll:!0,style:{marginBlockEnd:(0,F.po)("base")},children:e.map(e=>{const a=function(e){switch(e){case z.AGE:return{icon:(0,x.jsx)(K,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.age")};case z.GENDER:return{icon:(0,x.jsx)(q.v,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.gender")};default:return null}}(e);return a?(0,x.jsx)(I,{icon:a.icon,text:a.text},e):null})}),(0,x.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.adRelevancyAction"),children:l.Ru.get("ad-formats.dsa.modal.adRelevancyAction")}),(0,x.jsxs)(W.Y,{component:"button","aria-label":"Edit your Spotify profile, link",className:D,semanticColor:"textBrightAccent",onClick:()=>{i(Q.vE),t.send(o({ad_id:a.adId,lineitem_id:a.metadata?.lineitem_id,creative_id:a.metadata?.creative_id,slot:a.slot,event:"event_clicked",reason:"edit_profile",surface:"ad_dsa_view"}))},standalone:!0,children:[(0,x.jsx)(n.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.editProfile")}),(0,x.jsx)(P.p,{semanticColor:"textBrightAccent"})]})]}):null},Y=({item:e})=>{const a=(0,Z.vh)(),{openURLWithSessionTransfer:t}=(0,J.L)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("hr",{className:k}),(0,x.jsx)(n.E,{className:H,variant:"titleSmall","aria-label":l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds"),as:"h2",children:l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds")}),(0,x.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.tailoredAds"),children:l.Ru.get("ad-formats.dsa.modal.tailoredAds")}),(0,x.jsxs)(W.Y,{component:"button","aria-label":"Visit your privacy settings, link",className:D,semanticColor:"textBrightAccent",onClick:()=>{t(`${Q.k$}/#tailored-ads`),a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_clicked",lineitem_id:e.metadata?.lineitem_id,reason:"change_preferences",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))},standalone:!0,children:[(0,x.jsx)(n.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.privacySetting")}),(0,x.jsx)(P.p,{semanticColor:"textBrightAccent"})]})]})};var $=t(1812),ee=t(6704),ae=t(64621);const te=(e,a)=>[ae.a.USE_DSA_METADATA,a,e],ie=(e,a)=>()=>(0,ee.ZY)(w.fromPartial({lineitemId:a,adId:e}));var se=t(37528);const ne=({item:e})=>{const a=(0,Z.vh)(),t=(0,s.wA)(),{isOpen:m}=(0,s.d4)(e=>e.ui.dsaDialog),{data:u,isLoading:g}=((e,a)=>{const{data:t,isLoading:i,isError:s}=(0,$.I)({queryKey:te(e,a),queryFn:ie(e,a),gcTime:6e4,staleTime:6e4,enabled:!!a&&!!e});return{data:t?S.fromJSON(t):null,isLoading:i,isError:s}})(e.adId,e.metadata?.lineitem_id);return(0,i.useEffect)(()=>{a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_viewed",lineitem_id:e.metadata?.lineitem_id,reason:"ad_dsa_view",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))},[]),(0,x.jsxs)(se.A,{className:M,isOpen:m,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,contentLabel:l.Ru.get("ad-formats.dsa.aboutThisAd"),children:[(0,x.jsx)("div",{className:O,children:(0,x.jsx)(n.E,{"aria-label":l.Ru.get("ad-formats.dsa.aboutThisAd"),variant:"titleMedium",as:"h1",children:l.Ru.get("ad-formats.dsa.aboutThisAd")})}),(0,x.jsx)("hr",{className:k}),(0,x.jsx)("div",{className:G,children:g?(0,x.jsx)("div",{className:B,"data-testid":"loading-indicator",children:(0,x.jsx)(d.U,{size:"large"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f,{advertiser:e.metadata.advertiser,legalEntityName:u?.legalEntityName}),u?.targetingTypes.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.E,{className:H,variant:"titleSmall",as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation"),children:l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation")}),(0,x.jsx)(X,{item:e,activeTargetingTypes:u?.targetingTypes}),(0,x.jsx)(U,{item:e,activeTargetingTypes:u?.targetingTypes})]}):(0,x.jsx)(n.E,{className:H,as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.targeting.unknown"),tabIndex:0,children:l.Ru.get("ad-formats.dsa.modal.targeting.unknown")}),u?.showTailoredAdsSection&&(0,x.jsx)(Y,{item:e})]})}),(0,x.jsx)("button",{"aria-label":l.Ru.get("close_button_action"),className:V,onClick:()=>{t((0,c.ft)())},children:(0,x.jsx)(r.M,{size:"medium",semanticColor:"textBase"})})]})}}}]);
//# sourceMappingURL=8298.js.map