"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3],{19572:(e,r,t)=>{t.d(r,{x:()=>Ue});const a="playback-bar",n="playback-bar__progress-time-elapsed",s="dtcoKMhH91DadLEKjLYQ",o="rPP9FNmW6h26O07v5oyw",l="GXsSVpgcy07kLerWwAAX",i="playback-progressbar-container";var c=t(30758),u=t(97500),d=t.n(u),g=t(78717),p=t(91198),m=t(54091),h=t(21906),f=t(86925);const b=f.TL,v=[{maxWidth:300,maxMarkers:15},{maxWidth:350,maxMarkers:25},{maxWidth:f.nW,maxMarkers:35},{maxWidth:500,maxMarkers:45}];function k(e,r,t){if(!e||0===e.length)return;let a,n=0,s=e.length-1;for(;n<=s;){const o=Math.floor((n+s)/2),l=e[o];if(!l){n=o+1;continue}const i=l.seekStart,c=1e3*t,u=e[o+1]?.seekStart,d=l.seekStop??u??c;if(r>=i&&r<d){a=l;break}r<i?s=o-1:n=o+1}return a}function y(e,r,t){if(!e||0===e.length||!t)return 0;const a=k(e,r,t);return a?e.indexOf(a):0}function x(e,r,t){return k(e,r,t)?.title}var w=function(e){return e.Played="played",e.Current="current",e.Unplayed="unplayed",e}(w||{});const P="#404040",S="var(--is-active-fg-color)",C= getComputedStyle(document.body).getPropertyValue("--spice-subtext").trim(),M=(e,r,t)=>r>0?{start:e,width:r,backgroundColor:t}:void 0,A=(e,r,t,a,n,s=!1)=>{const o=e[r],l=e[r+1];if(!o)return{singlePart:void 0};const i=((e,r,t,a)=>{const n=e?.seekStart??0,s=r?.seekStart??a;return{startPercent:0===t?0:n/a*100,endPercent:s/a*100,startMs:n,endMs:s}})(o,l,r,t),c=((e,r)=>r>=e.endMs?w.Played:r>=e.startMs?w.Current:w.Unplayed)(i,n);return c===w.Played?(e=>({singlePart:M(e.startPercent,e.endPercent-e.startPercent,S)}))(i):((e,r,t,a,n,s=!1)=>{const o=Math.max(e.startPercent,Math.min(e.endPercent,r));if(n){const r=t/a*100;return o<=r?{singlePart:M(e.startPercent,r-e.startPercent,S)}:{playedPart:M(e.startPercent,r-e.startPercent,S),previewPart:M(r,o-r,C),unplayedPart:M(o,e.endPercent-o,P)}}return s?{singlePart:M(e.startPercent,e.endPercent-e.startPercent,C)}:{previewPart:M(e.startPercent,o-e.startPercent,C),unplayedPart:M(o,e.endPercent-o,P)}})(i,a,n,t,c===w.Current,s)},E=(e,r,t,a,n,s=!1)=>e&&null!==t?A(e,t,n,r,a,s):null;var T=t(57213),j=t(29293),R=t(86070);const L=({chapters:e,keyboardActiveMarker:r,currentPlaybackMs:t})=>{const{max:a,hoverPosition:n}=(0,T.Z)(),s=null!==n?100*n:0,{chapterSegment:o}=((e,r,t,a,n)=>{const s=(0,c.useMemo)(()=>n<=0?null:E(e||[],t.percent||0,t.index,a,n,!0),[e,t.index,t.percent,a,n]),o=(0,c.useMemo)(()=>{if(!e||0===e.length||n<=0)return null;const t=((e,r,t)=>{let a=0;for(let n=0;n<e.length;n++){const s=e[n];if(s){if(r<s.seekStart/t*100)break;a=n}}return a})(e,r,n);return E(e,r,t,a,n,!1)},[e,r,a,n]);return{chapterSegment:s||o}})(e,s,r,t,a);return!o||null===n&&null===r.index?null:(0,R.jsxs)(R.Fragment,{children:[o.singlePart&&(0,R.jsx)("div",{className:j.A.chapterHoverOverlay,style:{left:`${o.singlePart.start}%`,width:`${o.singlePart.width}%`,backgroundColor:o.singlePart.backgroundColor}}),o.playedPart&&(0,R.jsx)("div",{className:j.A.chapterHoverOverlay,style:{left:`${o.playedPart.start}%`,width:`${o.playedPart.width}%`,backgroundColor:o.playedPart.backgroundColor}}),o.previewPart&&(0,R.jsx)("div",{className:j.A.chapterHoverOverlay,style:{left:`${o.previewPart.start}%`,width:`${o.previewPart.width}%`,backgroundColor:o.previewPart.backgroundColor}}),o.unplayedPart&&(0,R.jsx)("div",{className:j.A.chapterHoverOverlay,style:{left:`${o.unplayedPart.start}%`,width:`${o.unplayedPart.width}%`,backgroundColor:o.unplayedPart.backgroundColor}})]})};var O=t(39647),H=t(51085),N=t(43038),F=t(44451),_=t(62887),D=t(32552);const K="jn05UHvaY6z9D7fHPoTg",$="EEmfuix_fwkqJmorzE4W",U="mua5bm32Vcnozya2aFMf",W="rtv9coiHys3TlvRa2DL2",B=({chapters:e,onChapterClick:r,keyboardActiveMarker:t={index:null,percent:null,marker:null,markerEl:null},setKeyboardActiveMarker:a,setShowKeyboardLabel:n})=>{const{max:s}=(0,T.Z)(),o=(0,N.z)(),l=(0,c.useRef)([]),{logger:i,spec:u}=(0,F.D)(O.U,{}),g=(0,c.useCallback)(e=>{if(o.seekTo(e),i.logInteraction(u.chapterRowFactory().hitSeekToTime({msToSeekTo:e})),o.getState()?.isPaused){o.resume({featureIdentifier:"episode-npv"});const e=o.getState()?.context.uri;e&&i.logInteraction(u.chapterRowFactory().hitResume({itemToBeResumed:e}))}},[i,o,u]);return 0===e.length||s<=0?null:(0,R.jsx)("div",{className:K,role:"toolbar","aria-label":m.Ru.get("playback-control.a11.episode-chapters.jump-to"),children:e.map((o,i)=>{const c=(0,D.q)(o.seekStart/s*100,0,100),u=m.Ru.get("playback-control.a11y.episode-chapters.marker-start",o.title,(0,_.f)(o.seekStart)),p=o.shouldShowMarker??!0,h=t.index===i||null===t.index&&0===i?0:-1;return(0,R.jsx)("div",{ref:e=>l.current[i]=e,className:d()($,{[U]:0===o.seekStart,[W]:!p}),style:{left:`${c}%`},"aria-label":u,tabIndex:h,role:"button",onKeyDown:t=>((t,n)=>{if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault();const r=n+1;if(r<e.length&&(l.current[r]?.focus(),a)){const t=e[r]??null,n=t?(0,D.q)(t.seekStart/s*100,0,100):null;a({index:r,percent:n,marker:t,markerEl:l.current[r]??null})}}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault();const r=n-1;if(r>=0&&(l.current[r]?.focus(),a)){const t=e[r]??null,n=t?(0,D.q)(t.seekStart/s*100,0,100):null;a({index:r,percent:n,marker:t,markerEl:l.current[r]??null})}}else if("Enter"===t.key||" "===t.key){const t=e[n];if(t&&(g(t.seekStart),r&&r(t),a)){const e=(0,D.q)(t.seekStart/s*100,0,100);a({index:n,percent:e,marker:t,markerEl:l.current[n]??null})}}})(t,i),onClick:()=>{g(o.seekStart),r&&r(o)},onFocus:()=>{a&&a({index:i,percent:c,marker:o,markerEl:l.current[i]??null})},onBlur:()=>{setTimeout(()=>{const e=document.activeElement;!l.current.some(r=>r===e)&&n&&n(!1)},10)},"data-testid":H.sN.CHAPTER_MARKER},i)})})};var I=t(72344);const V=({position:e,chapters:r,max:t,timeFormatter:a})=>{const n=e||0,s=n*t,o=100*n,l=(0,c.useMemo)(()=>r.length>0&&null!==e?x(r,s,t):void 0,[r,s,t,e]),i=(0,c.useMemo)(()=>l?`${a(s)} • ${l}`:a(s),[a,s,l]);return{chapterTitle:l,formattedLabel:i,positionPercent:o,timeMs:s}},z="qC4GlxGtxeTM1gGsftbJ",q="kIkZGfk8iFT4eLFtbCiy",X=({isVisible:e,label:r,positionPercent:t,containerRef:a,overrideLeftPx:n,testId:s=H.sN.PROGRESS_LABEL})=>{const{elementRef:o,style:l}=(({containerRef:e,positionPercent:r})=>{const t=(0,c.useRef)(null),[a,n]=(0,c.useState)({left:"var(--hover-bar-transform)",transform:"translateX(-50%)"});return(0,c.useLayoutEffect)(()=>{const a=e.current,s=t.current;if(!a||!s)return void n({left:"var(--hover-bar-transform)",transform:"translateX(-50%)"});const o=a.getBoundingClientRect(),l=s.getBoundingClientRect(),i=o.width,c=l.width,u=r/100*i-c/2;n(u<0?{left:0,transform:"none"}:u+c>i?{left:i-c,transform:"none"}:{left:"var(--hover-bar-transform)",transform:"translateX(-50%)"})},[e,r]),{elementRef:t,style:a}})({containerRef:a,positionPercent:t});if(!e)return null;const i=void 0===n?{left:l.left,transform:l.transform}:{left:`${n}px`,transform:"translateX(-50%)"};return(0,R.jsx)("div",{ref:o,className:d()(z,{[q]:e}),style:i,"data-testid":s,children:r})},Z=({showValueAsTimeOverHandle:e=!1,timeFormatter:r=_.f,chapters:t=[],onFocusHandler:a,mouseActiveMarker:n={index:null,percent:null,marker:null,markerEl:null},keyboardActiveMarker:s={index:null,percent:null,marker:null,markerEl:null},setKeyboardActiveMarker:o,showKeyboardLabel:l=!1,setShowKeyboardLabel:i})=>{const{value:u,max:d,isDragging:g,hoverPosition:p,containerRef:m}=(0,T.Z)(),h=(0,c.useCallback)(()=>{if(t.length>0&&o){const e=y(t,u,d),r=t[e]||t[0];if(r){const t=d>0?(0,D.q)(r.seekStart/d*100,0,100):0;o({index:e>=0?e:0,percent:t,marker:r,markerEl:null}),i&&i(!0)}}},[t,u,d,o,i]);(0,c.useEffect)(()=>{a&&a(h)},[h,a]),(0,c.useEffect)(()=>{if(!l||!i)return;let e=!1;const r=()=>{l&&!e&&(e=!0,setTimeout(()=>{e&&(i&&i(!1),o&&o({index:null,percent:null,marker:null,markerEl:null}))},100))};return document.addEventListener("mousemove",r,{passive:!0}),()=>{document.removeEventListener("mousemove",r)}},[l,i,o]);const f=V({position:p,chapters:t,max:d,timeFormatter:r}),b=V({position:d>0?u/d:0,chapters:t,max:d,timeFormatter:r});let v,k=null,x=0;const w=e=>{if(e&&m.current){const r=m.current.getBoundingClientRect(),t=e.getBoundingClientRect();return t.left-r.left+t.width/2}};return n.marker&&null!==n.percent?(k=`${r(n.marker.seekStart)} • ${n.marker.title}`,x=n.percent,v=w(n.markerEl),l&&i&&i(!1)):s.marker&&null!==s.percent&&l?(k=`${r(s.marker.seekStart)} • ${s.marker.title}`,x=s.percent,v=w(s.markerEl)):e&&!g&&null!==p&&(k=f.formattedLabel,x=f.positionPercent,v=void 0,l&&i&&i(!1)),e?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(X,{isVisible:e&&g,label:b.formattedLabel,positionPercent:b.positionPercent,containerRef:m}),(0,R.jsx)(X,{isVisible:!g&&null!==k,label:k||"",positionPercent:x,containerRef:m,overrideLeftPx:v})]}):null},G=({chapters:e,onChapterClick:r,showValueAsTimeOverHandle:t=!0,value:a,max:n,step:s,labelText:o,"aria-valuetext":l,isInteractive:i=!0,forceActiveStyles:u=!1,direction:d="horizontal",enableAnimation:g,updateFrequency:p,offFrequencyUpdate:h,className:f,"data-testid":b,...v})=>{const k=(0,c.useMemo)(()=>e,[e]),w=(0,c.useRef)(null),P=(0,c.useCallback)(()=>{w.current&&w.current()},[]),S=(0,c.useCallback)(e=>{w.current=e},[]),{mouseActiveMarker:C,keyboardActiveMarker:M,setKeyboardActiveMarker:A,showKeyboardLabel:E,setShowKeyboardLabel:T,chapterAriaLabel:j}=(({chapters:e,currentPlaybackMs:r,totalDurationMs:t,hoverMs:a})=>{const[n,s]=(0,c.useState)({index:null,percent:null,marker:null,markerEl:null}),[o,l]=(0,c.useState)({index:null,percent:null,marker:null,markerEl:null}),[i,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l({index:null,percent:null,marker:null,markerEl:null})},[e,t]);const d=(0,c.useMemo)(()=>{if(e.length&&0!==a)return x(e,a,t)},[e,a,t]),g=(0,c.useMemo)(()=>e.length?y(e,r,t):-1,[e,r,t]),p=(0,c.useMemo)(()=>{const a=x(e,r,t);return a?`${m.Ru.get("web-player.queue-history.item-type.chapter")} ${a}`:void 0},[e,r,t]);return{mouseActiveMarker:n,setMouseActiveMarker:s,keyboardActiveMarker:o,setKeyboardActiveMarker:l,showKeyboardLabel:i,setShowKeyboardLabel:u,hoveredChapterTitle:d,currentChapterIndex:g,chapterAriaLabel:p}})({chapters:k,currentPlaybackMs:a,totalDurationMs:n,hoverMs:0});return(0,R.jsxs)(I.m,{value:a,max:n,step:s,labelText:o,"aria-valuetext":l,isInteractive:i,forceActiveStyles:u,direction:d,enableAnimation:g,updateFrequency:p,offFrequencyUpdate:h,additionalAccessibilityContext:j,showValueAsTimeOverHandle:t,className:f,"data-testid":b,onFocus:P,...v,children:[(0,R.jsx)(L,{chapters:k,keyboardActiveMarker:M,currentPlaybackMs:a}),(0,R.jsx)(B,{chapters:k,onChapterClick:r,keyboardActiveMarker:M,setKeyboardActiveMarker:A,setShowKeyboardLabel:T}),(0,R.jsx)(Z,{showValueAsTimeOverHandle:t,chapters:k,onFocusHandler:S,mouseActiveMarker:C,keyboardActiveMarker:M,setKeyboardActiveMarker:A,showKeyboardLabel:E,setShowKeyboardLabel:T})]})};var Q=t(79799);const Y="GsIUPTxZP7wLM3y4X8M0",J="rLwjKyidKyAcv9pNzvsf",ee=({imageUrlHandle:e,imageTransformOverride:r})=>{const{animatableClass:t,setHasCustomHandle:a}=(0,T.Z)(),{hasCustomHandle:n,imageUrlHandle:s,imageTransformOverride:o}=(({imageUrlHandle:e,imageTransformOverride:r})=>(0,c.useMemo)(()=>({hasCustomHandle:Boolean(e),imageUrlHandle:e,imageTransformOverride:r}),[e,r]))({imageUrlHandle:e,imageTransformOverride:r});(0,c.useEffect)(()=>(a(n),()=>{a(!1)}),[n,a]);return(0,c.useMemo)(()=>n&&s?(0,R.jsx)("div",{className:d()(Y,t),children:(0,R.jsx)("img",{alt:"",className:J,src:s,style:(0,Q.Z)(o),"data-testid":H.sN.EASTER_EGG_HANDLE})}):null,[n,s,o,t])},re="dEtYHi6jeCBsArFO_I_H",te="we6LXgVCP_dBzVwuiihG",ae=({saberConfig:e})=>{const{isDragging:r,hoverPosition:t,addFeatureClass:a,removeFeatureClass:n}=(0,T.Z)(),s=null!==e,o=s&&(r||null!==t);return(0,c.useEffect)(()=>(s?a(j.A.saberEnabled):n(j.A.saberEnabled),()=>{n(j.A.saberEnabled)}),[s,a,n]),s?(0,R.jsx)("div",{className:d()(re,{[te]:o}),"data-testid":H.sN.PROGRESS_BAR_SABER_OVERLAY}):null};var ne=t(8143),se=t(84826);var oe=t(87533);const le=({isPlayingStrangerThings:e})=>{const{percentage:r,isDragging:t,trackRef:a}=(0,T.Z)(),{isStrangerThingsActive:n}=(({isPlayingStrangerThings:e=!1})=>(0,c.useMemo)(()=>({isStrangerThingsActive:e&&!(0,se.n)()}),[e]))({isPlayingStrangerThings:e}),s=(0,c.useMemo)(()=>()=>r,[r]);return n&&a.current?(0,ne.createPortal)((0,R.jsx)(oe.V,{getPercentage:s,progressBar:a,isPlayingStrangerThings:e,isDragging:t}),document.body):null},ie=({saberConfig:e,easterEggConfig:r,isPlayingStrangerThings:t=!1})=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ae,{saberConfig:e,easterEggConfig:r}),(0,R.jsx)(ee,{imageUrlHandle:r?.imageUrlHandle,imageTransformOverride:r?.imageTransformOverride}),(0,R.jsx)(le,{isPlayingStrangerThings:t})]}),ce=({saberConfig:e,easterEggConfig:r,isPlayingStrangerThings:t,customCSSProperties:a,showValueAsTimeOverHandle:n,...s})=>{const o=(0,c.useRef)(null),l={...a,...{...e??{},...r?.bgColor?{"--fg-color":r.bgColor,"--is-active-fg-color":r.bgColor}:{}}};return(0,R.jsxs)(I.m,{...s,customCSSProperties:l,showValueAsTimeOverHandle:n,ref:o,children:[(0,R.jsx)(ie,{saberConfig:e,easterEggConfig:r,isPlayingStrangerThings:t}),(0,R.jsx)(Z,{showValueAsTimeOverHandle:n})]})};var ue=t(70613);const de=e=>{if(!(0,p.NC)(ue.Quc))return(0,R.jsx)(h.z2,{...e});if(function(e){return"episodeChapterMarkers"in e&&Array.isArray(e.episodeChapterMarkers)&&e.episodeChapterMarkers.length>0}(e)){if(function(e,r){if(r<=0||void 0===e||e<b)return!1;for(const t of v)if(e<=t.maxWidth)return r<=t.maxMarkers;return!0}(e.containerWidth,e.episodeChapterMarkers.length)){const{saberConfig:r,easterEggConfig:t,isPlayingStrangerThings:a,containerWidth:n,episodeChapterMarkers:s,...o}=e;return(0,R.jsx)(G,{...o,chapters:s,showValueAsTimeOverHandle:!0})}}return(0,R.jsx)(ce,{...e})};var ge=t(98014),pe=t(29369),me=t(59861);const he="main-playbackBarRemainingTime-container",fe=ge.zMY().catch(!1),be=({position:e,duration:r,isPreview:t,semanticColor:a="textSubdued",isFullscreenMode:n=!1,className:s})=>{const[o,l]=(0,me.x)(pe.fC,fe),i=(0,c.useCallback)(()=>{t||l(!o)},[o,l,t]);return(0,R.jsx)(g.E,{as:"div","data-testid":"playback-duration","data-test-position":e,variant:n?"bodyMedium":"marginal",className:d()(he,s),onClick:i,semanticColor:a,children:o?`-${(0,_.f)(r-e)}`:(0,_.f)(r)})};var ve=t(64932),ke=t(50253),ye=t(79421);const xe="XJskPb5M1kLnHWAW8e0V",we="AY8rOKrou7sgGEhyzrFz";let Pe=[];function Se(){return 0===Pe.length&&(Pe=[{name:"Anakin",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"7px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_anakin.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Luke",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(135, 220, 90)","--blur-glow-color":"#1ed760","--blur-radius":"16px","--spread-radius":"4px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_luke.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Vader",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"10px","--core-color":"white","--edge-glow-color":"rgb(229, 17, 21)","--blur-glow-color":"#cd1a2b","--blur-radius":"20px","--spread-radius":"14px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_vader.png")})`,"--saber-hilt-overlap":"6px"}},{name:"Rey",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"8px","--core-color":"white","--edge-glow-color":"rgb(249, 164, 11)","--blur-glow-color":"rgb(253, 175, 33)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_rey.png")})`,"--saber-hilt-overlap":"3px"}},{name:"Leia",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_leia.png")})`,"--saber-hilt-overlap":"2px"}},{name:"Mace",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(90, 22, 167)","--blur-glow-color":"rgb(172, 57, 193)","--blur-radius":"20px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_mace.png")})`,"--saber-hilt-overlap":"1px"}},{name:"Ahsoka",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"6px","--core-color":"white","--edge-glow-color":"rgb(255,255,255)","--blur-glow-color":"rgb(255,255,255)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,ve.bj)("images/sw_saber_ahsoka1.png")})`,"--saber-hilt-overlap":"-9px","--saber-hilt-width":"100px","--saber-hilt-height":"36px"}}]),Pe}const Ce=["spotify:playlist:37i9dQZF1DXaUaRhCgtpCo","spotify:playlist:69BOXIItwwyxTgdz6flzvU","spotify:playlist:37i9dQZF1DWUgUvAPAFxdh"],Me=["official_star_wars","kirbysayshi","hansencc"],Ae=/Star Wars/i,Ee="THX1138";function Te({onChange:e}){const r=function(){const[e,r]=(0,c.useState)([]),[t,a]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{const n=n=>{for(e.push(n.key);e.length>7;)e.shift();e.join("")===Ee&&a(!t),r([...e])};return window.addEventListener("keypress",n),()=>{window.removeEventListener("keypress",n)}},[e,t]),(0,ke.o)(e=>{const r=e?.context.uri??"",t=e?.context?.metadata?.context_owner??"",a=e?.item??void 0;return!!Ce.includes(r)||!!Me.includes(t)||!!(0,ye.v)(a)&&(Ae.test(a.name)||Ae.test(a.album.name))})||t}(),{next:t,config:a}=function(e){const[r,t]=(0,c.useState)(0),a=Se();return{next:()=>{t((r+1)%a.length)},config:e?a[r]:null}}(r),n=(0,c.useRef)(e);return n.current=e,(0,c.useEffect)(()=>{n.current(a?.vars??null)},[a]),a?(0,R.jsx)("div",{className:xe,children:(0,R.jsx)("button",{"data-testid":"saber-hilt-button","aria-label":m.Ru.get("playback-control.a11y.lightsaber-hilt-button",a?.name),className:we,style:a.vars,onClick:t})}):null}var je=t(49612),Re=t(51525),Le=t(89307);function Oe(e){return"TalkDisplaySegment"===e.__typename&&null!==e.seekStart}var He=t(78065),Ne=t(87789);const Fe=["spotify:playlist:37i9dQZF1DXc3KPAjGyPdm"];var _e=t(49348),De=t(85059),Ke=t(35062);const $e=1e3,Ue=({isPreview:e,isFullscreenMode:r=!1,timerPlacement:t="inline",onChange:u,onDragStart:h,onDragEnd:f})=>{const b=(0,p.NC)(ue.O14),[v,k]=(0,c.useState)(null),[y,x]=(0,c.useState)(0),w=(0,N.z)(),P=(0,ke.o)(e=>e,(e,r)=>e?.duration===r?.duration&&e?.hasContext===r?.hasContext&&e?.restrictions?.canSeek===r?.restrictions?.canSeek),{seekOffsetMs:S}=(0,Ke.p)(),C=P?.duration??0,M=P?.hasContext??!1,A=P?.restrictions?.canSeek??!1,[E,T,j]=(0,De.S9)($e),[L,O]=(0,c.useState)(null),H=null!==L?L:E,F=null!==L?L:E+(b&&!j?$e:0),D=e=>{if(!A)return;O(e*C),h?.()},K=(H>0||C>0)&&"true"!==P?.item?.metadata?.is_narration,$=(0,_.f)(K?H:NaN),U=(0,_.f)(K?C:NaN),W=function(){const e=(0,Ne.S)()!==He.z.CLOSED,r=(0,ke.o)(e=>{const r=e?.context.uri??"";return Fe.includes(r)});return!e&&r}(),B=(0,je.lt)(),I="above"===t?o:s,V=((e,r)=>{const t=(0,p.NC)(ue.Quc),a=e&&e.type===Le.c.EPISODE&&"string"==typeof e.uri?e.uri:"",{chapters:n=[]}=(0,Re.i)({uri:a,pageSize:50});return(0,c.useMemo)(()=>{if(t&&e&&e.type===Le.c.EPISODE&&"string"==typeof e.uri&&null!=r&&!(r<=0)&&n.length&&50!==n.length)return function(e,r){return r<=0?e.map(e=>({...e,shouldShowMarker:!0})):e.map((t,a)=>{const n=e[a+1],s=t.seekStart,o=((n?.seekStart??r)-s)/r*100>=2;return{...t,shouldShowMarker:o}})}(n.filter(Oe).filter(e=>!!e.title&&e.title.trim().length>0).map(e=>({title:e.title,seekStart:e.seekStart.milliseconds,seekStop:e.seekStop?e.seekStop.milliseconds:void 0})),r)},[t,e,n,r])})(P?.item,P?.duration),z=(0,c.useRef)(null);return(0,_e.w)({refOrElement:z,onResize:({width:e})=>{x(e)},observeOnly:"width"}),(0,R.jsxs)("div",{className:d()(a,I),ref:z,children:["indicatorOnly"!==t&&(0,R.jsx)(g.E,{"data-testid":"playback-position",as:"div",variant:r?"bodyMedium":"marginal",className:n,semanticColor:r?"textBase":"textSubdued",children:$}),(0,R.jsxs)("div",{className:i,children:[M?(0,R.jsx)(Te,{onChange:e=>{k(e)}}):null,(0,R.jsx)(de,{labelText:m.Ru.get("playback-control.a11y.seek-slider-button"),value:F,updateFrequency:$e,offFrequencyUpdate:j,max:C,step:S,containerWidth:y,"aria-valuetext":m.Ru.get("download.progress-global",$,U),isInteractive:M&&K,onDragStart:D,onDragMove:D,onDragEnd:(e,{wasDraggedBeforeReleased:r})=>{if(O(null),f?.(),!A)return;const t=e*C;T(t),w.seekTo(t);const a=r?"drag":"hit";u?.(t,a)},saberConfig:v,isPlayingStrangerThings:W,"data-testid":"playback-progressbar",enableAnimation:b,showValueAsTimeOverHandle:"indicatorOnly"===t,easterEggConfig:B,episodeChapterMarkers:V})]}),"indicatorOnly"!==t&&(0,R.jsx)(be,{position:H,duration:K?C:NaN,isPreview:e,semanticColor:r?"textBase":"textSubdued",isFullscreenMode:r,className:l})]})}},87425:(e,r,t)=>{t.d(r,{D:()=>l});var a=t(30758),n=t(4306);var s=t(41749),o=t(91645);const l=({item:e,onClick:r})=>{const{capabilities:{isEnabled:t},isOpen:l,close:i,open:c,canOpen:u}=(0,s.H)(),{spec:d,logger:g}=(0,o.r)(n.h9,{data:{identifier:n.gw.DESKTOP}}),p=(0,a.useCallback)(()=>{t&&(l?(i(),e?.uri&&g.logInteraction(d.pipButtonFactory({uri:e.uri}).hitUiHide())):(c(),e?.uri&&(({spec:e,logger:r,uri:t})=>{const a=window.documentPictureInPicture;if(!a)return;const n=s=>{setTimeout(()=>{const a=s.window?.innerWidth,n=s.window?.innerHeight;if(!a||!n)return;const o=e.pipButtonFactory({uri:t}).hitUiOpenWindow({widthPx:a,heightPx:n});r.logInteraction(o)},100),a.removeEventListener("enter",n)};a.addEventListener("enter",n)})({spec:d,logger:g,uri:e.uri})),r?.(!l,e?.uri))},[i,t,l,e?.uri,g,r,c,d]);return{showButton:u,isActive:l,onClick:p}}}}]);
//# sourceMappingURL=3.js.map