"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1206],{10986:(e,t,a)=>{a.d(t,{k:()=>s});var r=a(63669);const s=()=>(0,r.d)().getJamJoinInfo()},12536:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(97500),s=a.n(r),n=a(80041);const i="main-playlistEditDetailsModal-characterCounter";var o=a(86070);const l=({className:e,usedCharacters:t,maxCharacters:a,classNameUsedCharacters:r,isVisible:l=!0,iconLeading:c})=>(0,o.jsxs)(n.x,{usedCharacters:t,maxCharacters:a,className:s()(e,i,{"hidden-visually":!l}),children:[c&&c,(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:r,children:t}),"/",(0,o.jsx)("span",{children:a})]})]})},16859:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(54091),s=a(86070);const n=({fill:e="#fff",width:t=32,height:a=32})=>(0,s.jsxs)("svg",{width:t,height:a,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:r.Ru.get("close")}),(0,s.jsx)("path",{d:"M31.098 29.794L16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",fill:e,fillRule:"evenodd"})]})},18102:(e,t,a)=>{a.d(t,{z:()=>m});var r=a(97500),s=a.n(r),n=a(78717),i=a(37899);const o="V9GRZQZ3uJmUnFN01U1g",l="ZbHitd4viR91nboFOgnA",c="P_P6T7By5EoxYpE7Iytg",d="rz3ATID9k1sp_f_ptlV_";var u=a(86070);const m=({message:e,isErrorMessage:t=!1,className:a})=>e?(0,u.jsx)("div",{role:"alert",children:(0,u.jsx)("div",{className:s()(o,a,{[l]:t}),children:(0,u.jsxs)(n.E,{as:"p",variant:"marginal",className:c,children:[(0,u.jsx)(i.b,{size:"small",className:d,"aria-hidden":"true"}),e]})})}):null},23241:(e,t,a)=>{a.d(t,{mb:()=>o,rw:()=>i});var r=a(17559),s=a(16703);function n(e,t=!0){const a=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com");let n=null;if(e){const r=e.toURL();n=new URL(r),t&&a.searchParams.forEach((e,t)=>{n.searchParams.set(t,e)})}else n=a,t||(n.search="");n.searchParams.delete("nd"),n.searchParams.delete("fallback"),n.searchParams.set("go","1");const i=(0,r.x)(s.I4);return"string"==typeof i?.correlationId&&n.searchParams.append("sp_cid",i.correlationId),n}function i(e,t){const a=n(e,t);return a.searchParams.set("fallback","download"),a}function o(){return new URL(`https://www.spotify.com/download${window.location.search}`)}},26460:(e,t,a)=>{a.d(t,{u:()=>l,i:()=>o});var r=a(30758);const s="main-imagePicker-image";var n=a(86070);const i={accept:"image/.jpg, image/.jpeg, image/.png"};let o=function(e){return e.FILE_TOO_BIG="FILE_TOO_BIG",e.IMAGE_TOO_SMALL="IMAGE_TOO_SMALL",e.IMAGE_TOO_BIG="IMAGE_TOO_BIG",e.IMAGE_TYPE_NOT_SUPPORTED="IMAGE_TYPE_NOT_SUPPORTED",e}({});const l=function({onChange:e,onError:t,isOpen:a=!1,minImageWidth:l=0,minImageHeight:c=0,maxImageWidth:d=1e4,maxImageHeight:u=1e4,maxFileSizeMB:m=1/0,...g}){const p=r.useRef(null),h={...i,...g};(0,r.useEffect)(()=>{p.current&&a&&p.current.click()},[p,a]);const b=1048576*m;return(0,n.jsx)("input",{...h,type:"file","data-testid":"image-file-picker",ref:p,className:s,onChange:async function(a){const r=a.target,[s]=Array.from(r.files||[]);if(!s)return;const n=await async function(e){const t=await function(e){return new Promise((t,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{t(r.result?.toString()??"")},r.onerror=e=>a(e)})}(e),[a,r]=await function(e){return new Promise((t,a)=>{const r=new Image;r.onload=()=>{const{width:e,height:a}=r;t([e,a])},r.src=e,r.onerror=e=>a(e)})}(t);return{imageFile:e,imageDataUrl:t,imageWidth:a,imageHeight:r}}(s);try{await async function(e){if(!["image/jpg","image/jpeg","image/png"].includes(e.imageFile.type))throw o.IMAGE_TYPE_NOT_SUPPORTED;if(e.imageWidth<l||e.imageHeight<c)throw o.IMAGE_TOO_SMALL;if(e.imageWidth>d||e.imageHeight>u)throw o.IMAGE_TOO_BIG;if(e.imageFile.size>b)throw o.FILE_TOO_BIG}(n),e(n)}catch(e){if("string"!=typeof e||!Object.values(o).includes(e))throw e;t(e)}}})}},30107:(e,t,a)=>{a.d(t,{A:()=>r});const r={container:"dxmO4YFbWJWft8k1u1xd",content:"eo4j5igFTz3H5e4k0H1J",header:"ATkkQRxE5WWpnf8SaZuw",closeBtn:"E4o4nmb_rcE36geHpbqm",textElement:"IgkFBAgYtcmoHcyhUkHg",titleInput:"j9ZOu8otCKDEdTV94xmv",save:"N9xswHLFFYR3nJlxBv0g",name:"qG5Eyi3UNYC2tM3crUsk",titleInputWithPadding:"zfx2ty7eth_hdRWr_oHZ",titleCharacterCounter:"iuHeZPqw8sP3Z3YI65OA",infoBannerNoMargin:"QnMNNG7jGJz1IC9dm3Kw"}},43171:(e,t,a)=>{a.d(t,{h:()=>d});var r=a(30758),s=a(54091),n=a(74690),i=a(1041),o=a(97378),l=a(710),c=a(86070);const d=r.memo(function({uri:e}){const{spec:t}=(0,l.o)(e);return(0,c.jsx)(n.W,{children:(0,c.jsx)(o.h,{divider:"before",children:(0,c.jsx)(i.m,{spec:t,uri:e,displayText:s.Ru.get("context-menu.copy-generic-link")})})})})},43285:(e,t,a)=>{a.d(t,{p:()=>s});var r=a(30758);function s(){const[e,t]=(0,r.useState)(!1);return[e,(0,r.useCallback)(()=>{t(!0),setTimeout(()=>t(!1),0)},[t])]}},46019:(e,t,a)=>{a.d(t,{V:()=>o});var r=a(91198),s=a(59867),n=a(70613),i=a(56317);const o=()=>{const e=(0,r.NC)(n.DUX,{loadingValue:!1}),t=(0,r.NC)(n.EEm,{loadingValue:!1}),{operatingSystem:a,isDeveloperMode:o}=(0,s.mv)(),l=a===i.f.Windows;return o&&t||l&&e}},49126:(e,t,a)=>{a.d(t,{p:()=>o});var r=a(30758),s=a(85387),n=a(98117),i=a(58248);const o=(e=n.a.AUDIO_QUALITY_STEAMING)=>{const t=(0,i.g)(),a=(0,s.zy)();return(0,r.useCallback)(()=>{t(`/preferences?highlight=${e}`,{replace:"/preferences"===a.pathname})},[e,t,a])}},51275:(e,t,a)=>{a.d(t,{A:()=>r});const r={container:"tILVCULsIZ94THTp9XJU",content:"oKK74dzMPnZRlDrp57xc",backgroundImage:"DXi1csV3QjfXSUQ0KAVr",bio:"h3MmSML7jYD7z1OZBadB",avatar:"eU49hRckIMO_TgrYD6di",heading:"w9nzav1eKZSRgcQrkY0N",authorGridContainer:"TZCwEz4ZsfEqc_Hh2pcY"}},70397:(e,t,a)=>{a.d(t,{c:()=>n,t:()=>i});var r=a(27360);const s=e=>({url:e}),n=e=>{const t=[];return e.largeImageUrl?t.push(s(e.largeImageUrl)):e.imageUrl&&t.push(s(e.imageUrl)),{displayName:e.displayName,images:t,username:e.username,uri:(0,r.Qjr)(e.username).toURI()}},i=(e,t,a)=>{const r=[],s=e.sessionMembers.find(({id:t})=>t===e.sessionOwnerId);s&&r.push(s);const i=e.isSessionOwner?void 0:e?.sessionMembers.find(({username:e})=>e===t);i&&(a?.userFirst?r.unshift(i):r.push(i));const o=e.sessionMembers.filter(({username:a,id:r})=>r!==e.sessionOwnerId&&a!==t);return[...r,...o].map(n)}},70651:(e,t,a)=>{a.d(t,{g:()=>p});var r=a(30758),s=a(97500),n=a.n(s),i=a(78717),o=a(54091),l=a(57055);const c="juQLAcP4MUfxSWxh5Gpe",d="DaUqY1ECz53cewVK5sax",u="vu6SQEVq_9vDyCvTOGFo";var m=a(86070);const g=({children:e})=>(0,m.jsx)(m.Fragment,{children:e}),p=(0,r.forwardRef)(function({users:e,maxSlots:t=3,size:a,withoutOverflowBadge:r=!1,dropShadow:s=!1,AvatarWrapper:p=g},h){const b=Math.max(2,t),y=e.length>b?e.length-b+1:0,x=e.slice(0,b),{userIconSize:R,width:f,smallFontSize:E,largeFontSize:v}=(e=>{switch(e){case"xxlarge":return{userIconSize:"xlarge",width:64,smallFontSize:24,largeFontSize:32};case"xlarge":return{userIconSize:"large",width:48,smallFontSize:18,largeFontSize:24};case"large":return{userIconSize:"medium",width:32,smallFontSize:12,largeFontSize:16};case"medium":default:return{userIconSize:"small",width:24,smallFontSize:9,largeFontSize:12};case"small":return{userIconSize:"xsmall",width:18,smallFontSize:8,largeFontSize:10}}})(a),k=y>9?E:v,C=(0,m.jsx)("span",{className:n()(d,"encore-inverted-light-set"),style:{width:f,height:f},role:"presentation",children:(0,m.jsx)(i.E,{variant:"bodySmallBold",style:{fontSize:k},semanticColor:"textBase",children:`+${y}`})});return(0,m.jsx)("div",{className:n()(c),ref:h,children:x.map((e,t)=>!r&&y>0&&t===b-1?(0,m.jsx)(p,{index:t,children:(0,m.jsx)(l.e,{images:[],userIconSize:R,label:o.Ru.get("web-player.social-connect.facepile.and-others",y),width:f,piled:!0,customPlaceholder:C})},"others"):(0,m.jsx)(p,{index:t,user:e,children:(0,m.jsx)(l.e,{images:e.images,userIconSize:R,label:e.displayName,displayName:e.displayName,username:e.username,width:f,piled:t>0,imageClassName:s?u:void 0})},e.displayName))})})},80243:(e,t,a)=>{a.d(t,{C:()=>d});var r=a(30758),s=a(97500),n=a.n(s),i=a(84826);const o="main-dropDown-dropDown",l="main-dropDown-isSafari";var c=a(86070);const d=(0,r.forwardRef)(({value:e,id:t,children:a,disabled:r,onClick:s,preventMenu:d=!1,onSelect:u,className:m,dir:g},p)=>(0,c.jsx)("span",{className:m,children:(0,c.jsx)("select",{ref:p,className:n()(o,{[l]:(0,i.n)()}),value:e?.toString(),id:t,disabled:r,onClick:s,onBlur:()=>{},onChange:e=>{u(e.target.value)},onPointerDown:e=>{d&&e.preventDefault()},onKeyDown:e=>{("Space"===e.code||"ArrowDown"===e.code||"ArrowUp"===e.code)&&(d&&e.preventDefault(),s?.(e))},dir:g,children:a})}))},80628:(e,t,a)=>{a.d(t,{X:()=>u,A:()=>J});var r=a(30758),s=a(62960),n=a(79657),i=a(54091),o=a(716),l=a(7885);const c="Mtwyh8Z9qnyb_SQQhZlM";var d=a(86070);const u=()=>{const e=i.Ru.getLocaleForTranslation(),t=l.IB[e]??l.IB.en,a=(0,o.ZZ)(),u=(0,r.useCallback)(()=>{a({type:"OPEN"})},[a]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(s.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var m=a(8143),g=a(78717),p=a(81458),h=a(27360),b=a(72248),y=a(52262),x=a(89307),R=a(38819),f=a(44544);const E="_4oel5PYEi1kIvPp8Fk7Q",v=()=>window.location.pathname;let k=v;const C=()=>window.location.href;let j=C;const S=()=>window.location.origin;let N=S;const w=e=>{window.location.href=e};let _=w;const T=({children:e,locale:t,onClick:a,type:r="button"})=>{const s=t===y.Xn,n=(0,f.vf)(k()),o=(0,h.o_h)(k()),l=(0,b.d)({type:"route",uri:n?x.c.HOME:o?.toURI()}),c={className:E,id:t,onClick:e=>(e=>{if("button"===r){e.preventDefault();const t=new URL(j());j().includes("locale")&&t.searchParams.delete("locale"),_(t.href)}a(t)})(e),"data-testid":`language-option-${t}`};if("link"===r){const a=(0,R.ll)(k(),!s),r=(0,R.hF)(a,(0,i.a7)(t).baseName),n=l?r:k(),o=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${N()}${n}`);return(0,d.jsx)("a",{href:o,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},I="g1F6wSz1rIjKqzVLXOab",A=({style:e,children:t})=>(0,d.jsx)("div",{className:I,style:e,children:t});var O=a(97500),L=a.n(O);const D="iyXyI4fcehg_5wuBOJwI",P="oygpB4ATp86RUlgUYVmW",U="XIWDBi1zOjfwUXZTvK3_",M="ndm_C8DJwThMeF8sXVgQ",B="rLVwh5YIyFYQ2BrwZ0hR",F="CA18C6gJaEyA1SpK0G8C",G=({onClose:e,children:t})=>{const a=(0,r.useRef)(null),{isOpen:s}=(0,o.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:L()(D,{[P]:s}),onClick:t=>{t.target===a.current&&e()},role:"presentation",ref:a,children:t})},W=({ariaDescribedBy:e,ariaLabelledBy:t,children:a})=>{const{isOpen:r}=(0,o.iL)();return(0,d.jsx)("div",{className:U,role:"dialog",hidden:!r,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:a})};var V=a(30920);const z=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:F,onClick:()=>{e()},children:(0,d.jsx)(V.M,{size:"small","aria-label":i.Ru.get("close")})});var H=a(1994),K=a(30469),q=a(49348),Y=a(87159);const J=({languageSelectionModalRef:e})=>{const t=(0,r.useRef)(null),[a,s]=(0,r.useState)("0"),n=(0,o.ZZ)(),c=(0,r.useCallback)(()=>{n({type:"CLOSE"})},[n]),{isOpen:u}=(0,o.iL)(),h=(0,r.useCallback)(()=>{s(`${t.current?.getBoundingClientRect().height}px`)},[s]),b=e=>{var t;(0,Y.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),c()};if((0,H.m)(c),(0,q.w)({refOrElement:t,observeOnly:"height",onResize:h}),(0,r.useEffect)(()=>{h()},[h]),!e.current)return null;const y="language-selection-title",x="language-selection-subtitle",R={"--header-height":a};return(0,m.createPortal)((0,d.jsx)(K.s,{active:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(G,{onClose:c,children:(0,d.jsxs)(W,{ariaLabelledBy:y,ariaDescribedBy:x,children:[(0,d.jsxs)("div",{className:M,ref:t,children:[(0,d.jsxs)("div",{className:B,children:[(0,d.jsx)(g.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:y,paddingBottom:p.v4,children:i.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(g.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:x,paddingBottom:p.CD,children:i.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(z,{onClose:c})]}),(0,d.jsx)(A,{style:{...R},children:l.Np.map(e=>{const t=(0,i.a7)(e).baseName,a=(0,f.p)({urlLocale:t,type:"locale"});return(0,d.jsxs)(T,{onClick:b,locale:e,type:a?"link":"button",children:[(0,d.jsx)(g.E,{semanticColor:"textBase",children:l.IB[e].displayName}),(0,d.jsx)(g.E,{children:l.IB[e].displayNameEn})]},e)})})]})})})}),e.current)}},81555:(e,t,a)=>{a.d(t,{D:()=>n});var r=a(63472),s=a(94209);function n(){return(0,s.N)(r.x)}},82226:(e,t,a)=>{a.d(t,{a:()=>h});var r=a(97500),s=a.n(r),n=a(99974),i=a(78717),o=a(54091);const l="main-editImage-buttonContainer",c="main-editImageButton-image",d="main-editImageButton-overlay",u="tLBPPMJQ0qUsL9Zl5xHX",m="main-editImageButton-icon",g="main-editImageButton-copy";var p=a(86070);const h=function({overlay:e=!1,rounded:t=!1,onClick:a}){return(0,p.jsx)("div",{className:l,children:(0,p.jsx)("button",{"data-testid":"edit-image-button",className:s()(c,{[u]:t,[d]:e}),"aria-haspopup":"true",onClick:a,type:"button",children:(0,p.jsxs)("div",{className:s()(m,"icon"),children:[(0,p.jsx)(n.G,{size:"xlarge","aria-hidden":"true"}),(0,p.jsx)(i.E,{variant:"bodyMedium",className:g,children:o.Ru.get("choose_photo")})]})})})}},87994:(e,t,a)=>{a.d(t,{RootDialogs:()=>Om});var r=a(30758),s=a(62411),n=a(91198),i=a(67735),o=a(78717),l=a(30920),c=a(73136),d=a(54091),u=a(81101),m=a(44750);const g="iIGT6O0rmV3_07D47wRE",p="XuGP2kGTA2YLjmcgDTtg",h="GADITjnd31DBLPJMqTdD",b="xEqPzI5Sw2ICNChNIlNo",y="eMCM9w8RUIvj46P4fEWD",x="dh3qLy0qj4ieYDAIhwxw",R="VV_ldXUH7zXoyu8YjLgg";var f=a(86070);const E=(0,r.memo)(function(){const e=(0,s.wA)(),{isOpen:t}=(0,s.d4)(e=>e.aboutRecs),a=(0,r.useCallback)(()=>{e((0,u.oK)())},[e]),n=`https://about-recommendations.spotify.com/?bg=${i.Ql9.substring(1)}&hideHeader=true`,E=d.Ru.get("header.about-recommendations-and-promotions");return(0,f.jsxs)(m.M,{animated:!0,isOpen:t,onClose:a,"aria-label":E,className:g,children:[(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:h,children:E}),(0,f.jsx)("button",{"aria-label":d.Ru.get("close_button_action"),className:x,onClick:a,children:(0,f.jsx)(l.M,{size:"medium"})})]}),(0,f.jsx)("div",{className:b,children:(0,f.jsx)("iframe",{className:y,title:E,src:n})}),(0,f.jsx)("div",{className:R,children:(0,f.jsx)(c.$,{href:"https://www.spotify.com/safetyandprivacy/understanding-recommendations/plain",target:"_blank",rel:"noopener noreferrer",colorSet:"invertedLight",children:d.Ru.get("home.dsa-message-link")})})]})});var v=a(48289),k=a(35394),C=a(97500),j=a.n(C);const S=({className:e})=>(0,f.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:[(0,f.jsx)("rect",{width:"14.933",height:"14.933",x:"0.533",y:"0.533",fill:"#E22134",rx:"7.467"}),(0,f.jsx)("path",{fill:"#fff",d:"M6.143 12V4.437h-1.28c-.15.79-.907 1.387-1.995 1.419v1.003h1.813V12h1.462zm5.092-5.13c0 .82-.65 1.343-1.386 1.343-.758 0-1.387-.512-1.387-1.344 0-.81.64-1.333 1.387-1.333.736 0 1.386.533 1.386 1.333zm-4 4.874c.384.245 1.12.416 1.75.416 2.56 0 3.893-1.61 3.893-4.341 0-2.4-1.397-3.542-2.997-3.542-1.611 0-2.859 1.088-2.859 2.635 0 1.59 1.227 2.539 2.603 2.539.853 0 1.514-.363 1.802-.843-.074 1.397-.96 2.261-2.453 2.261-.512 0-1.067-.16-1.355-.32l-.384 1.195z"}),(0,f.jsx)("rect",{width:"14.933",height:"14.933",x:"0.533",y:"0.533",stroke:"#fff",strokeWidth:"1.067",rx:"7.467"})]});function N(e,t,a,r){if(a<=0||r<=0||r>1)return{height:-1,width:-1,parentHeight:e,parentWidth:t};const s=e*t,n=1/r*a,i=Math.sqrt(s/n);return{height:i,width:i*a,parentHeight:e,parentWidth:t}}var w=a(35274);const _="IbhqRQDBkyk7crtRAxac",T="B8RNaSWx5hHfcLWuMBnQ",I="pMpSARCbXpdI77nfPj3s",A="CD_hs6W5ThInnRqsG3hQ",O="geCVL9rD8SqPw5fk2QQS",L="ta91ss6LHRvTVmROdgHu",D="lu2CItpRBYjbMu037wdU",P="FYV4LHfJvTKcpS8eJe7y",U="Okwc6xnF5yTe8QkQ2V4f";var M=a(58760);const B={[M.E.XSMALL]:L,[M.E.SMALL]:L,[M.E.MEDIUM]:D,[M.E.LARGE]:P,[M.E.XLARGE]:P},F=({image:e,title:t,description:a,primaryButton:r,secondaryButton:s,renderExtraInfo:n,style:i,className:o,size:l=M.E.SMALL})=>{const c="string"==typeof t?(0,f.jsx)("h2",{className:I,children:t}):(0,f.jsx)("div",{className:I,children:t});let d,u;return a&&(d="string"==typeof a?(0,f.jsx)("p",{className:A,children:a}):(0,f.jsx)("div",{className:A,children:a})),s&&(u=(0,f.jsx)("div",{className:U,children:s})),(0,f.jsxs)("div",{className:j()(`${_} ${B[l]}`,o),style:i,"data-testid":"dialog-root",children:[e&&(0,f.jsx)("div",{className:O,children:(0,f.jsx)(w._,{loading:"lazy",src:e})}),(0,f.jsxs)("div",{className:T,children:[c,d,r,u,n&&n()]})]})},G="oTENUnOOImNqPq0WxLfJ",W="TPuIxLL4beUUlLsk8gbt",V="Oqr0OYTp7epnDbvdUs6T",z="JVPd42vvExqbvEXM5SUB",H={[M.E.SMALL]:1,[M.E.MEDIUM]:.72,[M.E.LARGE]:1.82},K={[M.E.SMALL]:0,[M.E.MEDIUM]:600,[M.E.LARGE]:1024},q=1/3,Y=({image:e,onConfirm:t,backgroundColor:a})=>{const s=(e=>Object.keys(K).reverse().find(t=>e>=K[t]?t:null))(window.innerWidth),{width:n,height:i,parentHeight:o}=function(e,t){const[a,s]=(0,r.useState)(()=>N(window.innerHeight,window.innerWidth,e,t)),n=(0,r.useCallback)(()=>{s(N(window.innerHeight,window.innerWidth,e,t))},[e,t]);return(0,r.useEffect)(()=>(s(N(window.innerHeight,window.innerWidth,e,t)),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[e,t,n]),a}(H[s],q),l=a?{backgroundColor:a}:{},u=((e,t,a,r)=>e===M.E.SMALL?{width:"100vw",height:"100vh"}:e===M.E.MEDIUM&&r<750||e===M.E.LARGE&&r<520?{width:"inherit",height:"inherit"}:{width:`${Math.ceil(t)}px`,height:`${Math.ceil(a)}px`})(s,n,i,o),m=(0,f.jsxs)("span",{children:[(0,f.jsx)("span",{className:W,children:d.Ru.get("age.restriction.explicitContent")}),(0,f.jsx)(S,{className:V})]}),g=(0,f.jsx)(c.$,{colorSet:"invertedLight",onClick:t,children:d.Ru.get("age.restriction.continue")});return(0,f.jsx)(F,{className:j()(G,{[z]:1===H[s]}),style:{...u,...l},image:e,title:d.Ru.get("age.restriction.confirmAge"),description:m,primaryButton:g,size:s})},J="FDk3HnP8tAmwNQSrL8ir",Q="ZZSA4sgfboTVSlTG4xHt",Z=e=>{window.location.assign(e)};let $=Z;const X=()=>{const e=(0,s.wA)(),{image:t,backgroundColor:a,providerUrl:r}=(0,s.d4)(({ageRestriction:e})=>({image:"",backgroundColor:e.dialog.backgroundColor,providerUrl:e.dialog.providerUrl}),(e,t)=>e.image===t.image&&e.backgroundColor===t.backgroundColor&&e.providerUrl===t.providerUrl);return(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)(Y,{image:t,onConfirm:()=>{$(r)},backgroundColor:a}),(0,f.jsx)("div",{className:Q,children:(0,f.jsx)(k.H,{onClick:()=>{e((0,v.Rb)())},children:d.Ru.get("close")})})]})},ee=()=>{const e=(0,s.wA)(),t=(0,s.d4)(({ageRestriction:e})=>e.isOpen);return(0,f.jsx)(m.M,{animated:!0,onClose:()=>{e((0,v.Rb)())},"aria-label":d.Ru.get("age.restriction.confirmAge"),isOpen:t,children:(0,f.jsx)(X,{})})};var te=a(81458),ae=a(19717),re=a(24189),se=a(51629),ne=a(77858),ie=a(96022);const oe="ghr5ylNNUos54DRHZX28",le="xF0LXk1JYDZ1kcy9TPsE",ce="hOiFxHfhK6Ac8TUOw80T",de="tE7pqV8UZHLl89Sq4pXK",ue=(0,r.memo)(function(){const e=(0,s.wA)(),{user:t}=(0,s.d4)(se.Ht),{name:a,uri:n,isOpen:i,onBlock:l}=(0,s.d4)(({ui:e})=>e.blockUserDialog),{enqueueSnackbar:u}=(0,re.d)(),g=(0,ie.A)(),p=(0,r.useCallback)(async()=>{if(t&&n)try{await(0,ne.rn)(g,{currentUserUri:t?.uri,uri:n}),e((0,ae.xF)()),u(d.Ru.get("feedback.block-user")),l?.()}catch(t){throw e((0,ae.xF)()),t}},[t,n,g,e,l,u]),h=(0,r.useCallback)(()=>{e((0,ae.xF)())},[e]),b=(0,r.useCallback)(()=>{e((0,ae.xF)())},[e]);return(0,f.jsxs)(m.M,{animated:!0,onClose:b,"aria-label":d.Ru.get("block-user.dialog.title",a),isOpen:i,className:oe,children:[(0,f.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:le,children:d.Ru.get("block-user.dialog.title",a)}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",className:ce,paddingBottom:te.lT,children:d.Ru.get("block-user.dialog.description",a)}),(0,f.jsxs)("div",{className:j()("encore-light-theme",de),children:[(0,f.jsx)(k.H,{buttonSize:k.H.md,onClick:h,children:d.Ru.get("block-user.dialog.cancel")}),(0,f.jsx)(c.$,{onClick:p,buttonSize:c.$.md,children:d.Ru.get("block-user.dialog.block")})]})]})});var me=a(85387),ge=a(27360),pe=a(88089),he=a(58248),be=a(95525);const ye=(0,r.memo)(function(){const e=(0,s.wA)(),{removeFolder:t}=(0,be.Z)(),a=(0,he.g)(),n=(0,me.zy)(),{uri:i,onDeleteCallback:o}=(0,s.d4)(({ui:e})=>e.deleteFolderDialog),l=(0,r.useCallback)(()=>{e((0,ae.c$)())},[e]),c=(0,r.useCallback)(()=>{i&&(t(i),l(),(0,ge.o_h)(i)?.toURLPath().endsWith(n.pathname)&&a("/",{replace:!0}),o&&o())},[i,t,l,n.pathname,o,a]);return(0,f.jsx)(pe.T,{"aria-label":d.Ru.get("folder.delete-header"),titleText:d.Ru.get("folder.delete-header"),onConfirm:c,onClose:l,confirmText:d.Ru.get("contextmenu.delete"),confirmLabel:d.Ru.get("folder.delete-header"),cancelText:d.Ru.get("queue.cancel-button")})});var xe=a(43114),Re=a(85093);const fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ee=/[&<>"']/g,ve=RegExp(Ee.source);const ke=Object.values(fe);RegExp(`${ke.join("|")}`,"g"),RegExp(`${ke.join("|")}`);const Ce=(0,r.memo)(function({uri:e}){const t=(0,he.g)(),a=(0,me.zy)(),n=(0,s.wA)(),[,i]=(0,xe.A)(e),o=(0,Re.J)(e),l=(0,r.useCallback)(()=>{i(!1),n((0,ae._P)()),(0,ge.B2u)(e,a.pathname)&&t("/",{replace:!0})},[e,i,n,a.pathname,t]),c=(0,r.useCallback)(()=>{n((0,ae._P)())},[n]);return o&&(0,f.jsx)(pe.T,{"aria-label":d.Ru.get("playlist.delete",o.name),titleText:d.Ru.get("playlist.delete-title",o.name),descriptionText:d.Ru.get("playlist.delete-description",(u=o.name,u&&ve.test(u)?u.replace(Ee,e=>e in fe?fe[e]:e):u)),onConfirm:l,onClose:c,confirmText:d.Ru.get("contextmenu.delete"),confirmLabel:d.Ru.get("playlist.delete",o.name),cancelText:d.Ru.get("queue.cancel-button"),allowHTML:!0,confirmButtonColorSet:"negative"});var u}),je=()=>{const e=(0,s.d4)(e=>e.ui.deletePlaylistDialog.uri);return e?(0,f.jsx)(Ce,{uri:e}):null},Se=(0,r.lazy)(async()=>{const{AboutSpotifyModal:e}=await a.e(8493).then(a.bind(a,32458));return{default:e}}),Ne=(0,r.lazy)(async()=>await a.e(8493).then(a.bind(a,5258))),we=(0,r.lazy)(async()=>await a.e(8493).then(a.bind(a,16601))),_e=(0,r.lazy)(async()=>{const{LazyPromptComposerModal:e}=await a.e(8493).then(a.bind(a,14569));return{default:e}}),Te=(0,r.lazy)(async()=>{const{LazyMagpieCapModal:e}=await a.e(8493).then(a.bind(a,38707));return{default:e}});function Ie(){return(0,f.jsxs)(r.Suspense,{fallback:null,children:[(0,f.jsx)(Se,{}),(0,f.jsx)(Ne,{}),(0,f.jsx)(we,{}),(0,f.jsx)(_e,{}),(0,f.jsx)(Te,{})]})}var Ae=a(42551),Oe=a(43971),Le=a(78146);const De="KQaJy9GOUBejec8vMqzA",Pe="ENqmeIbbTJb7MvRriNfQ",Ue="KXLdjWATPSUWIpsUKrCg",Me="oIs_TqEORdgeayzmxplV",Be=(0,Ae.Mz)(e=>e.duplicateTracks,e=>{const t=!!e.uri;return{...e,onlyOneTrack:t,uris:t&&e.uri?[e.uri]:e.uris}}),Fe=(0,r.memo)(function(){const e=(0,s.wA)(),t=(0,Le.m)(),{isOpen:a,playlistName:n,playlistUri:i,uris:l=[],onlyOneTrack:u,position:g={after:"end"},newUris:p=[]}=(0,s.d4)(Be),h=p?.length,b=!u&&h,y=(0,r.useCallback)(()=>{b&&t.add(i,p,g),e((0,Oe.Qo)())},[t,b,p,g,i,e]),x=(0,r.useCallback)(()=>{t.add(i,l,g),e((0,Oe.Qo)())},[t,l,g,i,e]),R=(0,r.useCallback)(()=>{e((0,Oe.Qo)())},[e]);let E;return E=b?d.Ru.get("duplicate.tracks.someAlreadyAddedDescription",n):u?d.Ru.get("duplicate.tracks.oneAlreadyAdded",n):d.Ru.get("duplicate.tracks.allAlreadyAdded",n),(0,f.jsx)(m.M,{animated:!0,onClose:R,"aria-label":d.Ru.get("duplicate.tracks.alreadyAdded"),isOpen:a,children:(0,f.jsxs)("div",{className:De,children:[(0,f.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:Pe,children:b?d.Ru.get("duplicate.tracks.someAlreadyAdded"):d.Ru.get("duplicate.tracks.alreadyAdded")}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",className:Ue,paddingBottom:te.lT,children:E}),(0,f.jsxs)("div",{className:j()("encore-light-theme",Me),children:[(0,f.jsx)(k.H,{onClick:x,children:b?d.Ru.get("duplicate.tracks.addAll"):d.Ru.get("duplicate.tracks.addAnyway")}),(0,f.jsx)(c.$,{onClick:y,children:b?d.Ru.get("duplicate.tracks.addNewOnes"):d.Ru.get("duplicate.tracks.dontAdd")})]})]})})});var Ge=a(31186),We=a(59039),Ve=a(57010),ze=a(78066),He=a(49950),Ke=a(80243),qe=a(66957),Ye=a(94326);let Je=function(e){return e[e.PODCAST_AUDIO=0]="PODCAST_AUDIO",e[e.PODCAST_VIDEO=1]="PODCAST_VIDEO",e[e.TRACK=2]="TRACK",e[e.PLAYLIST=3]="PLAYLIST",e[e.ARTIST=4]="ARTIST",e[e.ALBUM=5]="ALBUM",e}({});const Qe=[1,60,3600],Ze=[3600,60,1],$e={seconds:NaN,humanString:"-:--"};function Xe(e){if(!isFinite(e))return $e.humanString;let t=Math.round(e);return Ze.reduce((e,a,r)=>{const s=0===e.length?1:2;if(t>=a||e.length>0||r===Qe.length-2){const r=Math.floor(t/a);t-=r*a,e.push(r.toString().padStart(s,"0"))}return e},[]).join(":")}function et(e){let t=NaN;if("number"==typeof e)t=Math.round(e);else if("string"==typeof e){const a=e.split(":");a.length<=Qe.length&&(t=a.reverse().reduce((e,t,a)=>e+=function(e){const t=parseInt(e,10);return t>=0?t:NaN}(t)*Qe[a],0))}return isNaN(t)?$e:{seconds:t,humanString:Xe(t)}}var tt=a(66917),at=a(75072),rt=a(26843);const st=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForAlbumEntity"]=new at.l("fetchExtractedColorAndImageForAlbumEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),nt=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForArtistEntity"]=new at.l("fetchExtractedColorAndImageForArtistEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),it=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForEpisodeEntity"]=new at.l("fetchExtractedColorAndImageForEpisodeEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),ot=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForPlaylistEntity"]=new at.l("fetchExtractedColorAndImageForPlaylistEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),lt=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForPodcastEntity"]=new at.l("fetchExtractedColorAndImageForPodcastEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),ct=Spicetify.GraphQL.Definitions["fetchExtractedColorAndImageForTrackEntity"]=new at.l("fetchExtractedColorAndImageForTrackEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),dt=Spicetify.GraphQL.Definitions["fetchExtractedColorForAlbumEntity"]=new at.l("fetchExtractedColorForAlbumEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),ut=Spicetify.GraphQL.Definitions["fetchExtractedColorForArtistEntity"]=new at.l("fetchExtractedColorForArtistEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),mt=Spicetify.GraphQL.Definitions["fetchExtractedColorForEpisodeEntity"]=new at.l("fetchExtractedColorForEpisodeEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),gt=Spicetify.GraphQL.Definitions["fetchExtractedColorForPlaylistEntity"]=new at.l("fetchExtractedColorForPlaylistEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),pt=Spicetify.GraphQL.Definitions["fetchExtractedColorForPodcastEntity"]=new at.l("fetchExtractedColorForPodcastEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null),ht=Spicetify.GraphQL.Definitions["fetchExtractedColorForTrackEntity"]=new at.l("fetchExtractedColorForTrackEntity","query","b2d6d99fb6237952dfa6638385f9c6085f1b1fb9d0468753ca6ad98ff45adc6f",null);var bt=a(794),yt=a(76392);const xt={artist:ut,album:dt,episode:mt,playlist:gt,"playlist-v2":gt,show:pt,track:ht};function Rt(e){return e?.extractedColors?.colorDark.hex}const ft={artist:nt,album:st,episode:it,playlist:ot,"playlist-v2":ot,show:lt,track:ct};function Et(e){return!!e}function vt(e){return!!e}function kt(e){return!(!e||0===Object.keys(e).length)&&"Episode"===e.__typename}function Ct(e){return!!e}function jt(e){return!(!e||0===Object.keys(e).length)&&"Podcast"===e.__typename}function St(e){return!(!e||0===Object.keys(e).length)&&"Audiobook"===e.__typename}function Nt(e){return!!e}var wt=a(99022),_t=a(39140),Tt=a(89307),It=a(21090);const At="main-embedWidgetGenerator-container",Ot="main-embedWidgetGenerator-contentCode",Lt="main-embedWidgetGenerator-visible",Dt="main-embedWidgetGenerator-code",Pt="main-embedWidgetGenerator-timestampInput",Ut="main-embedWidgetGenerator-content",Mt="main-embedWidgetGenerator-contentHeader",Bt="main-embedWidgetGenerator-contentFooter",Ft="main-embedWidgetGenerator-contentIframe",Gt="main-embedWidgetGenerator-copyWrapper",Wt="main-embedWidgetGenerator-copyBtn",Vt="main-embedWidgetGenerator-darkControl",zt="main-embedWidgetGenerator-widthField",Ht="main-embedWidgetGenerator-tooltipInitiator",Kt="main-embedWidgetGenerator-tooltip",qt="main-embedWidgetGenerator-transControl",Yt="main-embedWidgetGenerator-header",Jt="main-embedWidgetGenerator-closeBtn",Qt="main-embedWidgetGenerator-theme",Zt="main-embedWidgetGenerator-themeDescription",$t="main-embedWidgetGenerator-themeRadio",Xt="main-embedWidgetGenerator-active",ea="main-embedWidgetGenerator-terms",ta="main-embedWidgetGenerator-dimensionsContainer",aa="main-embedWidgetGenerator-dimensionLabel",ra="main-embedWidgetGenerator-dimensionField",sa="main-embedWidgetGenerator-crossSep",na="main-embedWidgetGenerator-startAt",ia="main-embedWidgetGenerator-loadingIndicator",oa=352,la="100%",ca={frameBorder:0,allowFullScreen:!0,allow:["autoplay","clipboard-write","encrypted-media","fullscreen","picture-in-picture"].join("; "),loading:"lazy"},da={disallow:{timestamp:!0,theme:!1,width:!1},defaults:{theme:"1",height:oa,width:la},theme:[["1",null],["0","#282828"]],height:[[oa,"normal"],[152,"compact"]],constraints:{width:{min:250,max:600,minPercentage:40,maxPercentage:100}}},ua={[Je.PODCAST_AUDIO]:{disallow:{timestamp:!1,theme:!1,width:!1},defaults:{theme:"1",height:oa,width:la},theme:[["1",null],["0","#282828"]],height:[[oa,"normal"],[152,"compact"]],constraints:{width:{min:250,max:600,minPercentage:40,maxPercentage:100}}},[Je.PODCAST_VIDEO]:{disallow:{timestamp:!1,theme:!1,width:!0},defaults:{theme:"1",height:351,width:624},theme:[["1",null],["0","#282828"]],height:[[351,"normal"],[279,"compact"]],constraints:{width:{min:400,max:700,minPercentage:40,maxPercentage:100}}},[Je.TRACK]:da,[Je.PLAYLIST]:da,[Je.ARTIST]:da,[Je.ALBUM]:da},ma={disallow:{timestamp:!0,theme:!0,width:!0},defaults:{theme:"1",height:oa,width:la},theme:[],height:[],constraints:{width:{min:250,max:600,minPercentage:40,maxPercentage:100}}},ga=({uri:e,currentTrackUri:t,currentPositionInMs:a,isOpen:s,entityType:n})=>{const i=(0,r.useMemo)(()=>(0,ge.o_h)(e),[e]),u=t===e,g=(0,Ye.n)(n),{search:p}=(0,me.zy)(),[h,b]=(0,r.useState)(null),[y,x]=(0,r.useState)(null),[R,E]=(0,r.useState)(null),[v,C]=(0,r.useState)(null),[S,N]=(0,r.useState)(!1),[w,_]=(0,r.useState)(!1),[T,I]=(0,r.useState)(u?Math.floor((a??0)/1e3):0),[A,O]=(0,r.useState)(!0),[L,D]=(0,r.useState)(!1),[P,U]=(0,r.useState)(d.Ru.get("ewg.copy")),M=null!==h?ua[h]:ma,B=(0,wt.T)(),F=function(e,t=tt.l0o){const{request:a}=(0,r.useContext)(bt.j),[s,n]=(0,r.useState)(t);return(0,r.useEffect)(()=>{(async()=>{const t=(0,ge.o_h)(e);if(!t)return;const r=xt[t.type];if(!r)return void console.error(`The entity (${e}) you're trying to use it not supported for this query`);const s=await a(r,{uri:t.toURI()}),{albumUnion:i,artistUnion:o,episodeUnionV2:l,playlistV2:c,podcastUnionV2:d,trackUnion:u}=s?.data||{};Et(i)?n(Rt(i.coverArt)):vt(o)?n(Rt(o.visuals?.avatarImage)):kt(l)?n(Rt(l.coverArt)):Ct(c)?n(Rt(c.images?.items?.[0])):jt(d)||St(d)?n(Rt(d?.coverArt)):Nt(u)&&n(Rt(u.albumOfTrack?.coverArt))})()},[e,a]),s}(e,"#FFF"),G=(0,r.useRef)(null),W=(0,r.useRef)(null),V=(0,r.useContext)(qe.wv),z=(0,r.useCallback)(()=>{V({type:"close"})},[V]),H=()=>{z()},K=()=>{if(!W?.current)return;const e=W.current.value;if(null!==h){const{constraints:t}=ua[h],[a,r]=function(e,t){const a=parseInt(e.replace(/px|%$/,""),10);if(Number.isFinite(a)){if(-1!==e.indexOf("px")){const e=Math.max(t.min,Math.min(t.max,Math.round(a)));return[`${e}px`,e.toString()]}const r=Math.max(t.minPercentage,Math.min(t.maxPercentage,Math.round(a)));return[`${r}%`,`${r}%`]}return["100%","100%"]}(e,t.width);W.current.value=a,C(r)}},q=()=>{if(G?.current){const e=et(G.current.value);G.current.value=e.humanString,e.seconds!==T&&(O(!0),I(e.seconds))}};(0,r.useEffect)(()=>{if(h===Je.PODCAST_VIDEO&&R){const e=parseInt(R,10);C(351===e?624..toString():496..toString())}},[R,h]),(0,r.useEffect)(()=>{(async()=>{const t=i?.type;if(t===ge.NQG.EPISODE){const t=await B.getEpisodeOrChapter(e);return t.type===Tt.c.EPISODE&&t.mediaTypes?.includes(_t.Cx.Video)?b(Je.PODCAST_VIDEO):b(Je.PODCAST_AUDIO)}if(t===ge.NQG.SHOW){const t=n===Tt.c.SHOW?await B.getContents(e,{offset:0,limit:1}):await B.getBookContents(e,{offset:0,limit:1,doRefreshSubscription:!1});if(t.items.length>0&&t.items[0]?.uri){const e=await B.getEpisodeOrChapter(t.items[0].uri);return e.type===Tt.c.EPISODE&&e.mediaTypes?.includes(_t.Cx.Video)?b(Je.PODCAST_VIDEO):b(Je.PODCAST_AUDIO)}}t===ge.NQG.TRACK?b(Je.TRACK):t===ge.NQG.ARTIST?b(Je.ARTIST):t===ge.NQG.ALBUM?b(Je.ALBUM):b(Je.PLAYLIST)})()},[n,B,e,i]),(0,r.useEffect)(()=>{E(M.defaults.height.toString()),x(M.defaults.theme),C(M.defaults.width.toString())},[M]);const Y=h===Je.PODCAST_VIDEO,J=(e=>{if(new URLSearchParams(e).get("locale"))return d.Ru.getLocaleForTranslation()})(p),Q=null!==h?function(e,t,a,r,s,n){const i=(0,ge.o_h)(e);if(!i)return null;const o=i.toURLPath(),l=new URL(`https://open.spotify.com/embed/${o}${s?"/video":""}`);return l.searchParams.set("utm_source","generator"),t&&"1"!==t&&l.searchParams.set("theme",t),a&&void 0!==r&&l.searchParams.set("t",r.toString()),n&&l.searchParams.set("locale",n.toString()),l}(e,y,w,T,Y,J):null,Z=Q&&M!==ma&&R&&v?(0,f.jsx)("iframe",{"data-testid":"embed-iframe",onLoad:()=>{O(!1)},style:{borderRadius:"12px"},src:Q?.toString(),width:v,height:R,...ca},Q?.toString()):null,$=Z?(Ge.renderToStaticMarkup(Z)||"").replace(/src=".*?"/,`src="${Q?.toString()}"`):"";return(0,f.jsxs)(m.M,{isOpen:s,"aria-label":g,animated:!0,onClose:H,children:[(0,f.jsxs)("div",{className:j()(At),children:[(0,f.jsxs)("div",{className:Yt,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",children:g}),(0,f.jsx)("button",{className:Jt,onClick:H,children:(0,f.jsx)(l.M,{size:"small","aria-label":d.Ru.get("close")})})]}),(0,f.jsxs)("div",{className:Ut,children:[(0,f.jsxs)("div",{className:Mt,children:[(0,f.jsxs)("div",{className:Qt,style:{visibility:M.disallow.theme?"hidden":"visible"},children:[(0,f.jsx)("p",{className:Zt,children:d.Ru.get("ewg.color")}),M.theme.map(([e,t])=>{return(0,f.jsx)("button",{"aria-label":d.Ru.get("ewg.color"),style:{backgroundColor:null===t?F:t},className:j()($t,{[Xt]:y===e}),onClick:(a=e,()=>{y!==a&&(O(!0),x(a))})},e);var a})]}),(0,f.jsxs)("div",{className:ta,children:[(0,f.jsxs)("div",{className:aa,children:[d.Ru.get("ewg.size"),":"]}),(0,f.jsxs)("div",{className:ra,children:[R&&(0,f.jsx)(Ke.C,{id:"ewg-height",value:R,onSelect:E,children:M.height.map(([e,t])=>(0,f.jsxs)("option",{value:e,children:["normal"===t?d.Ru.get("ewg.size.normal"):d.Ru.get("ewg.size.compact")," ","(",e,"px)"]},e))}),M.disallow.width?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:sa,children:"Ã—"}),(0,f.jsxs)("div",{className:zt,children:[(0,f.jsx)("input",{className:Vt,type:"text",ref:W,defaultValue:M.defaults.width,onKeyUp:e=>{"Enter"===e.key&&K()},onBlur:K}),(0,f.jsx)(k.H,{"aria-label":d.Ru.get("ewg.help"),"aria-describedby":"ewg-help-text",size:"small",iconOnly:We.N,className:Ht,onMouseOver:()=>N(!0),onMouseLeave:()=>N(!1)}),(0,f.jsx)("div",{onFocus:()=>N(!0),onMouseOver:()=>N(!0),onMouseLeave:()=>N(!1),className:j()(Kt,{[Lt]:S}),children:(0,f.jsx)(Ve.m,{id:"ewg-help-text",children:d.Ru.get("ewg.help-text")})})]})]})]})]})]}),(0,f.jsxs)("div",{className:Ft,style:{height:oa,maxHeight:"calc(100vh - 402px)"},children:[A&&(0,f.jsx)("div",{className:ia,children:(0,f.jsx)(ze.U,{})}),Z]}),(0,f.jsx)("small",{className:ea,dangerouslySetInnerHTML:{__html:d.Ru.get("ewg.terms",{devTerms:"https://developer.spotify.com/terms/",platfRules:"https://www.spotify.com/platform-rules/"})}}),(0,f.jsxs)("div",{className:Bt,children:[(0,f.jsxs)("div",{className:na,style:{visibility:M.disallow.timestamp?"hidden":"visible"},children:[(0,f.jsx)(He.c,{className:Vt,checked:w,type:"checkbox",id:"ewg-timestamp",onChange:e=>{const t=e.currentTarget.checked;w!==t&&(O(!0),_(t))},"data-testid":"timestamp-checkbox"}),(0,f.jsx)("label",{htmlFor:"ewg-timestamp",children:d.Ru.get("ewg.start-at")}),(0,f.jsx)("input",{className:j()(qt,Pt),disabled:!w,type:"text",defaultValue:et(T.toString()).humanString,ref:G,onBlur:q,onKeyUp:e=>{"Enter"===e.key&&q()}})]}),(0,f.jsxs)("div",{className:Gt,children:[(0,f.jsx)(He.c,{className:Vt,checked:L,type:"checkbox",id:"ewg-showcode",onChange:e=>{const t=e.currentTarget.checked;D(t)}}),(0,f.jsx)("label",{htmlFor:"ewg-showcode",children:d.Ru.get("ewg.showcode")}),(0,f.jsx)(c.$,{className:Wt,size:"small",onClick:()=>{(0,It.l)($),U(d.Ru.get("ewg.copied")),setTimeout(()=>U(d.Ru.get("ewg.copy")),5e3)},children:P})]})]})]})]}),(0,f.jsx)("section",{className:j()(Ot,{[Lt]:L}),children:(0,f.jsx)("pre",{className:Dt,"data-testid":"iframe-code",children:$})})]})},pa=()=>{const e=(0,r.useContext)(qe.Fx);return e.uri?(0,f.jsx)(ga,{...e}):null},ha=()=>{const e=(0,s.wA)(),t=(0,he.g)(),{isOpen:a}=(0,s.d4)(({ui:e})=>e.explicitContentDialog),n=(0,r.useCallback)(()=>{e((0,ae.wn)())},[e]),i=(0,r.useCallback)(()=>{t("/preferences"),e((0,ae.wn)())},[e,t]);return(0,f.jsx)(pe.T,{isOpen:a,onClose:n,onConfirm:i,"aria-label":"explicit-content-dialog",titleText:d.Ru.get("explicit-content.dialog.title"),descriptionText:d.Ru.get("explicit-content.dialog.description"),confirmText:d.Ru.get("explicit-content.dialog.confirm"),cancelText:d.Ru.get("explicit-content.dialog.cancel")})};var ba=a(8362),ya=a(47253),xa=a(50453),Ra=a(78065),fa=a(3877),Ea=a(25889),va=a(8427),ka=a(42975),Ca=a(80850),ja=a(81144),Sa=a(40845),Na=a(75676),wa=a(85969),_a=a(6445),Ta=a(8476),Ia=a(91645);const Aa=()=>{const e=(0,he.g)(),t=(0,s.wA)(),a=(0,me.zy)(),r=(0,s.d4)(e=>e.ui.history.canGoBack),n=(0,s.d4)(e=>e.ui.history.canGoForward),{createPlaylist:i}=(0,Sa.A)(),{createFolder:o}=(0,be.Z)(),{openURL:l,openURLWithSessionTransfer:c}=(0,wa.L)(),u=(0,fa.l)(),{spec:m,logger:g}=(0,Ia.r)(ba.r,{data:{uri:(0,ge.o_h)(a.pathname)?.toURI()??""},parentAbsoluteLocation:{locations:[]}});return(0,Ca.x)(ka.W.CREATE_NEW_PLAYLIST,async()=>{await i()}),(0,Ca.x)(ka.W.CREATE_NEW_FOLDER,async()=>{await o(d.Ru.get("playlist.default_folder_name"),{before:"start"})}),(0,Ca.x)(ka.W.BROWSE_BACKWARD,()=>{r&&e(-1)}),(0,Ca.x)(ka.W.BROWSE_FORWARD,()=>{n&&e(1)}),(0,Ca.x)(ka.W.LOGOUT,()=>{t((0,Na.wH)())}),(0,Ca.x)(ka.W.SHOW_ABOUT,()=>{t((0,ya.Uu)())}),(0,Ca.x)(ka.W.SHOW_PREFERENCES,()=>{e("/preferences")}),(0,Ca.x)(ka.W.SHOW_ACCOUNT,()=>{c("https://spotify.com/account/overview/")}),(0,Ca.x)(ka.W.SHOW_COMMUNITY,()=>{c("https://community.spotify.com/")}),(0,Ca.x)(ka.W.SHOW_HELP,()=>{c("https://support.spotify.com/")}),(0,Ca.x)(ka.W.SHOW_LICENSES,()=>{t((0,xa.FS)())}),(0,Ca.x)(ka.W.SHOW_LICENSING_INFORMATION,()=>{l("https://www.spotify.com/int/legal/licensing-info/")}),(0,Ca.x)(ka.W.SHOW_SCTA_INFORMATION,()=>{l("https://www.spotify.com/int/legal/specified-commercial-transactions")}),(0,Ca.x)(ka.W.SHOW_REPORT_ISSUE,()=>{t((0,Ea.ur)())}),(0,Ca.x)(ka.W.ENTER_FULLSCREEN,()=>{g.logInteraction(m.fullscreenButtonFactory().hitUiReveal()),t((0,ae.Kk)())}),(0,Ca.x)(ka.W.LEAVE_FULLSCREEN,()=>{g.logInteraction(m.fullscreenButtonFactory().hitUiHide()),t((0,ae.DH)())}),(0,Ca.x)(ka.W.ENTER_CINEMA_MODE,()=>{u(Ra.z.NOW_PLAYING_VIEW)}),(0,Ca.x)(ka.W.LEAVE_CINEMA_MODE,()=>{u(Ra.z.CLOSED)}),(0,Ca.x)(ka.W.SET_PLATFORM_EMULATION_AUTO,()=>{(0,va.Om)((0,_a.My)(),(0,Ta.D)())}),(0,Ca.x)(ka.W.SET_PLATFORM_EMULATION_MACOS,()=>{(0,va.Om)((0,_a.My)(),ja.f.macOS)}),(0,Ca.x)(ka.W.SET_PLATFORM_EMULATION_WINDOWS,()=>{(0,va.Om)((0,_a.My)(),ja.f.Windows)}),(0,Ca.x)(ka.W.SET_PLATFORM_EMULATION_LINUX,()=>{(0,va.Om)((0,_a.My)(),ja.f.Linux)}),null};var Oa=a(82767);const La="_ksNeQdIfh69MzKgPq3F",Da="OUuKzaPe7FrfjtDAWGFR",Pa="C_yTGbjJppg69uJ7xdTl",Ua="iRYCRh3c0FTiU9pj4n53",Ma=r.memo(function({playlistUri:e}){const t=(0,s.wA)(),a=(0,he.g)(),[n,i]=(0,xe.A)(e),l=(0,s.d4)(se.Ht).user,u=(0,Re.J)(e),{removeMember:g}=(0,Oa.x)(e),p=u?.permissions?.isPrivate,h=u?.canAdd,b=(0,r.useCallback)(()=>{l?.id&&(n&&p&&i(!1),g(l?.id),t((0,ae.mE)()),a("/"))},[l?.id,n,p,g,t,a,i]),y=(0,r.useCallback)(()=>{t((0,ae.mE)())},[t]),x=d.Ru.get("leave-playlist.dialog.leave");let R=d.Ru.get("leave-playlist.dialog.private-description");return p||(R=h?d.Ru.get("leave-playlist.dialog.public-contributor-description"):d.Ru.get("leave-playlist.dialog.public-listener-description")),(0,f.jsx)(m.M,{animated:!0,onClose:y,"aria-label":x,isOpen:!0,children:(0,f.jsxs)("div",{className:La,children:[(0,f.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:Da,children:d.Ru.get("leave-playlist.dialog.title")}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",className:Pa,paddingBottom:te.lT,children:R}),(0,f.jsxs)("div",{className:j()("encore-light-theme",Ua),children:[(0,f.jsx)(k.H,{onClick:y,children:d.Ru.get("leave-playlist.dialog.cancel")}),(0,f.jsx)(c.$,{onClick:b,children:x})]})]})})}),Ba=r.memo(function(){const{isOpen:e,playlistUri:t}=(0,s.d4)(e=>e.ui.leavePlaylistDialog);return t&&e?(0,f.jsx)(Ma,{playlistUri:t}):null});var Fa=a(73397),Ga=a(492),Wa=a(60329),Va=a(67641),za=a(98117),Ha=a(36729),Ka=a(60257);const qa="KxZuRWwvvQRan0Wuhm5_",Ya="XkNQppIEWVqy6d6c9ygg",Ja=()=>{const e=(0,s.wA)(),t=(0,he.g)(),a=(0,Ka.s)(),r=(0,Va.j)(),{isOpen:n}=(0,s.d4)(e=>e.ui.learnMorePersonalizedRecommendationsModal),i=()=>{e(Ha.r8.actions.close()),a.logInteraction(r.cancelButtonFactory().hitUiHide())};return(0,f.jsx)(m.M,{isOpen:n,onClose:i,"aria-label":d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-header"),animated:!0,children:(0,f.jsx)(Fa.Q,{className:qa,dialogTitle:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-header"),"aria-label":d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-header"),body:(0,f.jsxs)("div",{className:Ya,children:[(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"p",children:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-body")}),(0,f.jsx)(o.E,{variant:"bodySmallBold",semanticColor:"textBase",as:"h2",children:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-body-missing-features-intro")}),(0,f.jsxs)(Ga.b,{as:"ul",children:[(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-1")}),(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-2")}),(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-3")})]}),(0,f.jsx)(o.E,{variant:"bodySmallBold",semanticColor:"textBase",as:"h2",children:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-body-persistent-features-intro")}),(0,f.jsx)(Ga.b,{condensed:!0,as:"ul",children:(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-persistent-features-1")})})]}),footer:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.H,{onClick:i,size:"small",condensed:!0,children:d.Ru.get("web-player.settings.personalized-recommendations.modal-cancel")}),(0,f.jsx)(c.$,{onClick:()=>{t(`/preferences?highlight=${za.a.DSA}`),e(Ha.r8.actions.close()),a.logInteraction(r.goToSettingsButtonFactory().hitUiNavigate({destination:"/preferences"}))},size:"small",colorSet:"invertedLight",children:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-confirm")})]}),legal:(0,f.jsx)(o.E,{variant:"marginal",semanticColor:"textBase",as:"p",children:d.Ru.get("web-player.settings.personalized-recommendations-turned-off.modal-disclaimer")})})})};var Qa=a(97323);const Za=()=>{const e=(0,s.wA)(),t=(0,Ka.s)(),a=(0,Qa.H)(),{isOpen:r,onConfirm:n}=(0,s.d4)(e=>e.ui.turnOffPersonalizedRecommendationsModal),i=()=>{e(Ha.UU.actions.close()),t.logInteraction(a.cancelButtonFactory().hitUiHide())};return(0,f.jsx)(m.M,{isOpen:r,onClose:i,"aria-label":d.Ru.get("web-player.settings.personalized-recommendations.modal-header"),animated:!0,children:(0,f.jsx)(Fa.Q,{className:qa,dialogTitle:d.Ru.get("web-player.settings.personalized-recommendations.modal-header"),"aria-label":d.Ru.get("web-player.settings.personalized-recommendations.modal-header"),body:(0,f.jsxs)("div",{className:Ya,children:[(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"p",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body")}),(0,f.jsx)(o.E,{variant:"bodySmallBold",semanticColor:"textBase",as:"h2",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-intro")}),(0,f.jsxs)(Ga.b,{as:"ul",children:[(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-1")}),(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-2")}),(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-missing-features-3")})]}),(0,f.jsx)(o.E,{variant:"bodySmallBold",semanticColor:"textBase",as:"h2",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-persistent-features-intro")}),(0,f.jsx)(Ga.b,{condensed:!0,as:"ul",children:(0,f.jsx)(Wa.K,{condensed:!0,semanticColor:"textSubdued",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-body-persistent-features-1")})})]}),footer:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.H,{onClick:i,size:"small",condensed:!0,children:d.Ru.get("web-player.settings.personalized-recommendations.modal-cancel")}),(0,f.jsx)(c.$,{onClick:()=>{n(),e(Ha.UU.actions.close()),t.logInteraction(a.turnOffPersonalizedRecommendationsButtonFactory().hitSettingDisable())},size:"small",colorSet:"invertedLight",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-confirm")})]}),legal:(0,f.jsx)(o.E,{variant:"marginal",semanticColor:"textBase",as:"p",children:d.Ru.get("web-player.settings.personalized-recommendations.modal-delay-disclaimer")})})})};var $a=a(44872),Xa=a(62960),er=a(79657),tr=a(79444),ar=a(47116),rr=a(82226),sr=a(83130),nr=a(37528),ir=a(26460),or=a(43285),lr=a(18102),cr=a(82571),dr=a(47760),ur=a(43289),mr=a(64300),gr=a(74690),pr=a(48564);const hr="main-playlistEditDetailsModal-container",br="main-playlistEditDetailsModal-content",yr="main-playlistEditDetailsModal-header",xr="main-playlistEditDetailsModal-closeBtn",Rr="main-playlistEditDetailsModal-albumCover",fr="GTazggHRuOwJbikvpTyQ",Er="main-playlistEditDetailsModal-imageChangeButton",vr="main-playlistEditDetailsModal-imageDropDownContainer",kr="main-playlistEditDetailsModal-imageDropDownButton",Cr="main-playlistEditDetailsModal-textElement",jr="VcKIsPnpIrSDBRUmCFMd",Sr="jzoH3Pak0hOXLgRJiXmG",Nr="main-playlistEditDetailsModal-title",wr="main-playlistEditDetailsModal-textElementLabel",_r="main-playlistEditDetailsModal-description",Tr="main-playlistEditDetailsModal-titleInput",Ir="QcK20gdyHiIeIE6upzVg",Ar="main-playlistEditDetailsModal-descriptionTextarea",Or="main-playlistEditDetailsModal-save",Lr="main-playlistEditDetailsModal-disclaimer",Dr="main-playlistEditDetailsModal-titleCharacterCounter",Pr="main-playlistEditDetailsModal-descriptionCharacterCounter",Ur="FbOdXp9kopDxCbX0OW2o",Mr=({openImagePicker:e,onRemoveImage:t,spec:a,logger:s})=>{const n=(0,r.useCallback)(()=>{s.logInteraction(a.changeImageFactory().hitOpenImagePicker()),e()},[s,a,e]),i=(0,r.useCallback)(()=>{s.logInteraction(a.removeImageFactory().hitUiHide()),t()},[s,a,t]),o=(0,r.useCallback)(()=>{s.logInteraction(a.hitUiReveal())},[s,a]);return(0,f.jsx)("div",{className:vr,children:(0,f.jsx)(mr.b,{menu:(0,f.jsxs)(gr.W,{children:[(0,f.jsx)(pr.D,{role:"menuitem",onClick:n,leadingIcon:(0,f.jsx)(cr.d,{semanticColor:"textSubdued",size:"small"}),children:d.Ru.get("playlist.edit-details.change-photo")}),(0,f.jsx)(pr.D,{role:"menuitem",onClick:i,leadingIcon:(0,f.jsx)(dr.x,{semanticColor:"textSubdued",size:"small"}),children:d.Ru.get("playlist.edit-details.remove-photo")})]}),onShow:o,children:(0,f.jsxs)("button",{className:kr,type:"button",children:[(0,f.jsx)(ur.x,{size:"small","aria-hidden":"true"}),(0,f.jsx)("span",{className:"hidden-visually",children:d.Ru.get("edit_photo")})]})})})};var Br=a(2002);const Fr=({onClick:e})=>(0,f.jsx)("button",{title:"Insert link",className:Ur,onClick:e,children:(0,f.jsx)(Br.b,{size:"small","aria-hidden":"true"})});var Gr=a(37691),Wr=a.n(Gr),Vr=a(12536),zr=a(63858);const Hr=(0,r.forwardRef)(function({autoFocus:e,handleOnChange:t,playlistDescription:a,maxNumCharacters:s=300},n){const i=(0,r.useMemo)(()=>`text-input-${(0,zr.Yu)(8)}`,[]),l=s-20,[c,u]=(0,r.useState)(!1),m=Wr()(a).length;return(0,r.useEffect)(()=>{e&&"function"!=typeof n&&n?.current?.select()},[e,n]),(0,f.jsxs)("div",{className:_r,children:[(0,f.jsx)(o.E,{htmlFor:i,as:"label",variant:"marginalBold",className:wr,children:d.Ru.get("playlist.edit-details.description-label")}),(0,f.jsx)("textarea",{ref:n,"data-testid":"playlist-edit-details-description-input",autoFocus:e,className:j()(Cr,Ar,{[Sr]:c}),onChange:e=>{const a=t(Wr()(e.target.value).slice(0,s).join(""));u(!!a)},placeholder:d.Ru.get("playlist.edit-details.description-placeholder"),value:a}),(0,f.jsx)(Vr.c,{className:Pr,maxCharacters:s,usedCharacters:m,isVisible:m>=l})]})});var Kr=function(e){return e.CONTAINS_NEW_LINE="CONTAINS_NEW_LINE",e.CONTAINS_HTML="CONTAINS_HTML",e.SAVE_WARNING="SAVE_WARNING",e.OFFLINE_WARNING="OFFLINE_WARNING",e.FILE_TOO_BIG="FILE_TOO_BIG",e.IMAGE_TOO_SMALL="IMAGE_TOO_SMALL",e.IMAGE_TOO_BIG="IMAGE_TOO_BIG",e.IMAGE_TYPE_NOT_SUPPORTED="IMAGE_TYPE_NOT_SUPPORTED",e.IMAGE_FILE_UPLOAD_FAILED="IMAGE_FILE_UPLOAD_FAILED",e.NAME_REQUIRED="NAME_REQUIRED",e.UPDATE_DETAILS_FAILED="UPDATE_DETAILS_FAILED",e.IMAGE_INVALID_JPG="IMAGE_INVALID_JPG",e}(Kr||{});const qr={type:"info",code:Kr.CONTAINS_NEW_LINE,get message(){return d.Ru.get("playlist.edit-details.error.description-breaks")}},Yr={type:"info",code:Kr.CONTAINS_HTML,get message(){return d.Ru.get("playlist.edit-details.error.invalid-html")}},Jr={type:"info",code:Kr.SAVE_WARNING,get message(){return d.Ru.get("playlist.edit-details.error.unsaved-changes")}},Qr={type:"info",code:Kr.OFFLINE_WARNING,get message(){return d.Ru.get("playlist.edit-details.error.no-internet")}},Zr={type:"error",code:Kr.FILE_TOO_BIG,get message(){return d.Ru.get("playlist.edit-details.error.file-size-exceeded",10)}},$r={type:"error",code:Kr.IMAGE_TOO_SMALL,get message(){return d.Ru.get("playlist.edit-details.error.too-small",300,300)}},Xr={type:"error",code:Kr.IMAGE_TOO_BIG,get message(){return d.Ru.get("playlist.edit-details.error.too-big",1e4,1e4)}},es={type:"error",code:Kr.IMAGE_TYPE_NOT_SUPPORTED,get message(){return d.Ru.get("playlist.edit-details.error.image-type-not-supported")}},ts={type:"error",code:Kr.IMAGE_FILE_UPLOAD_FAILED,get message(){return d.Ru.get("playlist.edit-details.error.file-upload-failed")}},as={type:"error",code:Kr.NAME_REQUIRED,get message(){return d.Ru.get("playlist.edit-details.error.missing-name")}},rs={type:"error",code:Kr.UPDATE_DETAILS_FAILED,get message(){return d.Ru.get("playlist.edit-details.error.failed-to-save")}},ss=({isOpen:e,onConfirm:t,onClose:a,playlistName:r,hasPrompt:s})=>{if(!e)return null;const n=d.Ru.get("playlist.edit-details.private-confirmation.title",{playlistName:r}),i=s?d.Ru.get("playlist.edit-details.private-confirmation.description-with-prompt"):d.Ru.get("playlist.edit-details.private-confirmation.description");return(0,f.jsx)(pe.T,{isOpen:!0,titleText:n,descriptionText:i,confirmText:d.Ru.get("playlist.edit-details.private-confirmation.confirm"),cancelText:d.Ru.get("playlist.edit-details.private-confirmation.cancel"),onConfirm:t,onClose:a,"aria-label":n})},ns=({autoFocus:e,handleOnChange:t,maxNumCharacters:a=100,playlistName:s,onSubmit:n})=>{const[i,l]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>`text-input-${(0,zr.Yu)(8)}`,[]),u=a-10,m=Wr()(s).length,g=m>=u,p=(0,r.useRef)(null);return(0,r.useEffect)(()=>{e&&p.current?.select()},[e]),(0,f.jsxs)("div",{className:Nr,children:[(0,f.jsx)(o.E,{as:"label",htmlFor:c,variant:"marginalBold",className:wr,children:d.Ru.get("playlist.edit-details.name-label")}),(0,f.jsx)("input",{"data-testid":"playlist-edit-details-name-input",id:c,autoFocus:e,ref:p,type:"text",className:j()(Cr,Tr,{[Ir]:g,[jr]:i}),onKeyDown:e=>{"Enter"===e.key&&n()},onChange:e=>{const r=t(Wr()(e.target.value).slice(0,a).join(""));l(!!r)},placeholder:d.Ru.get("playlist.edit-details.name-placeholder"),value:s}),(0,f.jsx)(Vr.c,{isVisible:g,maxCharacters:a,usedCharacters:m,className:Dr})]})};var is=a(90970);const os={name:"",description:"",image:void 0,loading:!1,message:null,hasWarnedAboutUnsavedChanges:!1};function ls(e){return{type:"setPlaylistDescription",data:e}}function cs(e){return{type:"setLoading",data:e}}function ds(e){return{type:"setMessage",data:e}}function us(e,t){switch(t.type){case"setImageData":return{...e,loading:!1,image:{width:is.B.SMALL,height:is.B.SMALL,url:t.data}};case"removeImage":return{...e,loading:!1,imageToken:null,image:void 0};case"setImageToken":return{...e,imageToken:t.data};case"setPlaylistName":return{...e,name:t.data};case"setPlaylistDescription":return{...e,description:t.data};case"setLoading":return{...e,loading:t.data,message:null};case"setHasWarnedAboutUnsavedChanges":return{...e,hasWarnedAboutUnsavedChanges:t.data};case"setMessage":return{...e,loading:!1,message:t.data};case"reset":return{...os,name:t.data.name,description:t.data.description,image:t.data.image};default:return e}}var ms=a(81694);const gs=/[\b\f\n\r\t\v\0]/,ps=/<[bi]/i,hs=({isOpen:e,isImagePickerOpen:t,focusedElement:a,name:n,description:i,image:u,uri:m,onClose:g,canEditImage:p=!0,canEditPrivacy:h=!1,isPrivate:b=!1,hasPrompt:y=!1})=>{i=(e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value})(i);const{uploadImage:x,updateDetails:R,setPrivateState:E}=(0,Oa.x)(m),[v,k]=function({name:e,description:t,image:a}){const[s,n]=(0,r.useReducer)(us,{...os,name:e,description:t,image:a});return[s,n]}({name:n,description:i,image:u}),[C,j]=(0,or.p)(),S=!(0,ms.n)(),[N,w]=(0,r.useState)(b),[_,T]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),D=(0,r.useRef)(null),P=(0,s.d4)(e=>"1"===e.session.productState?.["playlist-annotations-markup"]),{spec:U,logger:M}=(0,Ia.r)(ar.o,{}),B=(0,r.useMemo)(()=>U.coverArtFactory().seeMoreButtonFactory(),[U]);(0,r.useEffect)(()=>{k(ds(S?Qr:null))},[S,k]),(0,r.useEffect)(()=>{t&&j()},[t,j]);const F=(0,r.useCallback)(()=>{k({type:"removeImage"})},[k]),G=(0,r.useCallback)((e=!1)=>{const t=null===v.imageToken,a=v.imageToken;!(n!==v.name||i!==v.description||a||t)||v.hasWarnedAboutUnsavedChanges||e?(k(function(e){return{type:"reset",data:e}}({name:n,description:i,image:u})),M.logInteraction(U.closeButtonFactory().hitUiHide()),g()):(k(ds(Jr)),k({type:"setHasWarnedAboutUnsavedChanges",data:!0}),M.logInteraction(U.closeButtonFactory().hitUiReveal()))},[v.imageToken,v.name,v.description,v.hasWarnedAboutUnsavedChanges,n,i,u,k,M,U,g]);const W=(0,r.useCallback)(async()=>{const e={};n!==v.name&&(e.name=v.name),i!==v.description&&(e.description=v.description),v.imageToken?e.imageUploadToken=await v.imageToken:null===v.imageToken&&(e.imageUploadToken=null),e.image=v.image,await R(e)},[n,v.name,i,v.description,v.imageToken,v.image,R]),V=(0,r.useCallback)(async()=>{try{h&&N!==b&&E(N),await W(),k(cs(!1));G(!0)}catch{k(ds(rs))}},[h,N,b,E,W,k,G]);async function z(){v.loading||(0!==v.name.length?(k(cs(!0)),h&&N!==b&&!0===N?T(!0):(M.logInteraction(U.saveButtonFactory().hitUiHide()),V())):k(ds(as)))}const H=(0,r.useCallback)(()=>{T(!1),V()},[V]),K=(0,r.useCallback)(()=>{k(cs(!1)),T(!1)},[k]),q=(0,r.useCallback)(()=>{M.logInteraction(U.coverArtFactory().hitOpenImagePicker()),j()},[U,M,j]),Y=(0,r.useCallback)(()=>{const e=N?U.permissionsButtonFactory().hitMakePlaylistPublic({playlistToBeMadePublic:m}):U.permissionsButtonFactory().hitMakePlaylistPrivate({playlistToBeMadePrivate:m});M.logInteraction(e),w(!N)},[N,M,U,m]),J=(0,f.jsx)(sr.b,{loading:"eager",name:v.name,images:v.image?[v.image]:[],placeholderType:"playlist"});return(0,f.jsxs)(nr.A,{isOpen:e,onRequestClose:()=>{G()},contentLabel:d.Ru.get("playlist.edit-details.title"),children:[(0,f.jsx)(ss,{isOpen:_,onConfirm:H,onClose:K,playlistName:v.name,hasPrompt:y}),(0,f.jsxs)("div",{"data-testid":"playlist-edit-details-modal",className:hr,children:[(0,f.jsxs)("div",{className:yr,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("playlist.edit-details.title")}),(0,f.jsx)("button",{className:xr,onClick:()=>{G()},children:(0,f.jsx)(l.M,{size:"small","aria-label":d.Ru.get("close")})})]}),v.message&&(0,f.jsx)(lr.z,{isErrorMessage:"error"===v.message.type,message:v.message.message}),P?(0,f.jsx)(Fr,{onClick:function(){if(!D.current)return;const{selectionStart:e,selectionEnd:t}=D.current,a=v.description.substring(e,t);let r=a;const s=!!(0,ge.o_h)(r);!r.startsWith("http://")&&!r.startsWith("https://")&&!s&&(r=`https://${r}`),M.logInteraction(U.addLinkButtonFactory().hitSetPlaylistDescription({playlistToChangeDescriptionOn:m})),k(ls([v.description.substring(0,e),`<a href="${r}">${a}</a>`,v.description.substring(t)].join("")))}}):null,(0,f.jsxs)("div",{className:br,children:[p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ir.u,{isOpen:C,minImageWidth:300,minImageHeight:300,maxFileSizeMB:10,onChange:async function(e){if(!e)return;const{imageFile:t,imageDataUrl:a}=e;if(k(ds(null)),k({type:"setImageData",data:a}),t)try{const e=x(t);k({type:"setImageToken",data:e}),await e}catch{k(ds(ts))}},onError:e=>{e===ir.i.FILE_TOO_BIG?k(ds(Zr)):e===ir.i.IMAGE_TOO_SMALL?k(ds($r)):e===ir.i.IMAGE_TOO_BIG?k(ds(Xr)):e===ir.i.IMAGE_TYPE_NOT_SUPPORTED&&k(ds(es))}}),(0,f.jsxs)("div",{className:Rr,children:[J,(0,f.jsx)("div",{className:Er,children:(0,f.jsx)(rr.a,{overlay:!!v.image,onClick:q})}),(0,f.jsx)(Mr,{onRemoveImage:F,openImagePicker:j,spec:B,logger:M}),!!v.imageToken&&v.loading&&(0,f.jsx)("div",{className:fr,children:(0,f.jsx)(ze.U,{})})]})]}):(0,f.jsx)("div",{className:Rr,children:J}),(0,f.jsx)(ns,{autoFocus:a===$a.NV.TITLE,handleOnChange:e=>(I||(A(!0),M.logInteraction(U.nameFieldFactory().keyStrokeRenamePlaylist({playlistToBeRenamed:m}))),k({type:"setPlaylistName",data:e}),0===e.length?(k(ds(as)),as):(k(ds(null)),null)),playlistName:v.name,onSubmit:z}),(0,f.jsx)(Hr,{ref:D,autoFocus:a===$a.NV.DESCRIPTION,handleOnChange:e=>{O||(L(!0),M.logInteraction(U.descriptionFieldFactory().keyStrokeSetPlaylistDescription({playlistToChangeDescriptionOn:m})));let t=e;return ps.test(t)?(k(ds(Yr)),Yr):gs.test(t)?(t=(e||"").replace(gs,""),k(ds(qr)),qr):(k(ls(t)),null)},playlistDescription:v.description}),h&&(0,f.jsx)("div",{children:(0,f.jsx)(Xa.n,{iconLeading:N?er.d:tr.y,size:"small",onClick:Y,children:N?d.Ru.get("playlist.edit-details.make-public"):d.Ru.get("playlist.edit-details.make-private")})}),(0,f.jsx)("div",{className:Or,children:(0,f.jsx)(c.$,{colorSet:"invertedLight",onClick:z,disabled:v.loading,"data-testid":"playlist-edit-details-save-button",children:d.Ru.get("save")})}),p&&(0,f.jsx)(o.E,{as:"p",variant:"marginalBold",className:Lr,children:d.Ru.get("image-upload.legal-disclaimer")})]})]})]})},bs=()=>{const{isOpen:e,isImagePickerOpen:t,playlistDetails:a,focusedElement:s}=(0,r.useContext)($a.iE),n=(0,r.useContext)($a.$$),i=(0,r.useCallback)(()=>{n({type:"close"})},[n]),{name:o,description:l,uri:c,image:d,canEditImage:u,canEditPrivacy:m,isPrivate:g,hasPrompt:p}=a;return e?(0,f.jsx)(hs,{isOpen:e,isImagePickerOpen:t,onClose:i,focusedElement:s,uri:c,name:o,description:l,image:d,canEditImage:u,canEditPrivacy:m,isPrivate:g,hasPrompt:p}):null};var ys=a(78176),xs=a(66054);const Rs=new Map;Rs.set("ad","â‚¬ 9,99"),Rs.set("ar","$ 69,00"),Rs.set("at","â‚¬ 9,99"),Rs.set("au","$11.99"),Rs.set("be","â‚¬ 9,99"),Rs.set("bg","4.99 EUR"),Rs.set("bo","5.99 USD"),Rs.set("br","R$ 16,90"),Rs.set("ca","9.99 CAD"),Rs.set("ch","Fr. 12.95"),Rs.set("cl","$ 3.490,00"),Rs.set("co","$ 14.900,00"),Rs.set("cr","5.99 USD"),Rs.set("cy","6.99 EUR"),Rs.set("cz","5.99 EUR"),Rs.set("de","9,99 â‚¬"),Rs.set("dk","kr 99,00"),Rs.set("do","5.99 USD"),Rs.set("ec","5.99 USD"),Rs.set("ee","6.99 EUR"),Rs.set("es","9,99 â‚¬"),Rs.set("fi","9,99 â‚¬"),Rs.set("fr","9,99 â‚¬"),Rs.set("uk","Â£9.99"),Rs.set("gr","6.99 EUR"),Rs.set("gt","5.99 USD"),Rs.set("hk","HK$58.00"),Rs.set("hn","5.99 USD"),Rs.set("hu","4.99 EUR"),Rs.set("id","Rp 49.990"),Rs.set("ie","â‚¬9.99"),Rs.set("is","9.99 EUR"),Rs.set("it","â‚¬ 9,99"),Rs.set("kr","â‚©10,900"),Rs.set("li","12.95 CHF"),Rs.set("lt","6.99 EUR"),Rs.set("lu","9.99 EUR"),Rs.set("lv","6.99 EUR"),Rs.set("mc","9.99 EUR"),Rs.set("mt","6.99 EUR"),Rs.set("mx","$ 99.00"),Rs.set("my","RM14.90"),Rs.set("ni","5.99 USD"),Rs.set("nl","â‚¬9,99"),Rs.set("no","kr109,00"),Rs.set("nz","$14.99"),Rs.set("pa","5.99 USD"),Rs.set("pe","S/ 18.90"),Rs.set("ph","â‚±129"),Rs.set("pl","19,99 zÅ‚"),Rs.set("pt","6.99 EUR"),Rs.set("py","5.99 USD"),Rs.set("se","99,00 kr"),Rs.set("sg","S$9.90"),Rs.set("sk","5.99 EUR"),Rs.set("sv","5.99 USD"),Rs.set("th","à¸¿129.00"),Rs.set("tr","13,99 TL"),Rs.set("tw","NT$149.00"),Rs.set("us","$9.99"),Rs.set("uy","5.99 USD");const fs=new Map;fs.set("ad","â‚¬ 0,00"),fs.set("ar","$ 0,00"),fs.set("at","â‚¬ 0,00"),fs.set("au","$0.00"),fs.set("be","â‚¬ 0,00"),fs.set("bg","0.00 EUR"),fs.set("bo","0.00 USD"),fs.set("br","R$ 0,00"),fs.set("ca","0.00 CAD"),fs.set("ch","Fr. 0.00"),fs.set("cl","$ 0,00"),fs.set("co","$ 0,00"),fs.set("cr","0.00 USD"),fs.set("cy","0.00 EUR"),fs.set("cz","0.00 EUR"),fs.set("de","0,00 â‚¬"),fs.set("dk","kr 0,00"),fs.set("do","0.00 USD"),fs.set("ec","0.00 USD"),fs.set("ee","0.00 EUR"),fs.set("es","0,00 â‚¬"),fs.set("fi","0,00 â‚¬"),fs.set("fr","0,00 â‚¬"),fs.set("uk","Â£0.00"),fs.set("gr","0.00 EUR"),fs.set("gt","0.00 USD"),fs.set("hk","HK$0.00"),fs.set("hn","0.00 USD"),fs.set("hu","0.00 EUR"),fs.set("id","Rp 0.00"),fs.set("ie","â‚¬0.00"),fs.set("is","0.00 EUR"),fs.set("it","â‚¬ 0,00"),fs.set("li","0.00 CHF"),fs.set("lt","0.00 EUR"),fs.set("lu","0.00 EUR"),fs.set("lv","0.00 EUR"),fs.set("mc","0.00 EUR"),fs.set("mt","0.00 EUR"),fs.set("mx","$ 0.00"),fs.set("my","RM0.00"),fs.set("ni","0.00 USD"),fs.set("nl","â‚¬0,00"),fs.set("no","kr0,00"),fs.set("nz","$0.00"),fs.set("pa","0.00 USD"),fs.set("pe","S/ 0.00"),fs.set("ph","â‚±0.00"),fs.set("pl","0,00 zÅ‚"),fs.set("pt","0.00 EUR"),fs.set("py","0.00 USD"),fs.set("se","0,00 kr"),fs.set("sg","S$0.00"),fs.set("sk","0.00 EUR"),fs.set("sv","0.00 USD"),fs.set("th","à¸¿0.00"),fs.set("tr","0,00 TL"),fs.set("tw","NT$0.00"),fs.set("us","$0.00"),fs.set("uy","0.00 USD");var Es=a(97159),vs=a(55517);const ks="VDPqeivPhO7yeX8z_bPf",Cs="EzuUJjoj3xjwun_s7pbV",js="jcgD3k4iEMU1rsQnHEqC",Ss="YXNj8Ui_8jeIchwYFUAc",Ns=(0,r.memo)(function(){const e=(0,s.wA)(),t=(0,s.d4)(e=>e.ui.premiumDialog.isOpen),a=(0,s.d4)(e=>{const t=(e=>{const t=e.toLowerCase();return{premiumPrice:Rs.has(t)?Rs.get(t):"99,00 kr",freePrice:fs.has(t)?fs.get(t):"0,00 kr"}})((0,Es.JJ)(e));return t.premiumPrice}),n=(0,s.d4)(Es.q),i=(0,r.useCallback)(()=>e((0,Na.wH)()),[e]),{openURLWithSessionTransfer:o}=(0,wa.L)(),{spec:l,logger:u}=(0,vs.$)(ys._,{}),m=(0,he.g)(),g=(0,xs.k)(),{url:p,isExternal:h}=g,b=(0,r.useCallback)(()=>{let e;!1===h?(m(p),e=l.upsellButtonFactory().hitUiNavigate({destination:p})):(o(p),e=l.upsellButtonFactory().hitNavigateToExternalUri({destination:p})),u.logInteraction(e)},[h,u,m,l,o,p]);return(0,f.jsx)(nr.A,{isOpen:t,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:d.Ru.get("premium.dialog.title"),children:(0,f.jsxs)("div",{className:ks,children:[(0,f.jsx)("h1",{className:Cs,children:d.Ru.get("premium.dialog.title")}),(0,f.jsx)("p",{className:js,children:d.Ru.get("premium.dialog.description",n?3:1)}),(0,f.jsx)(c.$,{colorSet:"invertedLight",onClick:b,children:d.Ru.get("premium.dialog.subscribe")}),(0,f.jsx)(k.H,{semanticColor:"textBase",onClick:i,children:d.Ru.get("user.log-out")}),(0,f.jsx)("p",{className:Ss,children:n?d.Ru.get("premium.dialog.disclaimer.noprice"):d.Ru.get("premium.dialog.disclaimer",{price:a})})]})})});var ws=a(74152),_s=a(70969),Ts=a(832),Is=a(16397),As=a(21096);const Os=(0,r.memo)(function(){const e=(0,s.wA)(),t=(0,wt.T)(),a=(0,Ts.f)(),n=(0,As._)(),{items:i}=(0,s.d4)(e=>e.ui.removeFromLibraryDialog),o=i.filter(e=>e.isPrerelease).map(e=>e.uri),l=i.filter(e=>!e.isPrerelease),c=l[0]?.uri,[u,m]=(0,xe.A)(c??""),{remove:g}=(0,_s.p)("prerelease"),p=(0,ws.o)("prerelease",o),h=(0,ge.o_h)(c??"")?.type,[b,y]=(0,r.useState)("");(0,r.useEffect)(()=>{i.length>1?y(""):(async()=>{switch(h){case ge.NQG.PRERELEASE:case ge.NQG.ALBUM:y(d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-album"));break;case ge.NQG.ARTIST:y(d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-artist"));break;case ge.NQG.AUTHOR:y(d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-author"));break;case ge.NQG.SHOW:y((0,_t.Go)(await t.getMetadata(c??""))?d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-audiobook"):d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-show"));break;case ge.NQG.PLAYLIST:case ge.NQG.PLAYLIST_V2:y(d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description-playlist"));break;default:y(d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-description"))}})()},[t,h,c,i.length]);const x=(0,r.useCallback)(()=>{e((0,ae.yh)())},[e]),R=(0,r.useCallback)(()=>{if(o.length>0&&g(...o.filter((e,t)=>p[t])),1===l.length){if(!u)return;m(!1)}else l.length>1&&(0,Is.X)(a,n,l,!1);x()},[o,l,x,g,p,u,m,a,n]);return(0,f.jsx)(pe.T,{"aria-label":`${d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-title")} ${b}`,titleText:d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-title"),descriptionText:b,onConfirm:R,onClose:x,confirmText:d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-confirm-button"),cancelText:d.Ru.get("web-player.your-library-x.feedback-remove-from-library-dialog-cancel-button"),allowHTML:!0})});var Ls=a(30107);const Ds=({name:e,onRename:t})=>{const a=(0,s.wA)(),[n,i]=(0,r.useState)(null),[u,g]=(0,r.useState)(e),[p,h]=(0,r.useState)(!1),b=Wr()(u).length,y=b>=90,x=(0,r.useCallback)(e=>{null!==e&&i(e)},[]);(0,r.useEffect)(()=>{n?.select()},[n]);const R=()=>{a((0,ae.Yk)())},E=e=>e.trim().length>0,v=()=>{E(u)?(t(u.trim()),R()):h(!0)};return(0,f.jsxs)(m.M,{"aria-label":d.Ru.get("playlist.edit-details.title"),onClose:R,isOpen:!0,"data-testid":"playlist-edit-details-modal",className:Ls.A.container,children:[(0,f.jsxs)("div",{className:Ls.A.header,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("web-player.your-library-x.rename-folder")}),(0,f.jsx)("button",{className:Ls.A.closeBtn,onClick:R,children:(0,f.jsx)(l.M,{size:"medium","aria-label":d.Ru.get("close")})})]}),(0,f.jsxs)("form",{className:Ls.A.content,onSubmit:e=>{e.preventDefault(),v()},children:[p&&(0,f.jsx)(lr.z,{isErrorMessage:!0,message:d.Ru.get("web-player.your-library-x.rename-folder-error-name-required"),className:Ls.A.infoBannerNoMargin}),(0,f.jsxs)("div",{className:Ls.A.name,children:[(0,f.jsx)("input",{id:"folder-rename-input",ref:x,type:"text",value:u,onChange:e=>(e=>{const t=Wr()(e).slice(0,100).join("");g(t),h(!E(t))})(e.target.value),onKeyDown:e=>{"Enter"===e.key&&v()},className:j()(Ls.A.textElement,Ls.A.titleInput,{[Ls.A.titleInputWithPadding]:y})}),(0,f.jsx)(Vr.c,{isVisible:y,maxCharacters:100,usedCharacters:b,className:Ls.A.titleCharacterCounter})]}),(0,f.jsx)("div",{className:Ls.A.save,children:(0,f.jsx)(c.$,{colorSet:"invertedLight",type:"submit",disabled:p,children:d.Ru.get("save")})})]})]})};var Ps=a(34022),Us=a(64426),Ms=a(94209);function Bs(){return(0,Ms.N)(Us.hQ)}var Fs=a(42168);function Gs(){const e=(e=>{const t={title:d.Ru.get("web-player.connect.device-picker.restricted-device-default-title"),body:d.Ru.get("web-player.connect.device-picker.restricted-device-default-body")};return e.reason,Fs.m.CONNECT_DEBUG,t})(Bs().getRestrictionState());return e}var Ws=a(88439);const Vs="hvYqrt0h05_HIsWivz1U",zs="CAxZeq2R9zyQFuUTxjXF",Hs=()=>{const e=(0,s.wA)(),t=(0,s.d4)(e=>e.ui.restrictionsModalState.isOpen),a=Bs().getRestrictionState(),{spec:n,logger:i,UBIFragment:l}=(0,Ia.r)(Ps.O,{data:{identifier:a.reason?.toString()||""}});(0,r.useEffect)(()=>{i.logImpression(n.impression())},[i,n]);const u=()=>{const t=n.primaryButtonFactory();i.logInteraction(t.hitUiHide()),e((0,ae.d2)())},g=(0,Ws.n)(n.getAbsoluteLocation(),n),p=Gs();return(0,f.jsxs)(m.M,{isOpen:t,onClose:u,animated:!0,"aria-label":p.title,className:j()("encore-light-theme",Vs),children:[(0,f.jsx)(o.E,{as:"h2",variant:"titleSmall",children:p.title}),(0,f.jsx)(o.E,{as:"p",className:zs,children:p.body}),(0,f.jsx)(l,{spec:n,children:(0,f.jsx)(c.$,{ref:g,onClick:u,children:d.Ru.get("web-player.connect.device-picker.restrictions-modal-ok-button")})})]})};var Ks=a(98014);function qs(){return null}var Ys=a(59861);const Js=Ks.zMY().catch(!1);function Qs(){const[e]=(0,Ys.x)("lintHtmlWithCss",Js);let t;return t=qs,(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(t,{})})}var Zs=a(7333),$s=a(2854),Xs=a(39329),en=a(34973),tn=a(33079);const an=Spicetify.GraphQL.Definitions["showItemsPlayedState"]=new at.l("showItemsPlayedState","query","4a070b9bfab2e8537a5271e6839bc3ef51501dcac8170b5fb69a98f967c5fb60",null);function rn(e,t=100){const{data:a,loading:r}=(s={uri:e,limit:t},n={staleTime:0,gcTime:18e5},(0,rt.I)(an,s,n));var s,n;const i=function(e){const t=e?.lookup?.at(0);if("PodcastOrAudiobookResponseWrapper"===t?.__typename){if("Audiobook"===t.data.__typename){const e=t.data;return"ContextChapterPage"===e.chaptersV2?.__typename&&e.chaptersV2.items.some(({entity:e})=>"Chapter"===e.data.__typename&&sn(e.data))}if("Podcast"===t.data.__typename){const e=t.data;return"ContextEpisodePage"===e.episodesV2?.__typename&&e.episodesV2.items.some(({entity:e})=>"Episode"===e.data.__typename&&sn(e.data))}}return!1}(a);return{hasUserListenedToShow:i,loading:r}}function sn(e){return"COMPLETED"===e.playedState.state||e.playedState.playPositionMilliseconds>=3e4}var nn=a(40500),on=a(79877),ln=a(87843);const cn="gJM69SPy348cM1KPSqJw",dn="q5sGK3JV6QkDrEHfwgWN",un="s6Z2jfQNq6d68FFmwNmI",mn="vTyIbYmTS6raGlmW1v0U",gn="P054eDS7uqPhz88KL2_p",pn="KZKb8ssrqYln67AhKTer",hn="AC6viq6pT7flWcoKfWNq",bn="l0awPoUNdM9SeQvcxkeV",yn="b8cHtWFIXKZnddlh2SjA",xn="tzR9XJTMPOK15t5dWiaT",Rn="ju0dd1O10ePusqVNMVKF",fn=({uri:e,rating:t,isBook:a,closeRatingModal:s})=>{const[n,i]=(0,r.useState)(t??null),{onSubmitRating:o}=function(e,t){const a=(0,wt.T)(),{enqueueSnackbar:r}=(0,on.dh)(),{spec:s,logger:n}=(0,vs.$)(ln.b,{}),{mutateAsync:i}=(0,nn.n)({mutationFn:async()=>{t&&await a.updateUserRating(e,t)},onSuccess:()=>{const a=s.submitRatingButtonFactory().hitSubmitRating({rating:t,entityUri:e});n.logInteraction(a),r(d.Ru.get("web-player.show.rating.snackbarSuccess"))},onError:()=>{r(d.Ru.get("web-player.show.rating.snackbarFailure"))}});return{onSubmitRating:i}}(e,n??0),l=null!==n&&n!==t,u=Array.from(Array(5).keys(),e=>e+1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:xn,children:u.map(e=>(0,f.jsx)(k.H,{"aria-label":a?d.Ru.get("web-player.audiobooks.rating.starAriaLabel",e):d.Ru.get("web-player.show.rating.starAriaLabel",e),className:Rn,onClick:()=>i(e),iconOnly:()=>n&&n>=e?(0,f.jsx)(Zs.j,{size:"large",semanticColor:"textBase"}):(0,f.jsx)($s.a,{size:"large"})},e))}),(0,f.jsx)(c.$,{"aria-label":d.Ru.get("web-player.show.rating.submit"),colorSet:"invertedLight",disabled:!l,onClick:()=>{n&&o(),s()},children:d.Ru.get("web-player.show.rating.submit")})]})},En=({isBook:e,onDismiss:t})=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.E,{as:"p",variant:"titleSmall",className:bn,children:e?d.Ru.get("web-player.audiobooks.rating.listenFirstTitle"):d.Ru.get("web-player.show.rating.listenFirstTitle")}),(0,f.jsx)(o.E,{as:"p",className:yn,variant:"bodyMedium",children:e?d.Ru.get("web-player.audiobooks.rating.listenFirstDescription"):d.Ru.get("web-player.show.rating.listenFirstDescription")}),(0,f.jsx)(c.$,{colorSet:"invertedLight",onClick:t,children:d.Ru.get("web-player.audiobooks.rating.ok")})]}),vn=({uri:e,isBook:t,rating:a,spec:r,logger:s,closeRatingModal:n})=>{const{hasUserListenedToShow:i,loading:o}=rn(e);return o?(0,f.jsx)(tn.m,{}):a?.canRate&&i?(0,f.jsx)(fn,{uri:e,rating:a?.rating?.rating??null,isBook:t,closeRatingModal:n}):(0,f.jsx)(En,{isBook:t,onDismiss:()=>{s.logInteraction(r.okButtonFactory().hitUiNavigateBack()),n()}})},kn=r.memo(function({uri:e,metadata:t,isOpen:a}){const r=(0,s.wA)(),n=Boolean(t&&(0,_t.Go)(t)),i=(0,yt.g)(t?.coverArt,{desiredSize:320}),{spec:c,logger:u}=(0,Ia.r)(en.e,{data:{identifier:n?Xs.$.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:Xs.$.RATINGS_AND_REVIEWS_RATINGS,uri:e}}),g=t?.rating,p=()=>{r((0,ae.Kc)())};return(0,f.jsxs)(m.M,{isOpen:a,onClose:p,className:cn,children:[(0,f.jsxs)("div",{className:un,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",className:hn,children:n?d.Ru.get("web-player.audiobooks.rating.rateAudiobook"):d.Ru.get("web-player.show.rating.header")}),(0,f.jsxs)("button",{className:mn,onClick:()=>{const e=c.closeButtonFactory().hitUiNavigateBack();u.logInteraction(e),p()},children:[(0,f.jsx)(l.M,{role:"presentation"}),(0,f.jsx)("span",{className:"hidden-visually",children:d.Ru.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,f.jsxs)("div",{className:gn,children:[(0,f.jsx)(w._,{loading:"eager",src:i?.url,className:dn}),(0,f.jsx)("div",{className:pn,children:(0,f.jsx)(vn,{uri:e,rating:g,isBook:n,closeRatingModal:p,spec:c,logger:u})})]})]})}),Cn=()=>{const e=(0,s.d4)(e=>e.ui.showRatingModalState?.metadata??null),t=(0,s.d4)(e=>e.ui.showRatingModalState?.uri??""),a=(0,s.d4)(e=>e.ui.showRatingModalState?.isOpen??!1);return a&&t&&e?(0,f.jsx)(kn,{metadata:e,uri:t,isOpen:a}):null};var jn=a(76480),Sn=a(13432),Nn=a(15991),wn=a(72612),_n=a(30675),Tn=a(50456),In=a(16859);function An(e){switch(e){case"Performers":return d.Ru.get("track-credits.performers");case"Writers":return d.Ru.get("track-credits.writers");case"Producers":return d.Ru.get("track-credits.producers");default:return e}}function On(e){switch(e){case"assistant recording engineer":return d.Ru.get("track-credits.assistant-recording-engineer");case"engineer":return d.Ru.get("track-credits.engineer");case"assistant engineer":return d.Ru.get("track-credits.assistant-engineer");case"trumpet":return d.Ru.get("track-credits.trumpet");case"guitar":return d.Ru.get("track-credits.guitar");case"composer and lyricist":return d.Ru.get("track-credits.composer-and-lyricist");case"associated performer":return d.Ru.get("track-credits.associated-performer");case"background vocals":return d.Ru.get("track-credits.background-vocals");case"bass":return d.Ru.get("track-credits.bass");case"co-producer":return d.Ru.get("track-credits.co-producer");case"additional engineer":return d.Ru.get("track-credits.additional-engineer");case"masterer":return d.Ru.get("track-credits.masterer");case"mixer":return d.Ru.get("track-credits.mixer");case"recording engineer":return d.Ru.get("track-credits.recording-engineer");case"accordion":return d.Ru.get("track-credits.accordion");case"piano":return d.Ru.get("track-credits.piano");case"organ":return d.Ru.get("track-credits.organ");case"background vocal":return d.Ru.get("track-credits.background-vocal");case"recorded by":return d.Ru.get("track-credits.recorded-by");case"mixing engineer":return d.Ru.get("track-credits.mixing-engineer");case"editor":return d.Ru.get("track-credits.editor");case"fiddle":return d.Ru.get("track-credits.fiddle");case"additional vocals":return d.Ru.get("track-credits.additional-vocals");case"violin":return d.Ru.get("track-credits.violin");case"viola":return d.Ru.get("track-credits.viola");case"percussion":return d.Ru.get("track-credits.percussion");case"mastering engineer":return d.Ru.get("track-credits.mastering-engineer");case"composer":return d.Ru.get("track-credits.composer");case"additional keyboards":return d.Ru.get("track-credits.additional-keyboards");case"mix engineer":return d.Ru.get("track-credits.mix-engineer");case"mandolin":return d.Ru.get("track-credits.mandolin");case"acoustic guitar":return d.Ru.get("track-credits.acoustic-guitar");case"keyboards":return d.Ru.get("track-credits.keyboards");case"synthesizer":return d.Ru.get("track-credits.synthesizer");case"drum programmer":return d.Ru.get("track-credits.drum-programmer");case"programmer":return d.Ru.get("track-credits.programmer");case"assistant mixer":return d.Ru.get("track-credits.assistant-mixer");case"assistant mixing engineer":return d.Ru.get("track-credits.assistant-mixing-engineer");case"digital editor":return d.Ru.get("track-credits.digital-editor");case"drums":return d.Ru.get("track-credits.drums");case"drum programming":return d.Ru.get("track-credits.drum-programming");case"conga":return d.Ru.get("track-credits.conga");case"samples":return d.Ru.get("track-credits.samples");case"audio recording engineer":return d.Ru.get("track-credits.audio-recording-engineer");case"audio additional mix engineer":return d.Ru.get("track-credits.audio-additional-mix-engineer");case"recording":return d.Ru.get("track-credits.recording");case"assistant producer":return d.Ru.get("track-credits.assistant-producer");case"writer":return d.Ru.get("track-credits.writer");case"strings":return d.Ru.get("track-credits.strings");case"music publisher":return d.Ru.get("track-credits.music-publisher");case"programming":return d.Ru.get("track-credits.programming");case"music production":return d.Ru.get("track-credits.music-production");case"background vocalist":return d.Ru.get("track-credits.background-vocalist");case"producer":return d.Ru.get("track-credits.producer");case"vocal":return d.Ru.get("track-credits.vocal");case"songwriter":return d.Ru.get("track-credits.songwriter");case"lyricist":return d.Ru.get("track-credits.lyricist");case"additional mixer":return d.Ru.get("track-credits.additional-mixer");case"upright bass":return d.Ru.get("track-credits.upright-bass");case"clapping":return d.Ru.get("track-credits.clapping");case"electric bass":return d.Ru.get("track-credits.electric-bass");case"horn arranger":return d.Ru.get("track-credits.horn-arranger");case"flugelhorn":return d.Ru.get("track-credits.flugelhorn");case"second engineer":return d.Ru.get("track-credits.second-engineer");case"rhythm guitar":return d.Ru.get("track-credits.rhythm-guitar");case"bass guitar":return d.Ru.get("track-credits.bass-guitar");case"electric guitar":return d.Ru.get("track-credits.electric-guitar");case"dobro":return d.Ru.get("track-credits.dobro");case"instruments":return d.Ru.get("track-credits.instruments");case"vocal ensemble":return d.Ru.get("track-credits.vocal-ensemble");case"recording arranger":return d.Ru.get("track-credits.recording-arranger");case"arranger":return d.Ru.get("track-credits.arranger");case"steel guitar":return d.Ru.get("track-credits.steel-guitar");case"executive producer":return d.Ru.get("track-credits.executive-producer");case"additional production":return d.Ru.get("track-credits.additional-production");case"designer":return d.Ru.get("track-credits.designer");case"assistant mix engineer":return d.Ru.get("track-credits.assistant-mix-engineer");case"studio musician":return d.Ru.get("track-credits.studio-musician");case"voice performer":return d.Ru.get("track-credits.voice-performer");case"orchestra":return d.Ru.get("track-credits.orchestra");case"chamber ensemble":return d.Ru.get("track-credits.chamber-ensemble");case"additional percussion":return d.Ru.get("track-credits.additional-percussion");case"cajon":return d.Ru.get("track-credits.cajon");case"miscellaneous production":return d.Ru.get("track-credits.miscellaneous-production");case"backing vocals":return d.Ru.get("track-credits.backing-vocals");case"pedal steel":return d.Ru.get("track-credits.pedal-steel");case"additional producer":return d.Ru.get("track-credits.additional-producer");case"keyboard arrangements":return d.Ru.get("track-credits.keyboards-arrangements");case"saxophone":return d.Ru.get("track-credits.saxophone");case"sound engineer":return d.Ru.get("track-credits.sound-engineer");case"assistant remix engineer":return d.Ru.get("track-credits.assistant-remix-engineer");case"double bass":return d.Ru.get("track-credits.double-bass");case"co-writer":return d.Ru.get("track-credits.co-writer");case"pro tools":return d.Ru.get("track-credits.pro-tools");case"tape realization":return d.Ru.get("track-credits.tape-realization");case"ambient sounds":return d.Ru.get("track-credits.ambient-sounds");case"sound effects":return d.Ru.get("track-credits.sound-effects");case"harp":return d.Ru.get("track-credits.harp");case"cymbals":return d.Ru.get("track-credits.cymbals");case"vocal engineer":return d.Ru.get("track-credits.vocal-engineer");case"mellotron":return d.Ru.get("track-credits.mellotron");case"recorder":return d.Ru.get("track-credits.recorder");case"main artist":return d.Ru.get("track-credits.main-artist");case"production":return d.Ru.get("track-credits.production");case"artist":return d.Ru.get("track-credits.artist");case"vocals":return d.Ru.get("track-credits.vocals");case"featuring":return d.Ru.get("track-credits.featuring");case"featured artist":return d.Ru.get("track-credits.featured-artist");case"work arranger":return d.Ru.get("track-credits.work-arranger");case"mixing engineers":return d.Ru.get("track-credits.mixing-engineers");case"re-mixer":return d.Ru.get("track-credits.re-mixer");case"recording producer":return d.Ru.get("track-credits.recording-producer");case"co-mixer":return d.Ru.get("track-credits.co-mixer");case"bells":return d.Ru.get("track-credits.bells");case"pro tools editing":return d.Ru.get("track-credits.pro-tools-editing");case"vibraphone":return d.Ru.get("track-credits.vibraphone");case"additional recording":return d.Ru.get("track-credits.additional-recording");case"vocal producer":return d.Ru.get("track-credits.vocal-producer");case"sitar":return d.Ru.get("track-credits.sitar");case"cello":return d.Ru.get("track-credits.cello");case"flute":return d.Ru.get("track-credits.flute");case"horn":return d.Ru.get("track-credits.horn");case"brass band":return d.Ru.get("track-credits.brass-band");case"programming and keyboards":return d.Ru.get("track-credits.programming-and-keyboards");case"all instruments":return d.Ru.get("track-credits.all-instruments");case"programmed and arranged by":return d.Ru.get("track-credits.programmed-and-arranged-by");case"additional programmer":return d.Ru.get("track-credits.additional-programmer");case"recording and mixing":return d.Ru.get("track-credits.recording-and-mixing");case"engineer and mixer":return d.Ru.get("track-credits.engineer-and-mixer");case"vocal arranger":return d.Ru.get("track-credits.vocal-arranger");case"income participant":return d.Ru.get("track-credits.income-participant");default:return e}}var Ln=a(59867),Dn=a(38895);const Pn=(e,t)=>e.build().withHost(Dn.i6).withPath(`/v0/experimental/${t}/credits`).withoutMarket().withEndpointIdentifier("/v0/experimental/{trackId}/credits").send();var Un=a(45167);const Mn="main-trackCreditsModal-container",Bn="main-trackCreditsModal-header",Fn="main-trackCreditsModal-closeBtn",Gn="main-trackCreditsModal-mainSection",Wn="main-trackCreditsModal-originalCredits",Vn="main-trackCreditsModal-creditsGroup",zn="main-trackCreditsModal-sectionTitle",Hn="main-trackCreditsModal-creditsEntry",Kn="main-trackCreditsModal-clickableCreditsEntry",qn="main-trackCreditsModal-sourceNames",Yn="main-trackCreditsModal-additionalCredits",Jn=(0,r.memo)(function(){const e=(0,s.wA)(),{isOpen:t,trackUri:a}=(0,s.d4)(e=>e.ui.trackCreditsModal),n=a.split(":"),i=n[n.length-1],{data:l,error:c,loading:u}=(0,Un.Z)(Pn,[i]),g=(0,r.useCallback)(()=>{e((0,ae.P0)(!1,""))},[e]),p=(0,Ln.vh)(),{isAnonymous:h}=(0,s.d4)(se.Ht),{spec:b,logger:y}=(0,Ia.r)(Tn.i,{data:{uri:a}});return(0,f.jsx)(m.M,{"aria-label":d.Ru.get("track-credits.label"),isOpen:t,onClose:g,children:!u&&!c&&l&&(0,f.jsxs)("div",{className:Mn,children:[(0,f.jsxs)("div",{className:Bn,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleMedium",children:d.Ru.get("track-credits.label")}),(0,f.jsx)("button",{"aria-label":d.Ru.get("close"),className:Fn,onClick:g,children:(0,f.jsx)(In.A,{width:18,height:18,fill:"white"})})]}),(0,f.jsxs)("div",{className:Gn,onScroll:h?()=>p.send((0,_n.s)({track_uri:a})):()=>p.send((0,wn.h)({track_uri:a})),children:[(0,f.jsxs)("div",{className:Wn,children:[(0,f.jsx)(o.E,{as:"h2",className:Vn,variant:"bodyMediumBold",children:l.body.trackTitle}),l.body.roleCredits.map((e,t)=>{const r=b.creditSectionFactory({position:t});return(0,f.jsxs)("div",{className:zn,children:[(0,f.jsx)(o.E,{as:"p",variant:"bodySmallBold",children:An(e.roleTitle)}),e.artists.length>0?e.artists.map(({name:t,uri:s,externalUrl:n})=>n?(0,f.jsx)("a",{href:n,draggable:!1,rel:"noopener noreferrer",onClick:()=>{const i=r.artistNameFactory({uri:s??""}).hitNavigateToExternalUri({destination:n});y.logInteraction(i),h?p.send((0,Nn._)({track_uri:a,clickable_text:t,role:e.roleTitle,external_url:n})):p.send((0,Sn.d)({track_uri:a,clickable_text:t,role:e.roleTitle,external_url:n}))},target:"_blank",className:Kn,children:t},t):(0,f.jsx)(o.E,{className:Hn,variant:"bodySmall",semanticColor:"textSubdued",children:t},t)):"-"]},e.roleTitle)}),(0,f.jsxs)(o.E,{as:"p",variant:"bodySmall",children:[d.Ru.get("track-credits.source"),":"," ",l.body.sourceNames.join(d.Ru.getSeparator())]})]}),l.body.extendedCredits&&l.body.extendedCredits.length>0&&(0,f.jsxs)("div",{className:Yn,children:[(0,f.jsx)(o.E,{as:"h3",className:Vn,variant:"bodyMediumBold",children:d.Ru.get("track-credits.additional-credits")}),l.body.extendedCredits.map(e=>(0,f.jsxs)("div",{className:zn,children:[(0,f.jsx)(o.E,{as:"p",variant:"bodySmallBold",children:On(e.roleTitle.toLowerCase())}),e.artists.map(t=>(0,f.jsx)("a",{href:t.url,draggable:!1,rel:"noopener noreferrer",onClick:()=>{h||p.send((0,jn.L)({track_uri:a,clickable_text:t.name,role:e.roleTitle,external_url:t.url}))},target:"_blank",className:Kn,children:t.name},t.name))]},e.roleTitle)),(0,f.jsxs)(o.E,{as:"p",variant:"bodySmall",className:qn,semanticColor:"textSubdued",children:[d.Ru.get("track-credits.source"),":"," ",(0,f.jsx)("a",{draggable:!1,rel:"noopener noreferrer",target:"_blank",href:"https://soundbetter.com",children:"SoundBetter"})]})]})]})]})})});var Qn=a(89408),Zn=a(70796),$n=a(3483),Xn=a(78964),ei=a(92363),ti=a(89676);const ai=({artistUri:e,spec:t,logger:a})=>{const[s,n]=(0,xe.A)(e),i=(0,r.useCallback)(async()=>{try{if(s){const r=t.hitUnfollow({itemToBeUnfollowed:e});a.logInteraction(r)}else{const r=t.hitFollow({itemToBeFollowed:e});a.logInteraction(r)}await n(!s)}catch{}},[s,n,t,a,e]),o=s?d.Ru.get("unfollow"):d.Ru.get("follow");return(0,f.jsx)(ti.W,{isFollowing:s,onClick:i,buttonText:o})};var ri=a(72248),si=a(38819);const ni="k0bEsM64a6Hlvyyivi65",ii="JFtb4k4276BDoBbicfGo",oi="XvBS5YiWkC6th2f7_dwU",li="kPFKSRYRWP5pI87HoaUn",ci="aGMdmlR9GefkUQMBVR9Q",di="YUJN69Roy3UZEALpfbla",ui="_5KGSATCY6d3jeTbOnx3e",mi="tuU0DX3JekY_2AtEAP27",gi=({name:e,credits:t,spec:a,logger:r,onClose:s})=>{const n=(0,he.g)(),i=t.roles.join(d.Ru.getSeparator()),l=((e,t)=>{const a=(0,ge.o_h)(e);if(a?.type===ge.NQG.ARTIST){const e=a.toURLPath(!0);return t?(0,si.hF)(e):e}})(t.uri,(0,ri.d)({uri:t.uri,type:"locale"})),c=t.url,u=((e,t,a,r,s,n,i)=>r?()=>{const e=s.externalLinkButtonFactory().hitNavigateToExternalUri({destination:r});n.logInteraction(e)}:t&&a?()=>{const a=s.hitUiNavigate({destination:t});n.logInteraction(a),e(t),i&&i()}:void 0)(n,l,t.isArtistLinkable,c,a,r,s);return(0,f.jsx)(Zn.v,{className:j()(ci),title:(0,f.jsx)(o.E,{variant:"bodyMedium",children:e}),href:c,onClick:u,target:"_blank",rel:"noopener noreferrer",size:"sm",paddingInlineStart:"0",paddingInlineEnd:"0",subtitle:(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",style:{textTransform:"capitalize"},"data-testid":"artist-row-role",children:i}),"data-testid":"credits-artist-row",variant:"naked",id:t.uri??t.url??"",trailing:(0,f.jsxs)(f.Fragment,{children:[t.uri&&t.isArtistLinkable&&(0,f.jsx)("div",{className:ui,children:(0,f.jsx)(ai,{artistUri:t.uri,spec:a.followButtonFactory(),logger:r})}),c&&(0,f.jsx)($n.H,{className:mi})]})},e)},pi=(0,r.memo)(({data:e,limit:t,onClose:a,spec:r,logger:s})=>{const n=e.reduce((e,t)=>{const{name:a,url:r}=t;if(null===a)return e;const s=(a??"")+(r??""),n=e.get(s)??{name:a,roles:[],uri:void 0,url:void 0,isArtistLinkable:!1};return null!==t.role&&n.roles.push(t.role),n.isArtistLinkable=t.isArtistLinkable||n.isArtistLinkable,t.url?n.url=t.url:t.uri&&(n.uri=t.uri),e.set(s,n),e},new Map),i=Array.from(n,([e,t],n)=>{const i=r.artistListFactory().artistRowFactory({position:n,uri:t.uri??""});return(0,f.jsx)(gi,{name:t.name,credits:t,onClose:a,spec:i,logger:s},e)}).slice(0,t);return(0,f.jsx)(f.Fragment,{children:i})}),hi=Spicetify.GraphQL.Definitions["queryTrackCreditsModal"]=new at.l("queryTrackCreditsModal","query","ba48139df0d4154b70e8877140e2cb26dcd221de925e39307f5b212968ea17cd",null),bi="https://support.spotify.com/artists/article/song-credits/",yi=(0,r.memo)(function(){const e=(0,s.wA)(),{isOpen:t,trackUri:a}=(0,s.d4)(e=>e.ui.trackCreditsModal),n=(0,r.useCallback)(()=>{e((0,ae.P0)(!1,""))},[e]),i=(0,Ln.vh)(),{isAnonymous:c}=(0,s.d4)(se.Ht),{spec:u,logger:g}=(0,Ia.r)(Xn.U,{data:{uri:a}}),p=(0,r.useCallback)(()=>{const e=u.closeButtonFactory().hitUiHide();g.logInteraction(e),n()},[u,g,n]),h=(0,r.useCallback)(()=>{const e=u.reportErrorLinkFactory().hitNavigateToExternalUri({destination:bi});g.logInteraction(e)},[u,g]),{data:b,error:y,loading:x}=(R={trackUri:a,contributorsLimit:500,contributorsOffset:0},(0,rt.I)(hi,R,E));var R,E;const v=(0,Qn.YQ)(()=>c?i.send((0,_n.s)({track_uri:a})):i.send((0,wn.h)({track_uri:a})),500,{leading:!1,trailing:!0});if(x||y||"Track"!==b?.trackUnion.__typename)return null;const C=b?.trackUnion.contributors?.items.reduce((e,t)=>{const{uri:a}=t;return a&&(0,ge.ecE)(a)&&e.add(a),e},new Set),j=b?.trackUnion.creditsTrait?.contributors?.items.map(e=>({name:e.name,role:e.role,uri:e.uri,url:e.url,isArtistLinkable:C?.has(e.uri??"")}))??[],S=b?.trackUnion.creditsTrait?.sources?.items.map(e=>e.name).join(d.Ru.getSeparator());return(0,f.jsx)(m.M,{"aria-label":d.Ru.get("track-credits.label"),isOpen:t,onClose:n,children:(0,f.jsxs)("div",{className:ni,children:[(0,f.jsxs)("div",{className:ii,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("track-credits.label")}),(0,f.jsx)(k.H,{condensed:!0,size:"small","aria-label":d.Ru.get("close"),className:oi,onClick:p,children:(0,f.jsx)(l.M,{size:"small",fill:"white",width:16,height:16})})]}),(0,f.jsx)(ei.a,{className:li,children:(0,f.jsxs)("div",{onScroll:v,children:[(0,f.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",paddingBottom:"base",children:b.trackUnion.name}),(0,f.jsx)(pi,{data:j,onClose:n,spec:u,logger:g}),(0,f.jsx)(Zn.v,{id:"sources",title:(0,f.jsx)(o.E,{variant:"bodyMediumBold",children:d.Ru.get("track-credits.sources")}),variant:"naked",subtitle:(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:S}),className:di}),(0,f.jsx)(k.H,{condensed:!0,size:"small",href:bi,target:"_blank",rel:"noopener noreferrer",iconTrailing:e=>(0,f.jsx)($n.H,{...e}),onClick:h,children:d.Ru.get("track-credits.report-error")})]})})]})})});var xi=a(52734),Ri=a(42729),fi=a(81555);const Ei=()=>{const e=(0,s.wA)(),t=(0,fi.D)(),{currentDevice:a}=(0,Ri.l)(),{spec:n,logger:i}=(0,vs.$)(xi.h,{}),{onConfirm:o,onCancel:l}=(0,s.d4)(e=>e.ui.videoNotSupportedModal),c=(0,r.useCallback)(()=>{i.logInteraction(n.cancelButtonFactory().hitUiHide()),e(Ha.ug.actions.close()),l?.()},[e,i,l,n]),u=(0,r.useCallback)(async()=>{const{interactionId:r}=i.logInteraction(n.confirmButtonFactory().hitDisconnectFromRemoteDevice({remoteDeviceId:a?.connectStateId??""}));e(Ha.ug.actions.close()),await t.pullToLocalDevice({interactionId:r}),o()},[t,a?.connectStateId,e,i,o,n]),m=d.Ru.get("video-not-supported.modal.title"),g=d.Ru.get("video-not-supported.modal.cancel"),p=d.Ru.get("video-not-supported.modal.confirm");return(0,f.jsx)(pe.T,{isOpen:!0,onConfirm:u,onClose:c,titleText:m,"aria-label":m,cancelText:g,confirmText:p,width:{minWidth:420,maxWidth:600}})};var vi=a(9400);class ki extends r.PureComponent{handleRequestClose(){this.props.closeModal()}render(){const{isOpen:e,closeModal:t}=this.props;return(0,f.jsx)(vi.x,{animated:!0,headingMessage:d.Ru.get("offline-error.device-limit-reached.header"),message:d.Ru.get("offline-error.device-limit-reached.message"),buttonLabel:d.Ru.get("close"),isOpen:e,onDismissDialog:t})}}const Ci=(0,s.Ng)(e=>({isOpen:e.ui.offlineDeviceLimitReachedDialog.isOpen}),e=>({closeModal:()=>e((0,ae.kC)())}))(ki);var ji=a(73541),Si=a.n(ji);class Ni extends r.PureComponent{constructor(e){super(e),this.handleRequestClose=this.handleRequestClose.bind(this),this.browserName=Si().getParser(window.navigator.userAgent).getBrowserName()}handleRequestClose(){this.props.closeModal()}render(){const{isOpen:e,closeModal:t}=this.props;return(0,f.jsx)(vi.x,{headingMessage:d.Ru.get("fatal-error.header"),onDismissDialog:t,buttonLabel:d.Ru.get("close"),message:d.Ru.get("browser_upgrade_notice",this.browserName),isOpen:e})}}const wi=(0,s.Ng)(e=>({isOpen:e.ui.playbackNotSupportedErrorDialog.isOpen}),e=>({closeModal:()=>e((0,ae.e$)())}))(Ni);var _i=a(64932),Ti=a(32367),Ii=a(42805),Ai=a(91816),Oi=a(12586),Li=a(93876);const Di="IkkrIjJs7CnuSYEw4gVg";var Pi=function(e){return e[e.SIGNUP=0]="SIGNUP",e[e.LOGIN=1]="LOGIN",e[e.DOWNLOAD=2]="DOWNLOAD",e}(Pi||{});const Ui=(0,r.memo)(function({image:e,mediaType:t,backgroundColor:a,onSignupClick:r,onLoginClick:s,onDownloadClick:n,downloadLink:i}){const l=e=>t=>{switch(t.preventDefault(),e){case Pi.DOWNLOAD:n&&n(),window.open(i,"_top","noopener");break;case Pi.SIGNUP:r&&r(),(0,Li.ie)();break;case Pi.LOGIN:s&&s(),(0,Li.PW)()}},{preferredAppToInstall:u}=(0,Ai.V)(),m="audio"===t?d.Ru.get("fta.wall.start-listening"):d.Ru.get("fta.wall.start-watching"),g=(0,f.jsx)(c.$,{onClick:l(Pi.SIGNUP),children:d.Ru.get("mwp.cta.sign.up.free")}),p=i&&"desktop"===u?(0,f.jsx)(Xa.n,{"data-testid":"upsell-download-app-button",onClick:l(Pi.DOWNLOAD),children:d.Ru.get("mwp.cta.download.app")}):void 0,h=(0,Oi.y)();return(0,f.jsx)(F,{image:e,title:m,primaryButton:g,secondaryButton:p,size:h,style:a?{backgroundColor:a}:{},renderExtraInfo:()=>(0,f.jsxs)("p",{className:Di,onKeyDown:()=>l(Pi.LOGIN),role:"presentation",children:[(0,f.jsx)(o.E,{variant:"bodySmall",children:d.Ru.get("already_have_account")}),(0,f.jsx)(Ii.Y,{href:"#",onClick:l(Pi.LOGIN),children:d.Ru.get("login")})]})})});var Mi=a(77639),Bi=a(23241);const Fi="XiNjJbq_Gi834goOHPS5",Gi="pLGXGU8pm6Otyt7tO1Yf",Wi="zRmEHjerg9ALVk0Rt5FQ",Vi={[M.E.SMALL]:0,[M.E.MEDIUM]:600,[M.E.LARGE]:1024},zi=()=>{const e=(0,Bi.mb)();return e.searchParams.set("referrer","dwp"),e},Hi=({image:e,mediaType:t,backgroundColor:a,onClose:s})=>{const{spec:n,logger:i}=(0,Ia.r)(Ti.$,{}),o=(0,Ws.n)(n.getAbsoluteLocation(),n),l=e=>()=>{let t;switch(e){case"download-app":t=n.downloadAppButtonFactory().hitUiNavigate({destination:zi().toString()});break;case"login":t=n.logInButtonFactory().hitUiNavigate({destination:Li.aW});break;case"signup":t=n.signUpButtonFactory().hitUiNavigate({destination:Li.Zg})}t&&i.logInteraction(t)},{ref:c,breakpoint:u}=(0,Mi.x)(Vi);return(0,r.useEffect)(()=>{const e=e=>{if("Escape"===e.key){const e=n.closeButtonFactory().hitUiHide();i.logInteraction(e),s()}};return window.addEventListener("keyup",e,!1),()=>window.removeEventListener("keyup",e)},[s,i,n]),(0,f.jsx)(Oi.o.Provider,{value:u,children:(0,f.jsx)("div",{className:`dialog ${Wi}`,role:"presentation",ref:c,onClick:e=>{if(/dialog/.test(e.target.className)){const e=n.closeButtonFactory().hitUiHide();i.logInteraction(e),s()}},children:(0,f.jsxs)("div",{ref:o,className:Fi,style:{backgroundColor:a},children:[(0,f.jsx)(Ui,{image:e,mediaType:t,onDownloadClick:l("download-app"),onLoginClick:l("login"),onSignupClick:l("signup"),downloadLink:zi().toString()}),(0,f.jsx)("div",{className:Gi,children:(0,f.jsx)(k.H,{onClick:()=>{const e=n.closeButtonFactory().hitUiHide();i.logInteraction(e),s()},children:d.Ru.get("close")})})]})})})},Ki=r.memo(function({uri:e}){const t=(0,s.wA)(),a=(0,_i.bj)("images/focused_stroy_play.png"),[n,i]=function(e,t=tt.l0o,a){const{request:s}=(0,r.useContext)(bt.j),[n,i]=(0,r.useState)(t),[o,l]=(0,r.useState)(a),c=(0,r.useCallback)(e=>{const{url:t}=(0,yt.g)(e?.sources)||{},a=Rt(e);t&&l(t),a&&i(a)},[l]);return(0,r.useEffect)(()=>{(async()=>{const t=(0,ge.o_h)(e);if(!t)return;const a=ft[t.type];if(!a)return void console.error(`The entity (${e}) you're trying to use it not supported for this query`);const r=await s(a,{uri:t.toURI()}),{albumUnion:n,artistUnion:i,episodeUnionV2:o,playlistV2:l,podcastUnionV2:d,trackUnion:u}=r?.data||{};Et(n)?c(n.coverArt):vt(i)?c(i.visuals.avatarImage):kt(o)?c(o.coverArt):Ct(l)?c(l.images?.items?.[0]):jt(d)||St(d)?c(d.coverArt):Nt(u)&&c(u.albumOfTrack?.coverArt)})()},[e,s,c]),[o,n]}(e,"#9BF0E1",a);return(0,f.jsx)(Hi,{image:n,mediaType:(0,ge.WB1)(e??"")?"mixed":"audio",onClose:()=>{t((0,ae.BU)())},backgroundColor:i})});var qi=a(68001),Yi=a(58075),Ji=a(70037),Qi=a(32284);var Zi=a(92518),$i=a(92368);function Xi(e,t){const a=new URL("https://age-assurance.spotify.com");return a.pathname=t?"/check-ubiquity/start":"/collect-ubiquity/start",e&&a.searchParams.set("flow_ctx",e),t&&a.searchParams.set("resource",t),a.toString()}var eo=a(30469);const to={container:"uWTD_NZAN5Bf2CVaAEhn",qrCodeWrapper:"_ryqARxv9IxZzmgqwZWj",qrCodeContainer:"FHeeS0iyFKz0aaEUkQRU",qrCode:"_9psG0QBWLC383JIico_",logoContainer:"yv48Eu6E7lCNetCnmNUm",content:"Sw288ozQbFhTMY3sFICn",title:"WCd58rA2zbhlWC8iVNDA"},ao=()=>{const e=(0,s.wA)(),{spec:t,logger:a}=(0,Ia.r)(Ji.m,{}),n=(0,Zi.x)(),i=n===Zi.K.PENDING_DISABLED||n===Zi.K.REACTIVATED,l=(()=>{const e=(0,Qi.$)("age_assurance_account_warning_timestamp");if(!e)return;const t=new Date,a=new Date(e);if(isNaN(a.getTime())||a<=t)return;const r=a.getTime()-t.getTime();return Math.floor(r/864e5)})(),[c,u]=(0,r.useState)();(0,r.useEffect)(()=>{if(i){const e=a.logImpression(t.ageAssuranceUnderageBlockedAccountFactory().impression());u(e)}},[i,a,t]);if(!(0,$i._)()||!i)return null;const m=Xi(c),g=n===Zi.K.PENDING_DISABLED;return(0,f.jsx)(nr.A,{isOpen:i,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:()=>{},animated:!0,children:(0,f.jsx)(eo.s,{children:(0,f.jsxs)("div",{className:to.container,children:[c&&(0,f.jsx)("div",{className:to.qrCodeWrapper,children:(0,f.jsxs)("div",{className:to.qrCodeContainer,children:[(0,f.jsx)(qi.Ay,{level:"H",size:136,value:m,className:to.qrCode}),(0,f.jsx)("div",{className:to.logoContainer,children:(0,f.jsx)(Yi.G,{condensed:!0,height:"28",semanticColor:"backgroundElevatedBase"})})]})}),(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:to.title,children:g?d.Ru.get("web-player.age-assurance.blocking-modal.title"):d.Ru.get("web-player.age-assurance.reactivation-blocking-modal.title")}),(0,f.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:void 0===l?g?d.Ru.get("web-player.age-assurance.blocking-modal.description-no-timestamp"):d.Ru.get("web-player.age-assurance.reactivation-blocking-modal.description-no-timestamp"):0===l?g?d.Ru.get("web-player.age-assurance.blocking-modal.description-less-than-day"):d.Ru.get("web-player.age-assurance.reactivation-blocking-modal.description-less-than-day"):g?d.Ru.get("web-player.age-assurance.blocking-modal.description",l):d.Ru.get("web-player.age-assurance.reactivation-blocking-modal.description",l)}),(0,f.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.age-assurance.modal.scan-qr")}),(0,f.jsx)(k.H,{onClick:()=>{a.logInteraction(t.logOutButtonFactory().hitLogout()),e((0,Na.wH)())},children:d.Ru.get("user.log-out")})]})})})};var ro=a(50136);const so=()=>{const{isOpen:e,interactionId:t,resource:a}=(0,s.d4)(e=>e.ui?.verifyAgeModal),{spec:n,logger:i}=(0,Ia.r)(Ji.m,{}),l=(0,ro.NW)(),c=(0,Zi.x)(),u=(0,r.useRef)(c).current;(0,r.useEffect)(()=>{e&&u!==Zi.K.COMPLETED&&c===Zi.K.COMPLETED&&l()},[e,u,c,l]);const m=()=>{i.logInteraction(n.closeButtonFactory().hitUiHide()),l()},g=Xi(t,a);return(0,f.jsx)(nr.A,{isOpen:e,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:m,overlayClassName:to.overlay,animated:!0,children:(0,f.jsxs)("div",{className:to.container,children:[(0,f.jsx)("div",{className:to.qrCodeWrapper,children:(0,f.jsxs)("div",{className:to.qrCodeContainer,children:[(0,f.jsx)(qi.Ay,{level:"H",size:136,value:g,className:to.qrCode}),(0,f.jsx)("div",{className:to.logoContainer,children:(0,f.jsx)(Yi.G,{condensed:!0,height:"28",semanticColor:"backgroundElevatedBase"})})]})}),(0,f.jsxs)("div",{className:to.content,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:to.title,children:d.Ru.get("web-player.age-assurance.verify-modal.title")}),(0,f.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.age-assurance.modal.scan-qr")})]}),(0,f.jsx)(k.H,{onClick:m,children:d.Ru.get("close")})]})})};var no=a(90019),io=a(59192),oo=a(57171);const lo=()=>{const e=(0,s.wA)(),{data:t}=(0,s.d4)(e=>e.ui.artistAboutDialog);if(!t)return null;const{artist:a,artistUri:r,visuals:n,stats:i,externalLinks:o}=t,{gallery:l}=n,{monthlyListeners:c,worldRank:d,followers:u,topCities:m}=i,g=[];return l.items.forEach(e=>{const t=e.sources.map(oo.m),a=(0,yt.g)(t,{desiredLabel:"large",desiredSize:600});a&&g.push(a)}),(0,f.jsx)(io.y,{artistUri:r,avatarImages:n.avatarImage?.sources,name:a.name,bio:a.biography?.text,bioSource:a.biography?.type,worldRank:d||0,isOpen:!0,closeModal:()=>{e((0,ae.lM)())},images:g,externalLinks:o,topCities:m?.items,followers:u,monthlyListeners:c})};var co=a(4258),uo=a(46150);function mo({children:e,ctaUrl:t,spec:a}){const n=(0,s.wA)(),i=(0,Ka.s)(),o=(0,r.useCallback)(()=>{n((0,ae.us)()),i.logInteraction(a.consumptionCapModalFactory().topUpButtonFactory().hitUiHide())},[n,i,a]),l=(0,r.useCallback)(()=>{i.logInteraction(a.consumptionCapModalFactory().topUpButtonFactory().hitNavigateToExternalUri({destination:t}))},[t,i,a]);return t?(0,f.jsx)(c.$,{as:"a",href:t,target:"_blank",colorSet:"invertedLight",iconTrailing:uo.p,onClick:l,children:e}):(0,f.jsx)(c.$,{colorSet:"invertedLight",onClick:o,children:e})}function go({children:e,onClick:t}){return e?(0,f.jsx)(k.H,{onClick:t,semanticColor:"textSubdued",children:e}):null}var po=a(98453),ho=a(1812);const bo={queryKey:["capping-status"],gcTime:864e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0};const yo="GF6PwDWKYR9yPYcmEvKB",xo="y0erFpNXre9pXWLNvcGd",Ro="yF2MJtvTAWgeS72Oed1X",fo=()=>{const e=(0,s.wA)(),{spec:t,logger:a}=(0,Ia.r)(co.M,{}),{isOpen:n}=(0,s.d4)(e=>e.ui.bookConsumptionCapModal),{data:i,isLoading:l}=function(e){const t=(0,po.J)();return(0,ho.I)({...bo,enabled:e,queryFn:async()=>t.getCappingStatus()})}(n),c=(0,r.useCallback)(()=>{e((0,ae.us)()),a.logInteraction(t.consumptionCapModalFactory().dismissButtonFactory().hitUiHide())},[e,a,t]);return(0,f.jsx)(nr.A,{animated:!0,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:c,contentLabel:i?.explanation?.title||"",isOpen:n,children:(0,f.jsx)("div",{className:yo,children:(0,f.jsx)("div",{className:xo,children:l||!i?.explanation?(0,f.jsx)(tn.m,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:i.explanation.title}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:i.explanation.body}),(0,f.jsxs)("div",{className:Ro,children:[(0,f.jsx)(mo,{ctaUrl:i.explanation.ctaUrl,spec:t,children:i.explanation.cta}),(0,f.jsx)(go,{onClick:c,children:i.explanation.dismiss})]})]})})})})},Eo=()=>{const e=(0,s.wA)(),{spec:t,logger:a}=(0,Ia.r)(co.M,{}),{isOpen:n}=(0,s.d4)(e=>e.ui.bookConsumptionCapModal),i=(0,r.useCallback)(()=>{e((0,ae.us)()),a.logInteraction(t.consumptionCapModalFactory().dismissButtonFactory().hitUiHide())},[e,a,t]),l=d.Ru.get("web-player.audiobooks.consumption-cap-purchases-not-allowed-modal.title"),u=d.Ru.get("web-player.audiobooks.consumption-cap-purchases-not-allowed-modal.body"),m=d.Ru.get("web-player.audiobooks.consumption-cap-purchases-not-allowed-modal.dismiss");return(0,f.jsx)(nr.A,{animated:!0,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:i,contentLabel:l,isOpen:n,children:(0,f.jsx)("div",{className:yo,children:(0,f.jsxs)("div",{className:xo,children:[(0,f.jsx)(o.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:l}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:u}),(0,f.jsx)("div",{className:Ro,children:(0,f.jsx)(c.$,{onClick:i,colorSet:"invertedLight",children:m})})]})})})},vo=()=>{const{inAppPurchasesPolicy:e}=(0,Ai.V)();return"notAllowed"===e?(0,f.jsx)(Eo,{}):(0,f.jsx)(fo,{})};var ko=a(53679),Co=a(36746),jo=a(22959),So=a(76826),No=a(89631),wo=a(51275);const _o=r.memo(function(){const{spec:e,logger:t}=(0,vs.$)(ko.w,{}),a=(0,s.wA)(),{data:n}=(0,s.d4)(e=>e.ui.authorAboutDialog),i=(0,r.useCallback)(()=>{const r=e.closeButtonFactory().hitUiHide();t.logInteraction(r),a((0,ae.Jc)())},[a,t,e]);if(!n)return null;const{name:l,bio:c="",images:d=[]}=n;return(0,f.jsxs)(Co.P,{name:l,closeModal:i,isOpen:!0,children:[(0,f.jsx)(jo.Z,{images:d}),(0,f.jsx)("div",{className:wo.A.content,children:c?(0,f.jsx)(o.E,{as:"div",variant:"bodyMedium",className:wo.A.bio,dir:"auto",children:(0,f.jsx)(No.y,{source:c,LinkComponent:So.N,onLinkClick:i})}):null})]})});var To=a(8143),Io=a(60071),Ao=a(94378),Oo=a(36544),Lo=a(96290),Do=a(1994),Po=a(10172);const Uo="fORPr186YxTBFKqDWEvL",Mo="dH9uu3tzcuRNQF5WQ1LY",Bo="Xlpw1nJMn_NawhutHIHR",Fo="YzgpCvRaP1pBI3RvpXbc",Go="fqG_G0Iw4USa6Rv7J7fb",Wo="VTf8LRLMm3rFZ1BNjI3L",Vo="WCqAjXREhwTHTtoZAZnQ",zo="nZFW7sgGAnBQy7SJCWK3",Ho=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),Ko=({countrySelectionModalRef:e})=>{const t=(0,r.useRef)(null),a=(0,r.useRef)(null),n=(0,s.d4)(se.Ht),[i,c]=(0,r.useState)(!1),{isOpen:u}=(0,Lo.oW)(),m=(0,Lo.$8)(),g=(0,r.useCallback)(()=>{m({type:"CLOSE"})},[m]),p=(0,r.useMemo)(()=>Object.values(Po.O4).map(e=>{const t=(0,Po.cm)(e);return{name:t,code:e,normalizedName:Ho(t)}}).sort((e,t)=>e.name.localeCompare(t.name,n.locale,{sensitivity:"accent"})),[n.locale]),[h,b]=(0,r.useState)(""),y=(0,r.useDeferredValue)(h),[x,R]=(0,r.useState)(p),[E,v]=(0,r.useState)(!1),C=(0,r.useMemo)(()=>{const e=Ho(y);return p.filter(t=>t.normalizedName.includes(e))},[p,y]);(0,r.useEffect)(()=>{0===C.length?v(!0):v(!1),R(C)},[C]);const S=e=>{i||b(e)},N=()=>{S(""),g(),a.current&&(a.current.scrollTop=0)};(0,Do.m)(N);const w="country-selection-title";return e.current?(0,To.createPortal)((0,f.jsx)(eo.s,{active:u,children:(0,f.jsx)("div",{className:j()(Uo,{[Mo]:u}),role:"presentation",onClick:e=>{e.target===t.current&&N()},"data-open":u?"open":"closed",ref:t,children:(0,f.jsxs)("section",{className:Bo,role:"dialog","aria-modal":!0,"aria-labelledby":w,children:[(0,f.jsx)("div",{className:Go,children:(0,f.jsx)(k.H,{iconOnly:l.M,size:"small",onClick:()=>{N()},"aria-label":d.Ru.get("close")})}),(0,f.jsxs)("div",{className:Fo,children:[(0,f.jsxs)("div",{className:Wo,children:[(0,f.jsx)(o.E,{as:"h3",variant:"bodyMediumBold",id:w,children:d.Ru.get("concert.location.search.header")}),(0,f.jsx)(Io.E,{iconLeading:(0,f.jsx)(Ao.C,{}),children:(0,f.jsx)(Oo.Z,{placeholder:d.Ru.get("concert.location.search.placeholder"),onChange:e=>S(e.currentTarget.value),onCompositionStart:()=>{c(!0)},onCompositionEnd:e=>{c(!1),b(e.currentTarget.value)},value:h})})]}),E&&(0,f.jsx)(o.E,{as:"p",variant:"bodyMedium",children:d.Ru.get("concert.error.no_locations_found_subtitle")}),(0,f.jsx)("ul",{className:Vo,ref:a,children:x.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)(So.N,{className:zo,onClick:()=>{N()},to:`/popular-in/${e.code.toLowerCase()}`,children:e.name})},e.code))})]})]})})}),e.current):null};var qo=a(39376),Yo=a(29742);const Jo=(0,r.lazy)(async()=>{const{DebugWindowContents:e}=await Promise.all([a.e(8647),a.e(286),a.e(5801),a.e(4619),a.e(3685),a.e(983)]).then(a.bind(a,11511));return{default:e}}),Qo=()=>{const{handle:e,show:t}=(0,qo.j)();return(0,Ca.x)(ka.W.SHOW_DEBUG_WINDOW,()=>{t()}),null!==e?(0,To.createPortal)((0,f.jsx)(Yo.IF,{handle:e,children:(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Jo,{})})}),e.document.body):null};var Zo=a(34619);const $o=({uri:e,onConfirm:t,onCancel:a,remoteDeviceInfo:n})=>{const i=(0,Ka.s)(),o=(0,r.useMemo)(()=>(0,Zo.c)(),[]);(0,r.useEffect)(()=>{i.logImpression(o.impression())},[i,o]);const l=(0,s.wA)();return(0,f.jsx)(pe.T,{"aria-label":d.Ru.get("web-player.download.remove-download-confirmation-dialog.title"),titleText:d.Ru.get("web-player.download.remove-download-confirmation-dialog.title"),descriptionText:n?d.Ru.get("web-player.download.remove-download-confirmation-dialog.message-remote",n.deviceName):d.Ru.get("web-player.download.remove-download-confirmation-dialog.message"),onConfirm:()=>{t(),l((0,ae.Kf)()),i.logInteraction(n?o.confirmRemoveDownloadButtonFactory().hitRemoveDownloadFromRemoteDevice({itemToRemoveFromDownloads:e,remoteDeviceId:n.deviceId,remoteDeviceType:n.deviceType.toString(),remoteClientPlatform:n.clientPlatform.toString()}):o.confirmRemoveDownloadButtonFactory().hitRemoveDownload({itemToRemoveFromDownloads:e}))},onClose:()=>{a(),l((0,ae.Kf)()),i.logInteraction(o.cancelButtonFactory().hitUiHide())},confirmText:d.Ru.get("web-player.download.remove-download-confirmation-dialog.confirm-button-text"),confirmLabel:d.Ru.get("web-player.download.remove-download-confirmation-dialog.confirm-button-label"),cancelText:d.Ru.get("web-player.download.remove-download-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var Xo=a(10864),el=a(61615),tl=a(81684);const al=({shortcuts:e,sectionTitle:t})=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.E,{as:"h2",className:tl.A.sectionHeading,variant:"titleSmall",children:t}),(0,f.jsx)("ul",{children:e.map(e=>e.enabled?(0,f.jsxs)("li",{className:tl.A.sectionItem,children:[(0,f.jsx)(o.E,{variant:"bodyMedium",className:tl.A.sectionItemName,children:e.description}),(0,f.jsx)(Xo.g,{combinations:(0,el.p)(e.action)})]},e.action):null)})]});var rl=a(36482),sl=a(93856);const nl=(0,r.memo)(function(){const e=function(){const e=(0,rl.R)(),t=!0;return{basic:[{action:sl.r.CREATE_NEW_PLAYLIST,get description(){return d.Ru.get("playlist.new-header")},enabled:!0},{action:sl.r.CREATE_NEW_FOLDER,get description(){return d.Ru.get("keyboard.shortcuts.description.createNewFolder")},enabled:!0},{action:sl.r.OPEN_CONTEXT_MENU,get description(){return d.Ru.get("keyboard.shortcuts.description.openContextMenu")},enabled:!0},{action:sl.r.OPEN_SEARCH_MODAL,get description(){return d.Ru.get("keyboard.shortcuts.description.openSearchModal")},enabled:!0},{action:sl.r.SELECT_ALL,get description(){return d.Ru.get("keyboard.shortcuts.description.selectAll")},enabled:t},{action:sl.r.FILTER,get description(){return d.Ru.get("filter")},enabled:t},{action:sl.r.FOCUS_YLX_TEXT_FILTER,get description(){return d.Ru.get("web-player.your-library-x.text-filter.generic-placeholder")},enabled:!0},{action:sl.r.LOG_OUT,get description(){return d.Ru.get("user.log-out")},enabled:!0}],playback:[{action:sl.r.TOGGLE_PLAY,get description(){return d.Ru.get("keyboard.shortcuts.description.togglePlay")},enabled:!0},{action:sl.r.LIKE_DISLIKE_SONG,get description(){return d.Ru.get("keyboard.shortcuts.description.likeDislikeSong")},enabled:!0},{action:sl.r.SHUFFLE,get description(){return d.Ru.get("keyboard.shortcuts.description.shuffle")},enabled:!0},{action:sl.r.REPEAT,get description(){return d.Ru.get("keyboard.shortcuts.description.repeat")},enabled:!0},{action:sl.r.SKIP_PREVIOUS,get description(){return d.Ru.get("keyboard.shortcuts.description.skipPrev")},enabled:!0},{action:sl.r.SKIP_NEXT,get description(){return d.Ru.get("keyboard.shortcuts.description.skipNext")},enabled:!0},{action:sl.r.SEEK_BACKWARD,get description(){return d.Ru.get("keyboard.shortcuts.description.seekBackward")},enabled:!0},{action:sl.r.SEEK_FORWARD,get description(){return d.Ru.get("keyboard.shortcuts.description.seekForward")},enabled:!0},{action:sl.r.RAISE_VOLUME,get description(){return d.Ru.get("keyboard.shortcuts.description.raiseVolume")},enabled:!0},{action:sl.r.LOWER_VOLUME,get description(){return d.Ru.get("keyboard.shortcuts.description.lowerVolume")},enabled:!0},{action:sl.r.DECREASE_PLAYBACK_SPEED,get description(){return d.Ru.get("playback-control.decrease-playback-speed")},enabled:!0},{action:sl.r.INCREASE_PLAYBACK_SPEED,get description(){return d.Ru.get("playback-control.increase-playback-speed")},enabled:!0}],navigation:[{action:sl.r.GO_TO_HOME,get description(){return d.Ru.get("keyboard.shortcuts.description.home")},enabled:!0},{action:sl.r.GO_BACKWARDS,get description(){return d.Ru.get("keyboard.shortcuts.description.goBackwards")},enabled:!0},{action:sl.r.GO_FORWARDS,get description(){return d.Ru.get("keyboard.shortcuts.description.goForwards")},enabled:!0},{action:sl.r.GO_TO_PREFERENCES,get description(){return d.Ru.get("keyboard.shortcuts.description.goToPreferences")},enabled:t},{action:sl.r.GO_TO_NOW_PLAYING,get description(){return d.Ru.get("keyboard.shortcuts.description.currentlyPlaying")},enabled:!0},{action:sl.r.GO_TO_SEARCH,get description(){return d.Ru.get("keyboard.shortcuts.description.search")},enabled:!0},{action:sl.r.GO_TO_LIKED_SONGS,get description(){return d.Ru.get("keyboard.shortcuts.description.likedSongs")},enabled:!0},{action:sl.r.GO_TO_QUEUE,get description(){return d.Ru.get("playback-control.queue")},enabled:!0},{action:sl.r.GO_TO_LIBRARY,get description(){return d.Ru.get("web-player.your-library-x.your-library")},enabled:!0},{action:sl.r.GO_TO_PLAYLISTS,get description(){return d.Ru.get("keyboard.shortcuts.description.yourPlaylists")},enabled:!0},{action:sl.r.GO_TO_PODCASTS,get description(){return d.Ru.get("keyboard.shortcuts.description.yourPodcasts")},enabled:!0},{action:sl.r.GO_TO_ARTISTS,get description(){return d.Ru.get("keyboard.shortcuts.description.yourArtists")},enabled:!0},{action:sl.r.GO_TO_ALBUMS,get description(){return d.Ru.get("keyboard.shortcuts.description.yourAlbums")},enabled:!0},{action:sl.r.GO_TO_AUDIOBOOKS,get description(){return d.Ru.get("keyboard.shortcuts.description.yourAudiobooks")},enabled:!0},{action:sl.r.GO_TO_MADE_FOR_YOU,get description(){return d.Ru.get("keyboard.shortcuts.description.madeForYour")},enabled:!0},{action:sl.r.GO_TO_NEW_RELEASES,get description(){return d.Ru.get("new_releases")},enabled:!0},{action:sl.r.GO_TO_CHARTS,get description(){return d.Ru.get("keyboard.shortcuts.description.charts")},enabled:!0},{action:sl.r.GO_TO_BUDDY_FEED,get description(){return d.Ru.get("buddy-feed.friend-activity")},enabled:t},{action:sl.r.GO_TO_DEVICE_PICKER,get description(){return d.Ru.get("spotify-connect")},enabled:!0}],layout:[{action:sl.r.TOGGLE_LEFT_SIDEBAR,get description(){return d.Ru.get("keyboard.shortcuts.layout.toggleLeftSidebar")},enabled:!0},{action:sl.r.LEFT_SIDEBAR_DECREASE_WIDTH,get description(){return d.Ru.get("keyboard.shortcuts.layout.navigationBarDecreaseWidth")},enabled:!0},{action:sl.r.LEFT_SIDEBAR_INCREASE_WIDTH,get description(){return d.Ru.get("keyboard.shortcuts.layout.navigationBarIncreaseWidth")},enabled:!0},{action:sl.r.TOGGLE_NPV_SIDEBAR,get description(){return d.Ru.get("keyboard.shortcuts.layout.toggleRightSidebar")},enabled:!0},{action:sl.r.NPV_SIDEBAR_DECREASE_WIDTH,get description(){return d.Ru.get("keyboard.shortcuts.layout.rightSidebarDecreaseWidth")},enabled:!0},{action:sl.r.NPV_SIDEBAR_INCREASE_WIDTH,get description(){return d.Ru.get("keyboard.shortcuts.layout.rightSidebarIncreaseWidth")},enabled:!0},{action:sl.r.TOGGLE_SUBTITLES,get description(){return d.Ru.get("subtitles-picker.heading")},enabled:!0}],employee:[{action:sl.r.TOGGLE_DEBUG_WINDOW,description:"Toggle Debug Window",enabled:e}]}}(),t=(0,s.wA)(),a=(0,s.d4)(e=>e.ui.keyboardShortcutsHelpModal.isOpen),n=(0,r.useCallback)(()=>{t((0,ae.wi)(!1))},[t]),i=e.employee.filter(e=>e.enabled);return(0,f.jsxs)(m.M,{isOpen:a,onClose:n,"aria-label":d.Ru.get("keyboard.shortcuts.help.heading"),className:tl.A.container,children:[(0,f.jsxs)("div",{className:tl.A.header,children:[(0,f.jsx)(o.E,{as:"h1",variant:"titleMedium",children:d.Ru.get("keyboard.shortcuts.help.heading")}),(0,f.jsx)("button",{"aria-label":d.Ru.get("close"),className:tl.A.closeBtn,onClick:n,children:(0,f.jsx)(In.A,{width:18,height:18,fill:"currentColor"})}),(0,f.jsxs)(o.E,{variant:"bodyMedium",as:"p",children:[d.Ru.get("keyboard.shortcuts.help.subheading.press")," ",(0,f.jsx)(Xo.g,{combinations:(0,el.p)(sl.r.OPEN_HELP)})," ",d.Ru.get("keyboard.shortcuts.help.subheading.toToggle")]})]}),(0,f.jsx)("div",{className:tl.A.sectionsContainer,children:(0,f.jsxs)("div",{className:tl.A.sections,tabIndex:0,children:[(0,f.jsx)(al,{shortcuts:e.basic,sectionTitle:d.Ru.get("keyboard.shortcuts.section.basic")}),(0,f.jsx)(al,{shortcuts:e.playback,sectionTitle:d.Ru.get("keyboard.shortcuts.section.playback")}),(0,f.jsx)(al,{shortcuts:e.navigation,sectionTitle:d.Ru.get("keyboard.shortcuts.section.navigation")}),(0,f.jsx)(al,{shortcuts:e.layout,sectionTitle:d.Ru.get("keyboard.shortcuts.section.layout")}),i.length>0?(0,f.jsx)(al,{shortcuts:i,sectionTitle:"Employee"}):null]})})]})});var il=a(80628),ol=a(50867),ll=a(49126);const cl=()=>{const e=(0,s.wA)(),t=(0,ll.p)(za.a.OUTPUT_DEVICE_SELECTION),{isOpen:a}=(0,s.d4)(({ui:e})=>e.playbackFailInExclusiveModeModal),n=(0,r.useCallback)(()=>{e(Ha.J9.actions.close())},[e]),i=(0,r.useCallback)(()=>{t(),e(Ha.J9.actions.close())},[e,t]),o=(0,ol.v)("Canâ€™t play this track");return(0,f.jsx)(pe.T,{isOpen:a,onClose:n,onConfirm:i,"aria-label":o,titleText:o,descriptionText:(0,ol.v)("This track canâ€™t be played on your current device while Exclusive mode is on. To listen to it, turn off Exclusive mode or try a different device in Settings."),confirmText:(0,ol.v)("Go to Settings"),cancelText:(0,ol.v)("Cancel")})};var dl=a(46019),ul=a(90814),ml=a(57055),gl=a(82898),pl=a(9092),hl=a(25379),bl=a(4644),yl=a(24148),xl=a(67659);const Rl=({onChangePermission:e,onRemoveMember:t,onLeave:a,member:r,capabilities:s})=>(0,f.jsxs)(gr.W,{children:[s.canAdministratePermissions&&"VIEWER"===r.permissionLevel&&(0,f.jsx)(pr.D,{role:"menuitemradio","aria-checked":!1,onClick:()=>e("CONTRIBUTOR"),leadingIcon:(0,f.jsx)(yl.u,{size:"small"}),children:(0,f.jsx)(o.E,{variant:"bodySmall",children:d.Ru.get("contextmenu.make-collaborator")})}),s.canAdministratePermissions&&"CONTRIBUTOR"===r.permissionLevel&&(0,f.jsx)(pr.D,{role:"menuitemradio","aria-checked":!1,onClick:()=>e("VIEWER"),leadingIcon:(0,f.jsx)(yl.u,{size:"small"}),children:(0,f.jsx)(o.E,{variant:"bodySmall",children:d.Ru.get("contextmenu.make-listener")})}),s.canAdministratePermissions&&(0,f.jsx)(pr.D,{role:"menuitemradio","aria-checked":!1,onClick:()=>t(),leadingIcon:(0,f.jsx)(xl.r,{size:"small"}),children:(0,f.jsx)(o.E,{variant:"bodySmall",children:d.Ru.get("contextmenu.remove-user-from-playlist")})}),s.canCancelMembership&&(0,f.jsx)(pr.D,{role:"menuitemradio","aria-checked":!1,onClick:()=>a(),leadingIcon:(0,f.jsx)(xl.r,{size:"small"}),children:(0,f.jsx)(o.E,{variant:"bodySmall",children:d.Ru.get("contextmenu.leave-playlist")})})]});var fl=a(38504);const El="JQt8k5l6MwQ2hk2niQ7c",vl="VUQtmpGP_TtwnHwcg61N",kl="ssBOms35_I6aOoq7t1TD",Cl="QywphKPGVL4Wwqalhr4f",jl="FPaEMlvW7pfUUGgdFf4t",Sl="HSiAGDRbMasuWPbhV_0F",Nl="T6efWyFiEZ8c6PvxFQeS",wl="i1lqfyHNc3gVAIP50Ei1",_l="erxh2AC0Jp_2w6wwY6Jk",Tl="FwRu9JSlt81eSKxn99XT",Il="su3Db7rrH8uBi2BmYT1g",Al="bzHkMBcSCdHzUWHdklqq",Ol="n4a6fF9rRyor07Uo_TTx",Ll="Q0MkMK8uVeJPLvb5JNVC",Dl="yC0jV9sXSWsuDKFLGAPX",Pl=({uri:e,member:t,capabilities:a,isCurrentUser:n})=>{const i=(0,s.wA)(),[l,c]=(0,r.useState)(!1),{changeMemberPermission:u,removeMember:m}=(e=>{const t=(0,fl.a)(),a=(0,r.useCallback)(async(a,r)=>{await t.setMemberPermission(e,a,r)},[t,e]),s=(0,r.useCallback)(async a=>{await t.removeMember(e,a)},[t,e]),n=(0,r.useCallback)(async a=>{await t.setBasePermission(e,a)},[t,e]);return{uri:e,changeMemberPermission:a,removeMember:s,changeBasePermission:n}})(e),g=(0,r.useCallback)(e=>{t.user&&(u(t.user.username,e),c(!0))},[u,t.user]),p=(0,r.useCallback)(()=>{t.user&&(m(t.user.username),c(!0))},[t.user,m]),h=(0,r.useCallback)(()=>{i((0,ae.aP)(e))},[i,e]),b=!t.isOwner&&(a?.canAdministratePermissions||a?.canCancelMembership&&n);let y="CONTRIBUTOR"===t.permissionLevel?d.Ru.get("permissions.collaborator"):d.Ru.get("permissions.listener");return t.isOwner&&(y=d.Ru.get("permissions.creator")),b&&a?(0,f.jsx)(mr.b,{renderInline:!0,menu:(0,f.jsx)(Rl,{onChangePermission:g,onRemoveMember:p,onLeave:h,capabilities:a,member:t}),children:(e,t,a)=>(0,f.jsxs)("button",{className:j()(Ol,Ll,{[Dl]:l}),onClick:t,ref:a,type:"button","data-testid":"permissions-menu",children:[(0,f.jsx)(o.E,{variant:"bodySmall",children:y}),e?(0,f.jsx)(hl.J,{size:"small"}):(0,f.jsx)(bl.y,{size:"small"})]})}):(0,f.jsx)(o.E,{variant:"bodySmall",className:Ol,children:y})},Ul=({member:e,playlistUri:t,username:a,capabilities:r,onClose:s})=>{if(!e.user)return null;const n=a===e.user.username,i=n&&e.user.displayName?d.Ru.get("permissions.current-user-name",e.user.displayName):e.user.displayName;return(0,f.jsxs)("div",{className:wl,children:[(0,f.jsxs)("div",{className:_l,children:[(0,f.jsx)(ml.e,{label:e.user.displayName,images:e.user.images.map(e=>({url:e.url,width:e.width||null,height:e.height||null})),width:32,userIconSize:"small"}),(0,f.jsxs)("div",{className:Tl,children:[(0,f.jsx)(gl.h,{menu:(0,f.jsx)(pl.B,{uri:e.user.uri}),children:(0,f.jsx)(So.N,{title:i??e.user.username,to:e.user.uri,dir:"auto",onClick:s,children:(0,f.jsx)(o.E,{variant:"bodySmallBold",children:i})})}),e.songsAdded>0&&(0,f.jsx)(o.E,{className:Il,variant:"marginal",children:d.Ru.get("permissions.songs-added",e.songsAdded)})]})]}),(0,f.jsx)(Pl,{uri:t,member:e,capabilities:r,isCurrentUser:n})]},e.user.uri)};const Ml=({isPublicPlaylist:e})=>(0,f.jsx)("div",{className:jl,children:e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(er.d,{size:"small"}),(0,f.jsx)(o.E,{className:Sl,variant:"marginal",children:d.Ru.get("permissions.public-playlist")})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ul.u,{size:"small"}),(0,f.jsx)(o.E,{className:Sl,variant:"marginal",children:d.Ru.get("permissions.private-playlist")})]})}),Bl=({isOpen:e,uri:t,onClose:a})=>{const n=function(e){const t=(0,fl.a)(),[a,s]=(0,r.useState)(null),n=(0,r.useCallback)((e,t)=>{s(e||!t?null:t)},[]);return(0,r.useEffect)(()=>t.subscribeToMembers(e,n),[t,e,n]),a}(t),i=(0,s.d4)(({session:e})=>e?.user?.id)||null;return n?(0,f.jsx)(nr.A,{isOpen:e,onRequestClose:a,contentLabel:d.Ru.get("permissions.modal-label"),children:(0,f.jsxs)("div",{"data-testid":"playlist-permissions-modal",className:El,children:[(0,f.jsxs)("div",{className:vl,children:[(0,f.jsxs)("div",{className:kl,children:[(0,f.jsx)(Ml,{isPublicPlaylist:(c=n.basePermissionLevel,"VIEWER"===c||"CONTRIBUTOR"===c)}),(0,f.jsx)("button",{className:Nl,onClick:a,children:(0,f.jsx)(l.M,{size:"small","aria-label":d.Ru.get("close")})})]}),(0,f.jsx)(o.E,{as:"h1",variant:"titleMedium",children:d.Ru.get("permissions.shared-with")})]}),(0,f.jsx)(ei.a,{className:Al,children:(0,f.jsx)("div",{className:Cl,children:(0,f.jsx)("div",{children:n.members&&n.members.map(e=>(0,f.jsx)(Ul,{playlistUri:t,member:e,username:i,capabilities:n.capabilities,onClose:a},e.user?.username))})})})]})}):null;var c};var Fl=a(62974);const Gl=()=>{const{isOpen:e,uri:t}=(0,r.useContext)(Fl.cM),a=(0,r.useContext)(Fl.VV),s=(0,r.useCallback)(()=>{a({type:"close"})},[a]);return e&&t?(0,f.jsx)(Bl,{isOpen:e,onClose:s,uri:t}):null};var Wl=a(27017);const Vl="search-modal-listbox";var zl=a(27936);const Hl="mWktZnvirv5K8ssiI4vC",Kl="qSZ_ggNRWVfmr9V3H2Pw",ql="XoarTWkRMvFtZcuxHVfP",Yl=(0,r.memo)(function(e){const{value:t,onChange:a,onKeyPress:r,hasResults:s,activeResultId:n,mode:i}=e,l="search"===i?Ao.C:zl.G,c="search"===i?d.Ru.get("search.search-for-label"):d.Ru.get("web-player.search-modal.search-entity");return(0,f.jsxs)("div",{className:Hl,children:[(0,f.jsx)(l,{className:Kl,"aria-hidden":!0}),(0,f.jsx)(o.E,{as:"input","data-testid":"search-modal-input",variant:"bodyMedium",className:ql,value:t,onKeyDown:r,onChange:a,placeholder:c,autoFocus:!0,role:"combobox","aria-expanded":s,"aria-controls":Vl,"aria-owns":Vl,"aria-activedescendant":n})]})}),Jl="iIaWJ3qSDLsKHwNCvv_g",Ql="Lw6EG_y5LKyd6U9d6Mdw",Zl="ElozL5z29OEj0LqVimIi",$l="ddCpW7GjZekszJgiykci",Xl="gxRk5nXgyjzegloZxrPj",ec="vYv4Yq5wHovbYg0isyEw",tc=({canOpen:e,canPlay:t,canSelect:a,canGoBack:r,hasNestedPage:s})=>e||t||a?(0,f.jsxs)("div",{className:Jl,children:[(0,f.jsx)(lc,{isActive:a,children:(0,f.jsx)(sc,{})}),(0,f.jsx)(lc,{isActive:e,children:(0,f.jsx)(nc,{})}),(0,f.jsx)(lc,{isActive:r,className:Xl,children:(0,f.jsx)(rc,{})}),(0,f.jsx)(lc,{isActive:s,className:ec,children:(0,f.jsx)(ac,{})}),(0,f.jsx)(lc,{isActive:t,children:(0,f.jsx)(ic,{})})]}):null;function ac(){const e="macOS"===Si().getParser(window.navigator.userAgent).getOSName()?"âŒ˜":"Ctrl";return d.Ru.get("web-player.search-modal.instructions.nested-page",{keys:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(oc,{children:e}),(0,f.jsx)(oc,{children:"Enter"})]})})}function rc(){return d.Ru.get("web-player.search-modal.instructions.go-back",{keys:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(oc,{children:"Esc"})})})}function sc(){return d.Ru.get("web-player.search-modal.instructions.navigate",{keys:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(oc,{children:"â†‘"}),(0,f.jsx)(oc,{children:"â†“"})]})})}function nc(){return d.Ru.get("web-player.search-modal.instructions.open",{keys:(0,f.jsx)(oc,{children:"Enter"})})}function ic(){return d.Ru.get("web-player.search-modal.instructions.play",{keys:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(oc,{children:"Shift"}),(0,f.jsx)(oc,{children:"Enter"})]})})}function oc({children:e}){return(0,f.jsx)(o.E,{as:"kbd",variant:"marginal",className:$l,semanticColor:"textSubdued",children:e})}function lc({children:e,isActive:t,className:a}){return(0,f.jsx)(o.E,{as:"p",variant:"marginal",semanticColor:"textSubdued",className:j()(Ql,a,{[Zl]:!t}),children:e})}var cc=a(70613);const dc={page:"search-results",query:"",selectedIndex:0},uc=[dc];function mc(e,t){const a=e[e.length-1];if(!a)return[t(dc)];const r=t(a);return[...e.slice(0,-1),r]}var gc=a(63087);const pc="PHc2S0KbFRWdyZMVGp1g",hc="TRTbNsUVMT7oUG20HO1I",bc="nqJxxzcxzi4hlBnfSKKO",yc=({title:e,pretitle:t,image:a,hasCircularImage:s,uri:n,onClickTitle:i})=>{const l=(0,r.useMemo)(()=>[{url:a,height:48,width:48}],[a]);return(0,f.jsxs)("div",{className:pc,children:[(0,f.jsx)("div",{className:hc,children:(0,f.jsx)(gc.M,{images:l,isCircular:s})}),(0,f.jsxs)("div",{className:bc,children:[t&&(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t}),(0,f.jsx)(So.N,{to:n,onClick:i,children:(0,f.jsx)(o.E,{variant:"titleSmall",semanticColor:"textBase",children:e})})]})]})},xc=Spicetify.GraphQL.Definitions["searchModalEntityPage"]=new at.l("searchModalEntityPage","query","1bf604eab778ca1b40fabc2a80a9dcd0ae4bfa0d447aea9a8a5551e38682a99e",null),Rc=e=>`search-modal-result-${e}`;function fc(e){return(0,ge.o_h)(e)?e:`spotify:genre:${e}`}function Ec(e){return"ImageV2"===e?.squareCoverImage?.image?.data?.__typename?e?.squareCoverImage?.image?.data?.sources?.[0]?.url:void 0}function vc(e){switch(e){case"Artist":case"User":case"Author":return!0;default:return!1}}var kc=a(77733),Cc=a(69509),jc=a(58873),Sc=a(13059),Nc=a(44265);const wc=(0,r.memo)(function(e){const{query:t,onResults:a,uri:s,numberOfResults:i}=e,o=(0,ms.n)(),l=(0,n.NC)(cc.Wvg),{data:c,error:u,loading:m}=(g={uri:s,includeAuthors:l,numberOfResults:i},p={gcTime:18e5,staleTime:3e5,enabled:!!s&&o,abortRequestWhenInactive:!1},(0,rt.I)(xc,g,p));var g,p;return(0,r.useEffect)(()=>{const e=c?.lookup.at(0),r=[];let s,n,i;if(!e||"UnknownTypeWrapper"===e.__typename)return;switch(e.__typename){case"AlbumResponseWrapper":{if("Album"!==e.data.__typename)return;const a=e.data.coverArt?.sources?.[0]?.url??"",o=(0,Cc.m)(e.data.coverArt?.extractedColors);s=e.data.name,n=d.Ru.get("web-player.search-modal.result.album"),i=a||void 0;for(const a of e.data.tracksV2.items){if("ContextTrack"!==a.__typename)continue;const e=`${a.track.trackNumber}. ${a.track.name}`,s=a.track.artists.items.map(e=>e.profile.name).join(d.Ru.getSeparator());t&&!(0,kc.u)(t,e,s)||r.push({type:"Track",title:e,image:"",color:o,subtitle:s,uri:a.track.uri})}break}case"ArtistResponseWrapper":if("Artist"!==e.data.__typename)return;s=e.data.profile.name,n=d.Ru.get("web-player.search-modal.result.artist"),i=Ec(e.data.visualIdentity);for(const a of e.data.discography.all.items)if("AlbumGroup"===a.__typename)for(const e of a.releases.items){if("Album"!==e.__typename)continue;if(t&&!(0,kc.u)(t,e.name))continue;const a=_c(e.date?.isoString,e.date?.precision),s=d.Ru.get("tracklist-header.songs-counter",e.tracksV2.totalCount);r.push({type:"Album",title:e.name,image:Ec(e.visualIdentity),color:void 0,subtitle:`${a} â€¢ ${s}`,uri:e.uri})}break;case"PlaylistResponseWrapper":if("Playlist"!==e.data.__typename||"PlaylistItemsPage"!==e.data.content.__typename)return;s=e.data.name,n=d.Ru.get("web-player.search-modal.result.playlist"),i=e.data.images.items.at(0)?.sources.at(0)?.url;for(const a of e.data.content.items){const e=a.itemV2;if("TrackResponseWrapper"===e.__typename&&"Track"===e.data.__typename){const a=e.data.name,s=e.data.artists.items.map(e=>e.profile.name).join(d.Ru.getSeparator());if(t&&!(0,kc.u)(t,a,s))continue;r.push({type:"Track",title:a,image:Ec(e.data.albumOfTrack?.visualIdentity),color:void 0,subtitle:s,uri:e.data.uri})}else if("EpisodeOrChapterResponseWrapper"===e.__typename&&"Episode"===e.data.__typename){const t=e.data.coverArt?.sources?.[0]?.url??"",a=(0,Cc.m)(e.data.coverArt?.extractedColors),s=e.data.coverArt?.sources?.[0]?.url??t,n=(0,Cc.m)(e.data.coverArt?.extractedColors)??a;r.push({type:"Episode",title:e.data.name,image:s,color:n,subtitle:_c(e.data.releaseDate?.isoString,e.data.releaseDate?.precision),uri:e.data.uri})}else"PodcastOrAudiobookResponseWrapper"===e.__typename&&"Audiobook"===e.data.__typename&&r.push({type:"Audiobook",title:e.data.name,image:Ec(e.data.visualIdentity),color:void 0,subtitle:e.data.publisher?.name??"",uri:e.data.uri})}break;case"AuthorResponseWrapper":if("AuthorV2"!==e.data.__typename||!e.data.audiobooks)return;s=e.data.name,n=d.Ru.get("web-player.search-modal.result.author"),i=Ec(e.data.visualIdentity);for(const t of e.data.audiobooks.items)"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename&&r.push({type:"Audiobook",title:t.data.name,image:Ec(t.data.visualIdentity),color:void 0,subtitle:t.data.publisher?.name??"",uri:t.data.uri});break;case"PodcastOrAudiobookResponseWrapper":{if("Podcast"!==e.data.__typename)return;const a=e.data.coverArt?.sources?.[0]?.url??"",o=(0,Cc.m)(e.data.coverArt?.extractedColors);if(s=e.data.name,n=d.Ru.get("web-player.search-modal.result.podcast"),i=a,!e.data.episodesV2||"ContextEpisodePage"!==e.data.episodesV2.__typename)return;for(const s of e.data.episodesV2.items){if("EpisodeResponseWrapper"!==s.entity.__typename||"Episode"!==s.entity.data.__typename)continue;const e=s.entity.data.name;if(t&&!(0,kc.u)(t,e))continue;const n=s.entity.data.coverArt?.sources?.[0]?.url??a,i=(0,Cc.m)(s.entity.data.coverArt?.extractedColors)??o;r.push({type:"Episode",title:e,image:n,color:i,subtitle:_c(s.entity.data.releaseDate?.isoString,s.entity.data.releaseDate?.precision),uri:s.entity.data.uri})}break}case"ConcertResponseWrapper":case"EpisodeOrChapterResponseWrapper":case"GenreResponseWrapper":case"MerchResponseWrapper":case"PreReleaseResponseWrapper":case"TrackResponseWrapper":case"UserResponseWrapper":break;default:(0,Sc.k)(e)}a({query:t,error:!!u,loading:m,results:r,metadata:s&&i?{title:s,pretitle:n,image:i}:void 0})},[c,u,m,a,t]),null});function _c(e,t){if(!e||!t)return"";const a=d.Ru.getLocaleForTranslation();return(0,Nc.rh)((0,Nc.ad)(e),a,{year:"numeric",month:"long",day:"numeric"},(0,jc.ht)(t))}const Tc=Spicetify.GraphQL.Definitions["searchModalResults"]=new at.l("searchModalResults","query","2e8641264de27f09317e1e1f9be0d5f2b1983165269628471d0de4ec35a02113",null);var Ic=a(72045);const Ac=(0,r.memo)(function(e){const{query:t,onResults:a,numberOfResults:s}=e,i=(0,ms.n)(),o=(0,n.NC)(cc.Wvg),{data:l,error:c,loading:u}=(m={limit:s,numberOfTopResults:s,offset:0,searchTerm:t,includeAuthors:o},g={gcTime:18e5,staleTime:3e5,enabled:t.trim().length>0&&i,abortRequestWhenInactive:!1},(0,rt.I)(Tc,m,g));var m,g;return(0,r.useEffect)(()=>{const e=l?.searchV2?.topResultsV2?.itemsV2??[],r=[];for(const{item:t,matchedFields:a}of e)if("UnknownTypeWrapper"!==t.__typename&&"PreReleaseResponseWrapper"!==t.__typename&&"SearchAutoCompleteEntity"!==t.__typename&&"SearchSectionEntity"!==t.__typename&&t.data)switch(t.data.__typename){case"Genre":r.push({type:"Genre",title:t.data.name,image:t.data.image?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.image?.extractedColors),subtitle:"",uri:fc(t.data.uri)});break;case"Album":{const e=t.data.artists.items.map(e=>e.profile.name).join(d.Ru.getSeparator());r.push({type:"Album",title:t.data.name,image:t.data.coverArt?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.coverArt?.extractedColors),subtitle:e,uri:t.data.uri});break}case"Artist":r.push({type:"Artist",title:t.data.profile.name,image:t.data.visuals.avatarImage?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.visuals.avatarImage?.extractedColors),subtitle:"",uri:t.data.uri});break;case"Track":{let e=t.data.artists.items.map(e=>e.profile.name).join(d.Ru.getSeparator());if(a.includes(Ic.tC.Lyrics)){e=`${e} Â· ${d.Ru.get("web-player.search-modal.lyrics-match")}`}r.push({type:"Track",title:t.data.name,image:t.data.albumOfTrack?.coverArt?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.albumOfTrack?.coverArt?.extractedColors),subtitle:e,uri:t.data.uri});break}case"Playlist":{const e="User"===t.data.ownerV2.data?.__typename?t.data.ownerV2.data.name:"",a=t.data.images.items.find(e=>e.sources);r.push({type:"Playlist",title:t.data.name,image:a?.sources?.[0]?.url??"",color:(0,Cc.m)(a?.extractedColors),subtitle:e,uri:t.data.uri});break}case"User":r.push({type:"User",title:t.data.name,image:t.data.avatar?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.avatar?.extractedColors),subtitle:"",uri:t.data.uri});break;case"Episode":{const e="Podcast"===t.data.podcastV2.data.__typename&&t.data.podcastV2.data.name||void 0,a=[t.data.releaseDate?.isoString?d.Ru.formatDate(new Date(t.data.releaseDate.isoString)):void 0,e].filter(Boolean).join(" â€¢ "),s=e?d.Ru.get("web-player.search-modal.a11y.contentbyartist",{item:t.data.name,creator:e,type:d.Ru.get("web-player.search-modal.result.episode")}):t.data.name;r.push({type:"Episode",title:t.data.name,image:t.data.coverArt?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.coverArt?.extractedColors),subtitle:a,uri:t.data.uri,label:s});break}case"Podcast":r.push({type:"Podcast",title:t.data.name,image:t.data.coverArt?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.coverArt?.extractedColors),subtitle:t.data.publisher?.name??"",uri:t.data.uri});break;case"Audiobook":r.push({type:"Audiobook",title:t.data.name,image:t.data.coverArt?.sources?.[0]?.url??"",color:(0,Cc.m)(t.data.coverArt?.extractedColors),subtitle:t.data.publisher?.name??"",uri:t.data.uri});break;case"AuthorV2":r.push({type:"Author",title:t.data.name,image:Ec(t.data.visualIdentity),color:void 0,subtitle:"",uri:t.data.uri});break;case"NotFound":case"RestrictedContent":case"GenericError":break;default:(0,Sc.k)(t.data)}a({query:t,error:!!c,loading:u,results:r})},[l,c,u,a,t]),null});var Oc=a(37668),Lc=a(37731),Dc=a(21943),Pc=a(10817),Uc=a(43171),Mc=a(7213),Bc=a(19397),Fc=a(21017),Gc=a(44856);const Wc="sue5UWY_USOrJJ8zsEqd",Vc=({children:e})=>(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Wc,children:e});var zc=a(96500);const Hc="Z35LRd6m4Po7n12dYmKu",Kc="JFITZPkvP8evQ3h7K2UQ",qc="tm2KfFBSL0DwJdxDxnvq",Yc="aC0wUEECTiFOoCI_V3pj",Jc="RL3WwyUmDSM8IdGuqlIV",Qc="zq9sf4RG0CAzruzuof76",Zc=({position:e,uri:t,title:a,image:s,color:n,subtitle:i,isSelected:l,onClick:c,tag:d,label:u,menu:m,hasCircularImage:g=!1})=>{const p=(0,r.useRef)(null);(0,r.useEffect)(()=>{l&&p.current?.scrollIntoView({behavior:"auto",block:"nearest"})},[l]);const{isActive:h}=(0,zc.l_)(t),b=(0,r.useCallback)(()=>{c({uri:t,position:e})},[c,e,t]),y=(0,r.useMemo)(()=>{if(s)return[{url:s,width:48,height:48}]},[s]),x={"--position":e};return(0,f.jsx)(gl.h,{menu:m,children:(0,f.jsxs)(So.N,{ref:p,to:t,className:j()(Hc,{[Kc]:l}),role:"option","aria-selected":l,onClick:b,id:Rc(t),style:x,tabIndex:-1,children:[(0,f.jsx)("span",{className:"hidden-visually",children:u}),y&&(0,f.jsx)("div",{className:Yc,"aria-hidden":!0,children:(0,f.jsx)(gc.M,{images:y,color:n,isCircular:g,desiredSize:48})}),(0,f.jsxs)("div",{className:Jc,"aria-hidden":!0,children:[(0,f.jsx)(o.E,{as:"p",variant:"bodyMedium",className:qc,semanticColor:h?"textBrightAccent":"textBase",children:a}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",className:qc,semanticColor:"textSubdued",children:i})]}),(0,f.jsx)("div",{className:Qc,"aria-hidden":!0,children:d&&(0,f.jsx)(Vc,{children:d})})]})})},$c=e=>{const{results:t,onClick:a,selectedIndex:r}=e;return(0,f.jsx)(f.Fragment,{children:t.map((e,t)=>(0,f.jsx)(Zc,{isSelected:r===t,uri:e.uri,title:e.title,image:e.image,color:e.color,subtitle:e.subtitle,position:t,onClick:a,tag:td(e),label:Xc(e),menu:ed(e),hasCircularImage:vc(e.type)},`${t}-${e.uri}`))})};function Xc(e){if(void 0!==e.label)return e.label;switch(e.type){case"Artist":case"Author":case"User":case"Genre":case"Podcast":case"Audiobook":case"Episode":return d.Ru.get("web-player.search-modal.a11y.label",{item:e.title,type:d.Ru.get("web-player.search-modal.result.artist")});case"Album":case"Track":case"Playlist":return d.Ru.get("web-player.search-modal.a11y.contentbyartist",{item:e.title,creator:e.subtitle,type:d.Ru.get("web-player.search-modal.result.track")});default:return(0,Sc.k)(e.type),e.title}}function ed(e){switch(e.type){case"Album":return(0,f.jsx)(Oc.h,{uri:e.uri});case"Artist":return(0,f.jsx)(Lc.t,{uri:e.uri});case"Author":return(0,f.jsx)(Gc.L,{uri:e.uri});case"Track":return(0,f.jsx)(Fc.P,{uri:e.uri});case"Playlist":return(0,f.jsx)(Mc.W,{uri:e.uri});case"User":return(0,f.jsx)(pl.B,{uri:e.uri});case"Genre":return(0,f.jsx)(Uc.h,{uri:e.uri});case"Episode":return(0,f.jsx)(Pc.b,{uri:e.uri});case"Podcast":return(0,f.jsx)(Bc.H,{uri:e.uri});case"Audiobook":return(0,f.jsx)(Dc.p,{uri:e.uri});default:return(0,Sc.k)(e.type),null}}function td(e){if(e.tag)return e.tag;switch(e.type){case"Album":return d.Ru.get("web-player.search-modal.result.album");case"Artist":return d.Ru.get("web-player.search-modal.result.artist");case"Author":return d.Ru.get("web-player.search-modal.result.author");case"User":return d.Ru.get("web-player.search-modal.result.user");case"Genre":return d.Ru.get("web-player.search-modal.result.genre");case"Episode":return d.Ru.get("web-player.search-modal.result.episode");case"Podcast":return d.Ru.get("web-player.search-modal.result.podcast");case"Audiobook":return d.Ru.get("web-player.search-modal.result.audiobook");case"Track":return d.Ru.get("web-player.search-modal.result.track");case"Playlist":return d.Ru.get("web-player.search-modal.result.playlist");default:return void(0,Sc.k)(e.type)}}var ad=a(88049),rd=a(43038);const sd="VZpSxFV1mVKehHTF1r9W",nd="ZuOMABESRg0Bpv8S9642",id="ljMZJ72BUdC7c85IE6GQ",od="yOSFN8gjw7LPo74pYe_g",ld="jX1eb5CcZMAuXo_wmZI0",cd="_7KcNGw4aZIGWk4fJvZS0",dd="CJCWzxw0S_yJx0wDlvPQ",ud="BGJFigbt4tZ2RFINF8Xu",md="ZLseqp41EmhPh82rMTXT",gd={modal:{base:dd,afterOpen:ud,beforeClose:md},overlay:{base:dd,afterOpen:ud,beforeClose:md}},pd=()=>{const e=(0,he.g)(),t=(0,n.NC)(cc.Kjv),a=(0,ad.Nf)(),{spec:s,logger:i,UBIFragment:l}=(0,vs.$)(Wl.I,{}),{currentPage:c,pages:u,addPage:m,goBack:g,setQuery:p,setSelectedIndex:h}=(()=>{const e=(0,n.NC)(cc.Kjv),[t,a]=(0,r.useState)(uc),s=(0,r.useCallback)(t=>{e&&a(e=>[...e,t])},[e]),i=(0,r.useCallback)(()=>{e&&a(e=>e.slice(0,-1))},[e]),o=(0,r.useCallback)(e=>{a(t=>mc(t,t=>({...t,query:e})))},[]),l=(0,r.useCallback)(e=>{a(t=>mc(t,t=>{const a="function"==typeof e?e(t.selectedIndex):e;return{...t,selectedIndex:a}}))},[]);return{currentPage:(0,r.useMemo)(()=>t[t.length-1]||dc,[t]),pages:t,setQuery:o,addPage:s,goBack:i,setSelectedIndex:l}})(),b=c.query,y=c.selectedIndex,x=(0,Ws.n)(s.getAbsoluteLocation(),s),[R,E]=(0,r.useState)([]),[v,k]=(0,r.useState)(void 0),[C,S]=(0,r.useState)(!1),N=!(0,ms.n)(),w=(0,r.useMemo)(()=>(0,ge.o_h)(b,{parseUnknown:!0}),[b]),_=w&&w.type!==ge.NQG.AD,T=(0,r.useCallback)(e=>{const t=e.target.value;t!==b&&(p(t),h(0),i.logInteraction(s.inputFactory().keyStrokeChangeSearchQuery({searchQueryString:t})))},[b,p,h,i,s]),I=(0,r.useCallback)(()=>{p(""),a({type:"CLOSE"})},[a,p]),A=(0,r.useCallback)(({uri:e,position:t})=>{i.logInteraction(s.searchResultFactory({position:t}).hitUiNavigate({destination:e})),I()},[I,i,s]),O=(0,rd.z)(),L=1===u.length,D=(0,r.useCallback)(a=>{const r=a.key;if("Escape"===r)L||(g(),a.stopPropagation());else if("ArrowUp"===r)h(e=>Math.max(e-1,0)),a.preventDefault();else if("ArrowDown"===r)h(e=>Math.min(e+1,Math.max(R.length-1,0))),a.preventDefault();else if("Enter"===r){if(_)return e(w.toURLPath(!0)),void I();const r=R[y];if(r)if(a.shiftKey){if(bd(r.type)){const e=s.searchResultFactory({position:y}).keyStrokePlay({itemToBePlayed:r.uri}),t=i.logInteraction(e);O.play({uri:r.uri},{featureIdentifier:"quick_search",referrerIdentifier:"PlayerStub_UnknownReferrer"},{loggingParams:t})}}else if((e=>"macOS"===Si().getParser(window.navigator.userAgent).getOSName()?e.metaKey:e.ctrlKey)(a))t&&yd(r.type)&&(m({page:"entity",type:r.type,uri:r.uri,query:"",selectedIndex:0}),E([]));else{const t=(0,ge.o_h)(r.uri),a=t?.toURLPath(!0);a&&(e(a),A({uri:r.uri,position:y}))}a.preventDefault()}},[L,g,h,R,_,y,e,w,I,O,s,i,t,m,A]),P=(0,r.useCallback)(e=>{S(e.loading),e.query===b&&(E(e.results),k(e.metadata))},[b]),U=R.length>0,M=R.at(y),B=M?Rc(M.uri):void 0,F=bd(M?.type),G=t&&yd(M?.type);return(0,f.jsx)(l,{spec:s,children:(0,f.jsxs)("div",{className:sd,ref:x,children:[(0,f.jsx)("div",{className:j()(nd,{[id]:R.length}),children:(0,f.jsx)(Yl,{value:b,onChange:T,onKeyPress:D,hasResults:U,activeResultId:B,mode:L?"search":"filter"})}),(0,f.jsx)(tc,{canSelect:U&&!_,canPlay:F,canOpen:U||!!_,canGoBack:!L,hasNestedPage:U&&G}),"search-results"===c.page&&(0,f.jsx)(Ac,{query:_?"":b,numberOfResults:30,onResults:P}),"entity"===c.page&&(0,f.jsx)(wc,{uri:c.uri,query:b,numberOfResults:100,onResults:P}),"entity"===c.page&&v&&U&&(0,f.jsx)(yc,{uri:c.uri,pretitle:v.pretitle,title:v.title,image:v.image,hasCircularImage:vc(c.type),onClickTitle:I}),!_&&U&&(0,f.jsx)("div",{className:od,id:Vl,role:"listbox","data-testid":"search-modal-results",children:(0,f.jsx)($c,{results:R,onClick:A,selectedIndex:y})}),!C&&b&&!U&&(0,f.jsxs)("div",{className:ld,onClick:I,children:[(0,f.jsx)(o.E,{className:cd,as:"h1",variant:"titleSmall",semanticColor:"textBase",children:d.Ru.get("search.empty-results-title",b)}),N&&(0,f.jsx)(o.E,{as:"p",semanticColor:"textBase",children:d.Ru.get("web-player.search-modal.offline")})]})]})})},hd=()=>{const{isOpen:e}=(0,ad.Qc)(),t=(0,ad.Nf)(),a=(0,r.useCallback)(()=>{t({type:"CLOSE"})},[t]);return e?(0,f.jsx)(nr.A,{contentLabel:d.Ru.get("web-player.search-modal.title"),isOpen:e,onRequestClose:a,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,animation:gd,children:(0,f.jsx)(pd,{})}):null};function bd(e){if(!e)return!1;switch(e){case"Album":case"Artist":case"Track":case"Playlist":case"Episode":case"Podcast":case"Audiobook":return!0;case"Author":case"User":case"Genre":return!1;default:return(0,Sc.k)(e),!1}}function yd(e){if(!e)return!1;switch(e){case"Playlist":case"Album":case"Artist":case"Podcast":case"Author":return!0;case"Audiobook":case"Track":case"Episode":case"User":case"Genre":return!1;default:return(0,Sc.k)(e),!1}}const xd=()=>{const e=(0,s.wA)(),{isOpen:t}=(0,s.d4)(e=>e.ui.personalizedRecommendationsErrorModal);return(0,f.jsx)(vi.x,{headingMessage:d.Ru.get("error-dialog.generic.header"),message:d.Ru.get("web-player.settings.personalized-recommendations.error-modal-message"),buttonLabel:d.Ru.get("web-player.settings.personalized-recommendations.error-modal-button"),onDismissDialog:()=>{e(Ha.bL.actions.close())},animated:!0,isOpen:t})};var Rd=a(4533);const fd="mGwsXGEqL4bOzjSlHmZ_",Ed="bwVaJCQV1rjdGan7XfzM",vd="nax0BMepxVcGKvCVZ6wE",kd=({onClose:e,handleRemove:t,primaryButtonText:a,secondaryButtonText:r,primaryButtonLabel:s=a})=>(0,f.jsxs)("div",{className:vd,children:[(0,f.jsx)(k.H,{onClick:e,semanticColor:"textSubdued","aria-label":"Cancel",children:r}),(0,f.jsx)(c.$,{"aria-label":s,autofocus:"true",onClick:t,children:a})]}),Cd=({onClose:e,primaryButtonText:t,secondaryButtonText:a})=>(0,f.jsxs)("div",{className:vd,children:[(0,f.jsx)(k.H,{onClick:e,semanticColor:"textSubdued",as:"a",href:Rd.nw,children:a}),(0,f.jsx)(c.$,{autofocus:"true",onClick:e,children:t})]});var jd=a(40908);const Sd=()=>{const e=(0,s.wA)(),{enqueueSnackbar:t}=(0,re.d)(),a=(0,jd.B)(),[n,i]=(0,r.useState)(null),l=(0,r.useCallback)(()=>{e((0,ae.MB)())},[e]),c=(0,r.useCallback)(async()=>{try{await a.removeAllDownloads(),l(),t(d.Ru.get("desktop.settings.storage.downloads.success"))}catch(e){i(e instanceof Error?e:new Error("Error when deleting all downloads."))}},[a,l,t]);return(0,f.jsx)(m.M,{animated:!0,className:Ed,onClose:l,"aria-describedby":"remove-downloads-dialog-heading",isOpen:!0,children:(0,f.jsxs)("div",{className:j()("encore-light-theme",fd),children:[(0,f.jsx)(o.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase","aria-live":"polite",id:"remove-downloads-dialog-heading",children:n?d.Ru.get("error.generic"):d.Ru.get("desktop.settings.storage.downloads.dialog.heading")}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",paddingBottom:te.CD,semanticColor:"textSubdued","aria-live":"polite",children:n?d.Ru.get("desktop.settings.storage.downloads.dialog.error"):d.Ru.get("desktop.settings.storage.downloads.dialog.text")}),n?(0,f.jsx)(Cd,{onClose:l,primaryButtonText:d.Ru.get("desktop.settings.storage.close"),secondaryButtonText:d.Ru.get("desktop.settings.storage.help")}):(0,f.jsx)(kd,{onClose:l,handleRemove:c,primaryButtonLabel:d.Ru.get("desktop.settings.storage.downloads.button"),primaryButtonText:d.Ru.get("desktop.settings.storage.downloads.remove"),secondaryButtonText:d.Ru.get("desktop.settings.storage.cancel")})]})})},Nd=()=>{const e=(0,s.wA)(),{enqueueSnackbar:t}=(0,re.d)(),a=(0,jd.B)(),[n,i]=(0,r.useState)(null),l=(0,r.useCallback)(()=>{e((0,ae.QK)())},[e]),c=(0,r.useCallback)(async()=>{try{await a.removeCache(),l(),t(d.Ru.get("desktop.settings.storage.cache.success"))}catch(e){i(e instanceof Error?e:new Error("Error when clearing cache."))}},[t,a,l]);return(0,f.jsx)(m.M,{animated:!0,className:Ed,onClose:l,"aria-describedby":"clear-cache-dialog-heading",isOpen:!0,children:(0,f.jsxs)("div",{className:j()("encore-light-theme",fd),children:[(0,f.jsx)(o.E,{id:"clear-cache-dialog-heading",as:"h2",variant:"titleSmall",semanticColor:"textBase","aria-live":"polite",children:n?d.Ru.get("error.generic"):d.Ru.get("desktop.settings.storage.cache.dialog.heading")}),(0,f.jsx)(o.E,{as:"p",variant:"bodySmall",paddingBottom:te.CD,semanticColor:"textSubdued","aria-live":"polite",children:n?d.Ru.get("desktop.settings.storage.cache.dialog.error"):d.Ru.get("desktop.settings.storage.cache.dialog.text")}),n?(0,f.jsx)(Cd,{onClose:l,primaryButtonText:d.Ru.get("desktop.settings.storage.close"),secondaryButtonText:d.Ru.get("desktop.settings.storage.help")}):(0,f.jsx)(kd,{onClose:l,handleRemove:c,primaryButtonText:d.Ru.get("desktop.settings.storage.cache.button"),secondaryButtonText:d.Ru.get("desktop.settings.storage.cancel")})]})})};var wd=a(45276);const _d="Ey2UD05GBvlWr3u3seC7",Td="mQOH6ehiFcJWUFmfM3TB",Id="CZsdb_rJLHeTRt4MeeI7",Ad=()=>{const e=(0,s.wA)(),{isOpen:t}=(0,s.d4)(e=>e.ui.introducingSmartShuffleModal),a=()=>{e(Ha.cI.actions.close())};return(0,f.jsx)(nr.A,{isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:a,contentLabel:d.Ru.get("web-player.smart-shuffle.introduction-modal-title"),overlayClassName:Id,children:(0,f.jsxs)("div",{className:_d,children:[(0,f.jsx)(wd.k,{size:"xxxlarge",semanticColor:"textBrightAccent"}),(0,f.jsxs)("div",{className:Td,children:[(0,f.jsx)(o.E,{variant:"titleMedium",semanticColor:"textBase",children:d.Ru.get("web-player.smart-shuffle.introduction-modal-title")}),(0,f.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textBase",children:d.Ru.get("web-player.smart-shuffle.introduction-modal-description")})]}),(0,f.jsx)(c.$,{onClick:a,children:d.Ru.get("web-player.smart-shuffle.introduction-modal-ok-button")})]})})};var Od=a(50253);var Ld=a(39941),Dd=a(93208),Pd=a(13382);var Ud=a(21024),Md=a(15430),Bd=a(84322);var Fd=a(34280),Gd=a(23647);var Wd=a(74777),Vd=a(52632),zd=a(13600);var Hd=a(60175),Kd=a(34457),qd=a(43115),Yd=a(90662);const Jd={get DEFAULT_PLAYBACK_STUCK(){return d.Ru.get("feedback.cant-play-track")},get FORCED_OFFLINE_MODE(){return d.Ru.get("feedback.track-not-available-forced-offline")},get CANT_OFFLINE_SYNC_PLAYLIST_IN_OFFLINE_MODE(){return d.Ru.get("feedback.cant-offline-sync-playlist-in-offline-mode")},get ARTIST_BANNED_BY_USER(){return d.Ru.get("feedback.artist-banned-by-user")},get TRACK_BANNED_BY_USER(){return d.Ru.get("feedback.track-banned-by-user")},get REGION_RESTRICTED(){return d.Ru.get("feedback.track-not-available-in-region-import")},get DEFAULT_PLAYER_ERROR(){return d.Ru.get("feedback.track-not-available-import")},get NETWORK_ERROR(){return d.Ru.get("feedback.video-playback-network-error")},get PREMIUM_RESTRICTED(){return d.Ru.get("feedback.track-exclusive-premium")},get CANT_SKIP_ADS(){return d.Ru.get("feedback.cant-skip-ads")},get CANT_PLAY_DURING_ADS(){return d.Ru.get("feedback.cant-play-during-ads")},get SKIP_ADS_TO_HEAR_SONG(){return d.Ru.get("feedback.skip-ads-to-hear-song")},get SKIP_AFTER_DELAY(){return d.Ru.get("feedback.skip-ads-after-delay")},get CAPPING_REACHED(){return d.Ru.get("capping.upsell-title")},get VIDEO_GEORESTRICTED(){return d.Ru.get("feedback.video-georestricted")},get VIDEO_UNSUPPORTED_CLIENT_VERSION(){return d.Ru.get("feedback.video-unsupported-client-version")},get VIDEO_UNSUPPORTED_PLATFORM_VERSION(){return d.Ru.get("feedback.video-unsupported-platform-version")},get VIDEO_COUNTRY_RESTRICTED(){return d.Ru.get("feedback.video-country-restricted")},get VIDEO_UNAVAILABLE(){return d.Ru.get("feedback.video-unavailable")},get VIDEO_CATALOGUE_RESTRICTED(){return d.Ru.get("feedback.video-catalogue-restricted")},get VIDEO_PLAYBACK_ERROR(){return d.Ru.get("feedback.video-playback-error")},get VIDEO_UNSUPPORTED_KEY_SYSTEM(){return d.Ru.get("feedback.video-unsupported-key-system")},get EXPLICIT_CONTENT_FILTERED(){return d.Ru.get("feedback.explicit-content-filtered")},get INTERRUPT_PLAYBACK_RESTRICTED(){return d.Ru.get("feedback.play-after-ad")}};function Qd(e){const t=e?.item??void 0;return(0,Kd.N)(t)&&t.isSkippableAd}function Zd(e,t,a){switch(t.code){case Hd.Z9.PLAYBACK_STUCK:return Jd.DEFAULT_PLAYBACK_STUCK;case Hd.Z9.ONE_TRACK_UNPLAYABLE:case Hd.Z9.ONE_TRACK_UNPLAYABLE_AUTO_STOPPED:case Hd.Z9.ALL_TRACKS_UNPLAYABLE_AUTO_STOPPED:return(r=t.reasons).includes(Hd.K7.NOT_AVAILABLE_IN_CURRENT_REGION)?Jd.REGION_RESTRICTED:r.includes(Hd.K7.NOT_AVAILABLE_IN_NON_PREMIUM)?Jd.PREMIUM_RESTRICTED:r.includes(Hd.K7.NOT_AVAILABLE_OFFLINE)?Jd.FORCED_OFFLINE_MODE:r.includes(Hd.K7.USER_CAPPING_REACHED)?Jd.CAPPING_REACHED:r.includes(Hd.K7.BANNED_BY_USER_ARTIST)?Jd.ARTIST_BANNED_BY_USER:r.includes(Hd.K7.BANNED_BY_USER_TRACK)?Jd.TRACK_BANNED_BY_USER:r.includes(Hd.K7.EXPLICIT_CONTENT_FILTERED)?Jd.EXPLICIT_CONTENT_FILTERED:Jd.DEFAULT_PLAYER_ERROR;case Hd.Z9.INTERRUPT_PLAYBACK_RESTRICTED:return Jd.INTERRUPT_PLAYBACK_RESTRICTED;case Hd.Z9.VIDEO_GEORESTRICTED:return Jd.VIDEO_GEORESTRICTED;case Hd.Z9.VIDEO_UNSUPPORTED_CLIENT_VERSION:return Jd.VIDEO_UNSUPPORTED_CLIENT_VERSION;case Hd.Z9.VIDEO_UNSUPPORTED_PLATFORM_VERSION:return Jd.VIDEO_UNSUPPORTED_PLATFORM_VERSION;case Hd.Z9.VIDEO_COUNTRY_RESTRICTED:return Jd.VIDEO_COUNTRY_RESTRICTED;case Hd.Z9.VIDEO_UNAVAILABLE:return Jd.VIDEO_UNAVAILABLE;case Hd.Z9.VIDEO_CATALOGUE_RESTRICTED:return Jd.VIDEO_CATALOGUE_RESTRICTED;case Hd.Z9.VIDEO_PLAYBACK_ERROR:return Jd.VIDEO_PLAYBACK_ERROR;case Hd.Z9.VIDEO_UNSUPPORTED_KEY_SYSTEM:return Jd.VIDEO_UNSUPPORTED_KEY_SYSTEM;case Hd.Z9.PAUSE_RESTRICTED:return t.reasons.some(e=>[Hd.K7.ALREADY_PAUSED,Hd.K7.NOT_PLAYING_LOCALLY].includes(e))?null:Jd.DEFAULT_PLAYER_ERROR;case Hd.Z9.RESUME_RESTRICTED:return t.reasons.includes(Hd.K7.NOT_PAUSED)?null:Jd.DEFAULT_PLAYER_ERROR;case Hd.Z9.PLAY_RESTRICTED:return t.reasons.includes(Hd.K7.AD_DISALLOW)?Qd(e)?Jd.SKIP_ADS_TO_HEAR_SONG:Jd.CANT_SKIP_ADS:null;case Hd.Z9.SKIP_TO_NEXT_RESTRICTED:return t.reasons.includes(Hd.K7.AD_DISALLOW)?Qd(e)?Jd.SKIP_AFTER_DELAY:Jd.CANT_PLAY_DURING_ADS:null;case Hd.Z9.TIMEOUT:return Jd.NETWORK_ERROR;case Hd.Z9.SKIP_TO_PREV_RESTRICTED:return t.reasons.includes(Hd.K7.THROTTLED)?null:Jd.DEFAULT_PLAYER_ERROR;default:return function(e,t){return!(t||!e.cause||!("status"in e.cause))&&0===e.cause.status}(t,a)?Jd.NETWORK_ERROR:Jd.DEFAULT_PLAYER_ERROR}var r}var $d=a(41462);var Xd=a(59452);var eu=a(79301),tu=a(21805),au=a(71669),ru=a(91744);const su=()=>(function(){const e=(0,rd.z)(),t=(0,ms.n)(),a=(0,Yd.g)(),{enqueueSnackbar:r}=(0,re.d)(),n=(0,s.wA)();(0,Pd.p)(Dd.gd.ERROR,({data:s})=>{if(s.code===Hd.Z9.AUDIO_FORMAT_NEGOTIATION_FAIL)return void n(Ha.J9.actions.open());if(s.reasons.includes(Hd.K7.EXPLICIT_CONTENT_FILTERED))return void n((0,ae.Ac)());const i=e.getState(),o=Zd(i,s,t);null!==o&&(a&&s.code===Hd.Z9.STOP_RESTRICTED||(0,qd.d)(i?.item??void 0)||r(o))})}(),function(){const{enqueueSnackbar:e}=(0,re.d)(),t=(0,ms.n)();(0,Pd.p)(Dd.gd.QUEUE_ACTION_COMPLETE,({data:a})=>{[Dd.UC.ADD,Dd.UC.REMOVE].includes(a.action)&&(a.error?t?((0,Ld.$)("feedback_banner","error","error.generic"),e(d.Ru.get("error.generic"))):e(d.Ru.get("offline.feedback-text")):a.showSnackbar&&(a.action===Dd.UC.ADD?e(d.Ru.get("queue.added-to-queue")):e(d.Ru.get("queue.removed-from-queue"))))})}(),function(){const{enqueueSnackbar:e}=(0,re.d)(),t=(0,Ud.W)(),a=(0,Le.m)(),r=(0,ms.n)();(0,Bd.e)(Md.Lj.OPERATION_COMPLETE,async({data:s})=>{if(s.operation===Md.sP.ADD&&!s.silent)if(s.error)r?((0,Ld.$)("feedback_banner","error","error.generic"),e(d.Ru.get("error.generic"))):e(d.Ru.get("offline.feedback-text"));else try{const{name:e,images:r}=await a.getMetadata(s.uri),n=(0,yt.g)(r,{desiredSize:24});t({message:d.Ru.get("feedback.added-to-playlist-specific",e),imageSrc:n?.url})}catch{e(d.Ru.get("feedback.added-to-playlist-generic"))}})}(),function(){const e=(0,fl.a)().getEvents(),t=(0,ms.n)(),{enqueueSnackbar:a}=(0,re.d)(),n=(0,s.d4)(e=>e.session?.user?.id);(0,r.useEffect)(()=>e.addListener($d.GV.OPERATION_COMPLETE,({data:e})=>{let r;if(e.error)t?((0,Ld.$)("feedback_banner","error","error.generic"),a(d.Ru.get("error.generic"))):a(d.Ru.get("offline.feedback-text"));else switch(e.operation){case $d.mA.SET_BASE_PERMISSION:return r="VIEWER"===e.permissionLevel?d.Ru.get("feedback.playlist-made-public"):d.Ru.get("feedback.playlist-made-private"),void a(r);case $d.mA.SET_MEMBER_PERMISSION:return r="VIEWER"===e.permissionLevel?d.Ru.get("feedback.member-made-listener"):d.Ru.get("feedback.member-made-contributor"),void a(r);case $d.mA.REMOVE_MEMBER:return r=n===e.username?d.Ru.get("feedback.left-playlist"):d.Ru.get("feedback.removed-member"),void a(r)}}),[n,a,t,e])}(),function(){const e=(0,As._)().getEvents(),t=(0,ms.n)(),{enqueueSnackbar:a}=(0,re.d)();(0,r.useEffect)(()=>e.addListener(Xd.tD.OPERATION_COMPLETE,({data:e})=>{if(!e.silent)if(e.error)t?((0,Ld.$)("feedback_banner","error","error.generic"),a(d.Ru.get("error.generic"))):a(d.Ru.get("offline.feedback-text"));else switch(e.operation){case Xd.ut.ADD:return void a(d.Ru.get("web-player.aligned-curation.feedback.added-to-library"));case Xd.ut.REMOVE:return void a(d.Ru.get("web-player.aligned-curation.feedback.removed-from-library"));case Xd.ut.MOVE:return void(e.showAddConfirmation&&a(d.Ru.get("web-player.aligned-curation.feedback.added-to-library")))}}),[a,t,e])}(),function(){const{enqueueSnackbar:e}=(0,re.d)(),t=(0,Ud.W)(),a=(0,ms.n)();(0,zd.l)(Vd.UV.OPERATION_COMPLETE,async r=>{if(r.data.silent)return;if(r.data.error)return void(a?((0,Ld.$)("feedback_banner","error","error.generic"),e(d.Ru.get("error.generic"))):e(d.Ru.get("offline.feedback-text")));const[s]=r.data.uris,n=(0,ge.o_h)(s)?.type;if(n===ge.NQG.TRACK||n===ge.NQG.LOCAL_TRACK){const e=(0,Wd.zK)();if(!e)return;const a=r.data.operation===Vd.tS.ADD?d.Ru.get("web-player.aligned-curation.feedback.added",e.name):d.Ru.get("web-player.aligned-curation.feedback.removed",e.name);return void t({message:a,imageSrc:(0,yt.g)(e.images,{desiredSize:24})?.url})}if(n===ge.NQG.EPISODE){const e=(0,Wd.dB)();if(!e)return;const a=r.data.operation===Vd.tS.ADD?d.Ru.get("web-player.aligned-curation.feedback.added",e.name):d.Ru.get("web-player.aligned-curation.feedback.removed",e.name);return void t({message:a,imageSrc:(0,yt.g)(e.images,{desiredSize:24})?.url})}e(r.data.operation===Vd.tS.ADD?d.Ru.get("web-player.aligned-curation.feedback.added-to-library"):d.Ru.get("web-player.aligned-curation.feedback.removed-from-library"))})}(),function(){const e=(0,Gd.l)(),{enqueueSnackbar:t}=(0,re.d)();(0,r.useEffect)(()=>{const a=e.getEvents(),r=a.addListener(Fd.ar.ADDED,({data:e})=>{if("client"===e.source&&"ignoreinrecs"===e.set){const a=e.uris.at(0);(0,ge.U_m)(a)?t(d.Ru.get("feedback.exclude-track-from-recommendations")):(0,ge.tbX)(a)&&t(d.Ru.get("feedback.exclude-playlist-from-recommendations"))}}),s=a.addListener(Fd.ar.REMOVED,({data:e})=>{if("client"===e.source&&"ignoreinrecs"===e.set){const a=e.uris.at(0);(0,ge.U_m)(a)?t(d.Ru.get("feedback.include-track-in-recommendations")):(0,ge.tbX)(a)&&t(d.Ru.get("feedback.include-playlist-in-recommendations"))}});return()=>{r(),s()}},[t,e])}(),(()=>{const{currentSession:e}=(0,tu.D)(),{enqueueSnackbar:t}=(0,re.d)(),a=(0,r.useRef)([]),s=(0,r.useRef)([]),n=(0,Qn.YQ)(e=>{if(e.isSessionOwner){switch(a.current.length){case 0:break;case 1:t(d.Ru.get("web-player.social-connect.toast.one-person-joined",{user:a.current[0]??""})),a.current=[];break;case 2:t(d.Ru.get("web-player.social-connect.toast.two-people-joined",{firstUser:a.current[0]??"",secondUser:a.current[1]??""})),a.current=[];break;default:t(d.Ru.get("web-player.social-connect.toast.multiple-people-joined",{user:a.current[a.current.length-1]??"",userCount:a.current.length-1})),a.current=[]}switch(s.current.length){case 0:break;case 1:t(d.Ru.get("web-player.social-connect.toast.one-person-left",{user:s.current[0]??""})),s.current=[];break;case 2:t(d.Ru.get("web-player.social-connect.toast.two-people-left",{firstUser:s.current[0]??"",secondUser:s.current[1]??""})),s.current=[];break;default:t(d.Ru.get("web-player.social-connect.toast.multiple-people-left",{user:s.current[s.current.length-1]??"",userCount:s.current.length-1})),s.current=[]}}},3e3,{leading:!0,trailing:!0}),i=(0,r.useCallback)(({data:e})=>{null===e.isSessionOwner||e.isSessionOwner||t(d.Ru.get("web-player.social-connect.toast.ended",{user:e.hostDisplayName??""}))},[t]),o=(0,r.useCallback)(({data:e})=>{a.current=e.users?[...a.current,...e.users]:a.current,n(e)},[n]),l=(0,r.useCallback)(({data:e})=>{s.current=e.users?[...s.current,...e.users]:s.current,n(e)},[n]),c=(0,r.useCallback)(({data:a})=>{e&&a&&a.active&&(e?.queueOnlyMode!==a?.queueOnlyMode&&(!1===a?.queueOnlyMode?t(e.isSessionOwner?d.Ru.get("web-player.social-connect.toast.queue-only-mode.host.disabled"):d.Ru.get("web-player.social-connect.toast.queue-only-mode.guest.disabled")):!0===a?.queueOnlyMode&&t(e.isSessionOwner?d.Ru.get("web-player.social-connect.toast.queue-only-mode.host.enabled"):d.Ru.get("web-player.social-connect.toast.queue-only-mode.guest.enabled"))),e?.participantVolumeControl!==a?.participantVolumeControl&&("ENABLED"===a?.participantVolumeControl?t(d.Ru.get("web-player.social-connect.toast.participant-volume-control.enabled")):"DISABLED"===a?.participantVolumeControl&&t(e.isSessionOwner?d.Ru.get("web-player.social-connect.toast.participant-volume-control.host.disabled"):d.Ru.get("web-player.social-connect.toast.participant-volume-control.guest.disabled"))))},[e,t]),u=(0,r.useCallback)(({data:e})=>{e===ru.RG.PERMISSIONS_RESTRICTED_GENERIC&&t(d.Ru.get("web-player.social-connect.toast.queue-only-mode.guest.warning"))},[t]);(0,au.J)(eu.K.SESSION_ENDED,i),(0,au.J)(eu.K.JOINED,o),(0,au.J)(eu.K.LEFT,l),(0,au.J)(eu.K.UPDATE,c),(0,au.J)(eu.K.SESSION_MESSAGE,u)})(),(()=>{const e=(0,n.NC)(cc.h6r),{currentDevice:t}=(0,Ri.l)(),{enqueueSnackbar:a}=(0,re.d)(),{currentlyPlayingContextUri:s,isCurrentlyPlayingContextMixed:i}=(0,Od.o)(e=>({currentlyPlayingContextUri:e?.context.uri,isCurrentlyPlayingContextMixed:e?.context.metadata?.mix,hasContext:e?.hasContext,item:e?.item}),(e,t)=>e?.hasContext===t?.hasContext&&e?.item?.uri===t?.item?.uri),[o,l]=(0,Ys.x)("mixing-not-available-for-device-notifications",{}),c=(0,r.useCallback)((e,t)=>{const r=`${e}:${t}`;o[r]||(a(d.Ru.get("web-player.tuna.connect-snackbar.text")),l(e=>({...e,[r]:!0})))},[a,l,o]);(0,r.useEffect)(()=>{e&&s&&i&&!t?.supportsPlaylistMixing&&t?.id&&c(s,t.id)},[e,s,i,t,c])})(),null),nu=()=>null;var iu=a(59639),ou=a(84492),lu=a(55164);const cu=(e,t)=>{switch(e){case lu.EL.SESSION_ENDED:return{title:d.Ru.get("web-player.social-connect.session-ended.title"),description:d.Ru.get("web-player.social-connect.session-ended.sub-title"),confirmText:d.Ru.get("web-player.social-connect.session-ended.confirmation-button"),ubiIdentifier:ou.gw.SESSION_ENDED};case lu.EL.ERROR:return{title:d.Ru.get("web-player.social-connect.generic-error.title"),description:d.Ru.get("web-player.social-connect.generic-error.sub-title"),confirmText:d.Ru.get("web-player.social-connect.generic-error.confirmation-button"),ubiIdentifier:ou.gw.ERROR};case lu.EL.END_SESSION:return{title:d.Ru.get("web-player.social-connect.end-session.title"),description:d.Ru.get("web-player.social-connect.end-session.sub-title"),confirmText:d.Ru.get("web-player.social-connect.end-session.confirm"),cancelText:d.Ru.get("web-player.social-connect.end-session.cancel")};case lu.EL.LEAVE_SESSION:return{title:d.Ru.get("web-player.social-connect.leave-session.title"),description:d.Ru.get("web-player.social-connect.leave-session.sub-title"),confirmText:d.Ru.get("web-player.social-connect.leave-session.leave-session-button"),cancelText:d.Ru.get("web-player.social-connect.leave-session.cancel")};case lu.EL.REMOVE_PARTICIPANT:return{title:d.Ru.get("web-player.social-connect.participant-list.remove-guest-dialog",{displayName:t}),description:"",confirmText:d.Ru.get("web-player.social-connect.participant-list.remove-guest"),cancelText:d.Ru.get("web-player.social-connect.participant-list.remove-guest-cancel")};default:return(0,Sc.k)(e),{confirmText:"",description:"",title:""}}};var du=a(7042);var uu=a(69804);const mu=({isOpen:e})=>{const t=(0,s.wA)(),{currentSession:a,deleteSession:n}=(0,tu.D)(),{logEndJam:i}=(()=>{const{spec:e,logger:t}=(0,vs.$)(du.Z,{});return{logEndJam:(0,r.useCallback)(()=>{t.logInteraction(e.endButtonFactory().hitStopHostingSocialListeningSession())},[t,e])}})(),o=(0,Ln.vh)(),{title:l,description:c,confirmText:d,cancelText:u}=cu(lu.EL.END_SESSION),m=(0,r.useCallback)(async()=>{i(),await n(),o.send((0,iu.c)({session_id:a?.sessionId,end_reason:uu.Mm.QUEUE_END_SESSION_BUTTON})),t((0,ae.cQ)())},[a?.sessionId,n,t,o,i]),g=(0,r.useCallback)(()=>{t((0,ae.cQ)())},[t]);return(0,f.jsx)(pe.T,{isOpen:e,onClose:g,onConfirm:m,titleText:l,"aria-label":l,descriptionText:c,confirmText:d,confirmLabel:d,cancelText:u})},gu=({isOpen:e,dialogType:t})=>{const a=(0,s.wA)(),{title:n,description:i,confirmText:o,ubiIdentifier:l}=cu(t),{spec:c,logger:d}=(0,Ia.r)(ou.Fh,{data:{identifier:l}}),u=(0,r.useCallback)(()=>{a((0,ae.cQ)())},[a]);return(0,r.useEffect)(()=>{e&&d.logImpression(c.impression())},[e,d,c]),(0,f.jsx)(pe.T,{isOpen:e,onClose:u,onConfirm:u,titleText:n,"aria-label":n,descriptionText:i,confirmText:o,confirmLabel:o})};var pu=a(74079);const hu=({isOpen:e})=>{const t=(0,s.wA)(),{currentSession:a,leaveSession:n}=(0,tu.D)(),{logLeaveJam:i}=(()=>{const{spec:e,logger:t}=(0,vs.$)(pu.Q,{});return{logLeaveJam:(0,r.useCallback)(()=>{t.logInteraction(e.leaveButtonFactory().hitLeaveSocialListeningSession())},[t,e])}})(),o=(0,Ln.vh)(),{title:l,description:c,confirmText:d,cancelText:u}=cu(lu.EL.LEAVE_SESSION),m=(0,r.useCallback)(async()=>{i(),await n(),o.send((0,iu.c)({session_id:a?.sessionId,end_reason:uu.Mm.QUEUE_LEAVE_SESSION_BUTTON})),t((0,ae.cQ)())},[a?.sessionId,t,o,n,i]),g=(0,r.useCallback)(()=>{t((0,ae.cQ)())},[t]);return(0,f.jsx)(pe.T,{isOpen:e,onClose:g,onConfirm:m,titleText:l,"aria-label":l,descriptionText:c,confirmText:d,confirmLabel:d,cancelText:u})};var bu=a(44899);const yu=({isOpen:e})=>{const t=(0,s.wA)(),{logRemoveClick:a}=(()=>{const{spec:e,logger:t}=(0,vs.$)(bu.T,{});return{logRemoveClick:(0,r.useCallback)((a,r)=>{t.logInteraction(e.buttonRowFactory().removeButtonFactory().hitRemoveParticipant({participantId:a,sessionId:r}))},[t,e])}})(),{currentSession:n,removeSessionMember:i}=(0,tu.D)(),{memberToRemove:o}=(0,s.d4)(e=>e.ui.jamModalState),l=o?.id??"",c=o?.displayName??"",d=n?.sessionId??"",{title:u,description:m,confirmText:g,cancelText:p}=cu(lu.EL.REMOVE_PARTICIPANT,c),h=(0,r.useCallback)(()=>{a(l,d),l&&(i(l),t((0,ae.cQ)()))},[a,l,d,i,t]),b=(0,r.useCallback)(()=>{t((0,ae.cQ)())},[t]);return(0,f.jsx)(pe.T,{isOpen:e,onClose:b,onConfirm:h,titleText:u,"aria-label":u,descriptionText:m,confirmText:g,confirmLabel:g,cancelText:p})},xu=({isOpen:e,dialogType:t})=>{switch(t){case lu.EL.LEAVE_SESSION:return(0,f.jsx)(hu,{isOpen:e});case lu.EL.END_SESSION:return(0,f.jsx)(mu,{isOpen:e});case lu.EL.REMOVE_PARTICIPANT:return(0,f.jsx)(yu,{isOpen:e});case lu.EL.SESSION_ENDED:case lu.EL.ERROR:return(0,f.jsx)(gu,{isOpen:e,dialogType:t});default:return null}};var Ru=a(91747);const fu=({size:e=60,className:t})=>(0,f.jsx)("img",{className:t,src:(0,_i.bj)("images/group-session-logo.svg"),height:e,width:e,alt:d.Ru.get("web-player.social-connect.group-session-logo-alt")}),Eu="LpwIP9nRkn6g76L2L6fE",vu="PTqgKn4X2miY76BTgmQf",ku="iKP6yArrPwRmzXz5FmwG",Cu="yvQmIQRQUyZGVHXq_MRH",ju="q3dVfrQLbp0oYlAdCRRs",Su=({imageElement:e,title:t,subtitle:a,confirmButtonText:r,confirmButtonIcon:s,onConfirm:n,cancelButtonText:i,onCancel:l,disabled:d,footerText:u})=>(0,f.jsxs)("div",{className:Eu,children:[e,(0,f.jsxs)("div",{className:vu,children:["string"==typeof t?(0,f.jsx)(o.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",className:ku,children:t}):t,"string"==typeof a?(0,f.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textBase",children:a}):a]}),(0,f.jsxs)("div",{className:Cu,children:[(0,f.jsx)(c.$,{onClick:n,disabled:d,iconTrailing:s,"data-testid":"jam-modal-confirm-button",children:r}),i&&(0,f.jsx)(k.H,{semanticColor:"textSubdued",onClick:l,disabled:d,children:i})]}),u&&(0,f.jsx)("div",{className:ju,children:(0,f.jsx)(o.E,{variant:"marginal",semanticColor:"textSubdued",children:u})})]});var Nu=a(63923),wu=a(41937),_u=a(10986);const Tu=({setContentLabel:e})=>{const{createSession:t,currentSession:a,deleteSession:n}=(0,tu.D)(),i=(0,_u.k)(),o=(0,Yd.g)(),l=(0,s.wA)(),c=(0,Ln.vh)(),u=(0,Nu.Z)(),m=(0,r.useCallback)(async()=>{await t()},[t]);(0,r.useEffect)(()=>{m()},[m]);const g=(0,wu.c)(),p=(0,r.useCallback)(async()=>{if(!o){const e=await t();if(!e?.joinSessionUri)return;c.send((0,Ru.q)({session_id:e.sessionId,device_type:g.deviceType,tech_type:g.techType,session_uri:e.joinSessionUri,session_type:uu.dF.REMOTE}))}i?.joinSessionShortLink&&u(i?.joinSessionShortLink),l((0,ae.cQ)())},[o,i?.joinSessionShortLink,l,t,c,g.deviceType,g.techType,u]),h=(0,r.useCallback)(async()=>{if(a){await n()&&c.send((0,iu.c)({session_id:a.sessionId,end_reason:uu.Mm.INVITATION_MODAL_CANCEL_BUTTON}))}l((0,ae.cQ)())},[a,n,l,c]),b=d.Ru.get("web-player.social-connect.invitation-modal.title");return(0,r.useEffect)(()=>{e(b)},[b,e]),(0,f.jsx)(Su,{imageElement:(0,f.jsx)(fu,{}),title:b,subtitle:d.Ru.get("web-player.social-connect.invitation-modal.subtitle"),confirmButtonText:d.Ru.get("web-player.social-connect.invitation-modal.button-primary"),onConfirm:p,cancelButtonText:d.Ru.get("web-player.social-connect.invitation-modal.button-tertiary"),onCancel:h})};var Iu=a(42570),Au=a(70651),Ou=a(97351),Lu=a(11823),Du=a(40765),Pu=a(14145),Uu=a(5116),Mu=a(25109);function Bu(){const{isLocalDevice:e,deviceName:t}=(0,Mu.v)(({activeDevice:e})=>({isLocalDevice:e?.isLocal??!0,deviceName:e?.name??""}),(e,t)=>e.deviceName===t.deviceName&&e.isLocalDevice===t.isLocalDevice);return function(e,t){return e?d.Ru.get("web-player.social-connect.join-modal.device-name.this-computer"):t}(e,t)}var Fu=a(58206),Gu=a(14754);const Wu="NNrzy0H6p7hh8c_5xAAw",Vu="sfNvh5j4OQc5W4JEnkQx",zu="qdG5E1Brr9e3CxWUtcGw",Hu="K4G_hpCv7IcdylB6dmp8",Ku="Jr0guhWsX9ixEstE1NJB",qu="y6ZN1lZjFvxV8IIEQKer",Yu="xIJp_dHe3b7guIXb5LvA",Ju="C4BALAoEBR9ff3mhemBr",Qu="vcZ0ZMvseZG1k0sdMLRH",Zu="qdu8x9shJVHRzjUxMJ50",$u="poPQ9RCFabecWrP7XxG1",Xu="DH1WPKay6fgtIlNeuT4O",em=()=>(0,f.jsxs)("div",{className:Zu,children:[(0,f.jsx)(Ou.D,{size:"xsmall",semanticColor:"textBase"}),(0,f.jsx)(o.E,{variant:"marginalBold",semanticColor:"textBase",children:d.Ru.get("navbar.premium")})]}),tm=({value:e,icon:t,title:a,subtitle:s,selected:n,onSelect:i,formWidth:l,setFormWidth:c})=>{const d=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if(d.current){const e=d.current.getBoundingClientRect().width;e>l&&c(Math.min(490,e+96+8))}},[l,c]),(0,f.jsxs)("div",{className:Ku,children:[(0,f.jsxs)("label",{className:qu,htmlFor:e,children:[t,(0,f.jsxs)("div",{className:Yu,style:{"--device-form-label-width":l-96+8+"px"},ref:d,children:[(0,f.jsx)(o.E,{variant:n?"bodyMediumBold":"bodyMedium",semanticColor:n?"textBrightAccent":"textBase",className:Qu,children:a}),(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:n?"textBrightAccent":"textSubdued",className:Qu,children:s})]})]}),(0,f.jsx)(Lu.M,{value:e,id:e,"data-testid":e,className:Ju,name:"session-type-radio",checked:n,onChange:()=>{i(e)}})]})},am=({sessionType:e,setSessionType:t,hostName:a})=>{const s=Bu(),n=(0,Mu.v)(({activeDevice:e})=>e?.type??Gu.bq.COMPUTER),i=(0,Uu.tf)(n),o=(0,Fu.l)(),[l,c]=(0,r.useState)(0);return(0,f.jsxs)(Du.g,{className:Hu,style:{"--device-form-width":`${l}px`},children:[(0,f.jsx)(tm,{value:uu.dF.REMOTE,icon:(0,f.jsx)(i,{semanticColor:e===uu.dF.REMOTE?"textBrightAccent":"textBase"}),title:d.Ru.get("web-player.social-connect.join-modal.continue-on-this-device",{device:s}),subtitle:d.Ru.get("web-player.social-connect.join-modal.continue-on-this-device-subtitle"),onSelect:t,selected:e===uu.dF.REMOTE,formWidth:l,setFormWidth:c}),o&&(0,f.jsx)(em,{}),(0,f.jsx)(tm,{value:uu.dF.IN_PERSON,icon:(0,f.jsx)(Pu.H,{semanticColor:e===uu.dF.IN_PERSON?"textBrightAccent":"textBase"}),title:d.Ru.get("web-player.social-connect.join-modal.play-from-host-speaker",{host:a}),subtitle:d.Ru.get("web-player.social-connect.join-modal.play-from-host-speaker-subtitle"),onSelect:t,selected:e===uu.dF.IN_PERSON,formWidth:l,setFormWidth:c})]})},rm=({deviceName:e,deviceType:t,isGroup:a,isNearbyJam:r})=>{const s=(0,Uu.tf)(t,a);return(0,f.jsxs)(o.E,{variant:"bodyMediumBold",as:"div",className:j()(Xu,$u),semanticColor:r?"textBase":"textBrightAccent",children:[(0,f.jsx)(s,{}),(0,f.jsx)("span",{className:$u,children:d.Ru.get("web-player.social-connect.broadcasting.join-listening-session-modal.subtitle",{deviceName:e})})]})};var sm=a(13140);const nm="H_uEzNF24L0DXTU3Y8Cu",im="xsU58XX3iteX_bJUyuNZ",om="F8CilD2_SR5yVqNJX7ff",lm=()=>(0,f.jsx)("div",{className:Eu,children:(0,f.jsxs)("div",{className:nm,children:[(0,f.jsx)(sm.Y,{as:"h3",variant:"titleSmall",className:om,charCount:16,isLoading:!0}),[[20,50,25],[40,28,35]].map((e,t)=>(0,f.jsx)("div",{className:im,children:e.map((e,t)=>(0,f.jsx)(sm.Y,{as:"div",variant:"bodySmall",className:om,charCount:e,isLoading:!0},`${e}-${t}`))},`skeleton-section-${t}`))]})});var cm=a(70397),dm=a(89877),um=a(55020);var mm=a(70834),gm=function(e){return e.NONE="NONE",e.JOINING="JOINING",e.JOINED="JOINED",e.FAILED="FAILED",e}(gm||{});const pm=({modalType:e,joinToken:t,jamDeviceInfo:a,setContentLabel:n})=>{const i=(0,s.wA)(),{getSessionInfo:l,joinSession:c}=(0,tu.D)(),{openURLWithSessionTransfer:u}=(0,wa.L)(),m=(0,fi.D)(),{logJoin:g,logUpgradeToPremium:p,logCancel:h,logTakeOverSpeaker:b}=(()=>{const{spec:e,logger:t}=(0,vs.$)(um.U,{});return{logJoin:(0,r.useCallback)(()=>{const a=e.joinButtonFactory().hitJoinSocialListeningSession();t.logInteraction(a)},[t,e]),logUpgradeToPremium:(0,r.useCallback)((a,r)=>{let s;s=a?e.upsellButtonFactory().hitNavigateToExternalUri({destination:r}):e.upsellButtonFactory().hitUiNavigate({destination:r}),t.logInteraction(s)},[t,e]),logCancel:(0,r.useCallback)(()=>{const a=e.cancelButtonFactory().hitUiHide();t.logInteraction(a)},[t,e]),logTakeOverSpeaker:(0,r.useCallback)(a=>{const r=e.takeOverSpeakerButtonFactory().hitConnectToRemoteDevice({remoteDeviceId:a});t.logInteraction(r)},[t,e])}})(),y=(0,Ln.vh)(),[x,R]=(0,r.useState)(null);let E;switch(e){case lu.EL.JOIN_LISTENING_SESSION:case lu.EL.JOIN_NEARBY_JAM:E=uu.dF.IN_PERSON;break;default:E=uu.dF.REMOTE}const[v,k]=(0,r.useState)(E),C=(0,dm.C)(),j=C===mm.lz.FREE&&v===uu.dF.REMOTE;let S,N;switch(e){case lu.EL.JOIN_NEARBY_JAM:S=mm.JO.DISCOVERED_DEVICE,N="bluetooth";break;case lu.EL.JOIN_LISTENING_SESSION:S=mm.JO.DISCOVERED_DEVICE,N="broadcast";break;default:S=mm.JO.DEEPLINKING,N="user"}(0,r.useEffect)(()=>{l(t).then(e=>{if(e){R(e);const t=e.sessionMembers.find(t=>t.id===e.sessionOwnerId);return void n(d.Ru.get("web-player.social-connect.join-modal.title",{host:t?.displayName??""}))}i((0,ae.A9)(lu.EL.SESSION_ENDED))})},[i,l,t,n]);const[w,_]=(0,r.useState)(gm.NONE),T=(0,r.useCallback)(async()=>{_(gm.JOINING),g();try{const e=await c(t,S,v);e&&(_(gm.JOINED),y.send((0,Iu.X)({session_id:x?.sessionId,join_type:S,join_url:e.joinSessionUri,participation_mode:v,discovery_methods:[N]})),C!==mm.lz.FREE&&i((0,ae.cQ)()))}catch(e){_(gm.FAILED),e instanceof Error&&y.send((0,Iu.X)({session_id:x?.sessionId,error_category:e.name,error_data:e.message,discovery_methods:[N]})),i((0,ae.A9)(lu.EL.ERROR))}},[N,i,y,C,c,t,S,g,x?.sessionId,v]),I=(0,he.g)(),A=(0,xs.k)(!0),O=(0,r.useMemo)(()=>{const e=new URL(A.url);return e.searchParams.set("ref","jam"),e},[A.url]),L=(0,r.useCallback)(()=>{let e;!1===A.isExternal?I(O.href):(e=O.href,u(e)),p(A.isExternal,O.href),i((0,ae.cQ)())},[i,I,u,p,A.isExternal,O]),D=(0,r.useCallback)(()=>{e===lu.EL.JOIN_LISTENING_SESSION&&a?(m.transferPlayback(a.id,{interactionId:""}),b(a.id)):h(),i((0,ae.cQ)())},[a,m,i,h,b,e]);if(!x)return(0,f.jsx)(lm,{});const P=x.sessionMembers.find(e=>e.id===x.sessionOwnerId),U=x.sessionMembers.map(cm.c);if(w===gm.JOINED&&C===mm.lz.FREE)return(0,f.jsx)(Su,{imageElement:(0,f.jsx)(Au.g,{users:U,size:"xlarge",maxSlots:3}),title:(0,f.jsx)(o.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",className:Wu,children:d.Ru.get("web-player.social-connect.join-modal.success.title",{host:(0,f.jsx)("span",{className:Vu,children:P?.displayName??""})})}),subtitle:(0,f.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",className:zu,children:d.Ru.get("web-player.social-connect.join-modal.success.subtitle")}),confirmButtonText:d.Ru.get("web-player.social-connect.generic-error.confirmation-button"),onConfirm:()=>{i((0,ae.cQ)())}});const M=e===lu.EL.JOIN_LISTENING_SESSION?d.Ru.get("web-player.social-connect.broadcasting.join-listening-session-modal.button-tertiary"):d.Ru.get("web-player.social-connect.join-modal.button-tertiary");let B;switch(e){case lu.EL.JOIN_LISTENING_SESSION:B=(0,f.jsx)(rm,{deviceName:a?.name??"",deviceType:Gu.bq.SPEAKER,isGroup:a?.isGroup??!1});break;case lu.EL.JOIN_NEARBY_JAM:B=(0,f.jsx)(rm,{deviceName:a.name,deviceType:a.type,isGroup:a.isGroup,isNearbyJam:!0});break;default:B=(0,f.jsx)(am,{sessionType:v,setSessionType:k,hostName:P?.displayName??""})}return(0,f.jsx)(Su,{imageElement:(0,f.jsx)(Au.g,{users:U,size:"xlarge",maxSlots:3}),title:(0,f.jsx)(o.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",className:Wu,children:d.Ru.get("web-player.social-connect.join-modal.title",{host:(0,f.jsx)("span",{className:Vu,children:P?.displayName??""})})}),subtitle:B,confirmButtonText:j?d.Ru.get("web-player.social-connect.premium-upsell.confirmation-button"):d.Ru.get("web-player.social-connect.join-modal.button-primary"),confirmButtonIcon:j?$n.H:void 0,onConfirm:j?L:T,cancelButtonText:M,onCancel:D,disabled:w===gm.JOINING,footerText:d.Ru.get("web-player.social-connect.join-modal.privacy-notice")})};var hm=a(19615);const bm=({joinToken:e})=>{const t=(0,s.wA)(),{logGetAppClick:a}=(()=>{const{spec:e,logger:t}=(0,vs.$)(hm.e,{});return{logGetAppClick:(0,r.useCallback)(()=>{const a=e.downloadButtonFactory().hitNavigateToExternalUri({destination:(0,Bi.rw)().href});t.logInteraction(a)},[t,e])}})(),{getSessionInfo:n}=(0,tu.D)(),[i,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{n(e).then(e=>{if(e){const t=e?.sessionOwnerId,a=e?.sessionMembers.find(e=>e.id===t),r=e?.sessionMembers.map(cm.c)??[];if(u(r),!a)return;return void l(a.displayName)}t((0,ae.A9)(lu.EL.SESSION_ENDED))})},[n,e,t]);const m=(0,r.useCallback)(()=>{t((0,ae.cQ)())},[t]),g=(0,r.useCallback)(()=>{a();const r=(0,ge.MZA)(e);window.open((0,Bi.rw)(r).href),t((0,ae.cQ)())},[t,e,a]);return(0,f.jsx)(Su,{imageElement:(0,f.jsx)(Au.g,{users:c,size:"xlarge",maxSlots:3}),title:(0,f.jsx)(o.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",children:d.Ru.get("web-player.social-connect.redirect-modal.title",{host:i??""})}),subtitle:d.Ru.get("web-player.social-connect.redirect-modal.sub-title"),confirmButtonText:d.Ru.get("web-player.social-connect.redirect-modal.confirmation-button"),onConfirm:g,cancelButtonText:d.Ru.get("web-player.social-connect.redirect-modal.cancel-button"),onCancel:m})},ym=()=>{const e=(0,s.wA)(),{isOpen:t,modalType:a,joinToken:n,jamDeviceInfo:i}=(0,s.d4)(e=>e.ui.jamModalState),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{switch(d(void 0),a){case lu.EL.INVITE:l((0,f.jsx)(Tu,{setContentLabel:d}));break;case lu.EL.JOIN:if(!n)throw new Error("trying to open JoinModal without providing a joinToken!");l((0,f.jsx)(pm,{modalType:lu.EL.JOIN,joinToken:n,setContentLabel:d}));break;case lu.EL.JOIN_LISTENING_SESSION:if(!n||!i)throw new Error("trying to open JoinModal without providing a joinToken and jamDeviceInfo!");l((0,f.jsx)(pm,{modalType:lu.EL.JOIN_LISTENING_SESSION,joinToken:n,jamDeviceInfo:i,setContentLabel:d}));break;case lu.EL.JOIN_NEARBY_JAM:if(!n||!i)throw new Error("trying to open JoinModal for a nearby jam without providing a joinToken and jamDeviceInfo!");l((0,f.jsx)(pm,{modalType:lu.EL.JOIN_NEARBY_JAM,joinToken:n,jamDeviceInfo:i,setContentLabel:d}));break;case lu.EL.REDIRECT:if(!n)throw new Error("trying to open RedirectModal without providing a joinToken!");l((0,f.jsx)(bm,{joinToken:n}));break;case lu.EL.LEAVE_SESSION:case lu.EL.END_SESSION:case lu.EL.REMOVE_PARTICIPANT:case lu.EL.SESSION_ENDED:case lu.EL.ERROR:l((0,f.jsx)(xu,{isOpen:t,dialogType:a}));break;default:l(null)}},[t,a,n,i]),a?(e=>e===lu.EL.LEAVE_SESSION||e===lu.EL.END_SESSION||e===lu.EL.REMOVE_PARTICIPANT||e===lu.EL.SESSION_ENDED||e===lu.EL.ERROR)(a)?o:(0,f.jsx)(nr.A,{isOpen:t,onRequestClose:()=>e((0,ae.cQ)()),shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,animated:!0,contentLabel:c,children:o}):null},xm=(0,r.lazy)(async()=>{const{DeleteCommentDialog:e}=await a.e(4483).then(a.bind(a,77061));return{default:e}});var Rm=a(68117),fm=a(33138);function Em(e,t){if(e){const a=(0,ge.o_h)(e,{parseUnknown:!0});if(a){t(a.toURLPath(!0))}else{const t=document.createElement("a");t.href=e,t.target="_blank",t.click()}}}var vm=a(9221),km=a(68644);function Cm(e,t,a,r){if(e&&""===e.innerHTML){const s=function(e,t,a){const r=(0,vm.kp)();if(r){const s=r.createIframe(e,a);return s.setAttribute("data-testid","inAppMessageIframe"),s.style.borderRadius="5px",s.style.margin="auto",s.style.opacity="0",s.style.transition="opacity 150ms linear",s.addEventListener("load",()=>{const{contentWindow:e,contentDocument:a}=s;e&&function(e){e&&e.focus()}(e),a&&(km.M.setup(a),function(e,t){const a=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=a[0],s=a[a.length-1];e.addEventListener("keydown",e=>{"Tab"===e.key&&e.target===s&&(e.preventDefault(),r.focus()),e.shiftKey&&"Tab"===e.key&&s.focus(),"Escape"!==e.key&&27!==e.keyCode||t()},!0)}(a,t)),s.style.opacity="1"}),s}return null}(t,a,r);s&&e.appendChild(s)}}function jm(e,t){const a=(0,s.wA)(),n=(0,he.g)(),i=(0,r.useCallback)(()=>{a((0,fm.yv)())},[a]);(0,r.useEffect)(()=>{const a=t.current;return Cm(a,e,i,((e,t)=>a=>{switch(a.action){case"DISMISS":default:return void e();case"URL":{const{url:r=""}=a;return Em(r,t),void e()}case"EXTERNAL_URL":{const{url:e=""}=a;return void Em(e,t)}}})(i,n)),()=>{!function(e){e&&(e.innerHTML="")}(a)}},[e,i,a,t,n])}function Sm({message:e}){const t=(0,r.useRef)(null);return jm(e,t),(0,f.jsx)("div",{"data-testid":"inAppMessageContainer",ref:t})}function Nm(){return(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(wm,{})})}function wm(){const e=(0,n.NC)(cc.e6f),{message:t,dismissMessage:a}=function(){const e=(0,s.wA)();return{message:(0,s.d4)(e=>e.inAppMessaging?.message),dismissMessage:(0,r.useCallback)(()=>{e((0,fm.yv)())},[e])}}(),i=!!t&&t.format===vm.m0;return e?(0,f.jsx)(nr.A,{animated:!0,contentLabel:"In-App Message Modal",isOpen:i,onRequestClose:a,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!1,children:i&&!!t&&(0,f.jsx)(Sm,{message:t})}):null}var _m=a(93747);const Tm=(0,r.lazy)(async()=>{const{DsaModal:e}=await a.e(8298).then(a.bind(a,8298));return{default:e}}),Im=(0,r.lazy)(async()=>{const{YourSoundCapsuleModal:e}=await a.e(4574).then(a.bind(a,55238));return{default:e}}),Am=(0,r.lazy)(async()=>{const{ListeningStatsModal:e}=await a.e(8972).then(a.bind(a,58544));return{default:e}}),Om=r.memo(({isDesktop:e})=>{const t=(0,n.NC)(cc.J1t,{loadingValue:!1}),a=(0,n.NC)(cc.yFD,{loadingValue:!1}),i=(0,r.useRef)(null),o=(0,r.useRef)(null),l=(0,s.d4)(e=>e.ui.deletePlaylistDialog),c=(0,s.d4)(e=>e.ui.deleteFolderDialog),d=(0,s.d4)(e=>e.ui.removeFromLibraryDialog),u=(0,s.d4)(e=>e.ui.premiumDialog),m=(0,s.d4)(e=>e.ui.improvedSignupPromptDialog),g=(0,s.d4)(e=>e.ui.removeDownloadsDialog),p=(0,s.d4)(e=>e.ui.clearCacheDialog),h=(0,s.d4)(e=>e.ui.renameFolderModal),b=(0,s.d4)(e=>e.ui.removeDownloadConfirmationDialog),y=(0,s.d4)(e=>e.ui.artistAboutDialog),x=(0,s.d4)(e=>e.ui.authorAboutDialog.isOpen),R=(0,s.d4)(e=>e.ui.yourDJUpsellDialog),v=(0,s.d4)(e=>e.ui.dsaDialog),k=(0,s.d4)(e=>e.ui.trackCreditsModal),C=(0,s.d4)(e=>e.ui.snakeGameModal),j=(0,s.d4)(e=>e.ui.restrictionsModalState),S=(0,s.d4)(_m.fl),N=(0,s.d4)(_m.ml),w=(0,no.JY)(),_=(0,dl.V)();return(0,f.jsxs)(f.Fragment,{children:[l.isOpen&&(0,f.jsx)(je,{}),c.isOpen&&(0,f.jsx)(ye,{}),d.isOpen&&(0,f.jsx)(Os,{}),u.isOpen&&(0,f.jsx)(Ns,{}),m.isOpen&&(0,f.jsx)(Ki,{uri:m.uri}),g.isOpen&&(0,f.jsx)(Sd,{}),p.isOpen&&(0,f.jsx)(Nd,{}),h.isOpen&&(0,f.jsx)(Ds,{name:h.name,onRename:h.handleRename}),b.isOpen&&(0,f.jsx)($o,{...b}),y.isOpen&&(0,f.jsx)(lo,{}),x&&(0,f.jsx)(_o,{}),w&&(0,f.jsx)(so,{}),(0,f.jsx)(ao,{}),R.isOpen&&(0,f.jsx)(Rm.tW,{}),(0,f.jsx)(ym,{}),j.isOpen&&(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Hs,{})}),(0,f.jsx)(Ad,{}),(0,f.jsx)(Za,{}),(0,f.jsx)(Ja,{}),(0,f.jsx)(xd,{}),(0,f.jsx)(vo,{}),v.isOpen&&v.item&&(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Tm,{item:v.item})}),(0,f.jsx)(Cn,{}),(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(bs,{})}),(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Gl,{})}),(0,f.jsx)(pa,{}),(0,f.jsx)(Fe,{}),(0,f.jsx)(Ba,{}),(0,f.jsx)(ue,{}),e&&(0,f.jsx)(Ie,{}),(0,f.jsx)(E,{}),(0,f.jsx)(il.A,{languageSelectionModalRef:i}),(0,f.jsx)(Ko,{countrySelectionModalRef:o}),(0,f.jsx)(Nm,{}),(0,f.jsx)(wi,{}),(0,f.jsx)(Ci,{}),(0,f.jsx)(ee,{}),(0,f.jsx)(nl,{}),(0,f.jsx)(Qo,{}),(0,f.jsx)(Qs,{}),(0,f.jsx)(hd,{}),(0,f.jsx)(Aa,{}),(0,f.jsx)(su,{}),S&&!e&&(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Im,{})}),!e&&(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(Am,{})}),k.isOpen&&(a?(0,f.jsx)(yi,{}):(0,f.jsx)(Jn,{})),(0,f.jsx)("div",{ref:i}),(0,f.jsx)("div",{ref:o}),N&&t&&(0,f.jsx)(Ei,{}),(0,f.jsx)(ha,{}),(0,f.jsx)(xm,{}),C.isOpen&&nu&&(0,f.jsx)(nu,{}),_&&(0,f.jsx)(cl,{})]})})},98117:(e,t,a)=>{a.d(t,{a:()=>r});let r=function(e){return e.AUDIO_QUALITY_STEAMING="audio_quality_streaming",e.AUDIO_QUALITY_STEAMING_REMOTE="audio_quality_streaming_remote",e.DSA="dsa",e.PUBLISH_LISTENING_ACTIVITY="publish_listening_activity",e.PUBLISH_NEW_PLAYLISTS="publish_new_playlists",e.OUTPUT_DEVICE_SELECTION="output_device_selection",e}({})}}]);
//# sourceMappingURL=xpui-root-dialogs.js.map