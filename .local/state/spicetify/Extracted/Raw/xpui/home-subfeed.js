"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[347],{22384:(e,t,s)=>{s.d(t,{HomeSubfeedWithRedirect:()=>Ne});var i=s(30758),o=s(97500),n=s.n(o),a=s(91198),l=s(60686),r=s(54091),c=s(2050),d=s(80128),u=s(52040),m=s(62111),p=s(57748),h=s(86015);const g="spotify:list:whats-new:podcasts";var f=s(60940),x=s(73136),y=s(86070);const b=({label:e,onClick:t})=>(0,y.jsx)(x.$,{size:"small",colorSet:"inverted",onClick:t,children:e}),j="dkFZWIK1aJUM0S0HKYWT",w="rQFMt0XJtoE_cL1s5GLy",C="qsL6i9mM4BfCAw8Ilmkf",R=({children:e})=>(0,y.jsx)("div",{className:j,children:e});var A=s(78717);const S=({title:e,description:t})=>(0,y.jsxs)("div",{className:C,children:[(0,y.jsx)(A.E,{variant:"titleSmall",semanticColor:"textBase",as:"h2",children:e}),(0,y.jsx)(A.E,{variant:"bodySmall",as:"p",children:t})]});var v=s(832),I=s(89307);var N=s(40786),F=s(22841),E=s(58248),P=s(55517);const L="/genre/0JQ5DAqbMKFSi39LMRT0Cy",_=()=>(0,y.jsxs)(R,{children:[(0,y.jsx)(f.i,{size:"xlarge",semanticColor:"textBase"}),(0,y.jsx)(S,{title:r.Ru.get("web-player.subfeeds.home.subfeed.following.empty-state.all-caught-up.title"),description:r.Ru.get("web-player.subfeeds.home.subfeed.music-following.empty-state.all-caught-up.description")})]}),T=()=>(0,y.jsx)("img",{src:"https://nftonboarding-images.scdn.co/delayed-to.png",alt:"",className:w}),k=()=>{const e=(0,F.f)().replace("-chip",""),t=(0,E.g)(),{extensions:s}=(0,N.Y)(),{spec:o,logger:n}=(0,P.$)(l.Y,{data:{identifier:"home",uri:`spotify:home:${e}`,reason:(0,u.getRequestIdForImpressions)(s)??""}}),a=(0,i.useCallback)(()=>{n.logInteraction(o.musicFollowingEmptyStateCtaFactory().hitUiNavigate({destination:L})),t(L)},[o,n,t]);return(0,y.jsxs)(R,{children:[(0,y.jsx)(T,{}),(0,y.jsx)(S,{title:r.Ru.get("web-player.subfeeds.home.subfeed.music-following.empty-state.empty.title"),description:r.Ru.get("web-player.subfeeds.home.subfeed.music-following.empty-state.empty.description")}),(0,y.jsx)(b,{label:r.Ru.get("web-player.subfeeds.home.subfeed.music-following.empty-state.empty.button-label"),onClick:a})]})},B=()=>{const{followsArtists:e}=(()=>{const e=(0,v.f)(),[t,s]=(0,i.useState)(null);return(0,i.useEffect)(()=>{!async function(){try{const t=e.getContentsPrimaryFilterId(I.c.ARTIST);if(!t)return void s(!1);const i=await e.getContents({offset:0,limit:1,filters:[t]});s(i.items.length>0)}catch(e){s(!1)}}()},[e]),{followsArtists:t}})();return e?(0,y.jsx)(_,{}):(0,y.jsx)(k,{})};var M=s(93517),$=s(89888),H=s(95264),D=s(34296),O=s(64932);const U="/genre/0JQ5DArNBzkmxXHCqFLx2J",Y=()=>(0,y.jsx)("img",{src:(0,O.bj)("images/podcasts-following-empty-state.png"),alt:"",className:w}),q=()=>{const e=(0,F.f)().replace("-chip",""),t=(0,E.g)(),{extensions:s}=(0,N.Y)(),{spec:o,logger:n}=(0,P.$)(l.Y,{data:{identifier:"home",uri:`spotify:home:${e}`,reason:(0,u.getRequestIdForImpressions)(s)??""}});return(0,i.useCallback)(()=>{n.logInteraction(o.podcastFollowingEmptyStateCtaFactory().hitUiNavigate({destination:U})),t(U)},[o,n,t])},z=()=>(0,y.jsxs)(R,{children:[(0,y.jsx)(f.i,{size:"xlarge",semanticColor:"textBase"}),(0,y.jsx)(S,{title:r.Ru.get("web-player.subfeeds.home.subfeed.following.empty-state.all-caught-up.title"),description:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.all-caught-up.description")})]}),W=()=>{const e=q();return(0,y.jsxs)(R,{children:[(0,y.jsx)(Y,{}),(0,y.jsx)(S,{title:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.empty.title"),description:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.empty.description")}),(0,y.jsx)(b,{label:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.empty.button-label"),onClick:e})]})},J=()=>{const e=q();return(0,y.jsxs)(R,{children:[(0,y.jsx)(Y,{}),(0,y.jsx)(S,{title:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.filtered.title"),description:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.filtered.description")}),(0,y.jsx)(b,{label:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.empty-state.empty.button-label"),onClick:e})]})},Q=({hasActiveFilter:e=!1})=>{const{followsPodcasts:t}=(()=>{const e=(0,v.f)(),[t,s]=(0,i.useState)(null);return(0,i.useEffect)(()=>{!async function(){try{const t=e.getContentsPrimaryFilterId(I.c.SHOW);if(!t)return void s(!1);const i=await e.getContents({offset:0,limit:2,filters:[t]});s(i.items.filter(e=>"your-episodes"!==e?.type).length>0)}catch(e){s(!1)}}()},[e]),{followsPodcasts:t}})();return!e&&!0===t?(0,y.jsx)(z,{}):e?(0,y.jsx)(J,{}):(0,y.jsx)(W,{})};var G=s(30502),X=s(19878),K=s(137),V=s(99148),Z=s(1099),ee=s(63778),te=s(49348),se=s(49060),ie=s(53565),oe=s(16615),ne=s(30091),ae=s(22094);const le=()=>{const e=(0,i.useRef)(null),t=(0,i.useRef)(null),s=(0,i.useRef)(null),[o,a]=(0,i.useState)(!1);(0,te.w)({onResize:({width:s})=>{const i=t.current?.getBoundingClientRect().width,o=e.current?.getBoundingClientRect().width;if(!i||!o)return;a(i+188+o+10>s)},refOrElement:s,observeOnMount:!0,observeOnly:"width"});const{contentsOptions:l,playlist:c}=(0,Z.g)(),{metadata:d}=c,{filterPredicate:u}=(0,ee.j)(),m=(0,i.useMemo)(()=>0===(d?.totalLength??0)?[]:c.contents.items.filter(e=>!!e).map(e=>({type:I.c.EPISODE,uri:e.uri,uid:e.uid,provider:null})),[d?.totalLength,c.contents.items]),{usePlayContextItem:p}=(0,se.P)({uri:g,pages:[{items:m}]},{featureIdentifier:"home",referrerIdentifier:"home"},{shuffle:!1,repeat:ie.p.REPEAT_NONE}),h=(0,i.useCallback)((e,t)=>"string"!=typeof l.filter?e:t===$.u.TITLE||t===$.u.SUBTITLE?(0,y.jsx)(H.M,{searchWords:[l.filter],textToHighlight:e}):e,[l.filter]),f=(0,i.useCallback)((e,t)=>(0,oe.xp)(e)?(0,y.jsx)(K.h,{index:t,children:(0,y.jsx)(M.b,{index:t,episode:e,contextUri:g,usePlayContextItem:p,showSeparator:0!==t,highlightText:h})},`${e.uri}/${t}`):null,[h,p]);return(0,y.jsxs)("section",{className:n()(ae.A.home,ae.A.homepage,ae.A.homepageFollowingFeed),"data-testid":"home-page",children:[(0,y.jsx)(D.q,{}),(0,y.jsxs)("div",{className:n()(ae.A.homepageContent,"contentSpacing"),children:[d.totalLength>0||null!==u?(0,y.jsxs)("div",{className:ae.A.homepageFollowingFeedHeader,ref:s,children:[(0,y.jsxs)("div",{className:n()(ae.A.homepageFollowingFeedTitleRow,{[ae.A.headerOnTwoLines]:o}),children:[(0,y.jsx)(A.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",ref:t,className:ae.A.title,children:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.header")}),(0,y.jsx)(V.d,{sortOptions:[ne.nw.PUBLISH_DATE,ne.nw.SHOW_NAME],defaultSortField:ne.nw.PUBLISH_DATE,filterPlaceholder:r.Ru.get("web-player.subfeeds.home.subfeed.podcasts-following.filter-placeholder"),sortBoxRef:e,className:ae.A.searchBar})]}),(0,y.jsx)(G.Q,{className:ae.A.filterChipsRow,filterPredicates:[ne.YB.UNPLAYED,ne.YB.AVAILABLE_OFFLINE,ne.YB.IN_PROGRESS,ne.YB.VIDEO]})]}):null,d.totalLength>0?(0,y.jsx)(X.M,{renderItem:f}):(0,y.jsx)(Q,{hasActiveFilter:null!==u})]})]})};var re=s(57011);const ce=(0,i.memo)(({facet:e})=>e!==re.DT?null:(0,y.jsx)("div",{className:ae.A.homepageFollowingFeedHeader,children:(0,y.jsx)("div",{className:ae.A.homepageFollowingFeedTitleRow,children:(0,y.jsx)(A.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:ae.A.title,children:r.Ru.get("web-player.subfeeds.home.subfeed.music-following.header")})})}));ce.displayName="HomeSubfeedHeader";var de=s(79877),ue=s(62411),me=s(58090),pe=s(85920),he=s(63352),ge=s(17541),fe=s(70613),xe=s(87159),ye=s(55247),be=s(21090);const je=(0,i.memo)(({cardCount:e})=>(0,y.jsx)("section",{children:(0,y.jsx)("div",{className:n()(ae.A.home,ae.A.homepage),children:(0,y.jsx)("div",{className:n()(ae.A.homepageContent,"contentSpacing"),children:(0,y.jsx)(p.f,{showAll:!0,cardCount:e,withTitle:!1})})})})),we=({sectionURIs:e})=>{const t=(0,a.NC)(fe.wWq),{data:s,error:o,loading:c,extensions:m}=(0,pe.$o)({uris:e,timeZone:(0,he.Ff)(),sp_t:(0,xe.v8)("sp_t")??"",sectionItemsLimit:t??10},{gcTime:he.gO,staleTime:he.jl}),p=(0,u.getRequestIdForImpressions)(m),{spec:h}=(0,P.$)(l.Y,{data:{identifier:"home/pinned",uri:"spotify:home:pinned",reason:p??""}}),g=(0,ue.d4)(e=>e.session.user),f=(0,i.useCallback)(()=>{const t=new URL("https://open.spotify.com/home");t.searchParams.set("facet","pinned-by"),t.searchParams.set("hpuris",e.map(e=>e.replace("spotify:section:","")).join(",")),t.searchParams.set("hpname",g?.display_name??g?.id??""),(0,be.l)(t.toString()),(0,de.M8)(r.Ru.get("feedback.link-copied"))},[e,g?.display_name,g?.id]);return c?(0,y.jsx)(je,{cardCount:10}):null!==o||"HomeSectionCollection"!==s?.homeSections.__typename?(0,y.jsx)(d.LoadingPage,{hasError:!0,errorMessage:r.Ru.get("error.generic")}):(0,y.jsx)(ye.r,{spec:h,children:(0,y.jsxs)("section",{"data-testid":"home-pin-page",className:n()(ae.A.home,ae.A.homepageWithCarousels),children:[(0,y.jsx)("div",{className:n()(ae.A.homePinButton,"contentSpacing"),children:(0,y.jsx)(x.$,{iconLeading:me.C,onClick:f,size:"small",children:"Share your home"})}),(0,y.jsx)("div",{className:n()(ae.A.homepageContent,"contentSpacing"),children:s.homeSections.sections.map((e,t)=>"HomeSection"!==e.__typename?null:(0,y.jsx)(ge.Q,{section:e,index:t,greeting:null},`${t}-${e.uri}`))})]})})};var Ce=s(89651),Re=s(89509),Ae=s(76560),Se=s(28389);const ve=(0,i.memo)(({cardCount:e})=>(0,y.jsxs)("div",{className:n()(ae.A.homepageContent,"contentSpacing"),children:[(0,y.jsx)(c.y,{withTitle:!1}),(0,y.jsx)(p.f,{showAll:!0,cardCount:e,withTitle:!1})]})),Ie=()=>{const e=(0,F.f)(),{data:t,loading:s,error:i,extensions:o,isPlaceholderData:a}=(0,N.Y)(),c=e.replace("-chip",""),{spec:p}=(0,P.$)(l.Y,{data:{identifier:c?`home/${c}`:"",uri:`spotify:home:${c}`,reason:(0,u.getRequestIdForImpressions)(o)??""}}),g=t?.home;if(s||a)return(0,y.jsx)("section",{"data-testid":"home-subfeed-page",className:n()(ae.A.home,ae.A.homepageWithCarousels),children:(0,y.jsx)(ve,{cardCount:50})});if(null!==i)return(0,y.jsx)(d.LoadingPage,{hasError:!0,errorMessage:r.Ru.get("error.generic")});if("HomeResponsePayload"!==g?.__typename)return(0,y.jsx)(d.LoadingPage,{hasError:!0,errorMessage:r.Ru.get("error.generic")});const f=g.sectionContainer.sections.items;return 0===f.length?(0,y.jsx)(d.LoadingPage,{hasError:!0,errorMessage:r.Ru.get("error.generic")}):0===f[0]?.sectionItems?.items?.length?(0,y.jsx)(B,{}):(f[0]&&"HomeShortsSectionData"!==f[0]?.data?.__typename&&(e=>t=>"HomeShortsSectionData"===t.data?.__typename||"spotify:section:0JQ5DAnM3wGh0gz1MXnu3N"===t.uri&&e===re.F||("spotify:section:0JQ5DAJvCyzyxqjq31tlEs"===t.uri||"spotify:section:0JQ5DAnM3wGh0gz1MXnucs"===t.uri)&&e===h.e)(e)(f[0])&&(g.sectionContainer.sections.items[0]={...f[0],data:{...f[0].data,__typename:"HomeShortsSectionData"}}),(0,y.jsx)(ye.r,{spec:p,children:(0,y.jsx)(m.g,{container:g.sectionContainer,greeting:null,showDsaMessage:!1,enableFeedBaseline:!0,header:(0,y.jsx)(ce,{facet:e})})}))},Ne=()=>{const e=(0,F.f)(),{shelfURIs:t}=(0,Ce.T)(),s=(0,Re.k)();if((0,a.NC)(fe._Ie)){if("pinned-by"===e&&s){const e=s?.uris;return e.length?(0,y.jsx)(we,{sectionURIs:e}):(0,y.jsx)(Se.$,{to:"/"})}if("pinned"===e){const e=t;return e.length?(0,y.jsx)(we,{sectionURIs:e}):(0,y.jsx)(Se.$,{to:"/"})}}return e===re.nt?(0,y.jsx)(Ae.W,{uri:g,children:(0,y.jsx)(le,{})}):e?(0,y.jsx)(Ie,{}):(0,y.jsx)(Se.$,{to:"/"})}},57011:(e,t,s)=>{s.d(t,{DT:()=>n,F:()=>i,nt:()=>o});const i="podcasts-chip",o="podcasts-following-chip",n="music-following-chip"},89509:(e,t,s)=>{s.d(t,{k:()=>o});var i=s(85387);const o=()=>{const e=(0,i.zy)(),t=new URLSearchParams(e.search);if(!t.has("hpuris"))return null;const s=(t.get("hpuris")||"").split(",").map(e=>`spotify:section:${e}`);return{name:t.get("hpname")??"Shared",uris:s}}}}]);
//# sourceMappingURL=home-subfeed.js.map