"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5872],{137:(e,t,a)=>{a.d(t,{h:()=>n});var r=a(80408),s=a(86070);const n=({children:e,index:t})=>(0,s.jsx)(r.W,{"aria-posinset":t,children:e})},1099:(e,t,a)=>{a.d(t,{g:()=>r.g});var r=a(6414)},1797:(e,t,a)=>{a.d(t,{g:()=>o});var r=a(54091);const s="l_FpcoHlkkGQab_0RUSh",n="irJCxsVj_imbUs65R6Cy";var i=a(86070);const o=({url:e,content:t,variant:a})=>{const o="citation"===a,l=o?r.Ru.get("web-player.magpie.inline-link.parentheses",{content:t}):t;return(0,i.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer","aria-label":l,className:o?n:s,children:l})}},3658:(e,t,a)=>{a.d(t,{a:()=>s});var r=a(78146);const s=()=>(0,r.m)().getCapabilities()},6414:(e,t,a)=>{a.d(t,{H:()=>i,g:()=>o});var r=a(30758),s=a(86070);const n=(0,r.createContext)(null);function i({children:e,playlist:t,metadataOptions:a,contentsOptions:i}){return(0,s.jsx)(n.Provider,{value:(0,r.useMemo)(()=>({playlist:t,metadataOptions:a,contentsOptions:i}),[i,a,t]),children:e})}function o(){const e=(0,r.useContext)(n);if(null===e)throw new Error("Trying to use 'ListPlatformDataContext' without 'ListPlatformDataProvider'!");return e}},9584:(e,t,a)=>{a.d(t,{o:()=>o});var r=a(30758),s=a(1797),n=a(77989),i=a(86070);const o=({text:e,options:t})=>{const a=(0,r.useMemo)(()=>(0,n.k)(e,t),[e,t]);return(0,i.jsx)(i.Fragment,{children:a.map(e=>{if(e.type===n.O.TEXT)return(0,i.jsx)(r.Fragment,{children:e.content},e.partId);const t=e.type===n.O.CITATION?"citation":"link";return(0,i.jsx)(s.g,{url:e.url,content:e.content,variant:t},e.partId)})})}},9763:(e,t,a)=>{a.d(t,{O:()=>c});var r=a(97500),s=a.n(r),n=a(54091),i=a(93133);const o="aGioMyWzVgQ21vdBtcRr";var l=a(86070);const c=({creator:e,madeForCreator:t})=>e?(0,l.jsxs)("div",{className:s()(o),children:[t&&(0,l.jsx)(i.C,{creator:t,isSmallIcon:!1,prefix:n.Ru.get("web-player.magpie.prompt-metadata.made-for-prefix")}),(0,l.jsx)(i.C,{creator:e,isSmallIcon:!1,prefix:n.Ru.get("web-player.magpie.prompt-metadata.prompted-by-prefix")})]}):null},10150:(e,t,a)=>{a.d(t,{CreateMagpieMenuItem:()=>m});var r=a(68549),s=a(54091),n=a(48564),i=a(30758),o=a(78590),l=a(64352),c=a(70684);function d(){const{isActive:e,panelSend:t}=(0,o.AI)(c.Z.Magpie);return(0,i.useCallback)(()=>{e||t(l.$S.MAGPIE_CLICK)},[e,t])}var u=a(86070);const m=()=>(0,u.jsx)(n.D,{onClick:d(),role:"menuitem",leadingIcon:(0,u.jsx)(r.D,{size:"small"}),children:s.Ru.get("web-player.magpie.create-menu-item.title")})},11942:(e,t,a)=>{a.d(t,{w:()=>i});var r=a(30758),s=a(54091),n=a(78146);const i=e=>{const t=(0,n.m)(),a=(0,r.useRef)(()=>{}),[i,o]=(0,r.useState)([]),l=(0,r.useCallback)(r=>{a.current(),t.remove(e.metadata.uri,r)},[t,e.metadata.uri]);return{handleRemove:(0,r.useCallback)((t,r,s=!1)=>{e.metadata.canRemove&&(a.current=r,t.length>1&&!s?o(t):l(t))},[e.metadata.canRemove,l]),removeDialogProps:(0,r.useMemo)(()=>({title:s.Ru.get("playlist.remove_from_playlist",e.metadata.name),isOpen:i.length>0,tracks:i,onClose:e=>{e.stopPropagation(),o([])},onRemove:l}),[i,l,e.metadata.name])}}},12536:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(97500),s=a.n(r),n=a(80041);const i="main-playlistEditDetailsModal-characterCounter";var o=a(86070);const l=({className:e,usedCharacters:t,maxCharacters:a,classNameUsedCharacters:r,isVisible:l=!0,iconLeading:c})=>(0,o.jsxs)(n.x,{usedCharacters:t,maxCharacters:a,className:s()(e,i,{"hidden-visually":!l}),children:[c&&c,(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:r,children:t}),"/",(0,o.jsx)("span",{children:a})]})]})},14590:(e,t,a)=>{a.d(t,{y:()=>M});var r=a(30758),s=a(1812),n=a(97500),i=a.n(n),o=a(81739),l=a(54361),c=a(78717),d=a(36466),u=a(281),m=a(76813),p=a(49608),g=a(82999),y=a(54091),x=a(20631),h=a(6944),C=a(59322),b=a(91645);const j="Kt7s2Q5epXqM5b4xZjYv",E="p43ALU2DeAudoonKLxsc",v="Opj9iqUARHSTQWklHtiF",S="YhKjVR6GdOYyyVfWCRSg",f="p8VqB2OnmddcOXCJP56v",k="otOsXUDChiJna8dbcMdg",A="YBKCf2zjqWkoNVkoiPqk",R="z0eAbFftB56JS_7pIUBI",I="uClxFXKEdC8h_Kq1tBQ_",w="_8hl2fsTV6Ujiqeb0qNW",D="N0JHOoMywJtL55t2ABp_",N="zCdnQiTDte48DKBeM6Yq",T="V8ehXBrevBspffcPrd1O",P="iP_Di4IwimgfPoKStC7_";var L=a(86070);const U=({isEntityPage:e,suggestion:t,index:a,isExpanded:s,onToggle:n,onSuggestionClick:p})=>{const g=(0,r.useRef)(null),{isAtTop:y,isAtBottom:x}=(0,C.y)(g);return(0,L.jsxs)(o.A,{className:i()(S,{[f]:s}),children:[(0,L.jsx)(l.J,{className:k,onClick:e=>{e.preventDefault(),n()},isExpanded:s,children:(0,L.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textSubdued",className:A,children:t.displayText})}),(0,L.jsx)(d.u,{isExpanded:s,className:R,children:(0,L.jsx)("div",{ref:g,className:i()(I,{[w]:!y,[D]:!x}),children:t.suggestionChild.map((a,r)=>(0,L.jsxs)(u.a,{variant:"elevated",onClick:()=>p(t.suggestionId,a,r),className:i()(N,{[v]:e}),children:[(0,L.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",className:T,children:a.displayText}),(0,L.jsx)(m.$,{semanticColor:"textSubdued",size:"small",className:P})]},`${a.displayText}-${r}`))})})]},`${t.displayText}-${a}`)},M=({panelId:e,isEntityPage:t=!1})=>{const a=(0,h.H)(),{prompt:n,setPrompt:o}=(0,x.b)(),[l,d]=(0,r.useState)(void 0),{data:u}=(0,s.I)({queryKey:["magpie","suggestions"],queryFn:async()=>await a.getSuggestions(),staleTime:6e5,gcTime:432e5}),{spec:m,logger:C}=(0,b.r)(g.D,{}),S=u?.suggestion??[],f=(0,r.useCallback)((e,t,a)=>{C.logInteraction(m.promptComposerFactory().promptSuggestionsFactory().promptSuggestionsSectionFactory({identifier:e}).promptSuggestionItemFactory({identifier:t.suggestionChildId,position:a}).hitTextEdit({fieldToBeChanged:"prompt"}));const r=t.displayText.trim().replace(/^[""\u201C'\u2018]|[""\u201D'\u2019]$/g,""),s=n?`${n}${n.endsWith(" ")?"":" "}${r}`:r;o(s)},[n,o,C,m]),k=(0,r.useCallback)((e,t)=>{const a=m.promptComposerFactory().promptSuggestionsFactory().promptSuggestionsSectionFactory({identifier:e});l===t?(C.logInteraction(a.hitUiHide()),d(void 0)):(C.logInteraction(a.hitUiReveal()),d(t))},[l,C,m]);return(0,L.jsxs)("div",{className:j,id:e,children:[(0,L.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:y.Ru.get("web-player.magpie.prompt-suggestions.ideas-heading")}),(0,L.jsx)(p.n,{className:i()(E,{[v]:t}),children:S.map((e,a)=>(0,L.jsx)(U,{suggestion:e,index:a,isExpanded:l===a,onToggle:()=>k(e.suggestionId,a),onSuggestionClick:f,isEntityPage:t},`${e.displayText}-${a}`))})]})}},15074:(e,t,a)=>{a.d(t,{M:()=>n});var r=a(242),s=a(41156);const n=e=>{const t=(0,s.V)(),a=(0,r.C)()?.username;return!t&&a===e}},15228:(e,t,a)=>{a.d(t,{c:()=>o});var r=a(30758),s=a(99380),n=a(58611);function i(e){return"object"==typeof e&&null!==e&&"promptablePlaylistErrorType"in e}const o=()=>{const{openCapModal:e}=(0,n.r)();return{handleError:(0,r.useCallback)(t=>{if(!Array.isArray(t))return{isRateLimitError:!1,otherErrors:null};const a=[];for(const e of t)i(e)?a.push(e):console.error("Encountered non-PromptablePlaylistError item in error array:",e);if(0===a.length)return{isRateLimitError:!1,otherErrors:null};const r=a.find(e=>e.promptablePlaylistErrorType===s.Zg.RATE_LIMIT_EXCEEDED_ERROR);return r?.rateLimitExceededErrorDetails?(e(r.rateLimitExceededErrorDetails),{isRateLimitError:!0,otherErrors:a}):{isRateLimitError:!1,otherErrors:a}},[e])}}},19878:(e,t,a)=>{a.d(t,{M:()=>f});var r=a(30758),s=a(85387),n=a(18813),i=a(60694),o=a(37109),l=a(22582),c=a(27360),d=a(73778),u=a(49373),m=a(27592),p=a(42975),g=a(80850),y=a(3658);var x=a(11942),h=a(6414),C=a(4552),b=a(12627),j=a(21737),E=a(86070);const v=e=>({uri:e.uri,uid:e.uid,type:e.type}),S=({renderItem:e,columnCount:t=6,ariaLabel:a})=>{const v=(0,b.SF)(),S=(0,r.useRef)(null),{getItem:f,nrValidItems:k,invalidateCache:A}=(0,d.K_)(),{playlist:R}=(0,h.g)(),{metadata:I}=R,{handleRemove:w,removeDialogProps:D}=(0,x.w)(R);(0,j.H)(I.uri,A),((e,t)=>{const{clearSelected:a,selectAll:s,getSelected:n}=(0,r.useContext)(l.m),{canFetchAllTracks:i}=(0,y.a)(),{cacheAll:o}=(0,d.K_)(),x=(0,r.useCallback)(()=>{i?o().then(()=>{s()}):s()},[o,i,s]),h=(0,r.useCallback)(async(e,t)=>{const a=n().map(({uri:e})=>t?e:(0,c.o_h)(e)?.toURL()).join("\n");a.length&&await e(a)},[n]),C=(0,r.useCallback)(r=>{if(e.current?.contains(document.activeElement)){const e=n();if(0===e.length)return;t(e,()=>{a()},r)}},[a,n,t,e]),b=(0,r.useCallback)(async e=>{await h(e,!1),C(!0)},[h,C]);(0,m.Q)(b),(0,u.R)(h),(0,g.x)(p.W.SELECT_ALL,x),(0,g.x)(p.W.DELETE,()=>C())})(S,w),(0,o.g)(S);const N=(0,r.useCallback)(e=>(0,E.jsx)("div",{style:{height:e}}),[]),T=(0,r.useCallback)((t,a)=>{const r=f(t);return r?e(r,t):N(`${a}px`)},[f,e,N]),P="POP"===(0,s.wQ)()?0:10;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(n.R,{firstInteractiveIsWrapper:!0,"aria-rowcount":k,"aria-colcount":t,"aria-label":a,ref:S,children:(0,E.jsx)(C.M,{totalCount:k,estimatedHeight:200,renderItem:T,renderPlaceholder:N,scrollNodeRef:v,nrRowsOverscan:10,persistanceKey:I.uri,nrInitialInView:P})}),(0,E.jsx)(i.F,{...D})]})},f=e=>{const{getItems:t,nrValidItems:a}=(0,d.K_)();return(0,E.jsx)(l.k,{resolveItem:v,getItems:t,nrTracks:a,children:(0,E.jsx)(S,{...e})})}},20631:(e,t,a)=>{a.d(t,{b:()=>o,s:()=>i});var r=a(30758),s=a(86070);const n=(0,r.createContext)(null);function i({initialPrompt:e,children:t}){const[a,i]=(0,r.useState)(e??""),o=(0,r.useCallback)(()=>{i(e??"")},[e]),l=(0,r.useMemo)(()=>({prompt:a,setPrompt:i,initialPrompt:e??"",resetPromptChanges:o}),[a,i,e,o]);return(0,s.jsx)(n.Provider,{value:l,children:t})}function o(){const e=(0,r.useContext)(n);if(null===e)throw new Error("PromptContext not found");return e}},22135:(e,t,a)=>{a.d(t,{GlobalMagpieMenuAction:()=>d});var r=a(30758),s=a(68549),n=a(54091),i=a(26778),o=a(21081),l=a(60257),c=a(86070);const d=({menuSpec:e})=>{const{openPromptComposerModal:t}=(0,o.$)(),a=(0,l.s)(),d=(0,r.useCallback)(()=>{if(!e)return;const t=e.createPromptPlaylistOptionFactory().hitUiReveal();a.logInteraction(t)},[e,a]),u=(0,r.useCallback)(()=>{t({}),d()},[t,d]);return(0,c.jsx)(i.D,{actionId:"global-create-ai-playlist",title:n.Ru.get("web-player.magpie.menu-action.title"),badge:n.Ru.get("web-player.magpie.menu-action.badge"),subtitle:n.Ru.get("web-player.magpie.menu-action.subtitle"),onClick:u,icon:s.D})}},34401:(e,t,a)=>{a.d(t,{m:()=>u});var r=a(30758),s=a(35394),n=a(29553),i=a(58090),o=a(20005),l=a(60549),c=a(86070),d=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(d||{});const u=({uri:e,label:t,onClick:a,size:u=d.md,permissionLevel:m="CONTRIBUTOR"})=>{const{onCopyLink:p}=(0,l.J)({uri:e,permissionLevel:m}),g=(0,r.useCallback)(e=>{a?.(e),p?.()},[a,p]),y="CONTRIBUTOR"===m?n.h:i.C;return(0,c.jsx)(o.Zp,{label:t,children:(0,c.jsx)(s.H,{onClick:g,iconOnly:y,size:u,"aria-hidden":"true","aria-label":t,condensed:!0})})}},42626:(e,t,a)=>{a.d(t,{X:()=>c,$:()=>u});var r=a(51318),s=a(65662),n=a(43114),i=a(79421),o=a(90662);const l=["artistsets","artist-mix-reader","blend","daily-mix","daylist","discover-weekly","descripto","inspiredby-mix","on-repeat","release-radar","repeat-rewind","topic-mix"],c=e=>!!e&&l.includes(e),d=(e,t)=>"autoplay"===e.provider||!("context"!==e.provider||!c(t.metadata?.format_list_type)),u=(e,t)=>{const a=(0,r.$)(),l=(0,s.i)(e.uri),[c]=(0,n.A)(l),u=(0,o.g)();return(0,i.v)(e)&&t&&a&&e.uri===l&&!u?c?{canDisplayButton:d(e,t),hideButton:!0}:{canDisplayButton:d(e,t),hideButton:!1}:{canDisplayButton:!1,hideButton:!0}}},51318:(e,t,a)=>{a.d(t,{$:()=>i});var r=a(91198),s=a(49694),n=a(47537);const i=()=>{const e=(0,s.j)(),t=(0,r.NC)(n.en,{loadingValue:!1});return e.getCapabilities().canBan&&t}},51490:(e,t,a)=>{a.d(t,{d:()=>c});var r=a(97500),s=a.n(r),n=a(44629),i=a(57302);const o="ccqn2ecT3axu6r2mw0O5";var l=a(86070);const c=({durationMs:e,className:t,displaySeconds:a})=>{const{hours:r,minutes:c,seconds:d}=(0,n.S)(e);return a=!1!==a&&!r&&d,(0,l.jsx)("span",{className:s()(o,t),children:(0,i.j)({h:r,m:c,s:a?d:0})})}},52733:(e,t,a)=>{a.d(t,{Bt:()=>i,Fg:()=>d,Kg:()=>o,O2:()=>p,WT:()=>n,e2:()=>l,nL:()=>u,pB:()=>m,rV:()=>c,t2:()=>s});var r=a(99380);const s=[r.jk.NEVER,r.jk.DAILY,r.jk.WEEKLY],n=[r.ob.MONDAY,r.ob.TUESDAY,r.ob.WEDNESDAY,r.ob.THURSDAY,r.ob.FRIDAY,r.ob.SATURDAY,r.ob.SUNDAY],i=e=>{switch(e){case r.jk.NEVER:return"Never";case r.jk.DAILY:return"Daily";case r.jk.WEEKLY:return"Weekly";default:return"Unknown"}},o=e=>{switch(e){case r.jk.NEVER:return"You can still update tracks manually";case r.jk.DAILY:return"Tracks update every day by 6am";case r.jk.WEEKLY:return"Every week at 6am every...";default:return null}},l=e=>{switch(e){case r.ob.MONDAY:return"Monday";case r.ob.TUESDAY:return"Tuesday";case r.ob.WEDNESDAY:return"Wednesday";case r.ob.THURSDAY:return"Thursday";case r.ob.FRIDAY:return"Friday";case r.ob.SATURDAY:return"Saturday";case r.ob.SUNDAY:return"Sunday";default:return"Unknown"}},c=e=>e?e.cadence===r.jk.WEEKLY?"Updates weekly":e.cadence===r.jk.DAILY?"Updates daily":"Doesn't update":"Set updates",d=e=>e.cadence===r.jk.WEEKLY?`Updates every ${l(e.weeklyDay)}`:e.cadence===r.jk.DAILY?"Updates daily":void 0,u=(e,t)=>({cadence:e,weeklyDay:t??r.ob.MONDAY}),m=e=>`cadence-${(0,r.CC)(e).toLowerCase()}`,p=e=>{switch(e.cadence){case r.jk.WEEKLY:return`Tracks in this playlist will update every ${l(e.weeklyDay)}`;case r.jk.DAILY:return"Tracks in this playlist will update daily";case r.jk.NEVER:return"Tracks in this playlist won’t update";default:return}}},52753:(e,t,a)=>{a.d(t,{H:()=>o});var r=a(30758),s=a(66917),n=a(47812),i=a(87308);function o(e=null,t=s.l0o){const a=(0,i.z)(e);return(0,r.useEffect)(()=>((0,n.s)(a,!1),()=>{}),[a]),a||t}},58611:(e,t,a)=>{a.d(t,{r:()=>c});var r=a(99755),s=a(70499);const n={isOpen:!1,rateLimitExceededErrorDetails:void 0},i=(0,r.y)(()=>n),o=e=>i.setState({isOpen:!0,rateLimitExceededErrorDetails:e}),l=()=>i.setState(n),c=()=>{const{isOpen:e,rateLimitExceededErrorDetails:t}=(0,s.P)(i);return{isOpen:e,rateLimitExceededErrorDetails:t,openCapModal:o,closeCapModal:l}}},61970:(e,t,a)=>{a.d(t,{Y:()=>r});const r="promptable-playlist-toolbar-id"},72941:(e,t,a)=>{a.d(t,{$:()=>r.$});var r=a(51318)},73778:(e,t,a)=>{a.d(t,{K_:()=>u,ll:()=>d});var r=a(30758),s=a(6414),n=a(88127),i=a(78146),o=a(21737),l=a(86070);const c=(0,r.createContext)(null);function d({children:e}){const{playlist:t,contentsOptions:a}=(0,s.g)(),d=(0,i.m)(),u=(0,r.useCallback)(async(e,r)=>await d.getContents(t.metadata.uri,{...a,offset:e,limit:r}),[d,a,t.metadata.uri]),m=(0,n.E)({nrItems:t.contents.totalLength,fetch:u,limit:50,initialItems:t.contents.items});return(0,o.H)(t.metadata.uri,m.invalidateCache),(0,l.jsx)(c.Provider,{value:m,children:e})}function u(){const e=(0,r.useContext)(c);if(null===e)throw new Error("Trying to use 'ListPlatformItemsContext' without 'ListPlatformItemsProvider'!");return e}},74668:(e,t,a)=>{a.d(t,{Ap:()=>x,Qi:()=>m,Wc:()=>c,g6:()=>y,hK:()=>h,kA:()=>d,nw:()=>u,rE:()=>C});var r=a(54091),s=a(16666),n=a(30091);const i=[n.nw.ADDED_AT,n.nw.PUBLISH_DATE],o=e=>i.includes(e)?n.xB.DESC:n.xB.ASC,l={[n.xB.ASC]:n.xB.DESC,[n.xB.DESC]:n.xB.ASC},c=(e,t,a)=>null===e?null:null===t&&"custom-order"!==a&&e===a?{field:e,order:l[o(e)]}:t?.field!==e?{field:e,order:o(e)}:{field:e,order:l[t.order]},d={[n.nw.TITLE]:{key:"title",get value(){return r.Ru.get("sort.title")}},[n.nw.ARTIST]:{key:"artist",get value(){return r.Ru.get("sort.artist")}},[n.nw.ALBUM]:{key:"album",get value(){return r.Ru.get("sort.album")}},[n.nw.ADDED_BY]:{key:"added-by",get value(){return r.Ru.get("sort.added-by")}},[n.nw.ADDED_AT]:{key:"added-at",get value(){return r.Ru.get("collection.sort.recently-added")}},[n.nw.DURATION]:{key:"duration",get value(){return r.Ru.get("sort.duration")}},[n.nw.SHOW_NAME]:{key:"show-name",get value(){return r.Ru.get("collection.sort.creator")}},[n.nw.PUBLISH_DATE]:{key:"publish-date",get value(){return r.Ru.get("tracklist.header.release-date")}},"custom-order":{key:"custom-order",get value(){return r.Ru.get("sort.custom-order")}}},u={title:n.nw.TITLE,artist:n.nw.ARTIST,album:n.nw.ALBUM,"added-by":n.nw.ADDED_BY,"added-at":n.nw.ADDED_AT,duration:n.nw.DURATION,"show-name":n.nw.SHOW_NAME,"publish-date":n.nw.PUBLISH_DATE,"custom-order":null};function m(e,t){return null===e?"custom-order"===t?s.Ht.NONE:o(t)===n.xB.ASC?s.Ht.ASC:s.Ht.DESC:e===n.xB.ASC?s.Ht.ASC:s.Ht.DESC}const p={[s.$C.TITLE_AND_ARTIST]:[n.nw.TITLE,n.nw.ARTIST],[s.$C.TITLE]:[n.nw.TITLE],[s.$C.ADDED_BY]:[n.nw.ADDED_BY],[s.$C.ADDED_AT]:[n.nw.ADDED_AT],[s.$C.DURATION]:[n.nw.DURATION],[s.$C.ARTIST]:[n.nw.ARTIST],[s.$C.ALBUM]:[n.nw.ALBUM],[s.$C.ALBUM_OR_PODCAST]:[n.nw.ALBUM,n.nw.SHOW_NAME],[s.$C.ALBUM_OR_SHOW]:[n.nw.ALBUM,n.nw.SHOW_NAME],[s.$C.ACTIONS]:[],[s.$C.RELEASE_DATE]:[n.nw.PUBLISH_DATE],[s.$C.INDEX]:[],[s.$C.PLAYS]:[],[s.$C.ADD]:[],[s.$C.EVENT_DATE]:[],[s.$C.EVENT_INFO]:[],[s.$C.CONCERT]:[],[s.$C.CONCERT_VENUE]:[],[s.$C.TITLE_AND_AUTHOR]:[n.nw.TITLE],[s.$C.AUTHOR]:[],[s.$C.BPM]:[],[s.$C.KEY]:[],[s.$C.REASONING]:[]},g={[s.Ht.NONE]:null,[s.Ht.DESC]:n.xB.DESC,[s.Ht.ASC]:n.xB.ASC,[s.Ht.SECONDARY_DESC]:n.xB.DESC,[s.Ht.SECONDARY_ASC]:n.xB.ASC},y=(e,t)=>e.filter(e=>p[e].length>0&&!1!==t?.(e).canSortExplicit),x=(e,t)=>{const a=e.find(e=>t?.field&&p[e].includes(t.field));if(!a||!t?.field)return{column:null,order:s.Ht.ASC};return p[a].indexOf(t.field)>0?{column:a,order:t.order===n.xB.ASC?s.Ht.SECONDARY_ASC:s.Ht.SECONDARY_DESC}:{column:a,order:t.order===n.xB.ASC?s.Ht.ASC:s.Ht.DESC}},h=(e,t,a)=>{const r=p[e].length>1?5:3;let n=null,i=null;if(e===t.column){let o=(t.order+1)%r;o!==s.Ht.NONE||a||(o+=1);const l=[s.Ht.SECONDARY_ASC,s.Ht.SECONDARY_DESC].includes(o)?1:0;n=p[e][l]??null,i=g[o]}else n=p[e][0]??null,i=g[s.Ht.ASC];return null===n||null===i?null:{field:n,order:i}},C=(e,t)=>{const a=(e=>{const t=Array.from(e);return[...new Set(t.flatMap(e=>p[e]))]})(e);return a.map(e=>({field:e,disabled:t}))}},75593:(e,t,a)=>{a.d(t,{Q:()=>u});var r=a(30758),s=a(40539),n=a(93485),i=a(2047),o=a(82999),l=a(54091),c=a(91645),d=a(86070);const u=({active:e,onClick:t,panelId:a})=>{const{spec:u,logger:m}=(0,c.r)(o.D,{}),p=(0,r.useCallback)(()=>{const a=e?u.promptComposerFactory().ideasButtonFactory().hitUiHide():u.promptComposerFactory().ideasButtonFactory().hitUiReveal();m.logInteraction(a),t()},[m,u,e,t]);return(0,d.jsx)(s.v,{type:"button",onClick:p,iconLeading:e?i.V:n.N,variant:e?"contrasting":void 0,contrastingColor:"invertedLight","aria-expanded":e,"aria-controls":a,children:l.Ru.get("web-player.magpie.suggestions-button.text")})}},77989:(e,t,a)=>{a.d(t,{O:()=>s,k:()=>l});const r=[[/\*\*\*(.+?)\*\*\*/g,"$1"],[/___(.+?)___/g,"$1"],[/\*\*(.+?)\*\*/g,"$1"],[/__(.+?)__/g,"$1"],[/~~(.+?)~~/g,"$1"],[/(?<=\s|^)\*([^*]+)\*(?=\s|$|[.,!?;:])/g,"$1"],[/(?<=\s|^)_([^_]+)_(?=\s|$|[.,!?;:])/g,"$1"]],s={TEXT:"text",CITATION:"citation",LINK:"link"},n={regex:/\(?\[([^\]]+)\]\(([^)]+)\)\)?/g,contentGroup:1,urlGroup:2},i={regex:/<a\s+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/gi,contentGroup:2,urlGroup:1},o=(e,t,a,r)=>{if(!e)return[];const n=[];let i=r;const o=e.split(t.regex);for(let e=0;e<o.length;e+=3){const[r="",l="",c=""]=o.slice(e,e+3),d=1===t.contentGroup?l:c,u=1===t.urlGroup?l:c;r&&n.push({type:s.TEXT,content:r,partId:i++}),d&&u&&n.push({type:a,content:d,url:u,partId:i++})}return 0===n.length&&n.push({type:s.TEXT,content:e,partId:r}),n},l=(e,t={})=>{const{moveSingleCitationToEnd:a=!0,treatCitationsAsLinks:l=!1}=t,c=(e=>r.reduce((e,[t,a])=>e.replace(t,a),e))(e),d=l?s.LINK:s.CITATION,u=o(c,n,d,0),m=[];for(const e of u)if(e.type===s.TEXT){const t=o(e.content,i,s.LINK,m.length);m.push(...t)}else m.push({...e,partId:m.length});if(0===m.length)return[{type:s.TEXT,content:"",partId:0}];if(a){if(1===m.filter(e=>e.type===s.CITATION).length)return(e=>{const t=e.find(e=>e.type===s.CITATION),a=e.filter(e=>e.type!==s.CITATION),r=[],n=[];for(const e of a)if(e.type===s.TEXT){const t=e.content.trim();t&&n.push(t)}else e.type===s.LINK&&(n.length>0&&(r.push({type:s.TEXT,content:`${n.join(" ")} `,partId:r.length}),n.length=0),r.push({...e,partId:r.length}));const i=n.join(" ");return r.push({type:s.TEXT,content:i?`${i} `:" ",partId:r.length}),r.push({...t,partId:r.length}),r})(m)}return m}},87308:(e,t,a)=>{a.d(t,{r:()=>c,z:()=>d});var r=a(30758),s=a(66917),n=a(26571),i=a(17500),o=a(794),l=a(1812);function c(e=null){const{request:t}=(0,r.useContext)(o.j),{data:a}=(0,l.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,i.j)(t,e).then(e=>{const t=e?.[0];return t?{colorDark:t.colorDark.toCSS(n.a.HEX),colorLight:t.colorLight.toCSS(n.a.HEX),colorRaw:t.colorRaw.toCSS(n.a.HEX)}:null}):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return a??void 0}function d(e=null,t=s.l0o,a="colorRaw"){return c(e)?.[a]??t}},87517:(e,t,a)=>{a.d(t,{c:()=>g});var r=a(30758),s=a(78717),n=a(35394),i=a(30920),o=a(82999),l=a(54091),c=a(9763),d=a(91645);const u="jnCMDJLnpFTlIPzS7TgN",m="jz31_rMz7slwcGmYojw7";var p=a(86070);const g=({playlistName:e,creator:t,onClose:a})=>{const{spec:g,logger:y}=(0,d.r)(o.D,{}),x=(0,r.useCallback)(()=>{y.logInteraction(g.promptComposerFactory().closeButtonFactory().hitUiHide()),a()},[y,a,g]);return(0,p.jsxs)("div",{className:u,children:[(0,p.jsxs)("div",{className:m,children:[(0,p.jsx)(s.E,{variant:"titleSmall",semanticColor:"textBase",children:e||l.Ru.get("web-player.magpie.prompt-composer-header.default-title")}),(0,p.jsx)(n.H,{"aria-label":l.Ru.get("web-player.magpie.prompt-composer-header.close-aria-label"),onClick:x,iconOnly:i.M,semanticColor:"textSubdued",size:"small",type:"button"})]}),(0,p.jsx)(c.O,{creator:t})]})}},87879:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(0,a(30758).lazy)(async()=>{const{TracklistTransitionRow:e}=await Promise.all([a.e(1015),a.e(9851)]).then(a.bind(a,29387));return{default:e}})},89652:(e,t,a)=>{a.d(t,{f:()=>Ee});var r=a(30758),s=a(97500),n=a.n(s),i=a(37691),o=a.n(i),l=a(2061),c=a(78723),d=a(27689),u=a(54091),m=a(12536),p=a(75905),g=a(40539),y=a(98449),x=a(45567),h=a(51871),C=a(64300),b=a(70796),j=a(79898),E=a(10622),v=a(74690),S=a(41506),f=a(48564),k=a(82240),A=a(99380),R=a(52733),I=a(91645);const w="HzyXeSYyCkHoDmMrIx48",D="Tri0d96l_u8musxuyTQI";var N=a(86070);const T=({setRefreshMetadata:e,currentRefreshMetadata:t})=>{(0,r.useEffect)(()=>{t||e((0,R.nL)(A.jk.NEVER))},[t,e]);const{spec:a,logger:s}=(0,I.r)(h.x,{}),n=(0,r.useCallback)((t,r)=>{switch(t){case A.jk.NEVER:s.logInteraction(a.refreshCadenceMenuFactory().cadenceRowFactory({identifier:"never"}).hitUiSelect()),e((0,R.nL)(A.jk.NEVER));break;case A.jk.DAILY:s.logInteraction(a.refreshCadenceMenuFactory().cadenceRowFactory({identifier:"daily"}).hitUiSelect()),e((0,R.nL)(A.jk.DAILY));break;case A.jk.WEEKLY:s.logInteraction(a.refreshCadenceMenuFactory().cadenceRowFactory({identifier:"weekly"}).hitUiSelect());const t=(e=>{switch(e){case A.ob.MONDAY:return"monday";case A.ob.TUESDAY:return"tuesday";case A.ob.WEDNESDAY:return"wednesday";case A.ob.THURSDAY:return"thursday";case A.ob.FRIDAY:return"friday";case A.ob.SATURDAY:return"saturday";case A.ob.SUNDAY:return"sunday";default:return}})(r);t&&(s.logInteraction(a.refreshCadenceMenuFactory().weeklyCadenceButtonFactory({identifier:t}).hitUiSelect()),e((0,R.nL)(A.jk.WEEKLY,r)))}},[s,e,a]);return t?(0,N.jsxs)(v.W,{menuItemHeight:"auto",children:[(0,N.jsx)(S.y,{className:w,children:u.Ru.get("web-player.magpie.cadence-picker-menu.heading")}),R.t2.map(e=>{const a=(0,R.Kg)(e),r=(0,N.jsx)(b.v,{id:(0,R.pB)(e),className:D,variant:"naked",title:(0,N.jsx)(j.d,{variant:"bodyMedium",children:(0,R.Bt)(e)}),subtitle:a&&(0,N.jsx)(E.j,{variant:"bodySmall",children:a}),size:"md"});return e===A.jk.WEEKLY?(0,N.jsx)(k.g,{displayText:r,"aria-checked":t.cadence===A.jk.WEEKLY,implicitTypeForDisplayText:!1,children:R.WT.map(e=>(0,N.jsx)(f.D,{role:"menuitemradio",onClick:()=>n(A.jk.WEEKLY,e),autoClose:!0,"aria-checked":t.cadence===A.jk.WEEKLY&&t.weeklyDay===e,implicitType:!1,children:(0,N.jsx)(b.v,{id:`weekday-${e}`,className:D,variant:"naked",title:(0,N.jsx)(j.d,{variant:"bodyMedium",children:(0,R.e2)(e)}),size:"sm"})},e))},e):(0,N.jsx)(f.D,{role:"menuitemradio",onClick:()=>n(e),autoClose:!0,"aria-checked":t.cadence===e,implicitType:!1,children:r},e)})]}):null};var P=a(46892);const L=({refreshMetadata:e,setRefreshMetadata:t})=>{const{isMagpieSchedulingEnabled:a}=(0,P.O)(),{spec:s,logger:n}=(0,I.r)(h.x,{}),i=(0,r.useCallback)(()=>{n.logInteraction(s.refreshCadenceButtonFactory().hitUiReveal())},[n,s]);return a?(0,N.jsx)(C.b,{onShow:i,menu:(0,N.jsx)(T,{setRefreshMetadata:t,currentRefreshMetadata:e}),placement:"bottom-start",children:(0,N.jsx)(g.v,{iconLeading:e?y.H:x.R,children:(0,R.rV)(e)})}):null};var U=a(78717),M=a(35394),O=a(27498),B=a(21903),_=a(9584);const F="p3kHO_cCBHBi3G7WAb4M",H="FqAyyqkvWL_UZ9zhz2o0",Y="vUe6RSVhQpUb04_1WjIy",$=({errors:e})=>{const[t,a]=(0,r.useState)(0),s=e[t];if(!s)return null;const n=`${t+1} / ${e.length}`;return(0,N.jsxs)("div",{className:F,id:"prompt-input-error-message","aria-live":"polite",role:"alert",children:[(0,N.jsxs)("div",{className:H,children:[(0,N.jsxs)(U.E,{variant:"marginal",semanticColor:"textSubdued",className:Y,children:[(0,N.jsx)(l.Z,{size:"small",semanticColor:"textNegative"}),(0,N.jsx)("span",{children:n})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(M.H,{iconOnly:O.g,onClick:()=>a(t-1),disabled:0===t,size:"small"}),(0,N.jsx)(M.H,{iconOnly:B.V,onClick:()=>a(t+1),disabled:t===e.length-1,size:"small"})]})]}),(0,N.jsx)(U.E,{variant:"bodyMedium",semanticColor:"textBase",children:(0,N.jsx)(_.o,{text:s.displayText,options:{moveSingleCitationToEnd:!1,treatCitationsAsLinks:!0}})})]})};var V=a(90814),W=a(79657),K=a(82999);const G="twHQ8grFQiMDWoWM4ME1",z=({title:e,subTitle:t,isChecked:a,onClick:r})=>(0,N.jsx)(f.D,{role:"menuitemradio",onClick:r,autoClose:!0,"aria-checked":a,implicitType:!1,children:(0,N.jsx)(b.v,{id:e,variant:"naked",padding:"0",title:(0,N.jsx)(j.d,{semanticColor:a?"textBrightAccent":"textBase",children:e}),subtitle:(0,N.jsx)(E.j,{className:G,semanticColor:"textSubdued",children:t}),size:"md"})},e),X=({playlistUri:e,setIsPrivate:t,isPrivate:a})=>{const{spec:s,logger:n}=(0,I.r)(K.D,{}),i=(0,r.useCallback)(()=>{n.logInteraction(s.promptComposerFactory().privacyControlButtonFactory().promptPrivacyMenuItemFactory().hitMakePlaylistPrivate({playlistToBeMadePrivate:e??""})),t(!0)},[n,e,t,s]),o=(0,r.useCallback)(()=>{n.logInteraction(s.promptComposerFactory().privacyControlButtonFactory().promptPrivacyMenuItemFactory().hitMakePlaylistPublic({playlistToBeMadePublic:e??""})),t(!1)},[n,e,t,s]);return(0,N.jsxs)(v.W,{menuItemHeight:"auto",children:[(0,N.jsx)(S.y,{children:u.Ru.get("web-player.magpie.privacy-menu.heading")}),(0,N.jsx)(z,{title:u.Ru.get("web-player.magpie.privacy-menu.public-title"),subTitle:u.Ru.get("web-player.magpie.privacy-menu.public-subtitle"),isChecked:!a,onClick:o}),(0,N.jsx)(z,{title:u.Ru.get("web-player.magpie.privacy-menu.private-title"),subTitle:u.Ru.get("web-player.magpie.privacy-menu.private-subtitle"),isChecked:a,onClick:i})]})},J=({playlistUri:e,isPrivate:t,setIsPrivate:a})=>{const{spec:s,logger:n}=(0,I.r)(K.D,{}),i=(0,r.useCallback)(()=>{n.logInteraction(s.promptComposerFactory().privacyControlButtonFactory().hitUiReveal())},[n,s]);return(0,N.jsx)(C.b,{onShow:i,menu:(0,N.jsx)(X,{playlistUri:e,isPrivate:t,setIsPrivate:a}),placement:"bottom-end",children:(0,N.jsx)(g.v,{iconLeading:t?V.u:W.d,children:t?u.Ru.get("web-player.magpie.privacy-menu-picker.private"):u.Ru.get("web-player.magpie.privacy-menu-picker.public")})})};var q=a(62960),Q=a(21081);const Z=({prompt:e,playlistUri:t})=>{const{openPromptComposerModal:a}=(0,Q.$)(),{spec:s,logger:n}=(0,I.r)(K.D,{}),i=(0,r.useCallback)(()=>{n.logInteraction(s.promptComposerFactory().copyPromptButtonFactory().hitUiNavigate({destination:"new-prompt-modal"})),a({prompt:e,clonedFromPlaylistUri:t})},[n,a,e,s,t]);return(0,N.jsx)(q.n,{onClick:i,type:"button",children:u.Ru.get("web-player.magpie.prompt-composer-copy-button.text")})};var ee=a(42805);const te="ThBRT4DJEG6tLoLOuf9O",ae=()=>{const e=u.Ru.get("web-player.magpie.prompt-composer-disclaimer.link-text"),t=u.Ru.get("web-player.magpie.prompt-composer-disclaimer.text",{learn:(0,N.jsx)(ee.Y,{href:"https://www.spotify.com/us/legal/privacy-policy/?nd=1",children:e})});return(0,N.jsx)("div",{className:te,children:(0,N.jsx)(U.E,{variant:"marginal",semanticColor:"textSubdued",children:t})})};var re=a(73136),se=a(13059);const ne=({generationStatus:e,disabled:t,className:a})=>{const s={type:"submit",disabled:t},{spec:n,logger:i}=(0,I.r)(K.D,{}),o=(0,r.useCallback)(()=>{i.logInteraction(n.promptComposerFactory().generateButtonFactory({reason:"create"}).hitCreatePlaylist())},[i,n]),l=(0,r.useCallback)(()=>{i.logInteraction(n.promptComposerFactory().generateButtonFactory({reason:"update"}).hitCreatePlaylist())},[i,n]);switch(e){case"none":case"ungenerated":return(0,N.jsx)(re.$,{...s,onClick:o,className:a,children:u.Ru.get("web-player.magpie.prompt-composer-submit-button.generate")});case"creating-playlist":case"generating":return(0,N.jsx)(re.$,{...s,className:a,children:u.Ru.get("web-player.magpie.prompt-composer-submit-button.analyzing")});case"error":case"no-content":case"generated":return(0,N.jsx)(re.$,{...s,onClick:l,className:a,children:u.Ru.get("web-player.magpie.prompt-composer-submit-button.update")});default:(0,se.k)(e)}return null};var ie=a(78776),oe=a(20631);const le="tMU5YBU6YPeARI0GRbr8",ce=({canEdit:e,onKeyDown:t,hasError:a})=>{const s=(0,r.useRef)(null),{prompt:n,setPrompt:i}=(0,oe.b)();return(0,r.useLayoutEffect)(()=>{s.current&&e&&n.length>0&&s.current.setSelectionRange(n.length,n.length)},[]),(0,N.jsx)(ie.h,{ref:s,name:"magpie-prompt-editor",className:le,placeholder:u.Ru.get("web-player.magpie.prompt-editor.placeholder"),value:n,onChange:e=>i(e.currentTarget.value),readOnly:!e,onKeyDown:t,"aria-invalid":a,"aria-errormessage":a?"prompt-input-error-message":void 0,autoFocus:!0})};var de=a(61970),ue=a(6944),me=a(56983),pe=a(24189);const ge="magpie-cadence-update";var ye=a(54673),xe=a(44715),he=a(81694),Ce=a(82767);const be={content:"TJJ9cwN7mcJujsPbw7bM",sharedPromptContent:"Sy9Oy_3Sm9VC85Ywlb_R",footer:"OesCsiwADN1bZaoXXGCg",footerButtonRow:"EzCfeVXAZhfjF6zxFYC2",characterCounter:"PvR1pJf31LvstJbzqYPW",characterCounterUsedCharactersError:"YjguuMogaEJQxA8OwIu7",characterCounterIcon:"so9DSof5sk4pfNzO4IeK",actionButtonContainer:"ELOEj_UsVV5FK8UF8jYa",scrollToCtaButtonContainer:"aRr3P4lJKr1PouLtnzQu"},je=2e3,Ee=({errors:e,isPromptedBySelf:t=!0,generationStatus:a="none",onSubmit:s,existingRefreshMetadata:i,playlistUri:g,playlistPermissions:y,onHasPromptChanged:x,buttonsSlot:h})=>{const{isMagpiePromptingEnabled:C}=(0,P.O)(),{prompt:b,initialPrompt:j}=(0,oe.b)(),E=(0,he.n)(),v=(0,ye.t)(),[{data:S}]=(0,xe.K)(v.social.listPrivateByDefault),[f,k]=(0,r.useState)(S??!1),{setPrivateState:A}=(0,Ce.x)(g??""),I=g?y?.isPrivate??!1:f,w=g?A:k,D=(0,r.useRef)(null),T=C&&(!g||y?.canAdministratePermissions&&t),U=o()(b).length,M=U>je,O=U>=1950,B=Boolean(e&&e.length>0&&b===j),_=b!==j,F=!b||M||B||!E||!_&&t,[H,Y]=(0,r.useState)(i),V=(e=>{const t=(0,ue.H)(),{enqueueSnackbar:a}=(0,pe.d)(),{closeSnackbarWithKeyPrefix:s}=(0,me.$)();return(0,r.useCallback)(async r=>{if(e){s(ge);try{await t.setRefreshMetadata(e,r);const s=(0,R.O2)(r);s&&a(s,{keyPrefix:ge})}catch(e){a(u.Ru.get("web-player.magpie.update-refresh-metadata.error"),{keyPrefix:ge})}}},[a,t,e,s])})(g),W=(0,r.useCallback)(e=>{V(e),Y(e)},[V]);return(0,r.useEffect)(()=>{x&&x(_)},[x,_]),(0,r.useEffect)(()=>{D.current=document.getElementById(de.Y)},[]),(0,N.jsxs)("form",{className:n()(be.content,{[be.sharedPromptContent]:!t}),onSubmit:e=>{e.preventDefault(),s(b,H,b!==j,I)},children:[(0,N.jsx)(ce,{canEdit:t&&C,onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),s(b,H,b!==j,I))},hasError:B}),(0,N.jsxs)("div",{className:be.footer,children:[t&&C&&O&&(0,N.jsx)(m.c,{iconLeading:M&&(0,N.jsx)(l.Z,{className:be.characterCounterIcon}),usedCharacters:U,maxCharacters:je,className:be.characterCounter,classNameUsedCharacters:n()({[be.characterCounterUsedCharactersError]:M})}),B&&e&&(0,N.jsx)($,{errors:e}),(0,N.jsxs)("div",{className:be.footerButtonRow,children:[(0,N.jsxs)(c.I,{mode:"action",layout:"multi-line","aria-label":u.Ru.get("web-player.magpie.prompt-composer.options-aria-label"),className:be.chipGroup,children:[T&&(0,N.jsx)(J,{playlistUri:g,isPrivate:I,setIsPrivate:w}),t&&(0,N.jsx)(L,{refreshMetadata:H,setRefreshMetadata:W}),h]}),C&&(0,N.jsxs)("div",{className:be.actionButtonContainer,children:[!t&&(0,N.jsx)(Z,{prompt:b,playlistUri:g}),(0,N.jsx)(ne,{generationStatus:a,disabled:F})]})]}),(0,N.jsx)(p.n,{type:"tertiary",block:"start",containerClassName:be.scrollToCtaButtonContainer,scrollToElementRef:D,iconOnly:d.r}),t&&C&&(0,N.jsx)(ae,{})]})]})}},95058:(e,t,a)=>{a.d(t,{MagpiePlaylist:()=>os});var r=a(30758),s=a(97500),n=a.n(s),i=a(67735),o=a(54091),l=a(13072),c=a(29947),d=a(96133),u=a(1099),m=a(29805),p=a(99380),g=a(13059);const y=e=>{switch(e){case"NEVER":return p.jk.NEVER;case"DAILY":return p.jk.DAILY;case"WEEKLY":return p.jk.WEEKLY;default:return(0,g.k)(e),p.jk.UNRECOGNIZED}},x=e=>{switch(e){case"MONDAY":return p.ob.MONDAY;case"TUESDAY":return p.ob.TUESDAY;case"WEDNESDAY":return p.ob.WEDNESDAY;case"THURSDAY":return p.ob.THURSDAY;case"FRIDAY":return p.ob.FRIDAY;case"SATURDAY":return p.ob.SATURDAY;case"SUNDAY":return p.ob.SUNDAY;default:return(0,g.k)(e),p.ob.UNRECOGNIZED}},h=(e,t)=>{if(!e)return;return(e=>{if(e)return{cadence:y(e.cadence),weeklyDay:x(e.weeklyDay)}})({cadence:"DAILY"===e||"WEEKLY"===e?e:"NEVER",weeklyDay:"MONDAY"===t||"TUESDAY"===t||"WEDNESDAY"===t||"THURSDAY"===t||"FRIDAY"===t||"SATURDAY"===t||"SUNDAY"===t?t:"MONDAY"})};var C=a(73136),b=a(22541),j=a(98449),E=a(86825),v=a(22141),S=a(75300),f=a(64300),k=a(7213),A=a(31407),R=a(76056),I=a(46892),w=a(15228),D=a(6944),N=a(24189);const T=e=>{const t=(0,D.H)(),{enqueueSnackbar:a}=(0,N.d)(),{handleError:s}=(0,w.c)();return(0,r.useCallback)(async()=>{try{await t.refreshPlaylist(e)}catch(e){const{isRateLimitError:t}=s(e);if(t)return;a(o.Ru.get("web-player.magpie.refresh-prompted-playlist.error"))}},[a,s,t,e])};var P=a(34401),L=a(89673),U=a(13992),M=a(96432),O=a(81694),B=a(43114),_=a(89307);const F="sKr311EOmSklVnaPUL3E",H="xNJP05dJW05tEWDuE1gQ";var Y=a(86070);const $=({generationStatus:e,handleGenerate:t,handleRefresh:a})=>"ungenerated"===e?(0,Y.jsx)(C.$,{onClick:t,children:o.Ru.get("web-player.magpie.action-bar.generate-button")}):"generating"===e?(0,Y.jsx)(C.$,{iconOnly:b.a3,disabled:!0}):"no-content"===e||"error"===e?(0,Y.jsx)(C.$,{iconLeading:j.H,onClick:a,children:o.Ru.get("web-player.magpie.action-bar.retry-button")}):null,V=r.memo(function({playlist:e,isPlaying:t,togglePlay:a,generationStatus:s,children:n}){const{metadata:i}=e,{uri:l,name:c,isOwnedBySelf:d,isRootlistable:u,canPlay:m,permissions:p}=i,g=(0,O.n)(),[y,x]=(0,B.A)(l),h=(0,M.d)(i),{isMagpiePromptingEnabled:C}=(0,I.O)(),b=(0,r.useCallback)(async()=>{await x(!y)},[y,x]),j=T(l),w=(0,r.useCallback)(async()=>{await j()},[j]),D=(0,U.j)();let N=null;return m?N=(0,Y.jsx)(R.D,{onClick:a,isPlaying:t,size:D,ariaPlayLabel:o.Ru.get("playlist.a11y.play",c),ariaPauseLabel:o.Ru.get("playlist.a11y.pause",c)}):C&&(N=(0,Y.jsx)($,{generationStatus:s,handleGenerate:w,handleRefresh:j})),(0,Y.jsxs)("div",{className:F,children:[n,(0,Y.jsxs)("div",{className:H,children:[N,i.watchFeedEntityEntryPoint&&(0,Y.jsx)(L.H,{entryPoint:i.watchFeedEntityEntryPoint,watchFeedTitle:c,type:_.c.PLAYLIST,entityUri:l}),d||!u||h?null:(0,Y.jsx)(A.e,{children:(0,Y.jsx)(E.M,{isAdded:y,onClick:b,size:D,condensed:!0})}),p?.canAdministratePermissions&&p.isPrivate&&g&&(0,Y.jsx)(P.m,{label:o.Ru.get("contextmenu.share.copy-playlist-link"),uri:l,size:D,permissionLevel:"VIEWER"}),!p?.isPrivate&&(0,Y.jsx)(S.w,{uri:l,sharingInfo:null,size:D,ariaLabel:o.Ru.get("contextmenu.share.copy-playlist-link")}),(0,Y.jsx)(f.b,{menu:(0,Y.jsx)(k.W,{uri:l}),children:(0,Y.jsx)(v.e,{label:o.Ru.get("more.label.context",c),size:D})})]})]})});var W=a(62960),K=a(281),G=a(78717),z=a(68549),X=a(82999),J=a(50867);const q="q4hTeJJWqQJLYZHl318c",Q="CyBtgVtVZYSt9QEBj__d",Z=({onGenerate:e,textVariant:t="marginal",className:a})=>(0,Y.jsxs)(K.a,{className:n()(q,a),variant:"tinted",padding:"base",children:[(0,Y.jsx)(G.E,{variant:t,semanticColor:"textBase",children:o.Ru.get("web-player.magpie.generate-prompt-card.description")}),(0,Y.jsx)("div",{className:Q,children:(0,Y.jsx)(C.$,{size:"small",onClick:e,"aria-label":o.Ru.get("web-player.magpie.generate-prompt-card.button-aria-label"),colorSet:"invertedLight",children:o.Ru.get("web-player.magpie.generate-prompt-card.button-text")})})]});var ee=a(91645);const te="_DtSjoSamPGyt3gagIng",ae="a9mKEzuHyM4lJfMKba7X",re="zXDnDKZ0XAkA8MczmsOM",se="APQf478HpjBTU3fq5ZdO",ne="NFMjDkYteUCsKM4PauMX",ie=({prompt:e,onExpand:t,isPromptedBySelf:a,generationStatus:s,onGenerate:n,showGeneratePromptCard:i,shouldUseCustomizePromptLabel:l=!1})=>{const{isMagpiePromptingEnabled:c}=(0,I.O)(),{spec:d,logger:u}=(0,ee.r)(X.D,{}),m=(0,r.useCallback)(e=>{e.stopPropagation(),u.logInteraction(d.viewExpandedPromptButtonFactory().hitUiReveal()),t()},[u,t,d]),p="ungenerated"===s,g="generating"===s,y=(0,r.useMemo)(()=>c?a?o.Ru.get("web-player.magpie.toolbar.edit-prompt-button"):l?(0,J.v)("Customize prompt"):o.Ru.get("web-player.magpie.toolbar.view-prompt-button"):o.Ru.get("web-player.magpie.toolbar.view-prompt-button"),[a,c,l]),x=p?W.n:C.$;return(0,Y.jsxs)("div",{className:te,children:[(0,Y.jsxs)(K.a,{className:ae,variant:"tinted",padding:"base",hoverBackgroundColor:"backgroundElevatedHighlight",onClick:g?void 0:m,tabIndex:-1,as:"div",children:[(0,Y.jsx)(G.E,{as:"h3",variant:"bodyMediumBold",semanticColor:"textBase",children:o.Ru.get("web-player.magpie.collapsed-prompt.label")}),(0,Y.jsx)(G.E,{as:"p",variant:"bodySmall",className:re,children:e}),(0,Y.jsx)("div",{className:se,children:(0,Y.jsx)(x,{size:"small",iconLeading:z.D,onClick:m,"aria-label":y,disabled:g,...!p&&{colorSet:"invertedLight"},children:y})})]}),i&&(0,Y.jsx)(Z,{onGenerate:n,className:ne})]})};var oe=a(64932),le=a(19878),ce=a(82898),de=a(10817),ue=a(79898),me=a(10622),pe=a(70796),ge=a(7255),ye=a(36117),xe=a(30563),he=a(22582),Ce=a(35324),be=a(14226),je=a(137),Ee=a(9584),ve=a(34503),Se=a(65992),fe=a(24903);const ke="ERKR_gpruu8mCruuAXtj",Ae="JTWPldXI6aLd1bYNWA05",Re="HVYF8wcahW3VFwOYYLwK",Ie="kCRAZ5NBldrLpOpBh1mc",we="Ifd6sqkBjDhpxGAgMmOp",De="govVgGsPr2h4OCZqEEmw",Ne="SV_CNgQgqgnVZdzkIQs3",Te="FIRw4p_hXrbb1r6EKp2k",Pe=({name:e,isPlayable:t,creators:a,images:r,isPlaying:s,type:i,togglePlay:l})=>{const c=(0,fe._)(),d=ve.u.ROUNDED_CORNERS,u=a.map(({name:e})=>e).join(o.Ru.getSeparator());return(0,Y.jsxs)("div",{className:Ne,children:[(0,Y.jsx)(ve.b,{fadeIn:!0,images:c(r??[],48),shape:d,size:Se.Qe.SIZE_48,iconSize:"medium",type:i,title:e,loadingMode:"eager"}),t&&(0,Y.jsx)("span",{className:n()(Te,Re),children:(0,Y.jsx)(R.D,{onClick:l,version:R.H.transparent,isPlaying:s,ariaPauseLabel:o.Ru.get("tracklist.a11y.pause",e,u),ariaPlayLabel:o.Ru.get("tracklist.a11y.play",e,u),condensedAll:!0})})]})};var Le=a(27360),Ue=a(37731),Me=a(19397),Oe=a(76826),Be=a(59725),_e=a(27033);const Fe=({uri:e,name:t,onClick:a,index:s})=>{const{draggable:n,onDragStart:i}=(0,Be.P)({itemUris:[e],dragLabelText:t}),o=(0,r.useCallback)(()=>{a?.(e,s)},[a,e,s]),l=(0,Le.WB1)(e)?(0,Y.jsx)(Me.H,{uri:e}):(0,Y.jsx)(Ue.t,{uri:e});return(0,_e.s)({uri:e})?(0,Y.jsx)(ce.h,{menu:l,children:(0,Y.jsx)(Oe.N,{draggable:n,to:e,onDragStart:i,dir:"auto",onClick:o,children:t})}):(0,Y.jsx)(Y.Fragment,{children:t})},He=({creators:e})=>(0,Y.jsx)(Y.Fragment,{children:e.map(({uri:e,name:t},a)=>(0,Y.jsxs)(r.Fragment,{children:[a>0&&o.Ru.getSeparator(),(0,Y.jsx)(Fe,{uri:e,name:t},e)]},e))}),Ye=({name:e,isPlayable:t,type:a,creators:s,images:i,duration:l,index:c,playlistUri:d,usePlayContextItem:u,onContextMenu:m,menu:p,recsplanation:g,uri:y,uid:x})=>{const{isPlaying:h,isActive:C,togglePlay:b,triggerPlay:j}=u({uri:y,uid:x}),{isSelected:E}=(0,r.useContext)(he.m),S=(0,Y.jsx)(Pe,{name:e,isPlayable:t,type:a,creators:s,images:i,isPlaying:h,togglePlay:b}),k=(0,Y.jsx)(ue.d,{lineClamp:1,semanticColor:C?"textBrightAccent":"textBase",dir:"auto",children:e}),A=(0,Y.jsx)(me.j,{semanticColor:"textSubdued",lineClamp:1,children:(0,Y.jsx)(He,{creators:s})}),R=(0,be.v)(y),I=(0,Y.jsxs)("div",{className:Ae,children:[(0,Y.jsx)(f.b,{menu:p,children:(0,Y.jsx)(v.e,{className:Re,label:o.Ru.get("more.label.context",e),size:"small"})}),R&&(0,Y.jsx)(Ce.g,{className:n()(Re,Ie),uri:y}),(0,Y.jsx)(ge.P,{duration:l.milliseconds,className:De})]}),w=(0,r.useCallback)(()=>{j()},[j]),D=(0,xe.q)({index:c,contextUri:d,canRemovePlaylistItems:!1,removePlaylistItems:void 0,isTreeGrid:!0,onContextMenu:m,onDoubleClick:w}),N=s?.map(e=>e.name).join(o.Ru.getSeparator())||"",T=(0,ye.R)({index:c,contextUri:d,label:`${e} • ${N}`,isEnabled:!0}),P=g?(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,Y.jsx)(Ee.o,{text:g})}):void 0;return(0,Y.jsx)(je.h,{index:c,children:(0,Y.jsx)(pe.v,{className:n()(ke,{[we]:h}),variant:E(c)?"tinted":void 0,size:"sm",paddingBlockStart:"tighter-2",paddingBlockEnd:"tighter-2",id:x,media:S,title:k,body:P,subtitle:A,trailing:I,isRedundantOnClick:!0,onDoubleClick:w,...T,...D})})},$e=({item:e,index:t,playlistUri:a,usePlayContextItem:r})=>{const{uri:s,uid:n,show:i,name:o,images:l,isPlayable:c,type:d,duration:u,formatListAttributes:m}=e,p=(0,Y.jsx)(de.b,{uri:s,showUri:i?.uri,contextUri:a}),g=i?[i]:[];return(0,Y.jsx)(ce.h,{menu:p,children:(0,Y.jsx)(Ye,{name:o,usePlayContextItem:r,uri:s,uid:n,isPlayable:c,type:d,creators:g,images:l,index:t,duration:u,playlistUri:a,menu:p,recsplanation:m?.recsplanation??""})})};var Ve=a(21017);const We=({item:e,index:t,playlistUri:a,usePlayContextItem:r})=>{const{uri:s,uid:n,album:i,artists:o,name:l,isPlayable:c,type:d,duration:u,formatListAttributes:m}=e,p=(0,Y.jsx)(Ve.P,{uri:s,albumUri:i?.uri,artists:o,contextUri:a});return(0,Y.jsx)(ce.h,{menu:p,children:(0,Y.jsx)(Ye,{name:l,usePlayContextItem:r,uri:s,uid:n,isPlayable:c,type:d,creators:o,images:i?.images??[],index:t,duration:u,playlistUri:a,menu:p,recsplanation:m?.recsplanation??""})})};var Ke=a(16615);const Ge=({usePlayContextItem:e})=>{const{playlist:{metadata:{name:t,uri:a}}}=(0,u.g)(),s=(0,r.useCallback)((t,r)=>(0,Ke.xp)(t)?(0,Y.jsx)($e,{item:t,index:r,playlistUri:a,usePlayContextItem:e},t.uri):(0,Ke.Jy)(t)?(0,Y.jsx)(We,{item:t,index:r,playlistUri:a,usePlayContextItem:e},t.uri):null,[e,a]);return(0,Y.jsx)(le.M,{renderItem:s,columnCount:3,ariaLabel:t})};var ze=a(62411),Xe=a(91198),Je=a(43971),qe=a(62507),Qe=a(90809),Ze=a(16666),et=a(72941),tt=a(42626),at=a(14),rt=a(66761),st=a(13057),nt=a(1609),it=a(461),ot=a(43157),lt=a(10520),ct=a(19717),dt=a(21943),ut=a(73312),mt=a(9606),pt=a(95264),gt=a(87274),yt=a(66147),xt=a(91850),ht=a(70839),Ct=a(50279),bt=a(70675),jt=a(3913),Et=a(7275),vt=a(74029),St=a(39001),ft=a(50217),kt=a(72453),At=a(5475),Rt=a(38529),It=a(31289),wt=a(50355),Dt=a(70655),Nt=a(74571),Tt=a(26471),Pt=a(95227),Lt=a(94315),Ut=a(41347),Mt=a(18949),Ot=a(69869),Bt=a(58473),_t=a(14244),Ft=a(18204),Ht=a(29112),Yt=a(15223),$t=a(97727),Vt=a(1187),Wt=a(58248),Kt=a(15510),Gt=a(91816),zt=a(67793),Xt=a(31139),Jt=a(94101),qt=a(54635),Qt=a(73553),Zt=a(10246),ea=a(96882),ta=a(49060),aa=a(44451),ra=a(72045),sa=a(6917),na=a(24238),ia=a(76392),oa=a(75794);const la="XCUm9_N5yGwG8qVPF3oH",ca="HP2XSc94uUAyUu8s6La6",da=e=>e?.type===_.c.SHOW,ua=r.memo(function({uri:e,uid:t,name:a,duration_ms:s,artists:i,albumOrShow:l,isMOGEFRestricted:c,isExplicit:d,isPlayable:u,isLocal:m=!1,isPaywalled:p,isUserSubscribed:y,index:x,playIndex:h=null,isMixedMedia:C,addedBy:b,hasDecoratedAddedBy:j,dateAdded:E,release_date:v,type:S,imgUrl:f,contextUri:k,onMove:A,onInsert:R,usePlayContextItem:I,allowedDropTypes:w,feedbackPath:D,feedbackUri:T,deleteFeedbackPath:P,isDisliked:L,ticketingSiteURL:U="",eventDate:M,concertsCount:O,concertDate:B,concertURI:F="",concertVenue:H,isConcert:$,isBlend:V=!1,canRemove:W,playlistName:K,authorName:z,isOutOfMarket:X,consumptionCapExplanation:J,isOwnedBySelf:q=!1,isCompactMode:Q=!1,hasAssociatedVideo:Z=!1,hasAssociatedAudio:ee=!1,bpm:te,trackKey:ae,gatedEntityRelations:re,isBanned:se,showBanButton:ne=!1,associatedAudioUri:ie,associatedAudioAlbumUri:oe,mediaType:le,isVideoFirst:ue=!1,recsplanation:me}){const{spec:pe}=(0,aa.D)(lt.i,{data:{position:x,reason:"",uri:e}}),ye=(0,ze.wA)(),xe=(0,Wt.g)(),{filter:he}=(0,r.useContext)(yt.g),Ce=(0,ea.T)(e),be=(0,Zt.b)(k,e,se),je=(0,Qt.A)(e,k,!!W,be),{isArtistBanned:ve,unbanArtist:Se}=(0,Yt.D)(i?.[0]?.uri),fe=(0,Kt.g)(e,{isPlayable:u,isLocal:m,isOutOfMarket:X,isArtistBanned:ve,hasContextualBan:be}),{displayedColumns:ke}=(0,Bt.h)(),{enqueueSnackbar:Ae}=(0,N.d)(),Re="episode"===S,Ie="audiobook"===S,we="track"!==S&&da(l)&&l.mediaType===sa.Q.VIDEO,De="track"===S&&!!ie,Ne=p&&!y,Te=Ie&&Ne,Pe=!Z&&!ee&&S===_.c.TRACK&&le===ra.IX.Video,{badges:Ue,hasBadges:Me}=(0,na.b)({downloadAvailability:Ce,isExplicit:d,isMOGEFRestricted:c,isPaywalled:p,isVideo:Z||Pe}),Be=(0,Ot.o)(d,Pe),{isWeb:_e}=(0,Gt.V)();let Fe=x+1;C&&(Fe=we?(0,Y.jsx)(st.B,{"data-testid":"video-icon",size:"small","aria-hidden":"true"}):Re?(0,Y.jsx)(nt.L,{"data-testid":"podcast-icon",size:"small","aria-hidden":"true"}):Ie?(0,Y.jsx)(it.l,{"data-testid":"audiobook-icon",size:"small","aria-hidden":"true"}):(0,Y.jsx)(ot.v,{"data-testid":"track-icon",size:"small","aria-hidden":"true"}));let He=(0,Y.jsx)(Ve.P,{uri:e,uid:t,albumUri:l?.uri,artists:i,contextUri:k,isBanned:be||L,canBan:je,canBeRemovedFromPlaylist:W,contextName:K});Re?He=(0,Y.jsx)(de.b,{uri:e,uid:t,showUri:l?.uri,contextUri:k,canBeRemovedFromPlaylist:W}):m?He=(0,Y.jsx)(ut.A,{uri:e,uid:t,contextUri:k,canBeRemovedFromPlaylist:W}):Ie?He=(0,Y.jsx)(dt.p,{uri:e,uid:t,contextUri:k,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:W}):De&&(He=(0,Y.jsx)(mt.o,{uri:e,uid:t,canBan:!1,artists:i,contextUri:k,saveTrackUri:ie,albumUri:oe}));let Ye=i?.map(e=>e.name).join(o.Ru.getSeparator())||"";Re&&da(l)?Ye=l.publisher:Ie&&(Ye=z||"");const $e=b?.[0],We=(0,ia.g)($e?.images,{desiredWidth:24,desiredLabel:"small"}),Ke=(0,ta.P)({uri:e},{featureIdentifier:"playlist"}),Ge=I({uid:t,uri:e,index:h??x}),{isActive:Xe,isPlaying:Je,triggerPlay:qe,togglePlay:et}=Ie?Ke:Ge,tt=()=>(0,Y.jsx)(Mt.p,{titleText:a,children:(0,Y.jsx)(pt.M,{searchWords:[he],textToHighlight:a})}),at=(0,r.useMemo)(()=>Pe?{modes:{media:"audio"}}:void 0,[Pe]),rt=(0,r.useCallback)((e,t)=>{Ie&&J?ye((0,ct._3)()):qe({loggingParams:t,...at})},[J,ye,Ie,at,qe]),ua=(0,r.useCallback)((t,a)=>{Ie&&J?ye((0,ct._3)()):Te?xe((0,Le.o_h)(e).toURLPath(!0)):et({loggingParams:a,...at})},[J,ye,Ie,xe,at,et,Te,e]),ma=(0,$t.v)(re,e);return(0,Y.jsx)(gt.N,{renderInline:!1,enabled:!0,showUri:l?.uri,children:(t,r)=>(0,Y.jsx)(ce.h,{menu:He,children:(0,Y.jsx)(Qe.w,{uri:e,contextUri:k,index:x,onTriggerPlay:rt,isCompactMode:Q,onTriggerPaywall:t=>{Te?xe((0,Le.o_h)(e).toURLPath(!0)):r(t)},onDoubleClick:()=>{Ie?xe((0,Le.o_h)(e).toURLPath(!0)):Ae(o.Ru.get("feedback.unable-to-play"))},isLocked:Ne,isActive:Xe,ariaRowIndex:x+1,isPlayable:fe,isArtistBanned:ve,isBannedInContext:be,contextName:K,handleArtistBanUndoClick:Se,ageRestricted:c,dragMetadata:{name:a,createdBy:Ye},onMove:A,onInsert:R,allowedDropTypes:w,spec:pe,canRemovePlaylistItems:W,isExplicit:d,children:ke.map(({columnType:t,options:r},c)=>{const d=(0,_t.y)(c,t,ke);return(0,Y.jsx)(d,{ariaColIndex:c,children:(()=>{switch(t){case Ze.$C.INDEX:return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(gt.N,{showUri:l?.uri??"",renderInline:!1,enabled:Ne,children:(0,Y.jsx)(Dt.$,{uri:e,playAriaLabel:o.Ru.get("tracklist.a11y.play",a,Ye),onClick:ua,isPlaying:Je,isActive:Xe,isLocked:Ne,spec:pe,children:(0,Y.jsx)(Tt.a,{children:Fe})})})});case Ze.$C.TITLE_AND_ARTIST:case Ze.$C.TITLE_AND_AUTHOR:return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Rt.e,{src:Be?void 0:f,isVideo:we,isEpisode:Re,isVideoFirst:ue}),(0,Y.jsxs)(It.l,{children:[_e||Ie?(0,Y.jsx)(Oe.N,{to:e,className:oa.A.rowTitle,"data-testid":"internal-track-link",children:tt()}):tt(),Me&&(0,Y.jsxs)(bt.P,{children:[Ue.download&&(0,Y.jsx)(Jt._,{}),Ue.explicit&&(0,Y.jsx)(zt.U,{}),ma?(0,Y.jsx)(Vt.x,{gatedEntityRelations:re}):Ue.paid&&(0,Y.jsx)(Xt.y,{}),Ue.nineteen&&(0,Y.jsx)(qt.q,{className:oa.A.nineteen,size:16}),Ue.isVideo&&(0,Y.jsx)(Ft.l,{})]}),(0,Y.jsxs)(Lt.p,{children:[!Re&&!we&&i&&(0,Y.jsx)(xt.E,{nonInteractive:m,artists:i,filter:he,spec:pe}),(Re||Ie)&&!we&&Ye]})]})]});case Ze.$C.TITLE:return(0,Y.jsxs)(wt.q,{children:[_e||Ie?(0,Y.jsx)(Oe.N,{to:e,className:oa.A.rowTitle,"data-testid":"internal-track-link",children:tt()}):tt(),Me&&(0,Y.jsxs)(bt.P,{children:[Ue.download&&(0,Y.jsx)(Jt._,{}),Ue.explicit&&(0,Y.jsx)(zt.U,{}),Ue.paid&&(0,Y.jsx)(Xt.y,{}),Ue.nineteen&&(0,Y.jsx)(qt.q,{className:oa.A.nineteen,size:16}),Ue.isVideo&&(0,Y.jsx)(Ft.l,{separator:""})]})]});case Ze.$C.ARTIST:case Ze.$C.AUTHOR:return(0,Y.jsxs)(Ut.Y,{children:[!Re&&!we&&i&&(0,Y.jsx)(xt.E,{nonInteractive:m,artists:i,filter:he,spec:pe}),(Re||Ie)&&!we&&Ye]});case Ze.$C.ALBUM_OR_PODCAST:case Ze.$C.ALBUM:return l?(0,Y.jsx)(Ct.g,{nonInteractive:m,uri:l.uri,name:l.name,creatorUri:i?.[0]?.uri,spec:pe,children:(0,Y.jsx)(pt.M,{searchWords:[he],textToHighlight:l.name})}):null;case Ze.$C.ADDED_BY:return(0,Y.jsx)(Y.Fragment,{children:V?(0,Y.jsx)(kt.R,{users:b,spec:pe}):(0,Y.jsx)(ht.i,{name:$e?.displayName||$e?.username||"",isCompactMode:Q,uri:$e?.uri||"",imageUrl:We?.url||"",showAvatar:j,spec:pe})});case Ze.$C.RELEASE_DATE:return(0,Y.jsx)(Y.Fragment,{children:Re&&(0,Y.jsx)(Pt.w,{releaseDate:v})});case Ze.$C.EVENT_DATE:return(0,Y.jsx)(Y.Fragment,{children:M&&U?(0,Y.jsx)(St.N,{eventDate:M,ticketingSiteURL:U}):null});case Ze.$C.CONCERT:return(0,Y.jsx)(Y.Fragment,{children:$&&B&&H?(0,Y.jsx)(jt.F,{concertsCount:O,concertDate:B,concertURI:F,concertVenue:H,index:x,spec:pe,isCompactMode:Q}):null});case Ze.$C.EVENT_INFO:return(0,Y.jsx)(Y.Fragment,{children:H&&F?(0,Y.jsx)(ft.F,{concertsCount:O,concertVenue:H,concertURI:F,index:x,spec:pe}):null});case Ze.$C.CONCERT_VENUE:return(0,Y.jsx)(Y.Fragment,{children:H&&F?(0,Y.jsx)(ft.F,{concertURI:F,concertsCount:O,concertVenue:H,index:x,spec:pe}):null});case Ze.$C.ADDED_AT:return(0,Y.jsx)(Y.Fragment,{children:E?(0,Y.jsx)(vt.L,{dateAdded:new Date(E)}):null});case Ze.$C.DURATION:return(0,Y.jsxs)(Y.Fragment,{children:[(ne&&!De||be)&&je?(0,Y.jsx)(Et.A,{itemUri:e,contextUri:k,isBanned:be||L,contextName:K,spec:pe}):D&&P&&(0,Y.jsx)(At.O,{isDisliked:L,feedbackPath:D,deleteFeedbackPath:P,feedbackUri:T||e,name:K,contextUri:k}),!we&&!X&&(0,Y.jsx)(Ht.d,{uri:ie??e,spec:pe,type:S,isOwnedBySelf:q}),!r?.hideDuration&&(0,Y.jsx)(ge.P,{duration:s}),(0,Y.jsx)(Nt.Y,{menu:He,label:o.Ru.get("more.label.track",a,Ye),spec:pe})]});case Ze.$C.BPM:return te?(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",children:te}):null;case Ze.$C.KEY:return ae?(0,Y.jsx)(G.E,{variant:"bodySmall",style:{color:ae.color},children:ae.camelotKey}):null;case Ze.$C.REASONING:return me?(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",className:n()(la,Q&&ca),children:(0,Y.jsx)(Ee.o,{text:me})}):null;case Ze.$C.ACTIONS:case Ze.$C.ADD:case Ze.$C.ALBUM_OR_SHOW:case Ze.$C.PLAYS:return null;default:(0,g.d)(t)}return null})()},`column-${c}`)})})})})},(e,t)=>e.uri===t.uri&&e.allowedDropTypes.length===t.allowedDropTypes.length&&e.isPlayable===t.isPlayable&&e.isMixedMedia===t.isMixedMedia&&e.consumptionCapExplanation===t.consumptionCapExplanation&&e.isCompactMode===t.isCompactMode&&e.isVideoFirst===t.isVideoFirst);var ma=a(51173),pa=a(87879),ga=a(52498),ya=a(24075),xa=a(70613),ha=a(78146),Ca=a(21737);const ba={MINIMUM_HEADER_HEIGHT:"186px",MAXIMUM_HEADER_HEIGHT:"336px",MINIMUM_HEADER_HEIGHT_WITH_VIDEO:"276px",MAXIMUM_HEADER_HEIGHT_WITH_VIDEO:"395px",IMAGE_SIZE:"192px",IMAGE_SIZE_BIG:"232px",BACKGROUND_HEIGHT_PERCENTAGE:"40vh",xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",content:"skGoUpoTLBOBJe9UWX_3",entityFullWidth:"EIS4eWnjvaLKKCk4zGS5",promptComposerExpanded:"rXmoYZ4muNf_35LKWjgt",playlistHeader:"VmzcAZtv6d7rYoUoq22F",playlistContent:"u7IzwJ4UVbTqKnV9VRUK",toolbarContainer:"fXgZoZe1qriCWNZmACVz",toolbar:"JRv3XTrA5KbHb0o3WYF5",toolbarInner:"C9Tqd2FDTZ7AmM3oXGIQ",promptComposerSlot:"R7XN9XuKfGCBJUl_ap5S",promptComposerSlotContent:"fsOh9Y0UVgZwhTlu6_sM",expanded:"DS49_JQv40_pMl_QIfiX"};function ja(e){return(0,Ke.Jy)(e)||(0,Ke.xp)(e)}function Ea(e){return(0,Ke.Jy)(e)||(0,Ke.xp)(e)||(0,Ke.pW)(e)}const va=r.memo(function({scrollToUid:e,feedbackPath:t,deleteFeedbackPath:a,usePlayContextItem:s,tracklistRef:i,tracklistDomRef:o,showRecsplantion:l}){const{playlist:{metadata:{name:c,formatListData:d,uri:p,canRemove:g,canAdd:y,hasSpotifyAudiobooks:x,isOwnedBySelf:h,hasSpotifyTracks:C,hasEpisodes:b}}}=(0,u.g)(),{isCompactMode:j}=(0,ya.a)(),E=j?[Ze.$C.INDEX,Ze.$C.TITLE,...l?[Ze.$C.REASONING]:[],Ze.$C.DURATION]:[Ze.$C.INDEX,Ze.$C.TITLE_AND_ARTIST,...l?[Ze.$C.REASONING]:[],Ze.$C.DURATION],v=y&&g,S=(0,Xe.NC)(xa.LX5),f=(0,tt.X)(d?.type),k=(0,et.$)()&&f,A=(0,ga.p)(),R=(0,ma.e)({formatListData:d}),I=[C,b,x].filter(Boolean).length>1,w=(0,ha.m)(),{trackListSortState:D}=(0,rt.B)({columns:E,hasCustomOrder:!0}),N=(0,ze.wA)(),T=(0,m.K)(),P=(0,r.useCallback)(()=>{i?.current&&i.current.update()},[i]);(0,Ca.H)(p,P),(0,r.useEffect)(()=>{i?.current&&e&&i.current.scrollToItem({uid:e})},[e,i]);const L=(0,r.useCallback)((e,t,a)=>{if(!i?.current)return;const r=i.current.getRows()[t];r&&(a===Qe.Y.Before?w.move(p,e,{before:r}):w.move(p,e,{after:r}))},[i,w,p]),U=(0,r.useCallback)((e,t,a)=>{if(!i?.current)return;const r=i.current.getRows()[t];r&&(a===Qe.Y.Before?N((0,Je.io)(p,e,{before:{uri:r.uri,uid:r.uid}})):N((0,Je.io)(p,e,{after:{uri:r.uri,uid:r.uid}})))},[i,p,N]),M=(0,r.useCallback)((e,n)=>{let i,o=null;(0,Ke.xp)(e)?(o=e.show,i=e.images.concat(e.show?.images||[])):(0,Ke.Jy)(e)?(o=e.album,i=e.album?.images):(0,Ke.pW)(e)&&(i=e.images);const l=(0,ia.g)(i,{desiredSize:40,desiredLabel:"small"});let d=[];v&&null===D.column&&(d=[qe.fl.TRACKS,qe.fl.LOCAL_TRACKS,qe.fl.EPISODES,...x?[qe.fl.AUDIOBOOKS]:[]]);const u="1"===e?.formatListAttributes?.["dislike-feedback-selected"],m=!!(0,Ke.xp)(e)&&e.podcastSubscription.isUserSubscribed;let y=!1;(0,Ke.xp)(e)&&e.podcastSubscription.isPaywalled&&!m?y=!0:ja(e)?y=e.isPlayable&&!u:(0,Ke.pW)(e)&&(y=!0);let C=!1;(0,Ke.xp)(e)&&e.podcastSubscription.isPaywalled?C=!0:(0,Ke.pW)(e)&&(C=e.isLocked&&!e.isOutOfMarket);const b=e.addedBy&&[e.addedBy]||[];let E=0;ja(e)?E=e.duration.milliseconds:(0,Ke.pW)(e)&&(E=e.durationMs||0);let f="";Ea(e)&&(f=e.name);let N=null;(0,Ke.xp)(e)&&(N=e.gatedEntityRelations);const P=T.getItem(n+1,{cachedOnly:!0})??null;return(0,Y.jsxs)(r.Fragment,{children:[(0,Y.jsx)(ua,{isCompactMode:j,index:n,playIndex:e.playIndex??void 0,contextUri:p,uri:e.uri,uid:e.uid,isPlayable:y,duration_ms:E,isPaywalled:C,isUserSubscribed:m,name:f,artists:(0,Ke.Jy)(e)?e.artists:void 0,albumOrShow:o,isExplicit:(Ea(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Ke.Jy)(e)&&e.hasAssociatedVideo&&S)??!1,associatedAudioUri:(0,Ke.Jy)(e)?e.associatedAudioUri:void 0,associatedAudioAlbumUri:(0,Ke.Jy)(e)?e.associatedAudioAlbumUri:void 0,mediaType:(0,Ke.Jy)(e)?e.mediaType:void 0,hasAssociatedAudio:(0,Ke.Jy)(e)&&e.hasAssociatedAudio,isMixedMedia:I,isLocal:(0,Ke.Jy)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:w.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ke.xp)(e)&&e.release.isoString||"",isMOGEFRestricted:((0,Ke.Jy)(e)||(0,Ke.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:L,onInsert:U,usePlayContextItem:s,allowedDropTypes:d,feedbackPath:t,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:a,isDisliked:u,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:g,playlistName:c,concertsCount:String(e.formatListAttributes?.concert_uris?.split(",").length??0),concertURI:e.formatListAttributes?.concert_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.concert_subtitle,authorName:(0,Ke.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Ke.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ke.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:v,bpm:(0,Ke.Jy)(e)?e.bpm:void 0,trackKey:(0,Ke.Jy)(e)?e.key:void 0,gatedEntityRelations:N,isBanned:!!(0,Ke.Jy)(e)&&e.isBanned,showBanButton:k,recsplanation:e.formatListAttributes?.recsplanation??""}),A&&P&&(0,Y.jsx)(pa.Z,{track:e,nextTrack:P,playlistUri:p,isPlaylistMixed:R,isOwnedBySelf:h??!1})]},n+e.uri)},[v,D.column,j,p,S,I,w,L,U,s,t,a,g,c,k,A,R,h,x,T]),O=(0,r.useCallback)(e=>({isVisibleByDefault:!0,canToggle:!0,defaultWidth:e===Ze.$C.REASONING?"5fr":void 0,size:e===Ze.$C.REASONING?"large":void 0}),[]);return(0,Y.jsx)(at.V,{ariaLabel:c,columns:E,columnPersistenceKey:Ze.SZ.PLAYLIST,tracklistClassName:n()({[ba.removeLastTunaRowHeight]:R}),renderItem:M,defaultSortField:"custom-order",tracklistDomRef:o,extraRowHeight:R?32:void 0,tracklistRef:i,testID:"playlist-tracklist",dynamicHeightVirtualizationPersistenceKey:p,getColumnConfig:O})});var Sa=a(2710),fa=a(58760),ka=a(77639);const Aa="kJUGLyewQgwLNULlSVdd",Ra="QDksKC8ha8Erb8fXpQuA",Ia="Gzlp8QjnlHAfnj0gBw9n",wa=()=>{const e=(0,oe.bj)("images/playlist-row-placeholder.png");return(0,Y.jsx)("div",{className:Ra,style:{"--placeholder-image-mask":`url(${e})`},children:(0,Y.jsx)("img",{src:e,className:Ia,alt:""})})},Da=({showRecsplantion:e,usePlayContextItem:t,tracklistRef:a,tracklistDomRef:r,generationStatus:s})=>{const{ref:n,breakpoint:i}=(0,ka.x)({[fa.E.SMALL]:0,[fa.E.MEDIUM]:640}),{nrValidItems:o}=(0,m.K)(),l=(0,Sa.h)("shimmer");return 0===o&&"generating"===s?(0,Y.jsxs)("div",{className:Aa,ref:l,children:[(0,Y.jsx)(wa,{}),(0,Y.jsx)(wa,{}),(0,Y.jsx)(wa,{})]}):0===o?null:(0,Y.jsx)("div",{ref:n,children:i===fa.E.SMALL&&e?(0,Y.jsx)(Ge,{usePlayContextItem:t}):(0,Y.jsx)(va,{usePlayContextItem:t,tracklistRef:a,tracklistDomRef:r,showRecsplantion:e})})};var Na=a(82063),Ta=a(12552),Pa=a(17422),La=a(29934),Ua=a(8134),Ma=a(54839),Oa=a(9763),Ba=a(44872);const _a=!1,Fa=e=>{const{uri:t,name:a,description:s,images:n,permissions:i}=e,o=(0,r.useContext)(Ba.$$),l=(0,r.useCallback)(e=>{o({type:"open",playlistDetails:{name:a,description:s,image:n[0],uri:t,canEditImage:_a,canEditPrivacy:i?.canAdministratePermissions??!1,isPrivate:i?.isPrivate??!1,hasPrompt:!0},focusedElement:e})},[o,a,s,n,t,i]),c=(0,r.useCallback)(()=>{o({type:"openWithImagePicker",playlistDetails:{name:a,description:s,image:n[0],uri:t,canEditImage:_a,canEditPrivacy:i?.canAdministratePermissions??!1,isPrivate:i?.isPrivate??!1,hasPrompt:!0}})},[o,a,s,n,t,i]);return{handleTitleClick:(0,r.useCallback)(()=>l(Ba.NV.TITLE),[l]),handleDescriptionClick:(0,r.useCallback)(()=>l(Ba.NV.DESCRIPTION),[l]),handleImageClick:c,handleOpenEditDetails:(0,r.useCallback)(()=>l(Ba.NV.NONE),[l]),canEditImage:_a}},Ha=e=>e?{id:e.username,uri:(0,Le.Qjr)(e.username).toString(),name:e.displayName??"",displayName:e.displayName??void 0,images:e.images,isMadeFor:!1}:null;var Ya=a(1812),$a=a(28101),Va=a(94209);const Wa=()=>{const e=(0,Va.N)($a.L),{data:t,isLoading:a,error:r}=(0,Ya.I)({queryKey:["session-user"],queryFn:()=>e.getUser()});return{data:t??null,isLoading:a,error:r}},Ka="cPp5DAm_7LnOH9tGdCh4",Ga="lJvdkTChrGapCtik83rG",za="hGI2kIk_ryQJHlTJyiEQ",Xa=function({metadata:e,isPlaying:t,togglePlay:a,isPromptedBySelf:r,generationStatus:s,creator:i,backgroundColor:l}){const{uri:c,name:d,images:u}=e,m="generated"===s,p=(0,Y.jsx)(k.W,{uri:c}),{data:g}=Wa(),y=Ha(g)??void 0,{handleImageClick:x,handleTitleClick:h,canEditImage:C}=Fa(e),b=r&&m,j=e.permissions?e.permissions?.isPrivate?o.Ru.get("private_playlist"):o.Ru.get("public_playlist"):o.Ru.get("playlist");return(0,Y.jsxs)(Ta.z,{backgroundColor:l,children:[(0,Y.jsxs)(Pa.h,{children:[(0,Y.jsx)(R.D,{size:"medium",onClick:a,isPlaying:t}),(0,Y.jsx)(ce.h,{menu:p,children:(0,Y.jsx)(La.X,{text:d,dragUri:c,dragLabel:d})})]}),(0,Y.jsx)(ce.h,{menu:p,children:(0,Y.jsx)("div",{className:n()(Ga,za),children:(0,Y.jsx)(Na.M,{onClick:x,canEdit:C,name:d,images:u,placeholderType:"magpie"})})}),(0,Y.jsxs)("div",{className:Ka,children:[(0,Y.jsx)(Ua.B,{children:j}),(0,Y.jsx)(ce.h,{menu:p,children:(0,Y.jsx)(Ma.mm,{canEdit:b??!1,onClick:h,dragUri:c,dragLabel:d,ariaLabel:o.Ru.get("playlist.edit-details.button",d),scaleAtMinWidth:Ma.tw,children:d})}),(0,Y.jsx)(Oa.O,{creator:i,madeForCreator:m&&!r?y:void 0})]})]})};var Ja=a(90814),qa=a(79657),Qa=a(49525),Za=a(31006),er=a(52733);const tr=({refreshMetadata:e})=>{const{isMagpieSchedulingEnabled:t}=(0,I.O)();return t&&e&&e.cadence!==p.jk.NEVER?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Za.J,{}),(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,er.Fg)(e)})]}):null};var ar=a(35394);const rr="EfQAqzQgBXnyqRCTdzUC",sr="l7gQ0TIJqA5GhpLnD6jQ",nr="AI_rb6dHrAMoKJLf45HT",ir="dNYGnFGq2cV1G6h7BCaQ",or=({onRefresh:e})=>{const{isMagpiePromptingEnabled:t}=(0,I.O)(),{spec:a,logger:s}=(0,ee.r)(X.D,{}),n=(0,r.useCallback)(()=>{s.logInteraction(a.refreshButtonFactory().hitRefreshContent()),e()},[s,e,a]);return t?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Za.J,{}),(0,Y.jsx)(ar.H,{iconLeading:j.H,condensedAll:!0,size:"small",semanticColor:"textBase",className:nr,onClick:n,children:o.Ru.get("web-player.magpie.metadata-refresh-button.text")})]}):null};var lr=a(84771);const cr=({playlist:e,generationStatus:t,refreshMetadata:a,showInlineProgressMessage:r,hasTracklist:s})=>{const n=e.metadata.duration?.milliseconds??0,i=e.metadata.duration?.isEstimate??!1,l=T(e.metadata.uri),c="ungenerated"===t,d="generating"===t;if("no-content"===t||"error"===t)return null;const u=e.metadata.permissions?.isPrivate?Ja.u:qa.d,m=e.metadata.formatListData?.attributes,p=(0,lr.z)(m);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:rr,children:[s&&(0,Y.jsx)(u,{size:"xsmall",className:sr}),(0,Y.jsx)(Qa.r,{durationMs:n,isEstimate:i}),!c&&!d&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(tr,{refreshMetadata:a}),(0,Y.jsx)(or,{onRefresh:l})]}),r&&p&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Za.J,{}),(0,Y.jsx)(b.a3,{size:"small",className:ir}),(0,Y.jsx)(G.E,{variant:"bodySmallBold",semanticColor:"textSubdued",children:o.Ru.get("web-player.magpie.prompt-composer-submit-button.updating")})]})]}),r&&p&&(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textBase",children:o.Ru.get("web-player.magpie.metadata.progress-details",p.name)})]})};var dr=a(11354);const ur="WXG7k6ISVewhLT8g6D4o",mr="uwsTHLL5q9dVvHO5ymAw",pr="p5v4ckGIj8MiTdWrwCzA",gr="yKALpmrYLohIOcXBG3xz",yr="FXMv_3jVjf297HGUI1cc",xr=({promptSummary:e,generationStatus:t,onGeneratedPromptSummaryClick:a})=>{const[s,i]=(0,r.useState)(!1),l=(0,r.useRef)(null),c=(0,dr.K)({ref:l}),d="generated"===t;return(0,Y.jsxs)("div",{className:n()(ur,{[mr]:!s,[gr]:c}),children:[(0,Y.jsx)("div",{className:n()(pr),ref:l,children:(0,Y.jsx)(G.E,{variant:"bodySmall",onClick:d?a:void 0,children:e})}),(c||s)&&(0,Y.jsxs)(ar.H,{semanticColor:"textBase",condensedAll:!0,size:"small",onClick:()=>i(!s),className:yr,children:[!s&&(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"…"}),s?o.Ru.get("show_less"):o.Ru.get("show_more")]})]})},hr=({promptSummary:e,generationStatus:t,onGeneratedPromptSummaryClick:a})=>e?(0,Y.jsx)(xr,{promptSummary:e,generationStatus:t,onGeneratedPromptSummaryClick:a}):null;var Cr=a(53209),br=a(99974),jr=a(92363);const Er="nSl9g3j8F1zw8tzgM2hI",vr="zsIP3o1mOszf38ixFUec",Sr="Vi0wrgtpeXmoXJ774du2",fr=({showReasoning:e,setShowReasoning:t,isEntityFullWidth:a,isExpanded:s,setIsExpanded:i,isPromptedBySelf:l,generationStatus:c,metadata:d,className:u})=>{const{isMagpiePromptingEnabled:p}=(0,I.O)(),{handleOpenEditDetails:g}=Fa(d),{nrValidItems:y}=(0,m.K)(),x="ungenerated"!==c||y>0,h="generating"===c,b=l&&"generated"===c,{spec:j,logger:E}=(0,ee.r)(X.D,{}),v=(0,r.useCallback)(()=>{e?E.logInteraction(j.promptToolbarFactory().reasoningButtonFactory().hitUiHide()):E.logInteraction(j.promptToolbarFactory().reasoningButtonFactory().hitUiReveal()),t(!e)},[E,t,e,j]),S=(0,r.useCallback)(()=>{E.logInteraction(j.promptToolbarFactory().promptButtonFactory().hitUiReveal()),i(!s)},[s,E,i,j]),f=(0,r.useCallback)(()=>{E.logInteraction(j.promptToolbarFactory().editMetadataButtonFactory().hitUiReveal()),g()},[g,E,j]);return(0,Y.jsx)(jr.a,{className:u,children:(0,Y.jsxs)("div",{className:Er,children:[x&&(0,Y.jsx)(C.$,{iconLeading:Cr.l,size:"small",colorSet:"invertedLight",className:n()(vr,{[Sr]:e}),onClick:v,children:o.Ru.get("web-player.magpie.toolbar.notes-button")}),a&&(0,Y.jsx)(C.$,{iconLeading:z.D,size:"small",colorSet:"invertedLight",className:n()(vr,{[Sr]:s}),onClick:S,disabled:h,children:l&&p?o.Ru.get("web-player.magpie.toolbar.edit-prompt-button"):o.Ru.get("web-player.magpie.toolbar.view-prompt-button")}),b&&(0,Y.jsx)(C.$,{iconLeading:br.G,size:"small",colorSet:"invertedLight",className:vr,onClick:f,children:o.Ru.get("web-player.magpie.toolbar.name-details-button")})]})})};var kr=a(1797),Ar=a(77989);const Rr="D465alLukOtqAUHInnSN",Ir=({text:e="",className:t,revealIntervalMs:a=40,fadeDurationMs:s=100,trailingAlphas:n=[0,.33,.66]})=>{const[i,o]=(0,r.useState)(window.matchMedia("(prefers-reduced-motion: reduce)").matches);(0,r.useEffect)(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=e=>o(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);const l=(0,r.useMemo)(()=>{if(!e)return[];const t=(0,Ar.k)(e),a=[];return t.forEach(e=>{if(e.type===Ar.O.TEXT){Array.from(e.content).forEach(e=>{a.push(e)})}else{const t=e.type===Ar.O.CITATION?"citation":"link";a.push((0,Y.jsx)(kr.g,{url:e.url,content:e.content,variant:t},`${t}-${e.partId}`))}}),a},[e]),[c,d]=(0,r.useState)(-1),u=n.length;if((0,r.useEffect)(()=>{d(-1);const e=l.length+u;let t=0;const r=setInterval(()=>{t<e?(d(t),t++):clearInterval(r)},a);return()=>clearInterval(r)},[l,a,u]),i)return e;const m={"--fade-duration":`${s}ms`};return(0,Y.jsx)("span",{className:t,style:m,children:l.map((e,t)=>{const a={"--token-opacity":t>c?0:(e=>{const t=c-e;return t<0?0:t<u?n[t]??0:1})(t)};return"string"==typeof e?(0,Y.jsx)("span",{className:Rr,style:a,children:e},`text-${t}`):(0,Y.jsx)("span",{className:Rr,style:a,children:e},`element-${t}`)})})},wr="WV6jhFuj7rd658f8jSAw",Dr=({formatListAttributes:e,generationStatus:t,showInlineProgressMessage:a})=>{const{nrValidItems:s}=(0,m.K)(),n=(0,lr.z)(e),i=e.tracklist_summary,o=(0,r.useRef)(),[l,c]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{"generating"===o.current&&"generated"===t?c(!0):"generated"!==t&&c(!1),o.current=t},[t]),a?null:n&&0===s?(0,Y.jsxs)("div",{className:wr,children:[(0,Y.jsx)(G.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:n.name}),(0,Y.jsx)(G.E,{variant:"bodySmall",semanticColor:"textSubdued",children:n.details})]}):(0,Y.jsx)(G.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l?(0,Y.jsx)(Ir,{text:i??"",revealIntervalMs:4}):(0,Y.jsx)(Ee.o,{text:i??""})})},Nr="OXXaZ1iE4xW1xADAg4FZ",Tr=({promptSummary:e,prompt:t})=>(0,Y.jsxs)("div",{className:Nr,children:[(0,Y.jsx)(G.E,{variant:"titleSmall",semanticColor:"textBase",children:o.Ru.get("web-player.magpie.what-youll-get.title")}),(0,Y.jsx)(G.E,{variant:"bodyMedium",semanticColor:"textBase",children:e}),(0,Y.jsx)(G.E,{variant:"titleSmall",semanticColor:"textBase",children:o.Ru.get("web-player.magpie.what-youll-get.prompt-label")}),(0,Y.jsx)(G.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:t})]});var Pr=a(20631),Lr=a(89652),Ur=a(87517),Mr=a(14590),Or=a(75593);const Br="sNpXL4nXMA8OXw8E8l32",_r="tfIb1CBCpXnpPuKJpilA",Fr="PeLv3PY0mjgAKxc_euf4",Hr="cYWrIdLVsB65g_r8IAcS",Yr=({onClose:e,showSuggestions:t,onToggleSuggestions:a,...s})=>{const{isMagpiePromptingEnabled:i}=(0,I.O)(),o=(0,r.useId)(),l=s.isPromptedBySelf&&i,{resetPromptChanges:c}=(0,Pr.b)(),d=(0,r.useCallback)(()=>{c(),e()},[c,e]);return(0,Y.jsxs)("div",{className:Br,children:[(0,Y.jsx)(Ur.c,{playlistName:s.playlistName,creator:s.creator,onClose:d}),(0,Y.jsxs)("div",{className:n()(_r,{[Fr]:t}),children:[(0,Y.jsx)(Lr.f,{...s,buttonsSlot:l&&(0,Y.jsx)(Or.Q,{active:t,onClick:a,panelId:o})}),t&&(0,Y.jsx)("div",{className:Hr,children:(0,Y.jsx)(Mr.y,{panelId:o,isEntityPage:!0})})]})]})};var $r=a(37528),Vr=a(8017);const Wr="S7zxpO7zjFjMPKGFhJpl",Kr="PYFTyLjx9xcZr8xcAOOk",Gr="Dw4md01fFAPkVk5JtW2E",zr="rshNtgsAHGkuNcEcfEUO",Xr="WZltoVM_km0d3Ek2Uwh1",Jr="roq7fsz6Rk5KMa3xo3iH",qr=({isOpen:e,onClose:t,showSuggestions:a,onToggleSuggestions:s,...i})=>{const o=(0,Vr.B)(),{isMagpiePromptingEnabled:l}=(0,I.O)(),c=(0,r.useId)(),d=i.isPromptedBySelf&&l,{resetPromptChanges:u}=(0,Pr.b)(),m=(0,r.useCallback)(()=>{u(),t()},[u,t]);return(0,Y.jsxs)($r.A,{isOpen:e,shouldCloseOnOverlayClick:!0,onRequestClose:m,overlayClassName:Wr,children:[(0,Y.jsxs)("div",{className:Kr,children:[(0,Y.jsx)(Ur.c,{playlistName:i.playlistName,creator:i.creator,onClose:m}),(0,Y.jsxs)("div",{className:n()(Gr,{[zr]:a}),children:[(0,Y.jsx)(Lr.f,{...i,buttonsSlot:d&&(0,Y.jsx)(Or.Q,{active:a,onClick:s,panelId:c})}),a&&(0,Y.jsx)("div",{className:Xr,children:(0,Y.jsx)(Mr.y,{panelId:c})})]})]}),(0,Y.jsx)("div",{className:Jr,ref:o})]})};var Qr=a(61970);var Zr=a(78590),es=a(64352),ts=a(91925),as=a(96344);var rs=a(15074),ss=a(52753),ns=a(114),is=a(95488);const os=({playlist:e})=>{const t=(0,D.H)(),{metadata:{uri:a,name:s,description:p,formatListData:g,owner:y}}=e,[x,C]=(0,r.useState)(!0),{contentsOptions:b}=(0,u.g)(),{nrValidItems:j}=(0,m.K)(),{isPlaying:E,isActive:v,togglePlay:S,usePlayContextItem:f}=(0,ta.P)((0,ns.A)(a,b),{featureIdentifier:"playlist"}),k=g?.attributes||{},A=function(e){return"MESSAGE_STATUS_QUEUED"===e?.generation_status||"MESSAGE_STATUS_PROCESSING"===e?.generation_status?"generating":"MESSAGE_STATUS_SUCCESS"===e?.generation_status?"generated":"UNGENERATED"===e?.generation_status?"ungenerated":"NO_CONTENT"===e?.generation_status?"no-content":"MESSAGE_STATUS_ERROR"===e?.generation_status?"error":"none"}(k),R=k.prompt||"",P=Ha(y)??void 0,L="generating"===A&&j>0,U="ungenerated"===A&&0===j,{handleDescriptionClick:M}=Fa(e.metadata),{isMagpiePromptingEnabled:O}=(0,I.O)(),B=function(e){return"true"===e?.is_personalized_playlist}(k),_="ungenerated"===A&&B&&j>0&&O,F=(0,rs.M)(y.username),H=(0,r.useRef)(null),$=(0,r.useRef)(null),W=(0,r.useRef)(null),K=(0,r.useRef)(null),{ref:G,breakpoint:z}=(0,ka.x)({[fa.E.SMALL]:1,[fa.E.MEDIUM]:900}),X=z===fa.E.SMALL,[J,q]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(),[te,ae]=(0,r.useState)(!1),re=(0,r.useCallback)(()=>{ae(e=>!e)},[]),{enqueueSnackbar:se}=(0,N.d)(),{handleError:ne}=(0,w.c)(),oe=T(a),le=(0,r.useCallback)(async(e,r,s=!0)=>{if(ee(null),"ungenerated"===A&&!s||!F)await oe();else if(F)try{await t.editPrompt(a,e),q(!1)}catch(e){const{isRateLimitError:t,otherErrors:a}=ne(e);if(t)return;if(a)return void ee(a);se(o.Ru.get("web-player.magpie.playlist.error-message"))}},[A,F,oe,t,a,se,ne]),ce=(0,r.useCallback)(()=>{ee(null),q(!1)},[]),de=function(){const{isCollapsed:e}=(0,as.Q)(),{toggleCollapseYLX:t}=(0,ts.u)(),a=(0,Zr._Y)();return(0,r.useCallback)(()=>{e||t(),a(es.$S.PANEL_CLOSE_CLICK)},[e,t,a])}(),ue=(0,r.useCallback)(()=>{de(),q(!0),setTimeout(()=>{W.current?W.current.scrollIntoView({behavior:"smooth",block:"start"}):K.current&&K.current.scrollIntoView({behavior:"smooth",block:"start"})},0)},[de]),me=h(k.refresh_cadence,k.weekly_refresh_day),[pe]=e.metadata.images,ge=pe?.url,ye=(0,ss.H)(ge,i.wdA);return(0,d.q)(e.metadata.dynamicColors),(0,r.useEffect)(()=>{"generating"===A&&(q(!1),window.scrollTo({top:0,behavior:"smooth"}))},[A]),(0,Y.jsxs)(r.Suspense,{fallback:null,children:[(0,Y.jsx)(c.Q,{children:(0,is.Q2)({playlistName:s,userName:y.displayName??void 0,isSpotifyOwned:!1})}),(0,Y.jsx)(Xa,{metadata:e.metadata,togglePlay:S,isPlaying:E,isPromptedBySelf:F,generationStatus:A,creator:P,backgroundColor:ye}),(0,Y.jsx)(l.K,{backgroundColor:ye}),(0,Y.jsxs)("div",{className:n()(ba.content,{[ba.entityFullWidth]:X,[ba.promptComposerExpanded]:J&&!X},"contentSpacing"),ref:G,children:[(0,Y.jsxs)("div",{className:ba.playlistHeader,children:[(0,Y.jsx)(V,{playlist:e,isPlaying:E,isActive:v,togglePlay:S,generationStatus:A,promptComposerExpanded:J,children:!U&&(0,Y.jsxs)(Y.Fragment,{children:[X&&_&&(0,Y.jsx)(Z,{onGenerate:()=>le(R,void 0,!1),textVariant:"bodySmall"}),(0,Y.jsx)(hr,{promptSummary:p,generationStatus:A,onGeneratedPromptSummaryClick:M}),(0,Y.jsx)(cr,{playlist:e,generationStatus:A,refreshMetadata:me,showInlineProgressMessage:L,hasTracklist:j>0})]})}),(0,Y.jsx)("div",{className:ba.toolbarContainer,children:U?(0,Y.jsx)("div",{ref:K,children:(0,Y.jsx)(Tr,{promptSummary:p,prompt:R})}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{ref:W,id:Qr.Y,className:ba.toolbar,children:(0,Y.jsx)(fr,{showReasoning:x,setShowReasoning:C,isEntityFullWidth:X,isExpanded:J,setIsExpanded:q,isPromptedBySelf:F,generationStatus:A,metadata:e.metadata,className:ba.toolbarInner})}),x&&(0,Y.jsx)(Dr,{formatListAttributes:k,generationStatus:A,showInlineProgressMessage:L})]})})]}),(0,Y.jsx)("div",{className:ba.playlistContent,children:(0,Y.jsx)(Da,{showRecsplantion:x,usePlayContextItem:f,tracklistRef:H,tracklistDomRef:$,generationStatus:A},a)}),(0,Y.jsx)(Pr.s,{initialPrompt:R,children:X?(0,Y.jsx)(qr,{isOpen:J,onClose:ce,isPromptedBySelf:F,prompt:R,playlistPermissions:e.metadata.permissions??void 0,playlistName:s,playlistUri:a,creator:P,generationStatus:A,onSubmit:le,errors:Q,existingRefreshMetadata:me,showSuggestions:te,onToggleSuggestions:re}):(0,Y.jsx)("div",{className:n()(ba.promptComposerSlot,{[ba.expanded]:J}),children:(0,Y.jsx)("div",{className:ba.promptComposerSlotContent,children:J?(0,Y.jsx)(Yr,{onClose:ce,showSuggestions:te,onToggleSuggestions:re,isPromptedBySelf:F,playlistPermissions:e.metadata.permissions??void 0,playlistName:s,playlistUri:a,generationStatus:A,creator:P,onSubmit:le,errors:Q,existingRefreshMetadata:me}):(0,Y.jsx)(ie,{prompt:R,isPromptedBySelf:F,generationStatus:A,onGenerate:()=>le(R,void 0,!1),onExpand:ue,showGeneratePromptCard:_,shouldUseCustomizePromptLabel:U})})})})]})]})}},99206:(e,t,a)=>{a.d(t,{MagpieCapModal:()=>y});var r=a(78717),s=a(73136),n=a(35394),i=a(54091),o=a(37528),l=a(58611),c=a(30758);const d="b5ibaBdPniFgnjp8KuTx",u="RSAiaLVuNl7v1IFOg05l",m="sZlbV5mHc2gHYyvSyd6U",p="lgA2BHZMslnDzQygGC47";var g=a(86070);const y=()=>{const{isOpen:e,rateLimitExceededErrorDetails:t,closeCapModal:a}=(0,l.r)(),y=(x=t?.resetTimestamp,(0,c.useMemo)(()=>{if(!x)return"soon";const e=new Date,t=x.getTime()-e.getTime();if(t<=0)return"soon";const a=Math.floor(t/36e5),r=Math.floor(a/24);let s;return s=r>=1?1===r?"1 day":`${r} days`:a>=1?1===a?"1 hour":`${a} hours`:"1 hour",i.Ru.get("web-player.magpie.rate-limit-reset-time",s)},[x]));var x;return(0,g.jsx)(o.A,{animated:!0,onRequestClose:a,isOpen:e,overlayClassName:d,children:(0,g.jsxs)("div",{className:u,children:[(0,g.jsxs)("div",{className:m,children:[(0,g.jsx)(r.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:i.Ru.get("web-player.magpie.cap-modal.title")}),(0,g.jsx)(r.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:i.Ru.get("web-player.magpie.cap-modal.description",y)})]}),(0,g.jsxs)("div",{className:p,children:[(0,g.jsx)(s.$,{colorSet:"invertedLight",onClick:a,children:i.Ru.get("web-player.magpie.cap-modal.confirm-button")}),(0,g.jsx)(n.H,{onClick:a,children:i.Ru.get("web-player.magpie.cap-modal.dismiss-button")})]})]})})}},99401:(e,t,a)=>{a.d(t,{PromptComposerModal:()=>w});var r=a(30758),s=a(97500),n=a.n(s),i=a(27360),o=a(54091),l=a(37528),c=a(89652),d=a(87517),u=a(20631),m=a(14590),p=a(88089),g=a(86070);const y=({isOpen:e,onClose:t,onConfirm:a})=>e?(0,g.jsx)(p.T,{"aria-label":o.Ru.get("web-player.magpie.unsaved-confirmation-dialog.aria-label"),titleText:o.Ru.get("web-player.magpie.unsaved-confirmation-dialog.title"),descriptionText:o.Ru.get("web-player.magpie.unsaved-confirmation-dialog.description"),confirmText:o.Ru.get("web-player.magpie.unsaved-confirmation-dialog.confirm-button"),cancelText:o.Ru.get("web-player.magpie.unsaved-confirmation-dialog.cancel-button"),isOpen:e,onClose:t,onConfirm:a,confirmButtonColorSet:"negative"}):null;var x=a(75593),h=a(15228),C=a(6944),b=a(21081),j=a(8017),E=a(24189),v=a(58248);const S="n0d3GjwIIxGZ52ZgfmBj",f="SzWzwSUylLAjBTCV7rtx",k="_5GuHHf3X6JHQ3zPNM_s",A="MtfGejzvtoA3dsFluqGH",R="gp2wmpXD0yX_ZTDl198r",I="ljDA2B3biOtwtDXcFBIS",w=()=>{const e=(0,C.H)(),t=(0,v.g)(),{isOpen:a,modalData:s,updatePromptModalData:p,closePromptComposerModal:w,isUnsavedConfirmationDialogOpen:D,openUnsavedConfirmationDialog:N,closeUnsavedConfirmationDialog:T}=(0,b.$)(),[P,L]=(0,r.useState)(),[U,M]=(0,r.useState)(!0),[O,B]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a&&L(s.errors??null)},[a,s.errors]);const _=(0,r.useId)(),F=(0,j.B)(),{enqueueSnackbar:H}=(0,E.d)(),{handleError:Y}=(0,h.c)(),$=(0,r.useCallback)(()=>{O?N():w()},[O,w,N]),V=(0,r.useCallback)(async(a,r,n,l)=>{L(null);try{const{playlistUri:n}=await e.writePrompt(a,r,l,s.clonedFromPlaylistUri),o=(0,i.Lce)(n).toURLPath(!0);t(o),w()}catch(e){const{isRateLimitError:t,otherErrors:r}=Y(e);if(t)return;if(r)return L(r),void p({prompt:a});H(o.Ru.get("web-player.magpie.prompt-composer-modal.error-message"))}},[w,H,Y,e,t,p,s.clonedFromPlaylistUri]),W=(0,r.useCallback)(()=>{M(e=>!e)},[M]);return a?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.A,{animated:!0,isOpen:!0,onRequestClose:$,contentLabel:o.Ru.get("web-player.magpie.prompt-composer-modal.content-label"),overlayClassName:S,shouldCloseOnOverlayClick:!0,children:[(0,g.jsxs)("div",{className:f,children:[(0,g.jsx)(d.c,{playlistName:s.playlistName,creator:s.creator,onClose:$}),(0,g.jsx)("div",{className:n()(k,{[A]:U}),children:(0,g.jsxs)(u.s,{initialPrompt:s.prompt,children:[(0,g.jsx)(c.f,{errors:P,prompt:s.prompt,isPromptedBySelf:s.isPromptedBySelf,generationStatus:s.generationStatus,onSubmit:V,onHasPromptChanged:B,buttonsSlot:(0,g.jsx)(x.Q,{active:U,onClick:W,panelId:_})}),U&&(0,g.jsx)("div",{className:R,children:(0,g.jsx)(m.y,{panelId:_})})]})})]}),(0,g.jsx)("div",{className:I,ref:F})]}),(0,g.jsx)(y,{isOpen:D,onClose:T,onConfirm:w})]}):null}}}]);
//# sourceMappingURL=dwp-magpie.js.map