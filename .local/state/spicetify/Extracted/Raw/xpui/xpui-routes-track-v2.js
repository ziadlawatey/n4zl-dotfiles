"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{340:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Vr});var r=a(30758),i=a(97500),s=a.n(i),n=a(60749),o=a(85387),l=a(78717),c=a(81458),u=a(35394),d=a(31143);const m="music",p="6.0.0",h="default",y="17.0.0";function g(e){return new x(e)}class x{constructor(e){this.specType=d.a.ROOT,this._path=[{name:"desktop-track",...e.data}]}headerFactory(){return new x.HeaderEventFactory({path:this._path})}actionBarFactory(){return new x.ActionBarEventFactory({path:this._path})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}}!function(e){e.HeaderEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"header"})}artistLinkFactory(t){return new e.HeaderEventFactory.ArtistLinkEventFactory({path:this._path,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}}}(x||(x={})),function(e){e.ActionBarEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"action_bar"})}playButtonFactory(){return new e.ActionBarEventFactory.PlayButtonEventFactory({path:this._path})}saveButtonFactory(){return new e.ActionBarEventFactory.SaveButtonEventFactory({path:this._path})}contextButtonFactory(){return new e.ActionBarEventFactory.ContextButtonEventFactory({path:this._path})}downloadButtonFactory(){return new e.ActionBarEventFactory.DownloadButtonEventFactory({path:this._path})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}}}(x||(x={})),function(e){!function(e){e.ArtistLinkEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({...t,name:"artist_link"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(e.HeaderEventFactory||(e.HeaderEventFactory={}))}(x||(x={})),function(e){!function(e){e.PlayButtonEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"play_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitPlay({itemToBePlayed:e}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[e.toString()],actionName:"play",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}hitResume({itemToBeResumed:e}){return{actionParameterNames:["item_to_be_resumed"],actionParameterValues:[e.toString()],actionName:"resume",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}hitPause({itemToBePaused:e}){return{actionParameterNames:["item_to_be_paused"],actionParameterValues:[e.toString()],actionName:"pause",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(x||(x={})),function(e){!function(e){e.SaveButtonEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"save_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitLike({itemToBeLiked:e}){return{actionParameterNames:["item_to_be_liked"],actionParameterValues:[e.toString()],actionName:"like",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}hitRemoveLike({itemNoLongerLiked:e}){return{actionParameterNames:["item_no_longer_liked"],actionParameterValues:[e.toString()],actionName:"remove_like",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(x||(x={})),function(e){!function(e){e.ContextButtonEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"context_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(x||(x={})),function(e){!function(e){e.DownloadButtonEventFactory=class{constructor({path:e,data:t}){this._path=e.concat({name:"download_button"})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[h,...[...Array(this._path.length-1)].map(()=>"")],specVersion:[p,...[...Array(this._path.length-1)].map(()=>"")]}}getAbsoluteLocation(){return{locations:[this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:m,generatorVersion:y,interactionType:"hit",specificationMode:h,specificationVersion:p,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation()}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(x||(x={}));var v=a(27360),b=a(54091),L=a(82898),j=a(21017),k=a(29947),f=a(12552),A=a(68131),C=a(86487),_=a(17422),N=a(29934),R=a(85778),I=a(14079),P=a(71809),w=a(98825),E=a(31006),S=a(54839),T=a(57016),B=a(92960),V=a(41350),F=a(67012),U=a(75072),O=a(26843);const M=Spicetify.GraphQL.Definitions["internalLinkRecommenderTrack"]=new U.l("internalLinkRecommenderTrack","query","c77098ee9d6ee8ad3eb844938722db60570d040b49f41f5ec6e7be9160a7c86b",null);var D=a(50324),G=a(35313),$=a(70675),q=a(7255),J=a(32467),z=a(31289),W=a(74571),Y=a(40299),H=a(3591),K=a(66079),Q=a(78007),X=a(94315),Z=a(18949),ee=a(90809),te=a(29112),ae=a(15223),re=a(15510),ie=a(91816),se=a(67793),ne=a(94101),oe=a(54635),le=a(96882),ce=a(24238);const ue="T5vvc_kifMxkybDQV9Hi",de="SuvK72g3c4vp4UvJntfI",me="wNvLD2rkUKfjZYESYCX2",pe="AIM04l5M46GS4RGEaw_Y";var he=a(86070);const ye=r.memo(function({uri:e,name:t,imgUrl:a,artists:r,isExplicit:i,index:s,albumUri:n,contextUri:o,isPlayable:l,isMOGEFRestricted:c,totalMilliseconds:u,playcount:d,usePlayContextItem:m}){const{isActive:p,isPlaying:h,triggerPlay:y,togglePlay:g}=m({uri:e,index:s}),x=(0,le.T)(e),{isArtistBanned:v,unbanArtist:k}=(0,ae.D)(r[0]?.uri),f=(0,re.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,isArtistBanned:v}),A=r.map(e=>e.name).join(b.Ru.getSeparator()),{badges:C,hasBadges:_}=(0,ce.b)({isMOGEFRestricted:c,downloadAvailability:x,isExplicit:i}),N=r.map(e=>e.name).join(b.Ru.getSeparator()),{isWeb:R}=(0,ie.V)();return(0,he.jsx)(L.h,{menu:(0,he.jsx)(j.P,{uri:e,albumUri:n,artists:r,contextUri:o}),children:(0,he.jsxs)(ee.w,{uri:e,contextUri:o,isPlayable:f,isArtistBanned:v,handleArtistBanUndoClick:k,onTriggerPlay:(e,t)=>{y({loggingParams:t})},isActive:p,index:s,ariaRowIndex:s,dragMetadata:{name:t,createdBy:A},isExplicit:i,children:[(0,he.jsxs)(K.U,{ariaColIndex:0,children:[(0,he.jsx)(J.u,{uri:e,src:a,onClick:(e,t)=>{g({loggingParams:t})},isLocked:!1,isPlaying:h,isActive:p,playAriaLabel:b.Ru.get("tracklist.a11y.play",t,A)}),(0,he.jsxs)(z.l,{children:[(0,he.jsx)(D.R,{uri:e,enabled:R,className:me,children:(0,he.jsx)(Z.p,{titleText:t,children:t})}),_&&(0,he.jsxs)($.P,{children:[C.download&&(0,he.jsx)(ne._,{}),C.explicit&&(0,he.jsx)(se.U,{}),C.nineteen&&(0,he.jsx)(oe.q,{className:pe,size:16})]}),(0,he.jsx)(X.p,{children:(0,he.jsx)(G.l,{artists:r})})]})]}),(0,he.jsx)(Q.o,{ariaColIndex:1,children:(0,he.jsx)(Y.Y,{playcount:d})}),(0,he.jsxs)(H.l,{ariaColIndex:2,children:[(0,he.jsx)(te.d,{uri:e}),(0,he.jsx)(q.P,{duration:u}),(0,he.jsx)(W.Y,{menu:(0,he.jsx)(j.P,{uri:e,albumUri:n,contextUri:o,artists:r}),label:b.Ru.get("more.label.track",t,N)})]})]})})},(e,t)=>e.uri===t.uri&&e.index===t.index);var ge=a(87019),xe=a(23895),ve=a(16666),be=a(49060),Le=a(95130),je=a(72045),ke=a(89307);const fe=r.memo(function({subtitle:e,uri:t}){const{data:a}=(i={uri:t,limit:5},(0,O.I)(M,i,s));var i,s;const n=function(e){return(e||[]).filter(e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Track"===e.__typename;var t})(e.data)).map(e=>e.data)}(a?.seoRecommendedTrack.items),o=(0,r.useMemo)(()=>n?.slice(0,Math.min(n.length,5)),[n]),u=(0,r.useCallback)(e=>({uri:"uri"in e?e.uri:""}),[]),d=(0,r.useMemo)(()=>[ve.$C.TITLE_AND_ARTIST,ve.$C.ALBUM,ve.$C.DURATION],[]),{usePlayContextItem:m}=(0,be.P)({uri:"spotify:internal:recs:track-ilr",pages:[{items:n?.map(e=>({uri:e.uri,uid:null,type:ke.c.TRACK,provider:null}))}]},{featureIdentifier:"ilr"}),p=(0,r.useCallback)((e,a)=>(0,he.jsx)(ye,{index:a,contextUri:t,uri:e.uri,name:e.name,totalMilliseconds:e.duration.totalMilliseconds,imgUrl:e.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:e.playability.playable,artists:e.artists.items.map(e=>({uri:e.uri,id:e.id,name:e.profile.name})),albumUri:e?.albumOfTrack?.uri||"",isExplicit:e.contentRating?.label===je.x7.Explicit,isMOGEFRestricted:e.contentRating?.label===je.x7.NineteenPlus,playcount:parseInt(e.playcount||"0",10),usePlayContextItem:m},`${a}-${e.uri}`),[t,m]);return n?.length?(0,he.jsxs)("div",{className:ue,children:[(0,he.jsxs)("div",{className:de,children:[(0,he.jsx)(l.E,{variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("playlist.extender.recommended.title")}),(0,he.jsx)(l.E,{variant:"bodySmall",paddingBottom:c.CD,children:e})]}),(0,he.jsx)(xe.S4,{ariaLabel:b.Ru.get("playlist.extender.recommended.title"),nrTracks:o.length,rowPlaceholder:ge.qq,tracks:o,renderRow:p,resolveItem:u,columns:d},"internal-link-recommender-track-list")]}):null}),Ae=e=>{const{entityType:t}=e;return(0,he.jsx)(F.s,{onError:()=>{(0,Le.fE)({metric_type:V.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:t}})},children:(0,he.jsx)(fe,{...e})})};var Ce=a(76826),_e=a(80128),Ne=a(76056),Re=a(10472),Ie=a(10812),Pe=a(49415);const we=({albums:e,artistName:t,artistId:a,artistUri:r,className:i})=>e?(0,he.jsx)(Ie.$,{total:e.totalCount,title:b.Ru.get("rich-page.popular-albums-by-artist",{artist:t}),seeAllUri:`${(0,Pe.Dh)(a)}:discography:${je._m.Album.toLowerCase()}`,seeAllLabel:b.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,Pe.Ey)(e.items).map((e,t)=>(0,he.jsx)(Re.K,{album:e,index:t,artistURI:r},e.uri))}):null;var Ee=a(62623);const Se=({artistId:e,className:t,fansAlsoLike:a,title:r})=>(0,he.jsx)(Ie.$,{total:a.length,title:r??b.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,Pe.Dh)(e)}:related`,className:t,children:a.map((e,t)=>(0,he.jsx)(Ee.a,{index:t,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]},e.uri))});var Te=a(94190);const Be="jagFIEzDaJsxEDhBnmIQ",Ve=({artistName:e,artistUri:t,headerClassName:a,rowClassName:i,topTracks:s,topTracksTransformer:n,uri:o})=>{const c=(0,r.useMemo)(()=>s?.items.map(e=>n(e,o)),[s?.items,n,o]);return c&&c.length>0?(0,he.jsxs)("div",{className:i,children:[(0,he.jsxs)("div",{children:[(0,he.jsx)(l.E,{variant:"bodySmall",className:Be,children:b.Ru.get("rich-page.popular-tracks")}),(0,he.jsx)(l.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:a,children:e})]}),(0,he.jsx)(Te.z,{uri:t,nrTracks:c.length,initialTracks:c})]}):null};var Fe=a(62887);const Ue=({artistName:e,artistId:t,artistUri:a,className:i,releases:s,artistImages:n})=>{const o=(0,r.useMemo)(()=>n?{title:e,pretitle:b.Ru.get("artist-page.popular"),media:(0,Fe.h)(n,{desiredSize:48})||""}:null,[n,e]);return s?(0,he.jsx)(Ie.$,{total:10,title:b.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Pe.Dh)(t)}:discography:${je._m.Album.toLowerCase()}`,seeAllLabel:b.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,...o,children:s.items.map((e,t)=>(0,he.jsx)(Re.K,{album:e,index:t,artistURI:a},e.uri))}):null},Oe=({artistId:e,artistName:t,artistUri:a,className:r,singles:i})=>i?(0,he.jsx)(Ie.$,{total:i.totalCount,title:b.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:t}),seeAllUri:`${(0,Pe.Dh)(e)}:discography:${je._m.Single.toLowerCase()}`,seeAllLabel:b.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,children:(0,Pe.Ey)(i.items).map((e,t)=>(0,he.jsx)(Re.K,{album:e,index:t,artistURI:a},e.uri))}):null;var Me=a(69869),De=a(19473),Ge=a(14745),$e=a(8813),qe=a(68514),Je=a(9537);const ze="Wq4S4LJBK6GF2kXGmUK8",We="ia2p_dVgy5IK_FwP0j9W",Ye="iA_Jk9hUDl8q2QfiCWDt",He="ZG0FZc_vzhUPC7hXUJG5",Ke="wi9DtksePY9pC1LJJcMq",Qe="vKr4QONeEkCK3EMDmq6J",Xe="E1GQVxAOgu31mgjpGZ6Q",Ze="VRsJfFRyoTJN0JuNn7FR",et="xP8xR5THDvd9BpVOQVA7",tt="P3fzNlpV2X3Slpfte7eM",at="CEE9_hza6qi1C0iiJhxt",rt="E9j7V9LVbbcBhu66LhLM",it="f5RoO3jdtkqDGBSTOY3b",st="YXIeM7d483PGESJriHBZ",nt="TCSjlEo6ZBQxGk5QLmbr",ot="x5XbDb3ciLJk3X67PTnP",lt="bXCtUdR3okVALGvKA5sB",ct=({richTrack:e})=>{const{search:t}=(0,o.zy)(),a=(0,r.useCallback)(()=>new URLSearchParams(t.slice(1)).get("highlight")||"",[t])(),{tracklistRef:i}=(0,Je.h)(),s=e.albumOfTrack,{playUri:n,playOptions:l}=(0,qe.J)(s?.uri||""),{usePlayContextItem:c}=(0,be.P)({uri:n},{featureIdentifier:"album"},l),u=(0,r.useMemo)(()=>({items:[],totalCount:0}),[]);return s?(0,he.jsx)("div",{ref:i,className:Ze,children:(0,he.jsx)($e.F,{albumName:s.name,nrTracks:s.tracks.totalCount,albumUri:s.uri,highlightUri:a,discs:u,usePlayContextItem:c,hasHeaderRow:!1})}):null};let ut=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});var dt=a(13059);const mt=(e,t)=>{switch(t.type){case"SEO_LYRICS_LOADING":return{...e,[t.uri]:{status:ut.LOADING}};case"SEO_LYRICS_LOADED":return{...e,[t.uri]:{status:ut.LOADED,data:t.response}};case"SEO_LYRICS_ERROR":return{...e,[t.uri]:{status:ut.UNAVAILABLE}};default:return(0,dt.d)(t,`Unhandled lyrics action with type: ${t.type}`)}};var pt=a(78969),ht=a(38895);var yt=a(75238);const gt=async({api:e,uri:t,isPlayable:a,clientId:r=""})=>{if(!a||!t||!r)return{hasLyrics:!1};try{const a=await(async(e,t,a)=>(await e.build().withHost(ht.Hj).withPath(`/seo/track/${t}`).withEndpointIdentifier("/track/{trackId}").withHeaders([{key:"x-spotify-seolyrics-clientid",value:a}]).send()).body)(e||pt.n.getInstance(),t.id,r);return{hasLyrics:!0,lyrics:a.lyrics.lines,provider:a.lyrics.provider,providerDisplayName:a.lyrics.providerDisplayName,providerLyricsId:a.lyrics.providerLyricsId,isRtlLanguage:a.lyrics.isRtlLanguage}}catch(e){if(e instanceof yt.O&&404===e.status)return{hasLyrics:!1};throw e}},xt={status:ut.LOADING},vt={status:ut.UNAVAILABLE},bt=r.createContext(void 0),Lt=({children:e,initialState:t={}})=>{const a=r.useReducer(mt,t);return(0,he.jsx)(bt.Provider,{value:a,children:e})},jt=({uri:e,isNotPermittedToFetchLyrics:t,isPlayable:a})=>{const i=r.useContext(bt);if(void 0===i)throw new Error("useSeoLyrics must be used within a SeoLyricsProvider");const[s,n]=i,o=e?s[e]:null;return(0,r.useEffect)(()=>{t||!o&&e&&(n({type:"SEO_LYRICS_LOADING",uri:e}),gt({uri:(0,v.o_h)(e)??void 0,isPlayable:a,clientId:"65b708073fc0480ea92a077233ca87bd"}).then(t=>{n({type:"SEO_LYRICS_LOADED",uri:e,response:t})}).catch(()=>{n({type:"SEO_LYRICS_ERROR",uri:e})}))},[n,t,a,o,e]),e&&(0,v.U_m)(e)&&!t&&a?o||xt:vt};var kt=a(31656);const ft="_0vrC8jlp1FmP6H9SYrT",At="YJAD4GtORmGKWLP2MfFO",Ct=({padded:e,providerDisplayName:t})=>t?(0,he.jsx)(kt.Z,{as:"p",dir:"auto",variant:"finale",className:`${ft} ${e?At:""}`,children:b.Ru.get("web-player.lyrics.providedBy",t)}):null,_t=({uri:e,isPlayable:t})=>{const{data:a}=jt({uri:e,isPlayable:t});return a?.hasLyrics?(0,he.jsx)(Ct,{providerDisplayName:a.providerDisplayName}):null};var Nt=a(47556),Rt=a(40948),It=a(17686),Pt=a(86825),wt=a(3437),Et=a(22141),St=a(64300),Tt=a(31407),Bt=a(42264),Vt=a(13992),Ft=a(81694),Ut=a(67885),Ot=a(39233),Mt=a(43114),Dt=a(91645);const Gt=r.memo(function({uri:e,togglePlay:t,isPlaying:a,isActive:i,spec:s,logger:n,backgroundColor:o,name:l,isPlayable:c,albumUri:u,artists:d}){const m=(0,Ft.n)(),[p,h]=(0,Mt.A)(e),y=(0,Bt.d$)(),{spec:g,logger:x}=(0,Dt.r)(Nt.e,{data:{uri:e}});(0,r.useEffect)(()=>{y&&x.logImpression(g.impression())},[y,x,g]);const v=(0,r.useCallback)(async()=>{const t=s.saveButtonFactory();n.logInteraction(p?t.hitRemoveLike({itemNoLongerLiked:e}):t.hitLike({itemToBeLiked:e})),p&&y&&x.logInteraction(g.hitAddToPlaylist({itemToBeAdded:e,playlist:Ot.BP}));try{await h(!p)}catch{}},[e,p,s,n,h,y,x,g]),L=(0,r.useCallback)(()=>{const r=(0,Ut.$I)({isPlaying:a,isActive:i,spec:s.playButtonFactory(),logger:n,uri:e});t({loggingParams:r})},[i,a,n,s,t,e]),k=(0,r.useCallback)(()=>{n.logInteraction(s.contextButtonFactory().hitUiReveal())},[n,s]),f=(0,Vt.j)();return(0,he.jsx)(Rt.E,{backgroundColor:o,children:(0,he.jsxs)(It.S,{children:[(0,he.jsx)(Tt.e,{children:(0,he.jsx)(Ne.D,{onClick:L,isPlaying:a,disabled:!c,size:f})}),(0,he.jsx)(Tt.e,{children:(0,he.jsx)(Pt.M,{isAdded:p,onClick:v,disabled:!m,size:f,condensed:!0})}),(0,he.jsx)(wt.f,{uri:e,isFollowing:p,onFollow:v,size:f,condensed:!0,onClick:(t,a)=>(0,Ut.Qv)(a,s.downloadButtonFactory(),n,e)}),(0,he.jsx)(St.b,{menu:(0,he.jsx)(j.P,{uri:e,albumUri:u,artists:d}),onShow:k,children:(0,he.jsx)(Et.e,{label:b.Ru.get("more.label.context",l),size:f})})]})})});let $t=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const qt=(e,t)=>{switch(t.type){case"LYRICS_LOADING":return{...e,[t.uri]:{status:$t.LOADING}};case"LYRICS_LOADED":return{...e,[t.uri]:{status:$t.LOADED,data:t.response}};case"LYRICS_ERROR":return{...e,[t.uri]:{status:$t.UNAVAILABLE}};default:return(0,dt.d)(t,`Unhandled lyrics action with type: ${t.type}`)}},Jt=async({trackUri:e,api:t,imageForLyricsRequest:a,isPlayable:r})=>{if(!r)return{hasLyrics:!1};const i=(0,v.o_h)(e);try{const e=await(async(e,t,a)=>(await e.build().withHost(ht.Hj).withPath(`/track/${encodeURIComponent(t)}/image/${encodeURIComponent(a)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(t||pt.n.getInstance(),i.id,a||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof yt.O&&404===e.status)return{hasLyrics:!1};throw e}},zt={status:$t.LOADING},Wt={status:$t.UNAVAILABLE},Yt=r.createContext(void 0),Ht=({children:e,initialState:t={}})=>{const a=r.useReducer(qt,t);return(0,he.jsx)(Yt.Provider,{value:a,children:e})},Kt=({uri:e,isNotPermittedToFetchLyrics:t,imageForLyricsRequest:a,isPlayable:i})=>{const s=r.useContext(Yt);if(void 0===s)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[n,o]=s,l=e?n[e]:null;return(0,r.useEffect)(()=>{t||!l&&e&&(o({type:"LYRICS_LOADING",uri:e}),Jt({trackUri:e,imageForLyricsRequest:a,isPlayable:i}).then(t=>{o({type:"LYRICS_LOADED",uri:e,response:t})}).catch(()=>{o({type:"LYRICS_ERROR",uri:e})}))},[o,a,t,i,l,e]),e&&(0,v.U_m)(e)&&!t&&i?l||zt:Wt},Qt=({uri:e,imageForLyricsRequest:t,isPlayable:a})=>{const{data:r}=Kt({uri:e,imageForLyricsRequest:t,isPlayable:a});return r?.hasLyrics?(0,he.jsx)(Ct,{providerDisplayName:r.providerDisplayName}):null};var Xt=a(62411),Zt=a(73136);const ea="IWLeSfnfoeag6SJXKPAg",ta="JO23b_stMzfnYHxXohKS",aa="KQ0F3e61qy7aGxs_cT3W",ra=({buttonText:e,className:t,onSecondaryButtonClick:a,onPrimaryButtonClick:r,secondaryButtonText:i,text:n})=>(0,he.jsxs)("div",{className:s()(ea,t),"data-testid":"static-activation-trigger",children:[(0,he.jsx)(l.E,{className:ta,variant:"bodyMediumBold",semanticColor:"textBase",children:n}),(0,he.jsxs)("div",{className:aa,children:[(0,he.jsx)(u.H,{onClick:a,semanticColor:"textBase",children:i}),(0,he.jsx)(Zt.$,{onClick:r,colorSet:"invertedLight",children:e})]})]});var ia=a(59867),sa=a(50247),na=a(25494),oa=a(41156),la=a(97159),ca=a(51629),ua=a(87159),da=a(8476);const ma=e=>{const t=(0,ia.vh)(),a=(0,Xt.d4)(ca.F6),r=(0,Xt.d4)(la.JJ),i=(0,Xt.d4)(ca.oo),s=(0,oa.V)();return()=>{(0,Le.fE)({metric_type:V.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const n={category:"lyrics_render_error",label:"dwp",os:(0,da.f)(),context:JSON.stringify({uri:e,product:i}),country:a?r:"",sp_t:(0,ua.v8)("sp_t")},o=s?na.r:sa._;t.send(o(n))}};a(50616);var pa=a(39529);const ha=()=>{const{isWeb:e}=(0,ie.V)(),{trackId:t=""}=(0,o.g)(),a=(0,pa.sp)(document.referrer),r=atob((0,ua.v8)("x-unauth-referred")||"")===t,i=(0,Xt.d4)(la.q),s=(0,Xt.d4)(la.td),n=(0,pa.w2)(window.navigator.userAgent);return!s&&!i&&(!!e&&(a&&r||n))};var ya=a(8335);const ga="erc19I_I0mbxunRRJq3B",xa="QbGnjmk3BCET3b43_lpr",va="NqaDCx7q6vMeN6tO4Kpf",ba="F4QSdzgTciRP9r6sTPtA";var La=a(9203),ja=a(31634);const ka=({words:e,onObserve:t,lyricsInView:a,...i})=>{const{ref:n,inView:o}=(0,ya.Wx)({threshold:1}),c=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{a||(c.current=!1)},[a]),(0,r.useEffect)(()=>{c.current||o&&(t({text:e,outOfView:!1}),c.current=!0)},[o,t,e]),(0,he.jsx)(l.E,{ref:n,as:"p",dir:"auto",variant:"bodyMedium",className:s()(va,{[ba]:!e}),"data-testid":i["data-testid"],children:e})},fa="hBSmJ5E5v9un2pu4hiLm",Aa="j4EKzRYp_a3qHbeA_r8L",Ca="hI8JqEQi64C8ujbfOOnO",_a="oBkKw1CdaA_JsBfA0bG1",Na=420,Ra=280,Ia="expandable-lyrics-container";const Pa=({lyrics:e,lyricsInView:t,onObserve:a,previewCount:i})=>{const[n,o]=(0,r.useState)(!1),{visibleLyrics:c,collapsibleLyrics:u}=function(e,t){let a=0,r=-1;for(const[i,s]of e.entries())if(a+=s.words.length,a>t){r=i;break}if(r>-1)return{visibleLyrics:e.slice(0,r),collapsibleLyrics:e.slice(r)};return{visibleLyrics:e,collapsibleLyrics:[]}}(e,i),d=u.length>0,m=n?b.Ru.get("show_less"):`…${b.Ru.get("show_more")}`;return(0,he.jsxs)(he.Fragment,{children:[c.map(({words:e},r)=>(0,he.jsx)(ka,{onObserve:a,words:e,lyricsInView:t,"data-testid":"lyrics-line-always-visible"},`lyrics-seo-line-${r}`)),(0,he.jsx)("span",{"aria-hidden":!n,className:s()(Ca,{[_a]:n}),children:u.map(({words:e},r)=>(0,he.jsx)(ka,{onObserve:n?a:()=>{},words:e,lyricsInView:n&&t},`lyrics-seo-line-${r}`))}),d&&(0,he.jsx)("button",{className:fa,onClick:()=>{o(!n)},"aria-controls":Ia,"aria-owns":Ia,"aria-label":m,children:(0,he.jsx)(l.E,{variant:"bodyMediumBold",className:Aa,children:m})})]})},wa=({data:e,eventSender:t,playbackId:a,previewCount:i,uri:s})=>{const{lyrics:n=[],provider:o,providerLyricsId:c,syncType:u}=e,{ref:d,inView:m}=(0,ya.Wx)({threshold:0}),p=function(e){const{trackUri:t,provider:a,providerLyricsId:i,syncType:s,eventSender:n,playbackId:o}=e,l=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(0),[y,g]=(0,r.useState)(!1),x=(0,r.useMemo)(()=>(0,La.W)({lyrics_format:"track-page",track_uri:t,provider:a,provider_lyrics_id:i,sync_type:s,playback_id:o}),[t,a,i,s,o]),v=(0,r.useMemo)(()=>(0,ja.X)({track_uri:t,playback_id:o,provider:a,provider_lyrics_id:i,sync_type:s,lyrics_format:"track-page"}),[t,a,i,s,o]);return(0,r.useEffect)(()=>{m(!1),u(!1),h(0),g(!1),l.current=null},[t]),(0,r.useEffect)(()=>{o&&(c&&u(!1),d&&m(!1))},[o]),(0,r.useEffect)(()=>{c||(!d&&p>0&&(n?.send(v),m(!0)),p>=140&&y&&(n?.send(x),u(!0)))},[p,d,v,c,x,n,y]),(0,r.useCallback)(e=>{const{text:t,outOfView:a}=e;t&&t.length>0&&(h(e=>e+t.length),c||null!==l.current||(l.current=setTimeout(()=>{g(!0)},1500))),a&&(l.current&&clearTimeout(l.current),l.current=null,h(0))},[h,c])}({trackUri:s,provider:o,providerLyricsId:c,syncType:u,eventSender:t,playbackId:a});return(0,r.useEffect)(()=>{m||p({outOfView:!0})},[m,p]),(0,he.jsxs)("div",{className:ga,ref:d,children:[(0,he.jsx)(l.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:xa,children:b.Ru.get("web-player.lyrics.title")}),(0,he.jsx)(Pa,{lyrics:n,lyricsInView:m,onObserve:p,previewCount:i})]})};function Ea(e){return{name:"SeoLyricsImpressionNonAuth",environments:["browsernonauth"],data:e}}const Sa=({data:e,eventSender:t,isBot:a,previewCount:i,trackTitle:s,trackArtists:n,uri:o})=>{const{ref:c,inView:u}=(0,ya.Wx)({threshold:0}),d=function(e){const{eventSender:t,isBot:a,provider:i,providerLyricsId:s,trackTitle:n,trackArtists:o,trackUri:l}=e,c=(0,r.useRef)(null),[u,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,y]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>Ea({user_type:a?"bot":"human",sp_t:"undefined"!=typeof document?(0,ua.v8)("sp_t"):void 0,impression_type:"minimumCharactersSeen",lyrics_provider:i,lyrics_provider_id:s,track_title:n,track_artist:o,track_uri:l}),[a,i,s,n,o,l]),b=(0,r.useMemo)(()=>Ea({user_type:a?"bot":"human",sp_t:"undefined"!=typeof document?(0,ua.v8)("sp_t"):void 0,impression_type:"snippet",lyrics_provider:i,lyrics_provider_id:s,track_title:n,track_artist:o,track_uri:l}),[a,i,s,n,o,l]);return(0,r.useEffect)(()=>{p(!1),d(!1),y(0),x(!1),c.current=null},[l]),(0,r.useEffect)(()=>{u||(!m&&h>0&&(t?.send(b),p(!0)),h>=140&&g&&(t?.send(v),d(!0)))},[h,m,b,u,v,t,g]),(0,r.useCallback)(e=>{const{text:t,outOfView:a}=e;t&&t.length>0&&(y(e=>e+t.length),u||null!==c.current||(c.current=setTimeout(()=>{x(!0)},1500))),a&&(c.current&&clearTimeout(c.current),c.current=null,y(0))},[y,u])}({eventSender:t,isBot:a,provider:e?.provider||"",providerLyricsId:e?.providerLyricsId||"",trackUri:o,trackArtists:n,trackTitle:s});return(0,r.useEffect)(()=>{u||d({outOfView:!0})},[u,d]),e?(0,he.jsxs)("div",{className:ga,ref:c,children:[(0,he.jsx)(l.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:xa,children:b.Ru.get("web-player.lyrics.title")}),(0,he.jsx)(Pa,{lyrics:e.lyrics,lyricsInView:u,onObserve:d,previewCount:i})]}):null};var Ta=a(24814);const Ba=({uri:e,isPlayable:t,trackArtists:a,trackTitle:i})=>{const[s,n]=(0,r.useState)(Na),o=ha(),{data:l}=jt({uri:e,isNotPermittedToFetchLyrics:!o,isPlayable:t}),c=(0,ia.vh)(),u=(0,r.useCallback)(()=>{window.innerWidth<=768?n(Ra):window.innerWidth>768&&s===Ra&&n(Na)},[s]);return(0,r.useEffect)(()=>{u()},[u]),(0,Ta.s)(u),l&&l?.hasLyrics?(0,he.jsx)(Sa,{data:l,eventSender:c,isBot:(0,pa.w2)(window.navigator.userAgent),previewCount:s,trackArtists:a,trackTitle:i,uri:e}):null},Va=e=>{const t=ma(e.uri);return(0,he.jsx)(F.s,{onError:t,children:(0,he.jsx)(Ba,{...e})})};var Fa=a(50253),Ua=a(15722);const Oa=({uri:e,imageForLyricsRequest:t,isPlayable:a})=>{const[i,s]=(0,r.useState)(Na),{data:n}=Kt({uri:e,imageForLyricsRequest:t,isPlayable:a}),o=(0,ia.vh)(),{isPaused:l,currentTrackUri:c,playbackId:u}=(0,Fa.o)(e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId}),Ua.a),d=!l&&c===e,m=(0,r.useCallback)(()=>{window.innerWidth<=768?s(Ra):window.innerWidth>768&&i===Ra&&s(Na)},[i]);return(0,r.useEffect)(()=>{m()},[m]),(0,Ta.s)(m),n&&n?.hasLyrics?(0,he.jsx)(wa,{data:n,uri:e,eventSender:o,playbackId:d?u:void 0,previewCount:i}):null},Ma=e=>{const t=ma(e.uri);return(0,he.jsx)(F.s,{onError:t,children:(0,he.jsx)(Oa,{...e})})},Da="nQAlG4fkXkK1pLiN1_Bx",Ga="UbnQA1I3S7r0HZSXm4BA",$a="aHIASQB6uCl71NNJpUmC",qa="qsLGYftW78wwmFY25Aqt",Ja="C_WMOcMkP8AWIiR7Ru5U",za="KBxV74vguP9CN7dm0E9A",Wa="sJR9ewFjOmkEVKcXI2H2",Ya="XkU9YiPzBhdN6Q5E_2e2",Ha="QpYKtO9luwqzXSgttGxJ",Ka="H1uI_TlDJvBrezLSXnzF",Qa="LDaKuvhu0fyYesA9qJg7";var Xa=a(34503),Za=a(65992),er=a(44544),tr=a(52262);let ar=function(e){return e.SMALL="small",e.LARGE="large",e}({});const rr=e=>{const{disabled:t,images:a,LinkComponent:r,name:i,size:n,uri:l,enableI18nAdditionalPages:c}=e,u=n===ar.SMALL,d=(0,o.Zp)(),m=(0,v.o_h)(l),p=m?.type,h=b.Ru.getLocaleForURLPath(),y=(0,er.p)({entityFeatureFlag:c,urlLocale:h,entity:p,type:"link"});return(0,he.jsxs)("div",{className:s()(Ga,{[$a]:t}),"data-testid":"track-artist-link-card",children:[(0,he.jsx)(Xa.b,{shape:Xa.u.CIRCLE,images:a,size:Za.Qe.SIZE_80,title:i,type:ke.c.ARTIST}),(0,he.jsxs)("div",{className:s()(Ja,{[za]:u}),children:[(0,he.jsx)(kt.Z,{variant:"mestoBold",className:qa,children:b.Ru.get("card.tag.artist")}),(0,he.jsx)(r,{to:l,children:(0,he.jsx)(kt.Z,{as:"div",dir:"ltr",className:Wa,variant:"balladBold",children:i})})]}),(0,he.jsx)("div",{onClick:()=>{const e=m?.toURL(`/${tr.CT}${h}/`);if(m){const t=y?e:m.toURLPath(!0);d(t)}},className:Ya})]})},ir=({size:e=ar.LARGE,disabled:t=!1,enableI18nRoutes:a,enableI18nAdditionalPages:i,...n})=>{const[o,l]=(0,r.useState)(!1),c=(0,r.useCallback)(()=>{l(!o)},[o]),d=n.artists;return(0,he.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,he.jsx)("div",{className:Da,children:d.map((r,l)=>(0,he.jsx)("div",{className:s()({[Ka]:o&&l>5,[Ha]:l>5}),children:(0,he.jsx)(rr,{name:r.name,uri:r.uri,images:r.images,size:e,LinkComponent:n.LinkComponent,disabled:t,enableI18nRoutes:a,enableI18nAdditionalPages:i},r.id)},`${r.uri}-${l}`))}),d.length>6&&(0,he.jsx)(u.H,{onClick:c,className:Qa,children:(0,he.jsx)(kt.Z,{as:"p",variant:"violaBold",children:o?b.Ru.get("show_less"):b.Ru.get("mwp.search.artists.all")})})]})};var sr=a(93876);const nr=e=>{const{albumArtists:t,columnCount:a,imageForLyricsRequest:i,isPlayable:n,uri:o,title:l}=e,c=a-2,u={"--column-count":a,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,Xt.d4)(ca.Ht),m=(0,Ft.n)(),{data:p,status:h}=Kt({uri:o,isNotPermittedToFetchLyrics:d,imageForLyricsRequest:i,isPlayable:n}),y=!!p?.hasLyrics&&h!==$t.UNAVAILABLE,g=ha(),{data:x,status:v}=jt({uri:o,isPlayable:n,isNotPermittedToFetchLyrics:!g}),L=!!x?.hasLyrics&&v!==ut.UNAVAILABLE,j=y||d&&(!g||L);return(0,he.jsxs)(r.Suspense,{fallback:null,children:[j&&(0,he.jsx)("div",{className:s()(He,{[Ke]:a>5,paywall:!0}),style:{...u},"data-testid":"lyrics-container",children:d?d&&g?(0,he.jsx)(Va,{uri:o,isPlayable:n,trackArtists:t.map(e=>e.name).join(b.Ru.getSeparator()),trackTitle:l}):(0,he.jsx)(ra,{buttonText:b.Ru.get("sign_up"),secondaryButtonText:b.Ru.get("login"),text:b.Ru.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:sr.ie,onSecondaryButtonClick:sr.PW}):(0,he.jsx)(Ma,{uri:o,imageForLyricsRequest:i,isPlayable:n})}),(0,he.jsx)("div",{className:s()(We,{[Ye]:a>5&&j}),style:{...u},children:(0,he.jsx)(ir,{artists:t,LinkComponent:Ce.N,disabled:!m,enableI18nRoutes:!0,enableI18nAdditionalPages:!1})})]})};function or({playcount:e,durationMs:t}){return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(w.q,{children:(0,Fe.f)(t)}),e&&e>0?(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(E.J,{}),(0,he.jsx)(w.q,{variant:"bodySmall","data-testid":"playcount",children:b.Ru.formatNumber(e)})]}):null]})}var lr=a(53556),cr=a(67876),ur=a(58248),dr=a(70613),mr=a(72248),pr=a(44364),hr=a(84172);const yr="rcLlnZfTkcHvdSNeTITW",gr="l3MT1r7rafPQiwaWWOau",xr="Jkq2BXyoPo5GM28YBF9H",vr="yeiXHROs32wfO12XdLlG",br="EpqCjSm0zopFqyyR5Sul",Lr="rUsfjBfF0arbg3qcazGW",jr="QxL7AdpiIkolxsTX3Pgr";var kr=a(86771),fr=a(11361);let Ar=function(e){return e.SMALL="small",e.LARGE="large",e}({});const Cr=({art:e,disabled:t=!1,LinkComponent:a,name:r,size:i=Ar.SMALL,type:n,uri:l})=>{const c=e?[e]:[],u=i===Ar.SMALL?(0,kr.C)(n):function(e){switch(e){case fr.s.SINGLE:return b.Ru.get("track-page.from-the-single");case fr.s.EP:return b.Ru.get("track-page.from-the-ep");case fr.s.COMPILATION:return b.Ru.get("track-page.from-the-compilation");case fr.s.ALBUM:default:return b.Ru.get("track-page.from-the-album")}}(n),d=(0,o.Zp)();return(0,he.jsxs)("div",{className:s()(yr,{[xr]:i===Ar.SMALL,[gr]:t}),children:[(0,he.jsx)("div",{className:vr,children:(0,he.jsx)(Xa.b,{images:c,size:Za.Qe.SIZE_80,title:r,type:ke.c.ALBUM})}),(0,he.jsxs)("div",{className:br,children:[(0,he.jsx)(kt.Z,{variant:i===Ar.SMALL?"mestoBold":"finale",children:u}),(0,he.jsx)(a,{to:l,children:(0,he.jsx)(kt.Z,{as:"div",className:Lr,variant:"balladBold",dir:"auto",children:r})})]}),(0,he.jsx)("div",{onClick:()=>{d((0,v.o_h)(l).toURLPath(!0))},className:jr})]})};var _r=a(46515),Nr=a(65791),Rr=a(85003),Ir=a(7577),Pr=a(95488),wr=a(55517),Er=a(44265);const Sr=e=>(e.items||[]).map(e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map(e=>({url:e.url,width:e.width,height:e.height})),uri:e.uri,id:e.id})),Tr=e=>(e||[]).map(e=>e.profile.name),Br=({uri:e,track:t})=>{const a=(0,Ft.n)(),i=(0,oa.V)(),o=(0,mr.d)({type:"locale",uri:e}),d=b.Ru.getLocaleForTranslation(),m=(0,ur.g)(),[p]=(0,n.ok)(),{isWeb:h}=(0,ie.V)(),y=parseInt(t.playcount||"0",10),{firstArtist:x,otherArtists:V,albumOfTrack:F,duration:U,name:O}=t,M=F?.coverArt,D=F?.copyright.items,G=F?.courtesyLine,$=F?.date,q=M?.extractedColors?.colorRaw.hex,J=(M?.sources||[]).map(e=>({url:e.url,width:e.width||void 0,height:e.height||void 0})),z=Tr(x.items),W=Tr(V.items),Y=Sr(x),H=Sr(V),K=[...Y,...H],Q=x.items[0],X=t.albumOfTrack,Z=X?.playability?.playable,ee={artistId:Q?.id,artistName:Q?.profile?.name,artistUri:Q?.uri},te=t.albumOfTrack?.coverArt?.sources,ae=(0,Fe.h)(te||void 0,{desiredLabel:"large",desiredSize:600})??te?.[0]?.url??"",[re,se]=(0,r.useState)(!1),ne=(0,r.useCallback)(()=>{se(!re)},[re]),oe=V&&V.items.length>5,{spec:le,logger:ce}=(0,wr.$)(g,{data:{uri:e}}),ue=t.associationsV3.videoAssociations.totalCount>0,de=t.associationsV3.audioAssociations.items.length>0,me=!ue&&!de&&t.mediaType===je.IX.Video,pe=t.contentRating?.label===je.x7.Explicit,ye=(0,Me.o)(me,pe),ge=t.playability.playable,{togglePlay:xe,isPlaying:ve,isActive:Le}=(0,be.P)({uri:e},{featureIdentifier:"track"}),fe=(0,r.useCallback)(()=>(0,Pr.rO)({i18n:b.Ru,trackArtistsList:[...z,...W].join(b.Ru.getSeparator()),trackName:t.name,shouldLocalize:o}),[z,W,o,t.name]),_e=(0,r.useCallback)((e,t)=>{ce.logInteraction(le.headerFactory().artistLinkFactory({position:t.position,uri:t.creator.uri}).hitUiNavigate({destination:t.creator.uri}))},[ce,le]),Re=(0,r.useCallback)(()=>{const t=(0,Ut.$I)({isPlaying:ve,isActive:Le,spec:le.actionBarFactory().playButtonFactory(),logger:ce,uri:e});xe({loggingParams:t})},[Le,ve,ce,le,xe,e]),Ie=X?.uri,Pe=(0,r.useMemo)(()=>[...x.items,...V.items].map(e=>({uri:e.uri,name:e.profile.name})),[x.items,V.items]),Ee=ha();(0,lr.L)({uri:e}),(0,r.useEffect)(()=>{const t=p.get("utm_source"),a=p.get("utm_medium"),r=p.get("context");if("openai"===t&&"chatgpt"===a&&r&&h){let t;try{const a=(0,v.o_h)(r);if(t=a?.toURLPath?a.toURLPath(!0):null,t&&a?.type&&/playlist/.test(a?.type)){const a=new URL(window.location.origin+t);a.searchParams.set("highlight",e),m(`${a.pathname+a.search}&${p.toString()}`)}}catch(e){}}},[p,e,m,h]);const Te=(0,he.jsx)(j.P,{uri:e,albumUri:Ie,artists:Pe});return(0,he.jsxs)("section",{className:ze,"data-testid":"track-page",children:[(0,he.jsx)(k.Q,{children:fe()}),(0,he.jsx)(Ge.c,{artistOrShow:Pe.map(e=>e.name).join(b.Ru.getSeparator()),title:O,uri:e,entityType:Ge.p.TRACK}),(0,he.jsxs)(f.z,{backgroundColor:q,children:[(0,he.jsxs)(_.h,{children:[(0,he.jsx)(Ne.D,{size:"medium",onClick:Re,disabled:!ge,isPlaying:ve}),(0,he.jsx)(L.h,{menu:Te,children:(0,he.jsx)(N.X,{text:O,dragUri:e,dragLabel:O})})]}),(0,he.jsx)(L.h,{menu:Te,children:(0,he.jsx)(A.K,{dragUri:e,images:ye?[]:J,name:O,placeholderType:"album"})}),(0,he.jsxs)(C.Y,{children:[(0,he.jsx)(l.E,{variant:"bodySmallBold",children:b.Ru.get("song")}),(0,he.jsx)(L.h,{menu:Te,children:(0,he.jsx)(S.mm,{dragUri:e,dragLabel:O,children:O})}),(0,he.jsxs)(R.X,{children:[(0,he.jsx)(I.j,{creators:Y,onCreatorClick:_e}),X&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(E.J,{}),(0,he.jsx)(w.q,{children:(0,he.jsx)(Ce.N,{to:X.uri,children:X.name})})]}),(0,he.jsx)(E.J,{}),(0,he.jsx)(P.H,{releaseDate:$}),(0,he.jsx)(E.J,{}),(0,he.jsx)(or,{playcount:y,durationMs:U.totalMilliseconds})]})]})]}),(0,he.jsx)(Gt,{uri:e,togglePlay:xe,isPlaying:ve,isActive:Le,spec:(0,r.useMemo)(()=>le.actionBarFactory(),[le]),logger:ce,backgroundColor:q,name:O,isPlayable:ge,albumUri:Ie,artists:Pe}),(0,he.jsx)(Lt,{children:(0,he.jsxs)(Ht,{children:[(0,he.jsxs)("div",{className:"contentSpacing",children:[(0,he.jsx)("div",{className:Qe,children:(0,he.jsx)(hr.E,{render:({columnCount:a})=>(0,he.jsx)(nr,{imageForLyricsRequest:ae,albumArtists:K,columnCount:a,uri:e,isPlayable:ge,title:t.name}),rowGap:c.lT})}),(0,he.jsx)(T.N$,{renderInVariant:dr.ssn.AboveRecommendedBasedOnThisSong,uri:e}),(0,he.jsx)(Ae,{subtitle:b.Ru.get("internal-link-recommender.based-on-this-song"),uri:t.uri,entityType:ke.c.TRACK}),(0,he.jsx)(Ve,{artistName:Q.profile.name,artistUri:Q.uri,headerClassName:tt,rowClassName:Qe,topTracks:Q.discography.topTracks,topTracksTransformer:De.fX,uri:t.uri}),(0,he.jsx)(T.N$,{renderInVariant:dr.ssn.AbovePopularReleases,uri:e}),(0,he.jsx)(Ue,{className:et,releases:Q?.discography?.popularReleasesAlbums,...ee}),(0,he.jsx)(we,{albums:Q?.discography?.albums,className:et,...ee}),(0,he.jsx)(Oe,{className:et,singles:Q?.discography?.singles,...ee}),V.items.length>0&&(0,he.jsx)("div",{className:rt,children:V.items.map((e,t)=>(0,he.jsx)(Ue,{className:s()(at,{[st]:t>4,[nt]:re&&t>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id))}),oe&&(0,he.jsx)(u.H,{onClick:ne,className:ot,children:(0,he.jsx)(l.E,{as:"h2",variant:"bodySmallBold",children:re?b.Ru.get("show_less"):b.Ru.get("mwp.search.artists.all")})}),(0,he.jsx)(B.b,{uri:e,className:et}),(0,he.jsx)(T.N$,{renderInVariant:dr.ssn.AboveFansAlsoLike,uri:e}),(0,he.jsx)(Se,{artistId:Q.id,className:s()(et,{[it]:V.items.length>0}),fansAlsoLike:Q.relatedContent.relatedArtists.items,title:b.Ru.get("artist-page.fansalsolike")}),X&&(0,he.jsx)(Cr,{art:X.coverArt?.sources[0],disabled:!Z||!a,LinkComponent:Ce.N,name:X.name,type:X.type,size:Ar.LARGE,uri:X.uri}),(0,he.jsx)(ct,{richTrack:t})]}),(0,he.jsx)("div",{className:"contentSpacing",children:(0,he.jsxs)("div",{className:Xe,children:[$?.isoString&&(0,he.jsx)(l.E,{as:"p",variant:"bodySmall",className:lt,children:(0,Er.rh)((0,Er.ad)($.isoString),d,{year:"numeric",month:"long",day:"numeric"},(0,Er.rk)($.precision))}),(0,he.jsx)(pr.Z,{copyrights:D||[],courtesyLine:G}),!i&&(0,he.jsx)(Qt,{uri:e,imageForLyricsRequest:ae,isPlayable:ge}),i&&Ee&&(0,he.jsx)(_t,{uri:e,isPlayable:ge})]})})]})})]})},Vr=(0,r.memo)(function(){const{trackId:e=""}=(0,o.g)(),t=(0,v.Mce)(e).toURI(),{data:a,loading:r,error:i}=(0,cr.J)({uri:t}),s="Track"===a?.trackUnion?.__typename&&a?.trackUnion?.visualIdentity?.squareCoverImage?.extractedColorSet?(0,Rr.V)(a?.trackUnion?.visualIdentity.squareCoverImage.extractedColorSet):null;return r||i||"Track"!==a?.trackUnion?.__typename?(0,he.jsx)(_e.LoadingPage,{hasError:!r,errorMessage:b.Ru.get("track-page.error")}):(0,he.jsx)(Nr.P,{surface:_r.u.TRACK,uris:[t,a.trackUnion.albumOfTrack?.uri??null],children:(0,he.jsx)(Ir.d,{dynamicColors:s,children:(0,he.jsx)(Br,{uri:t,track:a.trackUnion})})})})},14079:(e,t,a)=>{a.d(t,{j:()=>n});var r=a(30758),i=a(93133),s=a(86070);function n({creators:e,onCreatorClick:t,onPiledCreatorsClick:a,isPlaylistMixed:n}){return(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(i.c,{creators:e,onPiledCreatorsClick:a,onCreatorClick:t,isPlaylistMixed:n})})}},32467:(e,t,a)=>{a.d(t,{u:()=>m});var r=a(97500),i=a.n(r),s=a(89408),n=a(39440),o=a(38529),l=a(66891),c=a(60257),u=a(75794),d=a(86070);const m=({uri:e,src:t,playAriaLabel:a,onClick:r,isPlaying:m,isActive:p,isLocked:h,isEpisode:y,isVideo:g,spec:x})=>{const v=(0,c.s)(),b=(0,s.YQ)(t=>{let a;if(x){const t=x.playbackButtonFactory();let r;r=p&&m?t.hitPause({itemToBePaused:e}):p&&!m?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=v.logInteraction(r)}r(t,a)},l.d,{leading:!0,trailing:!1});return(0,d.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,d.jsx)(o.e,{src:t,isEpisode:y,isVideo:g}),(0,d.jsx)(n.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:b,isPlaying:m,isLocked:h,playAriaLabel:a})]})}},44364:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(31656);const i="kphFOs0nW4yaFE_2DJr2";var s=a(86070);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map((e,t)=>{if(e.untyped)return(0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let i;return i="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:`${i} ${a}`},t)});return t&&a.unshift((0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,s.jsx)("div",{className:i,children:a})}},50324:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(76826),i=a(86070);const s=({uri:e,enabled:t,className:a,children:s,onClick:n})=>t?(0,i.jsx)(r.N,{to:e,className:a,onClick:n,children:s}):(0,i.jsx)(i.Fragment,{children:s})},93133:(e,t,a)=>{a.d(t,{c:()=>R,C:()=>C});var r=a(30758),i=a(97500),s=a.n(i),n=a(78717),o=a(97351),l=a(27360),c=a(54091),u=a(57055),d=a(82898),m=a(37731),p=a(9092),h=a(76826);const y=()=>c.Ru.get("web-player.tuna.mixed_by");var g=a(27033),x=a(58760),v=a(12586),b=a(91596),L=a(86070);function j(e){return e?.displayName||e?.name||""}const k=e=>{let t=null;return(0,l.ecE)(e)&&(t=(0,L.jsx)(m.t,{uri:e})),(0,l.APS)(e)&&(t=(0,L.jsx)(p.B,{uri:e})),t},f=({creator:e,onClick:t,position:a=0})=>{const i=(0,r.useCallback)(r=>{t?.(r,{position:a,creator:e})},[e,t,a]);return(0,g.s)(e)?(0,L.jsx)(d.h,{menu:k(e.uri),children:(0,L.jsx)(n.E,{variant:"bodySmallBold",children:(0,L.jsx)(h.N,{"data-testid":"creator-link",to:e.uri,onClick:i,children:j(e)})})}):(0,L.jsx)(n.E,{variant:"bodySmall",children:j(e)})},A=({creator:e,onClick:t,isSmallIcon:a})=>{const[r,i]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper,{[b.A.smallMadeForIcon]:a}),children:[(0,L.jsx)(o.D,{semanticColor:"textBrightAccent"}),(0,L.jsx)(n.E,{variant:"bodySmall",children:r}),(0,L.jsx)(f,{creator:e,onClick:t}),i&&(0,L.jsx)(n.E,{variant:"bodySmall",children:i})]})},C=({creator:e,onClick:t,isSmallIcon:a,prefix:r})=>(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper),children:[e.images.length>0&&(0,L.jsx)(u.e,{label:j(e),images:e.images.map(e=>({url:e.url,width:e.width||null,height:e.height||null})),width:a?20:24,userIconSize:a?"xsmall":"small"}),r&&(0,L.jsx)(n.E,{variant:"bodySmall",children:r}),(0,L.jsx)(f,{creator:e,onClick:t})]}),_=({creators:e,onPiledCreatorsClick:t,isSmallIcon:a,prefix:r})=>{const i=(0,L.jsx)("div",{className:b.A.piled,children:e.slice(0,3).map((e,t)=>(0,L.jsx)(u.e,{label:j(e),images:e.images.map(e=>({url:e.url,width:e.width||null,height:e.height||null})),width:a?20:24,userIconSize:a?"xsmall":"small",piled:t>0},e.uri))});let o=c.Ru.get("playlist.header.creator-and-others",j(e[0]),e.length-1);return 2===e.length&&(o=c.Ru.get("playlist.header.creator-and-co-creator",j(e[0]),j(e[1]))),t?(0,L.jsxs)("button",{className:s()(b.A.metaDataText,b.A.creatorWrapper,b.A.creatorButton),onClick:t,children:[i,r&&(0,L.jsx)(n.E,{className:b.A.prefix,variant:"bodySmall",children:r}),o]}):(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper),children:[i,r&&(0,L.jsx)(n.E,{className:b.A.prefix,variant:"bodySmall",children:r}),o]})},N=({creators:e,onCreatorClick:t})=>(0,L.jsx)(L.Fragment,{children:e.map((e,a)=>(0,L.jsxs)(r.Fragment,{children:[0!==a&&(0,L.jsx)("span",{className:b.A.divider}),(0,L.jsx)(f,{creator:e,onClick:t,position:a})]},e.id))}),R=({creators:e,onPiledCreatorsClick:t,onCreatorClick:a,isPlaylistMixed:r})=>{const i=(0,v.y)(),s=i===(x.E.SMALL||i===x.E.XSMALL);if(1===e.length&&e[0]){const t=e[0];return t.isMadeFor?(0,L.jsx)(A,{creator:t,onClick:a,isSmallIcon:s}):(0,L.jsx)(C,{creator:t,onClick:a,isSmallIcon:s,prefix:r?y():void 0})}return e.length>0&&e.every(e=>(0,l.APS)(e.uri))?(0,L.jsx)(_,{creators:e,onPiledCreatorsClick:t,isSmallIcon:s,prefix:r?y():void 0}):(0,L.jsx)(N,{creators:e,onCreatorClick:a})}}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map