"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9676],{21906:(e,t,a)=>{a.d(t,{z2:()=>_});var r=a(30758),n=a(97500),s=a.n(n),i=a(53343),o=a(89408),l=a(29742);function c(e,t,a){const r=e.current;if(null===r)return 0;const n=r.getBoundingClientRect();return"vertical"===a?1-Math.max(0,Math.min((t.clientY-n.top)/n.height,1)):Math.max(0,Math.min((t.clientX-n.left)/n.width,1))}var d=a(79799),u=a(87533),g=a(84826),h=a(62887);const m="playback-progressbar",f="playback-progressbar-isInteractive",v="progress-bar",b="x-progressBar-progressBarBg",p="x-progressBar-sliderArea",S="ZqyJFPlr4PaabYeOC1jP",E="FTiHSsLAUhVorsGQfukF",R="Iz9y7aJNbFhoWFAHgkwn",A="x-progressBar-fillColor",y="s60pn9f89jRlj36_Nuws",C="GdSpAoHx3UYvQQskyINX",x="FbmTJwUJKx_bZQuBl_GD",P="progress-bar__slider",M="IRZ8oibQJvmsl2tu811v",I="JR7PcOpJpPbRrqdSzlWk",w="wD_WSzxIJTrKfxXVAESj",T="VgA3mamNXSBJ5jUTzhSA";var D=a(86070);const _=({value:e,max:t,step:a,labelText:n,isInteractive:_=!0,forceActiveStyles:N=!1,onDragStart:O,onDragMove:F,onDragEnd:k,saberConfig:L=null,easterEggConfig:B,isPlayingStrangerThings:j=!1,direction:H="horizontal",enableAnimation:K,updateFrequency:z,offFrequencyUpdate:Y,className:U,showValueAsTimeOverHandle:G=!1,...V})=>{const W=(0,r.useRef)(null),{isDragging:q,onMouseDown:X}=(({progressBarRef:e,onDragStart:t,onDragMove:a,onDragEnd:n,direction:s="horizontal"})=>{const[i,d]=(0,r.useState)(!1),u=(0,r.useRef)(!1),g=(0,l.ZY)(),h=(0,r.useRef)(t),m=(0,r.useRef)(a),f=(0,r.useRef)(n);h.current=t,m.current=a,f.current=n;const v=(0,o.YQ)(t=>{m.current(c(e,t,s)),u.current=!0},20,{leading:!0,maxWait:20});return{isDragging:i,onMouseDown:(0,r.useCallback)(t=>{const a=t=>{d(!1),v.cancel(),f.current(c(e,t,s),{wasDraggedBeforeReleased:u.current}),g?.removeEventListener("pointermove",v),u.current=!1};0===t.button&&(h.current(c(e,t,s)),d(!0),g?.addEventListener("pointermove",v),g?.addEventListener("pointerup",a,{once:!0}),u.current=!1)},[v,e,s,g])}})({progressBarRef:W,onDragStart:O,onDragMove:F,onDragEnd:k,direction:H}),Z=(0,r.useRef)(null),[J,Q]=(0,r.useState)(0),$=(0,r.useCallback)(e=>{if(Z.current){const t=e.clientX-Z.current.getBoundingClientRect().left;t>=0&&Q(t/Z.current.clientWidth*100)}},[]),ee=_?100*Math.max(0,Math.min(1,e/t)):0,te=N||q,ae=_&&null!==L,re=_&&!(0,g.n)(),{isSeekingWithKeyboard:ne,handleKeyboardProgressStepping:se}=(({onDragStart:e,onDragMove:t,onDragEnd:a})=>{const[n,s]=(0,r.useState)(!1),i=(0,o.YQ)(e=>{a(e,{wasDraggedBeforeReleased:!1}),s(!1)},500,{leading:!1,trailing:!0}),l=(0,r.useCallback)(a=>{n||(e(a),s(!0)),t(a),i(a)},[n,e,t,i]);return{isSeekingWithKeyboard:n,handleKeyboardProgressStepping:l}})({onDragStart:O,onDragMove:F,onDragEnd:k}),ie=(0,r.useCallback)(e=>{const t=e.key;if(/^[0-9]$/.test(t)){const e=parseInt(t,10)/10;k(e,{wasDraggedBeforeReleased:!1})}},[k]),oe=(0,r.useCallback)(()=>ee,[ee]),le=(0,l.ZY)(),ce=(0,r.useRef)(le?.visibilityState),de=le?.visibilityState,ue=q||Y||"hidden"===de||"hidden"===ce.current||ne||0===e;ce.current=de;const ge=K?S:"",he=J/100*t;return(0,D.jsxs)("div",{className:s()(m,U,{[f]:_,[E]:ue}),"data-testid":V["data-testid"],children:[(0,D.jsx)(i.o,{disabled:!_,type:"range",min:0,max:t,value:e,step:a,onChange:e=>{se(parseFloat(e.target.value)/t)},onKeyDown:ie,"aria-valuetext":V["aria-valuetext"],children:n}),(0,D.jsxs)("div",{className:s()(v,{[y]:null!==L,[x]:te}),style:{...ae?L:null,...B?.bgColor?{"--fg-color":B.bgColor,"--is-active-fg-color":B.bgColor}:null,..."number"==typeof z?{"--progress-bar-duration":`${Number(z)}ms`}:null,"--progress-bar-transform":`${ee}%`,"--hover-bar-transform":`${J}%`},ref:Z,onPointerDown:X,onMouseMove:G?$:void 0,"data-testid":"progress-bar",children:[ae?(0,D.jsx)("div",{className:C,"data-testid":"progress-bar-saber-overlay"}):null,(0,D.jsxs)("div",{ref:W,className:b,"data-testid":"progress-bar-background",children:[(0,D.jsx)("div",{className:p,children:(0,D.jsx)("div",{className:R})}),(0,D.jsx)("div",{className:p,children:(0,D.jsx)("div",{className:s()(A,ge)})}),B&&B.imageUrlHandle?(0,D.jsx)("div",{className:s()(M,ge),children:(0,D.jsx)("img",{alt:"",className:I,src:B.imageUrlHandle,style:(0,d.Z)(B.imageTransformOverride)})}):(0,D.jsx)("div",{className:s()(P,ge),children:G&&q&&(0,D.jsx)("div",{className:w,children:(0,h.f)(e)})}),G&&!q&&(0,D.jsx)("div",{className:T,children:(0,h.f)(he)})]}),re&&(0,D.jsx)("div",{style:{width:"100%"},children:(0,D.jsx)(u.V,{getPercentage:oe,progressBar:W,isPlayingStrangerThings:j,isDragging:q})})]})]})}},29293:(e,t,a)=>{a.d(t,{A:()=>r});const r={wrapper:"playback-progressbar",enabled:"playback-progressbar-isInteractive",progressBar:"progress-bar",background:"x-progressBar-progressBarBg",foregroundWrapper:"x-progressBar-sliderArea",middleground:"D3ukq4oRWEkyLsWPYziv",foreground:"x-progressBar-fillColor",handle:"progress-bar__slider",progressAnimatable:"PicITxs1LJ19qJsznlgI",disableProgressAnimatable:"vhHKzGp9f5uP3jIZrmGE",progressBarActive:"Cv5_3zUNPzdBS37UGS6Y",saberEnabled:"A9s1iNWBKibT_Vh59ARm",chapterHoverOverlay:"MQvYS_Rh_CiddHPmk32U"}},49612:(e,t,a)=>{a.d(t,{ZN:()=>l,lt:()=>o});var r=a(81152),n=a(69670),s=a(50253);const i=new Map([[r.K.BLACK_PANTHER,{bgColor:"#8E24E2"}],[r.K.ATTACK_ON_TITAN,{bgColor:"#D4000E"}],[r.K.SPIDERMAN,{bgColor:"#EC1C24"}],[r.K.BARBIE,{bgColor:"#F31FA5"}],[r.K.POKEMON,{bgColor:"#5193ED",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/b6e9f5218d18dd76f6de177a005907d3.png",imageTransformOverride:{translateX:-21,translateY:11,scale:.8}}],[r.K.SANRIO,{bgColor:"#E60012",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/d99c81563a104fb669598a31591f2e2a.png"}],[r.K.WICKED,{bgColor:"#6abe4e",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/5bff73c2b65d841a8315349b3e29f865.png",imageTransformOverride:{translateX:-27,translateY:5}}],[r.K.SANREMO,{bgColor:"#E6007E",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/a1e7292e3dd2b329b158bff55a961e2f.png",imageTransformOverride:{translateX:-10,translateY:5,scale:.8}}]]),o=()=>{const{isPlayingVariant:e}=(0,n.h)();if((0,s.o)(e=>{if(null===e)return!1;const t="queue"===e.item?.provider,a="autoplay"===e.item?.provider;return!t&&!a}))return e?i.get(e):void 0},l=e=>{if(!e)return{};const{translateX:t,translateY:a,scale:r}=e;return{...void 0!==t?{"--translateX":`${t}%`}:{},...void 0!==a?{"--translateY":`${a}%`}:{},...void 0!==r?{"--scale":r}:{}}}},51085:(e,t,a)=>{a.d(t,{LP:()=>n,q5:()=>s,sN:()=>r,vx:()=>i});const r={PROGRESS_BAR:"progress-bar",PROGRESS_BAR_BACKGROUND:"progress-bar-background",PROGRESS_BAR_HANDLE:"progress-bar-handle",PROGRESS_BAR_SABER_OVERLAY:"progress-bar-saber-overlay",CHAPTER_MARKER:"chapter-marker",PROGRESS_LABEL:"progress-label",EASTER_EGG_HANDLE:"easter-egg-handle"},n={STEP:1,DIRECTION:"horizontal",IS_INTERACTIVE:!0,FORCE_ACTIVE_STYLES:!1,ENABLE_ANIMATION:!1,DEBOUNCE_DELAY:20,UPDATE_FREQUENCY:200},s={PROGRESS_TRANSFORM:"--progress-bar-transform",HOVER_TRANSFORM:"--hover-bar-transform",DURATION:"--progress-bar-duration",FG_COLOR:"--fg-color",IS_ACTIVE_FG_COLOR:"--is-active-fg-color"},i={MIN_VALUE:0,ARIA_LABEL_DEFAULT:"Progress bar",STEP_DEFAULT:1}},57213:(e,t,a)=>{a.d(t,{K:()=>n,Z:()=>s});var r=a(30758);const n=(0,r.createContext)(null),s=()=>{const e=(0,r.useContext)(n);if(!e)throw new Error("useProgressBarContext must be used within a ProgressBarBase component. Make sure your feature component is wrapped by ProgressBarBase.");return e}},72344:(e,t,a)=>{a.d(t,{m:()=>v});var r=a(30758),n=a(97500),s=a.n(n),i=a(53343),o=a(51085);var l=a(62887);var c=a(89408),d=a(29742);function u(e,t,a=o.LP.DIRECTION){const r=e.current;if(null===r)return 0;const n=r.getBoundingClientRect();return"vertical"===a?1-Math.max(0,Math.min((t.clientY-n.top)/n.height,1)):Math.max(0,Math.min((t.clientX-n.left)/n.width,1))}var g=a(57213),h=a(29293),m=a(86070);const f=()=>{},v=(0,r.forwardRef)(({value:e,max:t,labelText:a,onDragStart:n=f,onDragMove:v=f,onDragEnd:b=f,onFocus:p,step:S=o.LP.STEP,isInteractive:E=o.LP.IS_INTERACTIVE,forceActiveStyles:R=o.LP.FORCE_ACTIVE_STYLES,direction:A=o.LP.DIRECTION,showValueAsTimeOverHandle:y=!1,enableAnimation:C=o.LP.ENABLE_ANIMATION,updateFrequency:x,offFrequencyUpdate:P,additionalAccessibilityContext:M,className:I,customCSSProperties:w={},children:T,...D},_)=>{const N=(0,r.useRef)(null),O=(0,r.useRef)(null);(0,r.useImperativeHandle)(_,()=>N.current,[]);const{isDragging:F,onMouseDown:k}=(({progressBarRef:e,onDragStart:t,onDragMove:a,onDragEnd:n,direction:s=o.LP.DIRECTION,debounceDelay:i=o.LP.DEBOUNCE_DELAY})=>{const[l,g]=(0,r.useState)(!1),h=(0,r.useRef)(!1),m=(0,d.ZY)(),f=(0,r.useRef)(t),v=(0,r.useRef)(a),b=(0,r.useRef)(n);f.current=t,v.current=a,b.current=n;const p=(0,c.YQ)(e=>{v.current(e)},i,{leading:!0,maxWait:i});return{isDragging:l,onMouseDown:(0,r.useCallback)(t=>{const a=t=>{const a=u(e,t,s);p(a),h.current=!0},r=t=>{g(!1),p.cancel(),b.current(u(e,t,s),{wasDraggedBeforeReleased:h.current}),m?.removeEventListener("pointermove",a),h.current=!1};0===t.button&&(f.current(u(e,t,s)),g(!0),m?.addEventListener("pointermove",a),m?.addEventListener("pointerup",r,{once:!0}),h.current=!1)},[e,s,m,p])}})({progressBarRef:O,onDragStart:n,onDragMove:v,onDragEnd:b,direction:A}),[L,B]=(0,r.useState)(!1),j=(0,r.useCallback)(e=>{B(e)},[]),{featureClasses:H,addFeatureClass:K,removeFeatureClass:z}=(()=>{const e=(0,r.useRef)(new Set),[t,a]=(0,r.useState)(0);return{featureClasses:(0,r.useMemo)(()=>Array.from(e.current),[t]),addFeatureClass:(0,r.useCallback)(t=>{e.current.has(t)||(e.current.add(t),a(e=>e+1))},[]),removeFeatureClass:(0,r.useCallback)(t=>{e.current.has(t)&&(e.current.delete(t),a(e=>e+1))},[])}})(),{isSeekingWithKeyboard:Y,handleKeyboardProgressStepping:U,handleKeyDown:G}=(({onDragStart:e,onDragMove:t,onDragEnd:a})=>{const[n,s]=(0,r.useState)(!1),i=(0,c.YQ)(e=>{a(e,{wasDraggedBeforeReleased:!1}),s(!1)},500,{leading:!1,trailing:!0,maxWait:500}),o=(0,r.useCallback)(a=>{n||(e(a),s(!0)),t(a),i(a)},[n,e,t,i]),l=(0,r.useCallback)(e=>{const t=e.key;if(/^[0-9]$/.test(t)){const e=parseInt(t,10)/10;a(e,{wasDraggedBeforeReleased:!1})}},[a]);return{isSeekingWithKeyboard:n,handleKeyboardProgressStepping:o,handleKeyDown:l}})({onDragStart:n,onDragMove:v,onDragEnd:b,step:S}),{percentage:V,hasActiveStyle:W,disableAnimationForThisFrame:q,hoverPercent:X,isHovering:Z,setHoverRelativePosition:J,setHoverState:Q}=(({value:e,max:t,isInteractive:a=o.LP.IS_INTERACTIVE,forceActiveStyles:n=o.LP.FORCE_ACTIVE_STYLES,offFrequencyUpdate:s,isDragging:i=!1,isSeekingWithKeyboard:l=!1})=>{const[c,u]=(0,r.useState)(0),[g,h]=(0,r.useState)(!1),m=(0,d.ZY)(),f=(0,r.useRef)(m?.visibilityState),v=m?.visibilityState,b=a&&t>0?100*Math.max(0,Math.min(1,e/t)):0,p=n||i,S=i||s||"hidden"===v||"hidden"===f.current||l||0===e;return f.current=v,{percentage:b,hasActiveStyle:p,disableAnimationForThisFrame:S,hoverPercent:100*c,hoverMs:c*t,isHovering:g,setHoverRelativePosition:(0,r.useCallback)(e=>{u(Math.max(0,Math.min(1,e)))},[]),setHoverState:(0,r.useCallback)(e=>{h(e)},[])}})({value:e,max:t,isInteractive:E,forceActiveStyles:R,enableAnimation:C,offFrequencyUpdate:P,isDragging:F,isSeekingWithKeyboard:Y}),{screenReaderProps:$,labelText:ee}=(({value:e,max:t,step:a=o.LP.STEP,labelText:n,ariaValueTextOverride:s,isInteractive:i=o.LP.IS_INTERACTIVE,additionalContext:c})=>{const d=(0,r.useMemo)(()=>{if(s)return s;const t=(0,l.f)(e);return c?`${t} â€¢ ${c}`:t},[e,s,c]);return{screenReaderProps:(0,r.useMemo)(()=>({disabled:!i,type:"range",min:o.vx.MIN_VALUE,max:t,value:e,step:a,"aria-valuetext":d}),[i,t,e,a,d]),labelText:n}})({value:e,max:t,step:S,labelText:a,ariaValueTextOverride:D["aria-valuetext"],isInteractive:E,additionalContext:M}),te=C&&!q?h.A.progressAnimatable:"",ae=(0,r.useCallback)(e=>b(e,{wasDraggedBeforeReleased:!1}),[b]),re=(0,r.useCallback)(e=>{null!==e&&J(e)},[J]),ne=(0,r.useCallback)(e=>{const t=O.current?.getBoundingClientRect();return t?"vertical"===A?1-Math.max(0,Math.min((e.clientY-t.top)/t.height,1)):Math.max(0,Math.min((e.clientX-t.left)/t.width,1)):0},[A]),se=(0,r.useCallback)(e=>(0,l.f)(e*t),[t]),ie=Z?X/100:null,oe=(0,r.useMemo)(()=>({value:e,max:t,percentage:V,isInteractive:E,direction:A,isDragging:F,isKeyboardFocused:Y,hoverPosition:ie,containerRef:N,trackRef:O,onSeek:ae,setHoverPosition:re,getPositionFromEvent:ne,formatPositionAsTime:se,animatableClass:te,setHasCustomHandle:j,addFeatureClass:K,removeFeatureClass:z}),[e,t,V,E,A,F,Y,ie,N,O,ae,re,ne,se,te,j,K,z]),le={[o.q5.PROGRESS_TRANSFORM]:`${V}%`,[o.q5.HOVER_TRANSFORM]:`${X}%`,..."number"==typeof x?{[o.q5.DURATION]:`${x}ms`}:{},...w};return(0,m.jsx)(g.K.Provider,{value:oe,children:(0,m.jsxs)("div",{ref:N,className:s()(h.A.wrapper,I,{[h.A.enabled]:E,[h.A.disableProgressAnimatable]:q}),"data-testid":D["data-testid"],children:[(0,m.jsx)(i.o,{...$,onChange:e=>{const a=t>0?parseFloat(e.target.value)/t:0;U(a)},onKeyDown:G,onFocus:()=>{p&&p()},children:ee}),(0,m.jsx)("div",{className:s()(h.A.progressBar,{[h.A.progressBarActive]:W},...H),style:le,onPointerDown:k,onPointerEnter:()=>Q(!0),onPointerLeave:()=>Q(!1),onFocus:()=>{p&&p()},onPointerMove:y?e=>{if(O.current){const t=O.current.getBoundingClientRect(),a="vertical"===A?1-Math.max(0,Math.min((e.clientY-t.top)/t.height,1)):Math.max(0,Math.min((e.clientX-t.left)/t.width,1));J(a)}}:void 0,"data-testid":o.sN.PROGRESS_BAR,children:(0,m.jsxs)("div",{ref:O,className:h.A.background,"data-testid":o.sN.PROGRESS_BAR_BACKGROUND,children:[T,(0,m.jsx)("div",{className:h.A.foregroundWrapper,children:(0,m.jsx)("div",{className:h.A.middleground})}),(0,m.jsx)("div",{className:h.A.foregroundWrapper,children:(0,m.jsx)("div",{className:s()(h.A.foreground,te)})}),!L&&(0,m.jsx)("div",{className:s()(h.A.handle,te),"data-testid":o.sN.PROGRESS_BAR_HANDLE})]})})]})})});v.displayName="ProgressBarBase"},79799:(e,t,a)=>{a.d(t,{Z:()=>r.ZN});var r=a(49612)},87533:(e,t,a)=>{a.d(t,{V:()=>A});var r=a(91198),n=a(30758),s=a(64932);const i=20,o=[{name:"dark",frames:i},{name:"normal",frames:i},{name:"dark",frames:i},{name:"normal",frames:i},{name:"dark",frames:320},{name:"dark",frames:80,isStartOfFlashlightEnter:!0},{name:"flashlight-on",frames:i},{name:"dark",frames:i},{name:"flashlight-on",frames:i},{name:"dark",frames:40},{name:"flashlight-on",isInfinite:!0},{name:"dark",frames:i,isStartOfExit:!0},{name:"flashlight-on",frames:i},{name:"dark",frames:i},{name:"flashlight-on",frames:i},{name:"dark",frames:i},{name:"normal",isInfinite:!0,isEndOfExit:!0}];function l(e,t){const a=document.createElement("canvas"),r=a.getContext("2d");if(null===r)return null;const n=Math.sqrt(e**2+t**2),s=200;return a.width=n/1.5+400,a.height=n+400,r.translate(s,s),{canvas:a,context:r,width:a.width-400,height:a.height-400,padding:s}}function c(e,t,a,r,n=0){const s=r/2*Math.PI/180,i=a/Math.cos(s),o=Math.sin(s)*i*2;e.beginPath(),e.moveTo((t-o)/2,n),e.lineTo(t/2,n+a),e.lineTo((t-o)/2+o,n),e.closePath()}function d(e,t){const a=function(e,t){const a=(0,n.useMemo)(()=>{const e=new Image;return e.src=(0,s.bj)("images/stranger-things-nether-bottom-left.png"),e},[]),r=(0,n.useMemo)(()=>{const e=new Image;return e.src=(0,s.bj)("images/stranger-things-nether-bottom-right.png"),e},[]);return function(n){if(r){const a=e-r.naturalWidth,s=t-r.naturalHeight;n.drawImage(r,0,0,r.naturalWidth,r.naturalHeight,a,s,r.naturalWidth,r.naturalHeight)}if(a){const e=0,r=t-a.naturalHeight;n.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,e,r,a.naturalWidth,a.naturalHeight)}}}(e,t),[r,i]=(0,n.useState)(u(e,t)),[l,c]=(0,n.useState)(g(e,t));return(0,n.useEffect)(()=>{i(u(e,t)),c(g(e,t))},[e,t]),(n,s,i,c)=>{if(!r||!l)return;const d=i/100,u=s.left+s.width*d,g=s.top+s.height/2;let h=0;h=d>.5?(d-.5)/.5*-60:60-d/.5*60;const m=r.width,f=r.height,v=-r.width/2,b=-r.height,p=m,S=f;n.save(),n.fillStyle="rgba(0, 0, 0, 0.85)",n.fillRect(0,0,e,t);const E=n.createLinearGradient(e/2,0,e/2,t);E.addColorStop(0,"rgba(57, 139, 216, 0.3)"),E.addColorStop(1,"rgba(0, 29, 62, 0.15)"),n.fillStyle=E,n.fillRect(0,0,e,t),"flashlight-on"===o[c]?.name?(n.save(),n.translate(u,g),n.rotate(h*Math.PI/180),n.globalCompositeOperation="destination-out",n.drawImage(r,0,0,m,f,v,b+100,p,S),n.restore(),a(n),n.save(),n.translate(u,g),n.rotate(h*Math.PI/180),n.globalCompositeOperation="source-over",n.drawImage(l,0,0,m,f,v,b+100,p,S),n.restore()):a(n),n.restore()}}function u(e,t){const a=l(e,t);if(!a)return null;const{canvas:r,context:n,width:s,height:i,padding:o}=a,d=n.createLinearGradient(s/2,0,s/2,i);d.addColorStop(0,"rgba(0, 0, 0, 1)"),d.addColorStop(1,"rgba(0, 0, 0, 0)");const u=n.createLinearGradient(s/2,0,s/2,i);return u.addColorStop(.7,"rgba(0, 0, 0, 1)"),u.addColorStop(1,"rgba(0, 0, 0, 0)"),n.save(),n.fillStyle="rgba(0, 0, 0, 1)",c(n,s,i,30,120),n.filter="blur(10px)",n.fill(),n.restore(),n.globalCompositeOperation="destination-out",n.fillStyle=u,n.fillRect(-o,-o,s+2*o,i+2*o),n.globalCompositeOperation="source-over",n.fillStyle="rgba(0, 0, 0, 1)",c(n,s,i,5,40),n.filter="blur(30px)",n.fill(),n.fillStyle="rgba(0, 0, 0, 1)",c(n,s,i,30,80),n.filter="blur(40px)",n.fill(),n.restore(),n.globalCompositeOperation="destination-out",n.fillStyle=d,n.fillRect(-o,-o,s+2*o,i+2*o),r}function g(e,t){const a=l(e,t);if(!a)return null;const{canvas:r,context:n,width:s,height:i,padding:o}=a;n.save(),n.fillStyle="rgba(80, 170, 255, 0.6)",c(n,s,i,30,120),n.filter="blur(10px)",n.fill(),n.restore();const d=n.createLinearGradient(s/2,0,s/2,i);d.addColorStop(.7,"rgba(0, 0, 0, 1)"),d.addColorStop(1,"rgba(0, 0, 0, 0)"),n.globalCompositeOperation="destination-out",n.fillStyle=d,n.fillRect(-o,-o,s+2*o,i+2*o),n.globalCompositeOperation="source-over",n.fillStyle="rgba(80, 170, 255, 0.8)",c(n,s,i,5,40),n.filter="blur(30px)",n.fill(),n.fillStyle="rgba(80, 170, 255, 0.4)",c(n,s,i,30,150),n.filter="blur(40px)",n.fill(),n.restore(),n.save(),n.translate(s/2,i-140),n.scale(1,10),n.fillStyle="rgba(198, 238, 251, 0.2)",n.filter="blur(24px)",n.beginPath(),n.arc(0,0,22,0,2*Math.PI),n.fill(),n.fillStyle="rgba(234, 255, 255, 0.2)",n.filter="blur(18px)",n.beginPath(),n.arc(0,0,20,0,2*Math.PI),n.fill(),n.restore(),n.save(),n.translate(s/2,i-70),n.scale(1,5),n.fillStyle="rgba(198, 238, 251, 0.1)",n.filter="blur(14px)",n.beginPath(),n.arc(0,0,18,0,2*Math.PI),n.fill(),n.fillStyle="rgba(234, 255, 255, 0.1)",n.filter="blur(8px)",n.beginPath(),n.arc(0,0,20,0,2*Math.PI),n.fill(),n.restore(),n.fillStyle="rgba(100, 190, 255, 1)",n.filter="blur(22px)",n.beginPath(),n.arc(s/2,i+100,20,0,2*Math.PI),n.fill(),n.fillStyle="rgba(198, 238, 251, 1)",n.filter="blur(4px)",n.beginPath(),n.arc(s/2,i+100,14,0,2*Math.PI),n.fill(),n.fillStyle="rgba(234, 255, 255, 1)",n.filter="blur(1px)",n.beginPath(),n.arc(s/2,i+100,12,0,2*Math.PI),n.fill();const u=n.createLinearGradient(s/2,0,s/2,i);return u.addColorStop(0,"rgba(0, 0, 0, 1)"),u.addColorStop(1,"rgba(0, 0, 0, 0)"),n.globalCompositeOperation="destination-out",n.fillStyle=u,n.fillRect(-o,-o,s+2*o,i+2*o),n.globalCompositeOperation="source-over",r}const h=[{size:6,alpha:.5},{size:6,alpha:.4},{size:12,alpha:.3},{size:12,alpha:.3},{size:12,alpha:.3},{size:14,alpha:.2},{size:20,alpha:.2},{size:30,alpha:.2},{size:40,alpha:.1}];function m(e,t){const a=(0,n.useMemo)(()=>{const e=new Image;return e.src=(0,s.bj)("images/stranger-things-spores.png"),e},[]),[r,i]=(0,n.useState)(f(e,t));return(0,n.useEffect)(()=>{r?function(e,t,a){e.forEach(e=>{e.x=Math.random()*t,e.y=Math.random()*a})}(r,e,t):i(f(e,t))},[e,t,r]),function(n){null!==a&&r.forEach(r=>{r.x-=r.directionX*r.velocityX,r.y-=r.directionY*r.velocityY,r.y>t+10?(r.x=Math.random()*e,r.y=-10):r.x<-10&&(r.x=e+10,r.y=Math.random()*t);const s=r.spriteSheetX,i=r.spriteSheetY,o=r.x-r.size/2,l=r.y-r.size/2,c=r.size,d=r.size;n.save(),n.globalAlpha*=r.alpha,n.drawImage(a,s,i,64,64,o,l,c,d),n.restore()})}}function f(e,t){const a=[];for(let r=0;r<100;r++){const r=Math.floor(Math.random()*h.length),n=Math.floor(8*Math.random()),s=Math.floor(2*Math.random()),i=h[r].size,o=h[r].alpha;a.push({alpha:o,size:i,spriteSheetX:64*n,spriteSheetY:64*s,x:Math.random()*e,y:Math.random()*t,directionX:Math.random()>.5?1:-1,directionY:Math.random()>.5?1:-1,velocityX:i/300,velocityY:i/400})}return a}class v{_subscribers=[];_active=!1;unsubscribeToActivity(e){const t=this._subscribers.findIndex(t=>t.fn===e),a=this._subscribers[t];-1!==t&&a?.inactiveTimeout&&(clearTimeout(a.inactiveTimeout),this._subscribers.splice(t,1))}subscribeToActivity(e,t){this._subscribers.push({fn:t,msInactive:e,isActive:!1})}enableActivityMonitor(){window.addEventListener("mousemove",this._onActivity),window.addEventListener("mouseup",this._onActivity),window.addEventListener("keydown",this._onActivity),window.addEventListener("scroll",this._onActivity,!0)}disableActivityMonitor(){window.removeEventListener("mousemove",this._onActivity),window.removeEventListener("mouseup",this._onActivity),window.removeEventListener("keydown",this._onActivity),window.removeEventListener("scroll",this._onActivity,!0),this._subscribers.forEach(e=>clearTimeout(e.inactiveTimeout)),this._subscribers=[]}_onActivity=()=>{this._subscribers.forEach(e=>{this._active||(this._active=!0,e.fn(this._active)),clearTimeout(e.inactiveTimeout),e.inactiveTimeout=setTimeout(()=>{this._active=!1,e.fn(this._active)},e.msInactive)})}}class b{frame=0;lastPhaseFrame=0;phase=0;animationFrameRequestId=null;flickerTimerId=null;isPlaying=!0;start(){this.lastPhaseFrame=this.frame,this.phase=0;const e=()=>setTimeout(()=>{this.flickerTimerId=e(),this.isPlaying&&o[this.phase]?.isInfinite&&this.setPhase(o.findIndex(e=>e.isStartOfFlashlightEnter))},15e3*Math.random()+5e3);this.flickerTimerId=e()}stop(){const e=o.findIndex(e=>e.isStartOfExit);this.phase<e&&this.setPhase(e),null!==this.flickerTimerId&&clearTimeout(this.flickerTimerId)}setPhase(e){this.lastPhaseFrame=this.frame,this.phase=e}}const p="dMAb53GZ22nk1rdDJuWx";var S=a(86070);const E=e=>{const{getPercentage:t,isDragging:a=!1,isPlayingStrangerThings:r=!1,progressBar:s}=e,i=(0,n.useMemo)(()=>new v,[]),l=(0,n.useMemo)(()=>new b,[]),c=(0,n.useRef)(null),[u,g]=(0,n.useState)(null),[h,f]=(0,n.useState)(window.innerHeight),[E,R]=(0,n.useState)(window.innerWidth),[A,y]=(0,n.useState)(!1),[C,x]=(0,n.useState)(!1),P=m(E,h),M=d(E,h),I=(0,n.useCallback)(e=>{!a&&r&&(e?l.stop():(l.start(),x(!0)))},[a,r,l]),w=(0,n.useCallback)(()=>{r&&(l.setPhase(o.findIndex(e=>e.isStartOfFlashlightEnter)),x(!0))},[r,l]),T=(0,n.useCallback)(()=>{l.stop()},[l]),D=(0,n.useCallback)(()=>{if(!C)return void y(!0);y(!1);const e=window.innerHeight,t=window.innerWidth;R(t),f(e)},[C]),_=(0,n.useCallback)(()=>{if(!c.current)return;const{frame:e,lastPhaseFrame:a,phase:r}=l;l.frame=e+1;const n=o[r];if(n.isEndOfExit)x(!1);else{if(n.isInfinite||e-a===n.frames&&l.setPhase(r+1),c.current.width=E,c.current.height=h,"normal"!==n.name){const e=c.current.getContext("2d");if(!e||!u)return;const a=t();M(e,u,a,r),P(e)}l.animationFrameRequestId=requestAnimationFrame(_)}},[h,E,M,P,t,u,l]);return(0,n.useEffect)(()=>{window.addEventListener("resize",D);const e=i;return e.enableActivityMonitor(),e.subscribeToActivity(5e3,I),()=>{window.removeEventListener("resize",D),e.disableActivityMonitor(),e.unsubscribeToActivity(I)}},[i,I,D]),(0,n.useEffect)(()=>{r||l.stop()},[r,l]),(0,n.useEffect)(()=>{a?w():a||T()},[a,w,T]),(0,n.useEffect)(()=>{C?(A&&D(),l.animationFrameRequestId=requestAnimationFrame(_)):l.animationFrameRequestId&&cancelAnimationFrame(l.animationFrameRequestId)},[C,_,D,A,l]),(0,n.useEffect)(()=>{s.current&&g(s.current.getBoundingClientRect())},[E,h,s]),C?(0,S.jsx)("canvas",{className:p,ref:c,width:E,height:h}):null};var R=a(70613);const A=e=>(0,r.NC)(R.c3z,{loadingValue:!1})&&e.isPlayingStrangerThings?(0,S.jsx)(E,{...e}):null}}]);
//# sourceMappingURL=9676.js.map